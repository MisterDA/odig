<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>FMap (TCSLib.FMap)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">TCSLib</a> &#x00BB; FMap</nav><h1>Module <code>FMap</code></h1><p>Finite maps.</p><p>The <code>FMap</code> module provides a purely functional finite map datastructure based on balanced binary trees. Most operations on single elements, for example adding bindings or testing membership, can be performed in time logarithmic in the size of the map.</p><p>This module provides a superset of the operations in the <code>Map</code> module in the OCaml standard library, but with a polymorphic interface in addition to the standard functorial interface.</p><p>A map provided by this module requires a strict order on its domain elements. When using the polymorphic interface, domain elements are compared using the structural comparison operators <code>(=)</code> and <code>(&lt;)</code>. For this reason, the polymorphic interface can only be used if semantic equality in the domain type is equivalent to structural equality.</p><nav class="toc"><ul><li><a href="#map-comparison">Map comparison</a></li><li><a href="#map-construction">Map construction</a></li><li><a href="#iterators">Iterators</a></li><li><a href="#scanning">Scanning</a></li><li><a href="#searching">Searching</a></li><li><a href="#conversion">Conversion</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('a, +'b) t</code></dt><dd><p>The type of finite maps with domain type <code>'a</code> and range type <code>'b</code>. Values of this type can be considered as finite sets of pairs where an element <code>(x, y)</code> represents the mapping of <code>x</code> to <code>y</code>. The domain of a map <code>m</code> is the set of values <code>x</code> such that <code>m</code> contains a pair <code>(x, y)</code> for some <code>y</code> (<code>m</code> maps <code>x</code> to some value); the range of <code>m</code> is the set of values <code>y</code> such that <code>m</code> contains a pair <code>(x, y)</code> for some <code>x</code> (some value is mapped to <code>y</code> by <code>m</code>).</p></dd></dl><dl><dt class="spec value" id="val-size"><a href="#val-size" class="anchor"></a><code><span class="keyword">val</span> size : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the size of the domain of a map.</p></dd></dl><section><header><h3 id="map-comparison"><a href="#map-comparison" class="anchor"></a>Map comparison</h3></header><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal cmp m1 m2</code> tests whether the maps <code>m1</code> and <code>m2</code> are equal. Two maps are equal if they have equal domains and map each domain element to equal values, where the values are compared using <code>cmp</code>.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare cmp</code> returns a total ordering on maps using <code>cmp</code> to compare values.</p></dd></dl></section><section><header><h3 id="map-construction"><a href="#map-construction" class="anchor"></a>Map construction</h3></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>The empty map.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>add x y m</code> returns a map that maps <code>x</code> to <code>y</code> and all other elements to the values they are mapped to by <code>m</code>.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>remove x m</code> returns a map that is undefined at <code>x</code> and maps all other elements to the values they are mapped to by <code>m</code>.</p></dd></dl></section><section><header><h3 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h3></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f m</code> applies <code>f</code> to all pairs <code>x</code> and <code>y</code>, where <code>(x, y)</code> is an element of <code>m</code>. The elements of <code>m</code> are processed in increasing domain order.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p><code>fold f m a</code> returns <code>(f xn yn ... (f x2 y2 (f x1 y1 a)) ... )</code>, where <code>(x1, y1)</code>, ..., <code>(xn, yn)</code> are the elements of <code>m</code> in increasing domain order.</p></dd></dl><dl><dt class="spec value" id="val-rev_fold"><a href="#val-rev_fold" class="anchor"></a><code><span class="keyword">val</span> rev_fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p><code>fold f m a</code> returns <code>(f x1 y1 (f x2 y2 ... (f xn yn a)) ... )</code>, where <code>(x1, y1)</code>, ..., <code>(xn, yn)</code> are the elements of <code>m</code> in increasing domain order.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f m</code> returns a map that has the same domain as <code>m</code> and maps all elements <code>x</code> in its domain to <code>f (find x m)</code>.</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>mapi f m</code> returns a map that has the same domain as <code>m</code> and maps all elements <code>x</code> in its domain to <code>f x (find x m)</code>.</p></dd></dl></section><section><header><h3 id="scanning"><a href="#scanning" class="anchor"></a>Scanning</h3></header><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Tests whether a map has an empty domain.</p></dd></dl><dl><dt class="spec value" id="val-for_all"><a href="#val-for_all" class="anchor"></a><code><span class="keyword">val</span> for_all : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>for_all p m</code> returns <code>true</code> if <code>p x y = true</code> for all elements <code>(x, y)</code> of <code>m</code>, and <code>false</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val</span> exists : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>for_all p m</code> returns <code>true</code> if <code>p x y = true</code> some element <code>(x, y)</code> of <code>m</code>, and <code>false</code> otherwise.</p></dd></dl></section><section><header><h3 id="searching"><a href="#searching" class="anchor"></a>Searching</h3></header><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>mem x m</code> tests whether <code>m</code> is defined at <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_defined"><a href="#val-is_defined" class="anchor"></a><code><span class="keyword">val</span> is_defined : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_defined x m</code> tests whether <code>m</code> is defined at <code>x</code> (the same as <code>mem</code>).</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>find x m</code> returns the value <code>x</code> is mapped to by <code>m</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not in the domain of <code>m</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>apply m x</code> returns the value <code>x</code> is mapped to by <code>m</code> (the same as <code>find</code>).</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is not in the domain of <code>m</code>.</p></dd></dl></dd></dl></section><section><header><h3 id="conversion"><a href="#conversion" class="anchor"></a>Conversion</h3></header><dl><dt class="spec value" id="val-to_list"><a href="#val-to_list" class="anchor"></a><code><span class="keyword">val</span> to_list : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span>) list</code></dt><dd><p>Returns an association list containing all element of the map in increasing order of the domain elements.</p></dd></dl><dl><dt class="spec value" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span class="keyword">val</span> of_list : (<span class="type-var">'a</span> * <span class="type-var">'b</span>) list <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Creates a map from an association list.</p></dd></dl><dl><dt class="spec module-type" id="module-type-OrderedType"><a href="#module-type-OrderedType" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-OrderedType/index.html">OrderedType</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Input signature of the functor <a href="../FSet/Make/index.html"><code>FSet.Make</code></a>.</p></dd></dl><dl><dt class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Output signature of the functor <a href="../FSet/Make/index.html"><code>FSet.Make</code></a>.</p></dd></dl><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-Ord/index.html">Ord</a> : <a href="index.html#module-type-OrderedType">OrderedType</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Make/index.html#type-key">key</a> = <a href="Make/argument-1-Ord/index.html#type-t">Ord.t</a></code></div></section></div></body></html>