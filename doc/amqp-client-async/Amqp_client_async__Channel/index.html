<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Amqp_client_async__Channel (amqp-client-async.Amqp_client_async__Channel)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">amqp-client-async</a> &#x00BB; Amqp_client_async__Channel</nav><h1>Module <code>Amqp_client_async__Channel</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> _ t</code></dt></dl><dl><dt class="spec type" id="type-confirms"><a href="#type-confirms" class="anchor"></a><code><span class="keyword">type</span> 'a confirms</code></dt><dt class="spec type" id="type-no_confirm"><a href="#type-no_confirm" class="anchor"></a><code><span class="keyword">type</span> no_confirm</code> = <code>[ </code><table class="variant"><tr id="type-no_confirm.Ok" class="anchored"><td class="def constructor"><a href="#type-no_confirm.Ok" class="anchor"></a><code>| </code><code>`Ok</code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-with_confirm"><a href="#type-with_confirm" class="anchor"></a><code><span class="keyword">type</span> with_confirm</code> = <code>[ </code><table class="variant"><tr id="type-with_confirm.Ok" class="anchored"><td class="def constructor"><a href="#type-with_confirm.Ok" class="anchor"></a><code>| </code><code>`Ok</code></td></tr><tr id="type-with_confirm.Failed" class="anchored"><td class="def constructor"><a href="#type-with_confirm.Failed" class="anchor"></a><code>| </code><code>`Failed</code></td></tr></table><code> ]</code></dt></dl><dl><dt class="spec value" id="val-no_confirm"><a href="#val-no_confirm" class="anchor"></a><code><span class="keyword">val</span> no_confirm : <a href="index.html#type-no_confirm">no_confirm</a> <a href="index.html#type-confirms">confirms</a></code></dt><dt class="spec value" id="val-with_confirm"><a href="#val-with_confirm" class="anchor"></a><code><span class="keyword">val</span> with_confirm : <a href="index.html#type-with_confirm">with_confirm</a> <a href="index.html#type-confirms">confirms</a></code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : id:string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-confirms">confirms</a> <span>&#45;&gt;</span> <a href="../Amqp_client_async/Framing/index.html#type-t">Amqp_client_async.Framing.t</a> <span>&#45;&gt;</span> <a href="../Amqp_client_async/Framing/index.html#type-channel_no">Amqp_client_async.Framing.channel_no</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Create a new channel. Use Connection.open_channel rather than this method directly</p></dd></dl><dl><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Close the channel</p></dd></dl><dl><dt class="spec value" id="val-on_closed"><a href="#val-on_closed" class="anchor"></a><code><span class="keyword">val</span> on_closed : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p><code>on_closed</code> becomes determined after then channel is closed.</p><p>If there are no consumers of this when the channel is close <code>Connection_closed</code> will be raised to the governing exception handler (the parent monitor in async, or <code>Lwt.async_exception_hook</code> in lwt).</p></dd></dl><dl><dt class="spec value" id="val-on_return"><a href="#val-on_return" class="anchor"></a><code><span class="keyword">val</span> on_return : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="../Amqp_client_async/Spec/Basic/Return/index.html#type-t">Amqp_client_async.Spec.Basic.Return.t</a> * (<a href="../Amqp_client_async/Spec/Basic/Content/index.html#type-t">Amqp_client_async.Spec.Basic.Content.t</a> * string)) <a href="../Amqp_client_async/Thread/Pipe/Reader/index.html#type-t">Amqp_client_async.Thread.Pipe.Reader.t</a></code></dt><dd><p>Receive all returned messages. Reutnred message will be send to all readers returned from call to this function. Listening for returned messages are useful in e.g. rpc to know that message delivery failed and then stop waiting for a response.</p><p>Note that channels in ack mode there is no need to listen for returned messages, as message delivery will fail synchoniously.</p></dd></dl><dl><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Get the id of the channel</p></dd></dl><dl><dt class="spec value" id="val-channel_no"><a href="#val-channel_no" class="anchor"></a><code><span class="keyword">val</span> channel_no : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Get the channel_no of the connection</p></dd></dl><dl><dt class="spec value" id="val-set_prefetch"><a href="#val-set_prefetch" class="anchor"></a><code><span class="keyword">val</span> set_prefetch : ?&#8288;count:int <span>&#45;&gt;</span> ?&#8288;size:int <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Set prefetch counters for a channel.</p><dl><dt>parameter count</dt><dd><p>Maximum messages inflight (un-acked)</p></dd></dl><dl><dt>parameter size</dt><dd><p>Maximum amount of bytes inflight</p><p>Note. if using rabbitmq, the prefetch limits are set per consumer on the channel, rather than per channel (across consumers)</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set_global_prefetch"><a href="#val-set_global_prefetch" class="anchor"></a><code><span class="keyword">val</span> set_global_prefetch : ?&#8288;count:int <span>&#45;&gt;</span> ?&#8288;size:int <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Set global prefetch counters.</p><dl><dt>parameter count</dt><dd><p>Maximum messages inflight (un-acked)</p></dd></dl><dl><dt>parameter size</dt><dd><p>Maximum amount of bytes inflight</p><p>Note: if using rabbitmq, the prefetch limits are set per channel (across consumers), If not, the global prefetch settings is applied globally - across consumers and channels.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span class="keyword">val</span> flush : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Flush the channel, making sure all messages have been sent</p></dd></dl><dl><dt class="spec module" id="module-Transaction"><a href="#module-Transaction" class="anchor"></a><code><span class="keyword">module</span> <a href="Transaction/index.html">Transaction</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Transactions. Transactions can be made per channel.</p></dd></dl></div></body></html>