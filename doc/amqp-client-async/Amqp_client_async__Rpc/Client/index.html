<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client (amqp-client-async.Amqp_client_async__Rpc.Client)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">amqp-client-async</a> &#x00BB; <a href="../index.html">Amqp_client_async__Rpc</a> &#x00BB; Client</nav><h1>Module <code>Amqp_client_async__Rpc.Client</code></h1><p>Rpc Client pattern</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : id:string <span>&#45;&gt;</span> <a href="../../Amqp_client_async/Connection/index.html#type-t">Amqp_client_async.Connection.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Initialize a client with the <code>id</code> for tracing</p></dd></dl><dl><dt class="spec value" id="val-call"><a href="#val-call" class="anchor"></a><code><span class="keyword">val</span> call : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;correlation_id:string <span>&#45;&gt;</span> ttl:int <span>&#45;&gt;</span> routing_key:string <span>&#45;&gt;</span> headers:<a href="../../../amqp-client/Amqp_client_lib/Types/index.html#type-header">Amqp_client_lib.Types.header</a> list <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="../../Amqp_client_async/Exchange/index.html#type-t">Amqp_client_async.Exchange.t</a> <span>&#45;&gt;</span> (<a href="../../Amqp_client_async/Spec/Basic/Content/index.html#type-t">Amqp_client_async.Spec.Basic.Content.t</a> * string) <span>&#45;&gt;</span> <a href="../../Amqp_client_async/Message/index.html#type-message">Amqp_client_async.Message.message</a> option <a href="../../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Make an rpc call to the exchange using the routing key and headers.</p><dl><dt>parameter ttl</dt><dd><p>is the message timeout.</p><p>To call directly to a named queue, use <code>call t Exchange.default ~routing_key:&quot;name_of_the_queue&quot; ~headers:[]</code></p><p><code>correlation_id</code> allows you to specify a correlation id. The id will be suffixed with an id to allow the caller to reuse correlation ids. This can be used for tracing by reusing correlation ids of incomming requests resulting in new calls. If no correlation is given the id of the <code>client</code> is used.</p><p>The function allows the call to specify both a routing key and headers regardless of the type of exchange used, as exchanges may be chained in a way where both headers and routing keys are used.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../../Amqp_client_async/Thread/Deferred/index.html#type-t">Amqp_client_async.Thread.Deferred.t</a></code></dt><dd><p>Release resources</p></dd></dl></div></body></html>