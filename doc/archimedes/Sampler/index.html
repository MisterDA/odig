<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sampler (archimedes.Sampler)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">archimedes</a> &#x00BB; Sampler</nav><h1>Module <code>Sampler</code></h1><p>Adaptative sampling of functions.</p></header><dl><dt class="spec type" id="type-strategy"><a href="#type-strategy" class="anchor"></a><code><span class="keyword">type</span> strategy</code><code> = float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float</code></dt><dd><p>A strategy is a function <code>f t1 t2</code> that returns an internal point tm between <code>t1</code> and <code>t2</code> which will be used to decide if we need to increment precision or not. The given <code>t1</code> and <code>t2</code> will always be finite.</p></dd></dl><dl><dt class="spec type" id="type-cost"><a href="#type-cost" class="anchor"></a><code><span class="keyword">type</span> cost</code><code> = <a href="../Matrix/index.html#type-rectangle">Matrix.rectangle</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float</code></dt><dd><p>A cost <code>f bb x0 y0 xm ym x1 y1</code> which returns the cost measuring how much the three points <code>(x0, y0)</code>, <code>(xm, ym)</code>, and <code>(x1, y1)</code> differ from a straight line. <code>bb</code> is a rough bounding box of the set of points that can be used to determine whether two points are close (in relative measure). A cost <code>&lt;= 0.</code> means one is satisfied with drawing straight lines connecting the three points.</p></dd></dl><dl><dt class="spec value" id="val-xy"><a href="#val-xy" class="anchor"></a><code><span class="keyword">val</span> xy : ?&#8288;tlog:bool <span>&#45;&gt;</span> ?&#8288;fn0:float <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> ?&#8288;strategy:<a href="index.html#type-strategy">strategy</a> <span>&#45;&gt;</span> ?&#8288;cost:<a href="index.html#type-cost">cost</a> <span>&#45;&gt;</span> (float <span>&#45;&gt;</span> float * float) <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float array * float array</code></dt><dd><p><code>xy f t1 t2</code> samples the parametric function <code>f</code> on the interval going from <code>t1</code> to <code>t2</code>. Returns a list of the points in the sample.</p><dl><dt>parameter tlog</dt><dd><p>do we need to step in a logarithmic way ?</p></dd></dl><dl><dt>parameter fn0</dt><dd><p>fraction of <code>n</code> defining the number of steps for the initial sampling of the function (that will later be refined). Must be <code>0 &lt; fn0 &lt;= 1</code>. Default: <code>0.1</code>.</p></dd></dl><dl><dt>parameter min_step</dt><dd><p>don't increment precision more than this threshold</p></dd></dl><dl><dt>parameter n</dt><dd><p>is a maximum number of evaluations of <code>f</code> that are allowed. Default: <code>100</code>.</p></dd></dl><dl><dt>parameter strategy</dt><dd><p>a customized strategy.</p></dd></dl><dl><dt>parameter cost</dt><dd><p>a customized cost.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-x"><a href="#val-x" class="anchor"></a><code><span class="keyword">val</span> x : ?&#8288;tlog:bool <span>&#45;&gt;</span> ?&#8288;fn0:float <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> ?&#8288;strategy:<a href="index.html#type-strategy">strategy</a> <span>&#45;&gt;</span> ?&#8288;cost:<a href="index.html#type-cost">cost</a> <span>&#45;&gt;</span> (float <span>&#45;&gt;</span> float) <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float array * float array</code></dt><dd><p><code>x f x1 x2</code> same as <a href="index.html#val-xy"><code>Sampler.xy</code></a> but for the scalar function <code>f</code> on the interval going from <code>x1</code> to <code>x2</code>.</p></dd></dl><dl><dt class="spec value" id="val-strategy_midpoint"><a href="#val-strategy_midpoint" class="anchor"></a><code><span class="keyword">val</span> strategy_midpoint : <a href="index.html#type-strategy">strategy</a></code></dt><dd><p>The default strategy: choose the middle point</p></dd></dl><dl><dt class="spec value" id="val-strategy_random"><a href="#val-strategy_random" class="anchor"></a><code><span class="keyword">val</span> strategy_random : <a href="index.html#type-strategy">strategy</a></code></dt><dd><p>A strategy that avoids aliasing sampling, but not efficient: chooses randomly a point between t1 and t2</p></dd></dl><dl><dt class="spec value" id="val-strategy_center_random"><a href="#val-strategy_center_random" class="anchor"></a><code><span class="keyword">val</span> strategy_center_random : <a href="index.html#type-strategy">strategy</a></code></dt><dd><p>A more efficient strategy that avoids aliasing sampling: chooses randomly a points between t1 and t2 in its 10% center interval</p></dd></dl><dl><dt class="spec value" id="val-cost_angle"><a href="#val-cost_angle" class="anchor"></a><code><span class="keyword">val</span> cost_angle : <a href="index.html#type-cost">cost</a></code></dt><dd><p>Measures the angle at the middle point <code>(xm, ym)</code>, the flatter the angle, the lower the cost.</p></dd></dl><dl><dt class="spec value" id="val-cost_angle_dist"><a href="#val-cost_angle_dist" class="anchor"></a><code><span class="keyword">val</span> cost_angle_dist : <a href="index.html#type-cost">cost</a></code></dt><dd><p>Measures the angle at the middle point <code>(xm, ym)</code>, the flatter the angle, the better and combines it with the distance of the points <code>(x0, y0)</code> and <code>(x1, y1)</code> to the middle point, the smaller the distance, the better.</p></dd></dl><dl><dt class="spec value" id="val-cost_angle_log"><a href="#val-cost_angle_log" class="anchor"></a><code><span class="keyword">val</span> cost_angle_log : bool <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> <a href="index.html#type-cost">cost</a></code></dt><dd><p>Same criterion as <a href="index.html#val-cost_angle"><code>cost_angle</code></a> suitable for logarithmic cordinates.</p></dd></dl></div></body></html>