<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Schedule_v5 (async_extra.Async_extra.Schedule_v5)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">async_extra</a> &#x00BB; <a href="../index.html">Async_extra</a> &#x00BB; Schedule_v5</nav><h1>Module <code>Async_extra.Schedule_v5</code></h1><p>Extends <a href="../../../core/Core/Schedule_v5/index.html"><span><code>Core.Schedule_v5</code></span></a> with functions for asynchronously handling events in the schedule.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec type" id="type-zoned"><a href="#type-zoned" class="anchor"></a><code><span class="keyword">type</span> zoned</code><code> = <a href="../../../core/Core__Schedule_v5/index.html#type-zoned">Core__Schedule_v5.zoned</a></code><code> = </code><table class="variant"><tr id="type-zoned.Zoned" class="anchored"><td class="def constructor"><a href="#type-zoned.Zoned" class="anchor"></a><code>| </code><code><span class="constructor">Zoned</span></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-compare_zoned"><a href="#val-compare_zoned" class="anchor"></a><code><span class="keyword">val</span> compare_zoned : <a href="index.html#type-zoned">zoned</a> <span>&#45;&gt;</span> <a href="index.html#type-zoned">zoned</a> <span>&#45;&gt;</span> int</code></dt></dl><dl><dt class="spec type" id="type-unzoned"><a href="#type-unzoned" class="anchor"></a><code><span class="keyword">type</span> unzoned</code><code> = <a href="../../../core/Core__Schedule_v5/index.html#type-unzoned">Core__Schedule_v5.unzoned</a></code><code> = </code><table class="variant"><tr id="type-unzoned.Unzoned" class="anchored"><td class="def constructor"><a href="#type-unzoned.Unzoned" class="anchor"></a><code>| </code><code><span class="constructor">Unzoned</span></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-compare_unzoned"><a href="#val-compare_unzoned" class="anchor"></a><code><span class="keyword">val</span> compare_unzoned : <a href="index.html#type-unzoned">unzoned</a> <span>&#45;&gt;</span> <a href="index.html#type-unzoned">unzoned</a> <span>&#45;&gt;</span> int</code></dt></dl><div class="spec module" id="module-Inclusive_exclusive"><a href="#module-Inclusive_exclusive" class="anchor"></a><code><span class="keyword">module</span> <a href="Inclusive_exclusive/index.html">Inclusive_exclusive</a> = <a href="../../../core/Core__Schedule_v5/index.html#module-Inclusive_exclusive">Core__Schedule_v5.Inclusive_exclusive</a></code></div><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b) t</code><code> = (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="../../../core/Core__Schedule_v5/index.html#type-t">Core__Schedule_v5.t</a></code><code> = </code><table class="variant"><tr id="type-t.In_zone" class="anchored"><td class="def constructor"><a href="#type-t.In_zone" class="anchor"></a><code>| </code><code><span class="constructor">In_zone</span> : <a href="../../../core/Core__Core_time_float/Zone/index.html#type-t">Core__.Import_time.Time.Zone.t</a> * (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b0</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'b0</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Tag" class="anchored"><td class="def constructor"><a href="#type-t.Tag" class="anchor"></a><code>| </code><code><span class="constructor">Tag</span> : <span class="type-var">'b1</span> * (<span class="type-var">'a0</span>, <span class="type-var">'b1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a0</span>, <span class="type-var">'b1</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.And" class="anchored"><td class="def constructor"><a href="#type-t.And" class="anchor"></a><code>| </code><code><span class="constructor">And</span> : (<span class="type-var">'a1</span>, <span class="type-var">'b2</span>) <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> (<span class="type-var">'a1</span>, <span class="type-var">'b2</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Or" class="anchored"><td class="def constructor"><a href="#type-t.Or" class="anchor"></a><code>| </code><code><span class="constructor">Or</span> : (<span class="type-var">'a2</span>, <span class="type-var">'b3</span>) <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> (<span class="type-var">'a2</span>, <span class="type-var">'b3</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Not" class="anchored"><td class="def constructor"><a href="#type-t.Not" class="anchor"></a><code>| </code><code><span class="constructor">Not</span> : (<span class="type-var">'a3</span>, <span class="type-var">'b4</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a3</span>, <span class="type-var">'b4</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.If_then_else" class="anchored"><td class="def constructor"><a href="#type-t.If_then_else" class="anchor"></a><code>| </code><code><span class="constructor">If_then_else</span> : ((<span class="type-var">'a4</span>, <span class="type-var">'b5</span>) <a href="index.html#type-t">t</a> * (<span class="type-var">'a4</span>, <span class="type-var">'b5</span>) <a href="index.html#type-t">t</a> * (<span class="type-var">'a4</span>, <span class="type-var">'b5</span>) <a href="index.html#type-t">t</a>) <span>&#45;&gt;</span> (<span class="type-var">'a4</span>, <span class="type-var">'b5</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Shift" class="anchored"><td class="def constructor"><a href="#type-t.Shift" class="anchor"></a><code>| </code><code><span class="constructor">Shift</span> : <a href="../../../core_kernel/Core_kernel__Time_intf/module-type-S/Time/Span/index.html#type-t">Core__.Import_time.Time.Span.t</a> * (<span class="type-var">'a5</span>, <span class="type-var">'b6</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a5</span>, <span class="type-var">'b6</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Between" class="anchored"><td class="def constructor"><a href="#type-t.Between" class="anchor"></a><code>| </code><code><span class="constructor">Between</span> : (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>) * (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>) <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b7</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Zoned_between" class="anchored"><td class="def constructor"><a href="#type-t.Zoned_between" class="anchor"></a><code>| </code><code><span class="constructor">Zoned_between</span> : (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * <a href="../../../core/Core__Core_time_float/Zone/index.html#type-t">Core__.Import_time.Time.Zone.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>) * (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * <a href="../../../core/Core__Core_time_float/Zone/index.html#type-t">Core__.Import_time.Time.Zone.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>) <span>&#45;&gt;</span> (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'b8</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.At" class="anchored"><td class="def constructor"><a href="#type-t.At" class="anchor"></a><code>| </code><code><span class="constructor">At</span> : <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a> list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b9</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Secs" class="anchored"><td class="def constructor"><a href="#type-t.Secs" class="anchor"></a><code>| </code><code><span class="constructor">Secs</span> : int list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b10</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Mins" class="anchored"><td class="def constructor"><a href="#type-t.Mins" class="anchor"></a><code>| </code><code><span class="constructor">Mins</span> : int list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b11</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Hours" class="anchored"><td class="def constructor"><a href="#type-t.Hours" class="anchor"></a><code>| </code><code><span class="constructor">Hours</span> : int list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b12</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Weekdays" class="anchored"><td class="def constructor"><a href="#type-t.Weekdays" class="anchor"></a><code>| </code><code><span class="constructor">Weekdays</span> : <a href="../../../core_kernel/Core_kernel/Day_of_week/index.html#type-t">Core__.Import.Day_of_week.t</a> list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b13</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Days" class="anchored"><td class="def constructor"><a href="#type-t.Days" class="anchor"></a><code>| </code><code><span class="constructor">Days</span> : int list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b14</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Weeks" class="anchored"><td class="def constructor"><a href="#type-t.Weeks" class="anchor"></a><code>| </code><code><span class="constructor">Weeks</span> : int list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b15</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Months" class="anchored"><td class="def constructor"><a href="#type-t.Months" class="anchor"></a><code>| </code><code><span class="constructor">Months</span> : <a href="../../../core_kernel/Core_kernel/Month/index.html#type-t">Core__.Import.Month.t</a> list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b16</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.On" class="anchored"><td class="def constructor"><a href="#type-t.On" class="anchor"></a><code>| </code><code><span class="constructor">On</span> : <a href="../../../core_kernel/Core_kernel/Date/index.html#type-t">Core__.Import.Date.t</a> list <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b17</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Before" class="anchored"><td class="def constructor"><a href="#type-t.Before" class="anchor"></a><code>| </code><code><span class="constructor">Before</span> : (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * (<a href="../../../core_kernel/Core_kernel/Date/index.html#type-t">Core__.Import.Date.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>)) <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b18</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.After" class="anchored"><td class="def constructor"><a href="#type-t.After" class="anchor"></a><code>| </code><code><span class="constructor">After</span> : (<a href="../../../core/Core__Schedule_v5/Inclusive_exclusive/index.html#type-t">Inclusive_exclusive.t</a> * (<a href="../../../core_kernel/Core_kernel/Date/index.html#type-t">Core__.Import.Date.t</a> * <a href="../../../core/Core__Core_time_float/Ofday/index.html#type-t">Core__.Import_time.Time.Ofday.t</a>)) <span>&#45;&gt;</span> (<a href="index.html#type-unzoned">unzoned</a>, <span class="type-var">'b19</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Always" class="anchored"><td class="def constructor"><a href="#type-t.Always" class="anchor"></a><code>| </code><code><span class="constructor">Always</span> : (<span class="type-var">'a6</span>, <span class="type-var">'b20</span>) <a href="index.html#type-t">t</a></code></td></tr><tr id="type-t.Never" class="anchored"><td class="def constructor"><a href="#type-t.Never" class="anchor"></a><code>| </code><code><span class="constructor">Never</span> : (<span class="type-var">'a7</span>, <span class="type-var">'b21</span>) <a href="index.html#type-t">t</a></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt></dl><dl><dt class="spec type" id="type-zoned_t"><a href="#type-zoned_t" class="anchor"></a><code><span class="keyword">type</span> 'b zoned_t</code><code> = (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt></dl><dl><dt class="spec value" id="val-sexp_of_zoned_t"><a href="#val-sexp_of_zoned_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_zoned_t : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-zoned_t">zoned_t</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt><dt class="spec value" id="val-to_string_zoned"><a href="#val-to_string_zoned" class="anchor"></a><code><span class="keyword">val</span> to_string_zoned : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string_of_tag:(<span class="type-var">'b</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> string</code></dt></dl><div class="spec module" id="module-Stable"><a href="#module-Stable" class="anchor"></a><code><span class="keyword">module</span> <a href="Stable/index.html">Stable</a> = <a href="../../../core/Core__Schedule_v5/index.html#module-Stable">Core__Schedule_v5.Stable</a></code></div><dl><dt class="spec value" id="val-includes"><a href="#val-includes" class="anchor"></a><code><span class="keyword">val</span> includes : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-tags"><a href="#val-tags" class="anchor"></a><code><span class="keyword">val</span> tags : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> [ `Included of <span class="type-var">'tag</span> list | `Not_included ]</code></dt><dt class="spec value" id="val-all_tags"><a href="#val-all_tags" class="anchor"></a><code><span class="keyword">val</span> all_tags : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> tag_comparator:(<span class="type-var">'tag</span>, <span class="type-var">'cmp</span>) <a href="../../../core_kernel/Core_kernel/Comparator/index.html#type-t">Core__.Import.Comparator.t</a> <span>&#45;&gt;</span> (<span class="type-var">'tag</span>, <span class="type-var">'cmp</span>) <a href="../../../core_kernel/Core_kernel/Set/index.html#type-t">Core__.Import.Set.t</a></code></dt><dt class="spec value" id="val-fold_tags"><a href="#val-fold_tags" class="anchor"></a><code><span class="keyword">val</span> fold_tags : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> init:<span class="type-var">'m</span> <span>&#45;&gt;</span> f:(<span class="type-var">'m</span> <span>&#45;&gt;</span> <span class="type-var">'tag</span> <span>&#45;&gt;</span> <span class="type-var">'m</span>) <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> <span class="type-var">'m</span> option</code></dt><dt class="spec value" id="val-map_tags"><a href="#val-map_tags" class="anchor"></a><code><span class="keyword">val</span> map_tags : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="index.html#type-t">t</a></code></dt></dl><div class="spec module" id="module-Event"><a href="#module-Event" class="anchor"></a><code><span class="keyword">module</span> <a href="Event/index.html">Event</a> = <a href="../../../core/Core__Schedule_v5/index.html#module-Event">Core__Schedule_v5.Event</a></code></div><dl><dt class="spec type" id="type-emit"><a href="#type-emit" class="anchor"></a><code><span class="keyword">type</span> ('tag, 'a) emit</code><code> = (<span class="type-var">'tag</span>, <span class="type-var">'a</span>) <a href="../../../core/Core__Schedule_v5/index.html#type-emit">Core__Schedule_v5.emit</a></code><code> = </code><table class="variant"><tr id="type-emit.Transitions" class="anchored"><td class="def constructor"><a href="#type-emit.Transitions" class="anchor"></a><code>| </code><code><span class="constructor">Transitions</span> : (<span class="type-var">'tag0</span>, [ `Enter of <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> * <span class="type-var">'tag0</span> list | `Leave of <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> | `No_change_until_at_least of [ `In_range | `Out_of_range ] * <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> ]) <a href="index.html#type-emit">emit</a></code></td></tr><tr id="type-emit.Transitions_and_tag_changes" class="anchored"><td class="def constructor"><a href="#type-emit.Transitions_and_tag_changes" class="anchor"></a><code>| </code><code><span class="constructor">Transitions_and_tag_changes</span> : (<span class="type-var">'tag1</span> <span>&#45;&gt;</span> <span class="type-var">'tag1</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'tag1</span>, [ `Change_tags of <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> * <span class="type-var">'tag1</span> list | `Enter of <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> * <span class="type-var">'tag1</span> list | `Leave of <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> | `No_change_until_at_least of [ `In_range | `Out_of_range ] * <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> ]) <a href="index.html#type-emit">emit</a></code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-to_endless_sequence"><a href="#val-to_endless_sequence" class="anchor"></a><code><span class="keyword">val</span> to_endless_sequence : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> start_time:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> emit:(<span class="type-var">'tag</span>, <span class="type-var">'a</span>) <a href="index.html#type-emit">emit</a> <span>&#45;&gt;</span> [ `Started_in_range of <span class="type-var">'tag</span> list * <span class="type-var">'a</span> <a href="../../../core_kernel/Core_kernel/Sequence/index.html#type-t">Core__.Import.Sequence.t</a> | `Started_out_of_range of <span class="type-var">'a</span> <a href="../../../core_kernel/Core_kernel/Sequence/index.html#type-t">Core__.Import.Sequence.t</a> ]</code></dt><dt class="spec value" id="val-next_enter_between"><a href="#val-next_enter_between" class="anchor"></a><code><span class="keyword">val</span> next_enter_between : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> option</code></dt><dt class="spec value" id="val-next_leave_between"><a href="#val-next_leave_between" class="anchor"></a><code><span class="keyword">val</span> next_leave_between : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core__.Import_time.Time.t</a> option</code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-pipe_emit"><a href="#type-pipe_emit" class="anchor"></a><code><span class="keyword">type</span> ('tag, 'output) pipe_emit</code><code> = </code><table class="variant"><tr id="type-pipe_emit.Transitions" class="anchored"><td class="def constructor"><a href="#type-pipe_emit.Transitions" class="anchor"></a><code>| </code><code><span class="constructor">Transitions</span> : (<span class="type-var">'tag</span>, <span class="type-var">'tag</span> <a href="../../../core/Core__Schedule_v5/Event/index.html#type-transition">Event.transition</a>) <a href="index.html#type-pipe_emit">pipe_emit</a></code></td></tr><tr id="type-pipe_emit.Transitions_and_tag_changes" class="anchored"><td class="def constructor"><a href="#type-pipe_emit.Transitions_and_tag_changes" class="anchor"></a><code>| </code><code><span class="constructor">Transitions_and_tag_changes</span> : (<span class="type-var">'tag</span> <span>&#45;&gt;</span> <span class="type-var">'tag</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'tag</span>, [ <span class="type-var">'tag</span> <a href="../../../core/Core__Schedule_v5/Event/index.html#type-transition">Event.transition</a> | <span class="type-var">'tag</span> <a href="../../../core/Core__Schedule_v5/Event/index.html#type-tag_change">Event.tag_change</a> ]) <a href="index.html#type-pipe_emit">pipe_emit</a></code></td></tr></table></dt><dd><p>In <code>Transitions_and_tag_changes</code>, equality for the tag type must be given.</p></dd></dl><dl><dt class="spec value" id="val-to_pipe"><a href="#val-to_pipe" class="anchor"></a><code><span class="keyword">val</span> to_pipe : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> start_time:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> emit:(<span class="type-var">'tag</span>, <span class="type-var">'output</span>) <a href="index.html#type-pipe_emit">pipe_emit</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> [ `Started_in_range of <span class="type-var">'tag</span> list * <span class="type-var">'output</span> <a href="../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async_extra__.Import.Pipe.Reader.t</a> | `Started_out_of_range of <span class="type-var">'output</span> <a href="../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async_extra__.Import.Pipe.Reader.t</a> ]</code></dt><dd><p><code>to_pipe t ~start_time ~emit ?stop ()</code> produces a pipe containing the events from <code>to_endless_sequence ~start_time t ~emit</code>, with <code>`No_change_until_at_least</code> filtered out and each event added only at or after its scheduled time.</p></dd></dl><dl><dt class="spec value" id="val-next_event"><a href="#val-next_event" class="anchor"></a><code><span class="keyword">val</span> next_event : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> event:[ `Enter | `Leave ] <span>&#45;&gt;</span> stop:unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> ?&#8288;after:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a></code></dt><dd><p><code>next_event t ~event ~stop ~after ()</code> waits for the time of the next event matching <code>event</code> in <code>t</code> starting at time <code>after</code>. At that time, the resulting deferred is determined and filled with the time of the event.</p><p>If <code>stop</code> becomes determined before the next event, the resulting deferred is never filled and the computation to find the next event stops. If the caller intends to never use the returned deferred, stop should be filled or the background computation will continue to keep the deferred alive until the event occurs.</p><p>This function is a good choice for handling a single event during the run of a program, like scheduling shutdown. If the intention is to follow along with all events in a schedule, it is preferable to call <code>to_pipe</code> or <code>to_endless_sequence</code> (in the non-async module).</p></dd></dl><dl><dt class="spec type" id="type-every_enter_callback"><a href="#type-every_enter_callback" class="anchor"></a><code><span class="keyword">type</span> 'a every_enter_callback</code><code> = enter:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> leave:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><dl><dt class="spec value" id="val-every_enter_without_pushback"><a href="#val-every_enter_without_pushback" class="anchor"></a><code><span class="keyword">val</span> every_enter_without_pushback : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> ?&#8288;start:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> ?&#8288;stop:unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;continue_on_error:bool <span>&#45;&gt;</span> ?&#8288;start_in_range_is_enter:bool <span>&#45;&gt;</span> unit <a href="index.html#type-every_enter_callback">every_enter_callback</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>every_enter_without_pushback t ~start ~stop ~continue_on_error
    ~start_in_range_is_enter f</code> calls <code>f</code> for each contiguous block of time in <code>t</code> starting at <code>start</code> and continuing until <code>stop</code> becomes determined.</p><p>For each block of time with start time <code>enter</code> and end time <code>leave_time</code>, <code>f</code> is called with <code>f ~enter ~leave</code>, where <code>leave</code> is a deferred that becomes determined at <code>leave_time</code> with the value <code>leave_time</code>.</p><p>If <code>includes t start &amp;&amp; start_in_range_is_enter</code>, then <code>f</code> will be called as soon as possible after <code>start</code> with <code>enter = start</code>. Otherwise, <code>f</code> will not be called for any block of time that includes <code>start</code>.</p><p>If <code>continue_on_error = false</code> and <code>f</code> (or any async job started by <code>f</code>) raises an error, <code>f</code> will no longer be called, and all undetermined <code>leave</code> deferreds will remain unfulfilled.</p><p>If <code>stop</code> is fulfilled then no further calls to <code>f</code> will be made and all undetermined <code>leave</code> deferreds will remain unfulfilled.</p></dd></dl><dl><dt class="spec value" id="val-every_enter"><a href="#val-every_enter" class="anchor"></a><code><span class="keyword">val</span> every_enter : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> ?&#8288;start:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> ?&#8288;stop:unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;continue_on_error:bool <span>&#45;&gt;</span> ?&#8288;start_in_range_is_enter:bool <span>&#45;&gt;</span> ?&#8288;on_pushback:unit <a href="index.html#type-every_enter_callback">every_enter_callback</a> <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <a href="index.html#type-every_enter_callback">every_enter_callback</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Like <code>every_enter_without_pushback</code>, except allows at most one call of <code>f</code> to be in flight at a time. If the schedule would cause <code>f</code> to be invoked again before the prior call has finished, then it invokes <code>on_pushback</code> instead (if provided).</p></dd></dl><dl><dt class="spec value" id="val-every_tag_change_without_pushback"><a href="#val-every_tag_change_without_pushback" class="anchor"></a><code><span class="keyword">val</span> every_tag_change_without_pushback : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> ?&#8288;start:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> ?&#8288;stop:unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;continue_on_error:bool <span>&#45;&gt;</span> ?&#8288;start_in_range_is_enter:bool <span>&#45;&gt;</span> tag_equal:(<span class="type-var">'tag</span> <span>&#45;&gt;</span> <span class="type-var">'tag</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (tags:<span class="type-var">'tag</span> list <span>&#45;&gt;</span> unit <a href="index.html#type-every_enter_callback">every_enter_callback</a>) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>every_tag_change t f</code> calls <code>f</code> for each contiguous block of time in <code>t</code> where the set of tags in effect remains stable (according to tag_equal).</p><p>Moving from a range where the schedule is not in effect to one where it is in effect with no tags is considered a tag change.</p><p>For each block of time tagged with <code>tags</code> and start time <code>enter</code> and end time <code>leave_time</code>, <code>f</code> is called with <code>f ~tags ~enter ~leave</code>, where <code>leave</code> is a deferred that becomes determined at <code>leave_time</code> with the value <code>leave_time</code>.</p><p><code>stop</code>, <code>continue_on_error</code>, and <code>start_in_range_is_enter</code> act as documented in <code>every_enter</code>.</p></dd></dl><dl><dt class="spec value" id="val-every_tag_change"><a href="#val-every_tag_change" class="anchor"></a><code><span class="keyword">val</span> every_tag_change : (<a href="index.html#type-zoned">zoned</a>, <span class="type-var">'tag</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;time_source:<a href="../../../async_kernel/Async_kernel/Time_source/index.html#type-t">Async_extra__.Import.Time_source.t</a> <span>&#45;&gt;</span> ?&#8288;start:<a href="../../../core/Core__/Core_time_float/index.html#type-t">Core.Time.t</a> <span>&#45;&gt;</span> ?&#8288;stop:unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;continue_on_error:bool <span>&#45;&gt;</span> ?&#8288;start_in_range_is_enter:bool <span>&#45;&gt;</span> ?&#8288;on_pushback:(tags:<span class="type-var">'tag</span> list <span>&#45;&gt;</span> unit <a href="index.html#type-every_enter_callback">every_enter_callback</a>) <span>&#45;&gt;</span> tag_equal:(<span class="type-var">'tag</span> <span>&#45;&gt;</span> <span class="type-var">'tag</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (tags:<span class="type-var">'tag</span> list <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <a href="index.html#type-every_enter_callback">every_enter_callback</a>) <span>&#45;&gt;</span> unit</code></dt><dd><p>Like <code>every_tag_change_without_pushback</code>, but pushes back in the same manner as <code>every_enter</code>.</p></dd></dl></div></body></html>