<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Async_extra__Lock_file (async_extra.Async_extra__Lock_file)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">async_extra</a> &#x00BB; Async_extra__Lock_file</nav><h1>Module <code>Async_extra__Lock_file</code></h1><p><code>Async.Lock_file</code> is a wrapper that provides Async equivalents for <a href="../../core/Core/Lock_file/index.html"><span><code>Core.Lock_file</code></span></a>.</p></header><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;message:string <span>&#45;&gt;</span> ?&#8288;close_on_exec:bool <span>&#45;&gt;</span> ?&#8288;unlink_on_exit:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a></code></dt><dd><p><code>create ?message path</code> tries to create a file at <code>path</code> containing the text <code>message</code>, pid if none provided. It returns true on success, false on failure. Note: there is no way to release the lock or the fd created inside! It will only be released when the process dies.</p></dd></dl><dl><dt class="spec value" id="val-create_exn"><a href="#val-create_exn" class="anchor"></a><code><span class="keyword">val</span> create_exn : ?&#8288;message:string <span>&#45;&gt;</span> ?&#8288;close_on_exec:bool <span>&#45;&gt;</span> ?&#8288;unlink_on_exit:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a></code></dt><dd><p><code>create_exn ?message path</code> is like <code>create</code> except that it throws an exception on failure instead of returning a boolean value.</p></dd></dl><dl><dt class="spec value" id="val-waiting_create"><a href="#val-waiting_create" class="anchor"></a><code><span class="keyword">val</span> waiting_create : ?&#8288;abort:unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a> <span>&#45;&gt;</span> ?&#8288;message:string <span>&#45;&gt;</span> ?&#8288;close_on_exec:bool <span>&#45;&gt;</span> ?&#8288;unlink_on_exit:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a></code></dt><dd><p><code>waiting_create path</code> repeatedly tries to lock <code>path</code>, becoming determined when <code>path</code> is locked or raising when <code>abort</code> becomes determined. Similar to <a href="../../core/Core/Lock_file/index.html#val-blocking_create"><span><code>Core.Lock_file.blocking_create</code></span></a>.</p></dd></dl><dl><dt class="spec value" id="val-is_locked"><a href="#val-is_locked" class="anchor"></a><code><span class="keyword">val</span> is_locked : string <span>&#45;&gt;</span> bool <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_extra__.Import.Deferred.t</a></code></dt><dd><p><code>is_locked path</code> returns true when the file at <code>path</code> exists and is locked, false otherwise.</p></dd></dl><dl><dt class="spec module" id="module-Nfs"><a href="#module-Nfs" class="anchor"></a><code><span class="keyword">module</span> <a href="Nfs/index.html">Nfs</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><code>Nfs</code> has analogs of functions in <a href="../../core/Core/Lock_file/Nfs/index.html"><span><code>Core.Lock_file.Nfs</code></span></a>; see there for documentation. In addition to adding <code>Deferred</code>'s, <code>blocking_create</code> was renamed <code>waiting_create</code> to avoid the impression that it blocks Async.</p></dd></dl></div></body></html>