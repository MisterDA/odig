<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Hub (async_parallel.Async_parallel_deprecated.Hub)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">async_parallel</a> &#x00BB; <a href="../index.html">Async_parallel_deprecated</a> &#x00BB; Hub</nav><h1>Module <code>Async_parallel_deprecated.Hub</code></h1></header><aside><p>A hub is a place to which any number (possibly zero) of clients can connect a channel and send messages. The process in which the hub is created is responsible for listening to the messages clients send, and can send messages to an individual client, or broadcast a message to all clients.</p><p>Unless otherwise noted none of the below functions may be called in a process other than the one that created the hub.</p></aside><div class="spec module" id="module-Client_id"><a href="#module-Client_id" class="anchor"></a><code><span class="keyword">module</span> <a href="Client_id/index.html">Client_id</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('from_client, 'to_client) t</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;buffer_age_limit:<a href="../../../async_unix/Async_unix/Writer/index.html#type-buffer_age_limit">Async.Writer.buffer_age_limit</a> <span>&#45;&gt;</span> ([ `Passive ], <a href="../../../async_unix/Async_unix__Unix_syscalls/Socket/Address/Inet/index.html#type-t">Async.Socket.Address.Inet.t</a>) <a href="../../../async_unix/Async_unix__Unix_syscalls/Socket/index.html#type-t">Async.Socket.t</a> <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dt class="spec value" id="val-close"><a href="#val-close" class="anchor"></a><code><span class="keyword">val</span> close : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dt class="spec value" id="val-listen"><a href="#val-listen" class="anchor"></a><code><span class="keyword">val</span> listen : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> [ `Connect of <a href="Client_id/index.html#type-t">Client_id.t</a> | `Disconnect of <a href="Client_id/index.html#type-t">Client_id.t</a> * string | `Data of <a href="Client_id/index.html#type-t">Client_id.t</a> * <span class="type-var">'a</span> ] <a href="../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a></code></dt><dd><p><code>listen</code> and <code>listen_simple</code> start a loop that accepts connections from clients that wish to open channels connected to the hub. <code>listen_simple</code> returns the sequence of messages sent by clients. <code>listen</code> returns those, intermixed with messages indicating when clients <code>`Connect</code> and <code>`Disconnect</code>.</p><p><code>listen</code> or <code>listen_simple</code> should be called exactly once for a given hub. Subsequent calls will raise.</p></dd></dl><dl><dt class="spec value" id="val-listen_simple"><a href="#val-listen_simple" class="anchor"></a><code><span class="keyword">val</span> listen_simple : (<span class="type-var">'a</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="Client_id/index.html#type-t">Client_id.t</a> * <span class="type-var">'a</span>) <a href="../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a></code></dt><dt class="spec value" id="val-send"><a href="#val-send" class="anchor"></a><code><span class="keyword">val</span> send : (<span class="type-var">_</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Client_id/index.html#type-t">Client_id.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-send_to_all"><a href="#val-send_to_all" class="anchor"></a><code><span class="keyword">val</span> send_to_all : (<span class="type-var">_</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-flushed"><a href="#val-flushed" class="anchor"></a><code><span class="keyword">val</span> flushed : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dt class="spec value" id="val-clients"><a href="#val-clients" class="anchor"></a><code><span class="keyword">val</span> clients : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Client_id/index.html#type-t">Client_id.t</a> list</code></dt><dt class="spec value" id="val-open_channel"><a href="#val-open_channel" class="anchor"></a><code><span class="keyword">val</span> open_channel : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="../Channel/index.html#type-t">Channel.t</a> <a href="../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p>open_channel may be called even in a different process than the creator of the hub.</p></dd></dl><dl><dt class="spec value" id="val-socket"><a href="#val-socket" class="anchor"></a><code><span class="keyword">val</span> socket : (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../async_unix/Async_unix__Unix_syscalls/Inet_addr/index.html#type-t">Async.Unix.Inet_addr.t</a> * int</code></dt></dl></div></body></html>