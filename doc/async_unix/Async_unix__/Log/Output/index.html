<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Output (async_unix.Async_unix__.Log.Output)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">async_unix</a> &#x00BB; <a href="../../index.html">Async_unix__</a> &#x00BB; <a href="../index.html">Log</a> &#x00BB; Output</nav><h1>Module <code>Log.Output</code></h1></header><div class="spec module" id="module-Format"><a href="#module-Format" class="anchor"></a><code><span class="keyword">module</span> <a href="Format/index.html">Format</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;rotate:(unit <span>&#45;&gt;</span> unit <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_unix__.Import.Deferred.t</a>) <span>&#45;&gt;</span> ?&#8288;close:(unit <span>&#45;&gt;</span> unit <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_unix__.Import.Deferred.t</a>) <span>&#45;&gt;</span> flush:(unit <span>&#45;&gt;</span> unit <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_unix__.Import.Deferred.t</a>) <span>&#45;&gt;</span> (<a href="../Message/index.html#type-t">Message.t</a> <a href="../../../../core_kernel/Core_kernel/Queue/index.html#type-t">Core.Queue.t</a> <span>&#45;&gt;</span> unit <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async_unix__.Import.Deferred.t</a>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create f</code> returns a <code>t</code>, given a function that actually performs the final output work. It is the responsibility of the write function to contain all state, and to clean up after itself when it is garbage collected (which may require a finalizer). The function should avoid modifying the contents of the queue; it's reused for each <code>Output.t</code>.</p><p>The &quot;stock&quot; output modules support a sexp and bin_prot output format, and other output modules should make efforts to support them as well where it is meaningful/appropriate to do so.</p><p><code>flush</code> should return a deferred that is fulfilled only when all previously written messages are durable (e.g., on disk, out on the network, etc.). It is automatically called on shutdown by <code>Log</code>, but isn't automatically called at any other time. It can be called manually by calling <code>Log.flushed t</code>.</p><p>The <code>unit Deferred</code> returned by the function provides an opportunity for pushback if that is important. Only one batch of messages will be &quot;in flight&quot; at any time based on this deferred.</p><p>An optional <code>rotate</code> function may be given which will be called when <code>Log.rotate t</code> is called while this output is in effect. This is useful for programs that want very precise control over rotation.</p><p>If <code>close</code> is provided it will be called when the log falls out of scope. (Note that it is not called directly, even if you close a log which is using this output, because outputs are sometimes reused.)</p></dd></dl><dl><dt class="spec value" id="val-stdout"><a href="#val-stdout" class="anchor"></a><code><span class="keyword">val</span> stdout : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-stderr"><a href="#val-stderr" class="anchor"></a><code><span class="keyword">val</span> stderr : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-writer"><a href="#val-writer" class="anchor"></a><code><span class="keyword">val</span> writer : <a href="Format/index.html#type-t">Format.t</a> <span>&#45;&gt;</span> <a href="../../../Async_unix/Writer/index.html#type-t">Async_unix.Writer.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-file"><a href="#val-file" class="anchor"></a><code><span class="keyword">val</span> file : <a href="Format/index.html#type-t">Format.t</a> <span>&#45;&gt;</span> filename:string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-rotating_file"><a href="#val-rotating_file" class="anchor"></a><code><span class="keyword">val</span> rotating_file : <a href="Format/index.html#type-t">Format.t</a> <span>&#45;&gt;</span> basename:string <span>&#45;&gt;</span> <a href="../Rotation/index.html#type-t">Rotation.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-rotating_file_with_tail"><a href="#val-rotating_file_with_tail" class="anchor"></a><code><span class="keyword">val</span> rotating_file_with_tail : <a href="Format/index.html#type-t">Format.t</a> <span>&#45;&gt;</span> basename:string <span>&#45;&gt;</span> <a href="../Rotation/index.html#type-t">Rotation.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * string <a href="../../../../async_kernel/Async_kernel/Tail/index.html#type-t">Async_unix__.Import.Tail.t</a></code></dt><dd><p>Returns a tail of the filenames. When <code>rotate</code> is called, the previous filename is put on the tail</p></dd></dl><aside><p>See <span class="xref-unresolved" title="unresolved reference to &quot;Async_extended.Std.Log&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Async_extended.Std&quot;"><code>Async_extended</code>.Std</span>.Log</span> for syslog and colorized console output.</p></aside></div></body></html>