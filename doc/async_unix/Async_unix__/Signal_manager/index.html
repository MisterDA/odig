<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Signal_manager (async_unix.Async_unix__.Signal_manager)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">async_unix</a> &#x00BB; <a href="../index.html">Async_unix__</a> &#x00BB; Signal_manager</nav><h1>Module <code>Async_unix__.Signal_manager</code></h1></header><aside><p>A signal manager keeps track of a set of signals to be managed and the signal handlers for them. When a signal manager is managing a signal, it installs its own OCaml handler for that signal that records delivery of the signal. It then later, upon request, will deliver the signal to all its handlers.</p><p>Once a signal manager starts managing a signal, it never stops.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../base/Base/Invariant/index.html#module-type-S">Core.Invariant.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../base/Base/Invariant/module-type-S/index.html#type-t">t</a> := <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-invariant"><a href="#val-invariant" class="anchor"></a><code><span class="keyword">val</span> invariant : <a href="index.html#type-t">t</a> <a href="../../../base/Base__/Invariant_intf/index.html#type-inv">Base__.Invariant_intf.inv</a></code></dt></dl></details></div></div></div><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : thread_safe_notify_signal_delivered:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create</code> creates and returns a signal manager <code>t</code>. Whenever a signal that <code>t</code> is managing is delivered, it will call <code>thread_safe_notify_signal_delivered</code> from within the OCaml signal handler. Therefore <code>thread_safe_notify_signal_delivered</code> must be thread safe.</p></dd></dl><dl><dt class="spec value" id="val-manage"><a href="#val-manage" class="anchor"></a><code><span class="keyword">val</span> manage : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>manage t signal</code> causes <code>t</code> to manage <code>signal</code>, thus overriding <code>default_sys_behavior</code> for that signal, and any other OCaml handler for that signal.</p></dd></dl><dl><dt class="spec value" id="val-is_managing"><a href="#val-is_managing" class="anchor"></a><code><span class="keyword">val</span> is_managing : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_managing t signal</code> returns true iff <code>manage t signal</code> has been called</p></dd></dl><dl><dt class="spec type" id="type-handler"><a href="#type-handler" class="anchor"></a><code><span class="keyword">type</span> handler</code></dt><dd><p><code>install_handler t signals f</code> causes <code>t</code> to manage the handling of <code>signals</code>, and registers <code>f</code> to run on every signal in <code>signals</code> that is delivered. It is an error if <code>f</code> ever raises when it is called.</p></dd></dl><dl><dt class="spec value" id="val-install_handler"><a href="#val-install_handler" class="anchor"></a><code><span class="keyword">val</span> install_handler : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> list <span>&#45;&gt;</span> (<a href="../../../core/Core/Signal/index.html#type-t">Core.Signal.t</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a></code></dt><dt class="spec value" id="val-remove_handler"><a href="#val-remove_handler" class="anchor"></a><code><span class="keyword">val</span> remove_handler : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-handler">handler</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>remove_handler handler</code> causes the particular <code>handler</code> to no longer handle the signals it was registered to handle. The signal manager continues to manage those signals, i.e. the OCaml signal handler remains installed, whether or not they still have handlers.</p></dd></dl><dl><dt class="spec value" id="val-handle_delivered"><a href="#val-handle_delivered" class="anchor"></a><code><span class="keyword">val</span> handle_delivered : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>handle_delivered t</code> runs all signal handlers on the signals that have been delivered but not yet handled.</p></dd></dl></div></body></html>