<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatIMap (batteries.BatIMap)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatIMap</nav><h1>Module <code>BatIMap</code></h1><p>DIET Maps from integers, packed using ranges</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code></dt><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type </span>key</code><code><span class="keyword"> = </span>int</code></dt></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The empty map. Needs one parameter: a comparison function for the values, to enable merging of ranges with identical values.</p></dd></dl><dl><dt class="spec value" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span class="keyword">val </span>singleton : eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val </span>is_empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Test whether a map is empty (i.e. has no bindings)</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val </span>add : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add x y t</code> adds a binding from <code>x</code> to <code>y</code> in <code>t</code>, returning a new map.</p></dd></dl><dl><dt class="spec value" id="val-add_range"><a href="#val-add_range" class="anchor"></a><code><span class="keyword">val </span>add_range : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add_range lo hi y t</code> adds bindings to <code>y</code> for all values in the range <code>lo,hi</code>, returning a new map</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val </span>find : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>find x t</code> returns the <code>y</code> that is bound to <code>x</code> in <code>t</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is unbound</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-modify"><a href="#val-modify" class="anchor"></a><code><span class="keyword">val </span>modify : int <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>modify x f t</code> replaces the <code>y</code> that is bound to <code>x</code> in <code>t</code> by <code>f y</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>x</code> is unbound</p></dd></dl><dl><dt>since</dt><dd>2.1</dd></dl></dd></dl><dl><dt class="spec value" id="val-modify_def"><a href="#val-modify_def" class="anchor"></a><code><span class="keyword">val </span>modify_def : <span class="type-var">'a</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>modify_def dft x f t</code> does the same as <code>modify x f t</code> but binds <code>x</code> to <code>f dft</code> if <code>x</code> was not bound.</p><dl><dt>since</dt><dd>2.1</dd></dl></dd></dl><dl><dt class="spec value" id="val-modify_opt"><a href="#val-modify_opt" class="anchor"></a><code><span class="keyword">val </span>modify_opt : int <span>&#45;&gt;</span> (<span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>modify_opt x f t</code> allows to modify the binding for <code>x</code> in <code>t</code> or absence thereof.</p><dl><dt>since</dt><dd>2.1</dd></dl></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val </span>remove : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Remove any bindings from the given value.</p></dd></dl><dl><dt class="spec value" id="val-remove_range"><a href="#val-remove_range" class="anchor"></a><code><span class="keyword">val </span>remove_range : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Remove any bindings within the given range</p></dd></dl><dl><dt class="spec value" id="val-from"><a href="#val-from" class="anchor"></a><code><span class="keyword">val </span>from : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Return the sub-map of bindings in the range <code>x,max_int</code></p></dd></dl><dl><dt class="spec value" id="val-after"><a href="#val-after" class="anchor"></a><code><span class="keyword">val </span>after : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Return the sub-map of bindings in the range <code>x+1,max_int</code></p></dd></dl><dl><dt class="spec value" id="val-until"><a href="#val-until" class="anchor"></a><code><span class="keyword">val </span>until : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Return the sub-map of bindings in the range <code>min_int, x</code></p></dd></dl><dl><dt class="spec value" id="val-before"><a href="#val-before" class="anchor"></a><code><span class="keyword">val </span>before : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Return the sub-map of bindings in the range <code>min_int, x-1</code></p></dd></dl><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val </span>mem : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Test whether there is a binding from the given int</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val </span>iter : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f t</code> calls <code>f</code> on every binding</p></dd></dl><dl><dt class="spec value" id="val-iter_range"><a href="#val-iter_range" class="anchor"></a><code><span class="keyword">val </span>iter_range : (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter_range f t</code> calls <code>f</code> on every contiguous range. For maps, contiguous ranges must map to the same <code>y</code></p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create a new map by modifying each <code>y</code> by the given function. This will not create new ranges; the mapping function is only applied to each contiguous range once. It is not applied to the ranges in order. <code>~eq</code> defaults to (=).</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val </span>mapi : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create a new map by computing new values based on key and value of the existing bindings. This can create new ranges, as adjacent bindings can be assigned different values. <code>~eq</code> defaults to (=).</p></dd></dl><dl><dt class="spec value" id="val-map_range"><a href="#val-map_range" class="anchor"></a><code><span class="keyword">val </span>map_range : ?&#8288;eq:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create a new map by modifying each <code>y</code> using the given function. This will not create new ranges, but will have access to the <code>lo,hi</code> of the current range. <code>~eq</code> defaults to (=).</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (int <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f t x0</code> folds all the bindings of <code>t</code> into <code>x0</code> using <code>f</code> to merge.</p></dd></dl><dl><dt class="spec value" id="val-fold_range"><a href="#val-fold_range" class="anchor"></a><code><span class="keyword">val </span>fold_range : (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold_range f t x0</code> folds all the contiguous ranges of <code>t</code> into <code>x0</code> using <code>f</code> to merge. The order of foldings is unspecified.</p></dd></dl><dl><dt class="spec value" id="val-set_to_map"><a href="#val-set_to_map" class="anchor"></a><code><span class="keyword">val </span>set_to_map : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> BatISet.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>set_to_map s x</code> returns a map where every element of <code>s</code> is bound to <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-domain"><a href="#val-domain" class="anchor"></a><code><span class="keyword">val </span>domain : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatISet.t</code></dt><dd><p><code>domain t</code> returns the set of ints that are bound in <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-map_to_set"><a href="#val-map_to_set" class="anchor"></a><code><span class="keyword">val </span>map_to_set : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> BatISet.t</code></dt><dd><p><code>map_to_set p t</code> returns the set of keys of <code>t</code> where <code>p</code> evaluates as true</p></dd></dl><dl><dt class="spec value" id="val-enum"><a href="#val-enum" class="anchor"></a><code><span class="keyword">val </span>enum : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (int<span class="keyword"> * </span>int<span class="keyword"> * </span><span class="type-var">'a</span>) BatEnum.t</code></dt><dd><p><code>enum t</code> returns an enumeration of the bindings in <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-of_enum"><a href="#val-of_enum" class="anchor"></a><code><span class="keyword">val </span>of_enum : eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (int<span class="keyword"> * </span>int<span class="keyword"> * </span><span class="type-var">'a</span>) BatEnum.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_enum e</code> returns the set of given ranges</p></dd></dl><dl><dt class="spec value" id="val-fold2_range"><a href="#val-fold2_range" class="anchor"></a><code><span class="keyword">val </span>fold2_range : (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span> option <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt></dl><aside><p><code>fold2_range f t u x0</code> folds across each range that's defined in either <code>t</code> or <code>u</code> or both, giving that range and the possible values to <code>f</code> to merge with <code>x0</code>.</p><p>Example: let union_first = fold2_range (fun _lo _hi a b = match a,b with Some x,_ -&gt; x | _,Some y -&gt; y)</p></aside><dl><dt class="spec value" id="val-union"><a href="#val-union" class="anchor"></a><code><span class="keyword">val </span>union : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Merge two maps, giving a value</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val </span>merge : ?&#8288;eq:(<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span> option <span>&#45;&gt;</span> <span class="type-var">'c</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-forall2_range"><a href="#val-forall2_range" class="anchor"></a><code><span class="keyword">val </span>forall2_range : (int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span> option <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-get_dec_eq"><a href="#val-get_dec_eq" class="anchor"></a><code><span class="keyword">val </span>get_dec_eq : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Get the equality function used in an IMap.t</p></dd></dl><dl><dt class="spec module" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span class="keyword">module </span><a href="Infix/index.html">Infix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Infix operators over a <a href="index.html"><code>BatIMap</code></a></p></dd></dl></div></body></html>