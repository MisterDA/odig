<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatInnerIO (batteries.BatInnerIO)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatInnerIO</nav><h1>Module <code>BatInnerIO</code></h1><p>Core of the BatIO module.</p><p>This module contains the core definitions of <code>BatIO</code>, so as to avoid circular dependencies between modules which only need simple functions of <code>BatIO</code> and that module itself.</p><p>Don't use this module, use <code>BatIO</code>.</p><dl><dt>author</dt><dd>Nicolas Cannasse</dd></dl><dl><dt>author</dt><dd>David Teller</dd></dl><dl><dt>author</dt><dd>Philippe Strauss</dd></dl><dl><dt>author</dt><dd>Edgar Friendly</dd></dl><nav class="toc"><ul><li><a href="#binary-files-api">Binary files API</a></li><li><a href="#for-compatibility-purposes">For compatibility purposes</a></li><li><a href="#comparison">Comparison</a></li></ul></nav></header><dl><dt class="spec type" id="type-input"><a href="#type-input" class="anchor"></a><code><span class="keyword">type </span>input</code></dt><dt class="spec type" id="type-output"><a href="#type-output" class="anchor"></a><code><span class="keyword">type </span>'a output</code></dt></dl><dl><dt class="spec exception" id="exception-No_more_input"><a href="#exception-No_more_input" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">No_more_input</span></code></dt><dd><p>This exception is raised when reading on an input with the <code>read</code> or <code>nread</code> functions while there is no available token to read.</p></dd></dl><dl><dt class="spec exception" id="exception-Input_closed"><a href="#exception-Input_closed" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Input_closed</span></code></dt><dd><p>This exception is raised when reading on a closed input.</p></dd></dl><dl><dt class="spec exception" id="exception-Output_closed"><a href="#exception-Output_closed" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Output_closed</span></code></dt><dd><p>This exception is raised when reading on a closed output.</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val </span>read : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> char</code></dt><dd><p>Read a single char from an input or raise <code>No_more_input</code> if no input available.</p></dd></dl><dl><dt class="spec value" id="val-read_all"><a href="#val-read_all" class="anchor"></a><code><span class="keyword">val </span>read_all : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> string</code></dt><dd><p>read all the contents of the input until <code>No_more_input</code> is raised.</p></dd></dl><dl><dt class="spec value" id="val-pipe"><a href="#val-pipe" class="anchor"></a><code><span class="keyword">val </span>pipe : unit <span>&#45;&gt;</span> <a href="index.html#type-input">input</a><span class="keyword"> * </span>unit <a href="index.html#type-output">output</a></code></dt><dd><p>Create a pipe between an input and an ouput. Data written from the output can be read from the input.</p></dd></dl><dl><dt class="spec value" id="val-nread"><a href="#val-nread" class="anchor"></a><code><span class="keyword">val </span>nread : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string</code></dt><dd><p><code>nread i n</code> reads a string of size up to <code>n</code> from an input. The function will raise <code>No_more_input</code> if no input is available. It will raise <code>Invalid_argument</code> if <code>n</code> &lt; 0.</p></dd></dl><dl><dt class="spec value" id="val-really_nread"><a href="#val-really_nread" class="anchor"></a><code><span class="keyword">val </span>really_nread : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string</code></dt><dd><p><code>really_nread i n</code> reads a string of exactly <code>n</code> characters from the input. </p><dl><dt>raises No_more_input</dt><dd><p>if at least <code>n</code> characters are not available. </p><p>@raise Invalid_argument</p><p>if <code>n</code> &lt; 0.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input"><a href="#val-input" class="anchor"></a><code><span class="keyword">val </span>input : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>input i s p len</code> reads up to <code>len</code> bytes from the given input, storing them in byte sequence <code>s</code>, starting at position <code>p</code>. It returns the actual number of bytes read or raise <code>No_more_input</code> if no character can be read. It will raise <code>Invalid_argument</code> if <code>p</code> and <code>len</code> do not designate a valid subsequence of <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-really_input"><a href="#val-really_input" class="anchor"></a><code><span class="keyword">val </span>really_input : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>really_input i s p len</code> reads exactly <code>len</code> characters from the given input, storing them in the byte sequence <code>s</code>, starting at position <code>p</code>. For consistency with <span class="xref-unresolved" title="unresolved reference to &quot;BatIO.input&quot;"><code>BatIO</code>.input</span> it returns <code>len</code>. </p><dl><dt>raises No_more_input</dt><dd><p>if at least <code>len</code> characters are not available. </p><p>@raise Invalid_argument</p><p>if <code>p</code> and <code>len</code> do not designate a valid subsequence of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-close_in"><a href="#val-close_in" class="anchor"></a><code><span class="keyword">val </span>close_in : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Close the input. It can no longer be read from.</p></dd></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val </span>write : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> char <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a single char to an output.</p></dd></dl><dl><dt class="spec value" id="val-nwrite"><a href="#val-nwrite" class="anchor"></a><code><span class="keyword">val </span>nwrite : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a string to an output.</p></dd></dl><dl><dt class="spec value" id="val-nwrite_bytes"><a href="#val-nwrite_bytes" class="anchor"></a><code><span class="keyword">val </span>nwrite_bytes : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a byte sequence to an output.</p><dl><dt>since</dt><dd>2.8.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-output"><a href="#val-output" class="anchor"></a><code><span class="keyword">val </span>output : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>output o s p len</code> writes up to <code>len</code> characters from byte sequence <code>len</code>, starting at offset <code>p</code>. It returns the number of characters written. It will raise <code>Invalid_argument</code> if <code>p</code> and <code>len</code> do not designate a valid subsequence of <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-output_substring"><a href="#val-output_substring" class="anchor"></a><code><span class="keyword">val </span>output_substring : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p>like <code>output</code> above, but outputs from a substring instead of a subsequence of bytes</p><dl><dt>since</dt><dd>2.8.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-really_output"><a href="#val-really_output" class="anchor"></a><code><span class="keyword">val </span>really_output : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>really_output o s p len</code> writes exactly <code>len</code> characters from byte sequence <code>s</code> onto the the output, starting with the character at offset <code>p</code>. For consistency with <span class="xref-unresolved" title="unresolved reference to &quot;BatIO.output&quot;"><code>BatIO</code>.output</span> it returns <code>len</code>. </p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>p</code> and <code>len</code> do not designate a valid subsequence of <code>s</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-really_output_substring"><a href="#val-really_output_substring" class="anchor"></a><code><span class="keyword">val </span>really_output_substring : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p>like <code>really_output</code> above, but outputs from a substring instead of a subsequence of bytes</p><dl><dt>since</dt><dd>2.8.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span class="keyword">val </span>flush : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Flush an output.</p></dd></dl><dl><dt class="spec value" id="val-flush_all"><a href="#val-flush_all" class="anchor"></a><code><span class="keyword">val </span>flush_all : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Flush all outputs.</p></dd></dl><dl><dt class="spec value" id="val-close_out"><a href="#val-close_out" class="anchor"></a><code><span class="keyword">val </span>close_out : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Close the output and return its accumulator data. It can no longer be written.</p></dd></dl><dl><dt class="spec value" id="val-close_all"><a href="#val-close_all" class="anchor"></a><code><span class="keyword">val </span>close_all : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Close all outputs. Ignore errors.</p></dd></dl><dl><dt class="spec value" id="val-input_string"><a href="#val-input_string" class="anchor"></a><code><span class="keyword">val </span>input_string : string <span>&#45;&gt;</span> <a href="index.html#type-input">input</a></code></dt><dd><p>Create an input that will read from a string.</p></dd></dl><dl><dt class="spec value" id="val-output_string"><a href="#val-output_string" class="anchor"></a><code><span class="keyword">val </span>output_string : unit <span>&#45;&gt;</span> string <a href="index.html#type-output">output</a></code></dt><dd><p>Create an output that will write into a string in an efficient way. When closed, the output returns all the data written into it.</p></dd></dl><dl><dt class="spec value" id="val-on_close_out"><a href="#val-on_close_out" class="anchor"></a><code><span class="keyword">val </span>on_close_out : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dd><p>Register a function to be triggered just before an output is closed.</p></dd></dl><dl><dt class="spec value" id="val-create_in"><a href="#val-create_in" class="anchor"></a><code><span class="keyword">val </span>create_in : read:(unit <span>&#45;&gt;</span> char) <span>&#45;&gt;</span> input:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> close:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-input">input</a></code></dt><dd><p>Fully create an input by giving all the needed functions.</p><p><b>Note</b> Do <em>not</em> use this function for creating an input which reads from one or more underlying inputs. Rather, use <a href="index.html#val-wrap_in"><code>wrap_in</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-inherit_in"><a href="#val-inherit_in" class="anchor"></a><code><span class="keyword">val </span>inherit_in : ?&#8288;read:(unit <span>&#45;&gt;</span> char) <span>&#45;&gt;</span> ?&#8288;input:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> ?&#8288;close:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> <a href="index.html#type-input">input</a></code></dt><dd><p>Simplified and optimized version of <a href="index.html#val-wrap_in"><code>wrap_in</code></a> whenever only one input appears as dependency.</p></dd></dl><dl><dt class="spec value" id="val-wrap_in"><a href="#val-wrap_in" class="anchor"></a><code><span class="keyword">val </span>wrap_in : read:(unit <span>&#45;&gt;</span> char) <span>&#45;&gt;</span> input:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> close:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> underlying:<a href="index.html#type-input">input</a> list <span>&#45;&gt;</span> <a href="index.html#type-input">input</a></code></dt><dd><p>Fully create an input reading from other inputs by giving all the needed functions.</p><p>This function is a more general version of <a href="index.html#val-create_in"><code>create_in</code></a> which also handles dependency management between inputs.</p></dd></dl><dl><dt class="spec value" id="val-create_out"><a href="#val-create_out" class="anchor"></a><code><span class="keyword">val </span>create_out : write:(char <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> output:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> flush:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> close:(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-output">output</a></code></dt><dd><p>Fully create an output by giving all the needed functions.</p><dl><dt>parameter write</dt><dd><p>Write one character to the output (see <a href="index.html#val-write"><code>write</code></a>).</p></dd></dl><dl><dt>parameter output</dt><dd><p>Write a (sub)string to the output (see <a href="index.html#type-output"><code>output</code></a>).</p></dd></dl><dl><dt>parameter flush</dt><dd><p>Flush any buffers of this output (see <a href="index.html#val-flush"><code>flush</code></a>).</p></dd></dl><dl><dt>parameter close</dt><dd><p>Close this output. The output will be automatically flushed.</p><p><b>Note</b> Do <em>not</em> use this function for creating an output which writes to one or more underlying outputs. Rather, use <a href="index.html#val-wrap_out"><code>wrap_out</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-inherit_out"><a href="#val-inherit_out" class="anchor"></a><code><span class="keyword">val </span>inherit_out : ?&#8288;write:(char <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;output:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> ?&#8288;flush:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> ?&#8288;close:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> unit <a href="index.html#type-output">output</a></code></dt><dd><p>Simplified and optimized version of <a href="index.html#val-wrap_out"><code>wrap_out</code></a> whenever only one output appears as dependency.</p></dd></dl><dl><dt class="spec value" id="val-wrap_out"><a href="#val-wrap_out" class="anchor"></a><code><span class="keyword">val </span>wrap_out : write:(char <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> output:(Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> flush:(unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> close:(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> underlying:<span class="type-var">'b</span> <a href="index.html#type-output">output</a> list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-output">output</a></code></dt><dd><p>Fully create an output that writes to one or more underlying outputs.</p><p>This function is a more general version of <a href="index.html#val-create_out"><code>create_out</code></a>, which also handles dependency management between outputs.</p><p>To illustrate the need for dependency management, let us consider the following values:</p><ul><li>an output <code>out</code></li><li>a function <code>f : _ output -&gt; _ output</code>, using <a href="index.html#val-create_out"><code>create_out</code></a> to create a new output for writing some data to an underyling output (for instance, a function comparale to <code>tab_out</code> or a function performing transparent compression or transparent traduction between encodings)</li></ul><p>With these values, let us consider the following scenario</p><ul><li>a new output <code>f out</code> is created</li><li>some data is written to <code>f out</code> but not flushed</li><li>output <code>out</code> is closed, perhaps manually or as a consequence of garbage-collection, or because the program has ended</li><li>data written to <code>f out</code> is flushed.</li></ul><p>In this case, data reaches <code>out</code> only after <code>out</code> has been closed, which violates the protocol. Despite appearances, it is quite easy to reach such situation, especially in short programs.</p><p>The solution is to use <code>wrap_out</code> rather than <code>create_out</code> in <code>f</code>. Specifying that <code>f out</code> writes on <code>out</code> will then let the run-time flush and close <code>f out</code> when <code>out</code> is closed for any reason, which in turn avoids the issue.</p><dl><dt>parameter write</dt><dd><p>Write one character to the output (see <a href="index.html#val-write"><code>write</code></a>).</p></dd></dl><dl><dt>parameter output</dt><dd><p>Write a (sub)string to the output (see <a href="index.html#type-output"><code>output</code></a>).</p></dd></dl><dl><dt>parameter flush</dt><dd><p>Flush any buffers of this output (see <a href="index.html#val-flush"><code>flush</code></a>).</p></dd></dl><dl><dt>parameter close</dt><dd><p>Close this output. The output will be automatically flushed.</p></dd></dl><dl><dt>parameter underlying</dt><dd><p>The list of outputs to which the new output will write.</p><p><b>Note</b> Function <code>close</code> should <em>not</em> close <code>underlying</code> yourself. This is a common mistake which may cause sockets or standard output to be closed while they are still being used by another part of the program.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-default_buffer_size"><a href="#val-default_buffer_size" class="anchor"></a><code><span class="keyword">val </span>default_buffer_size : int</code></dt><dd><p>The default size of buffers.</p></dd></dl><section><header><h6 id="binary-files-api"><a href="#binary-files-api" class="anchor"></a>Binary files API</h6><p>Here is some API useful for working with binary files, in particular binary files generated by C applications. By default, encoding of multibyte integers is low-endian. The BigEndian module provide multibyte operations with other encoding.</p></header><dl><dt class="spec exception" id="exception-Overflow"><a href="#exception-Overflow" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Overflow</span><span class="keyword"> of </span>string</code></dt><dd><p>Exception raised when a read or write operation cannot be completed.</p></dd></dl><dl><dt class="spec value" id="val-read_byte"><a href="#val-read_byte" class="anchor"></a><code><span class="keyword">val </span>read_byte : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read an unsigned 8-bit integer.</p></dd></dl><dl><dt class="spec value" id="val-read_signed_byte"><a href="#val-read_signed_byte" class="anchor"></a><code><span class="keyword">val </span>read_signed_byte : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read an signed 8-bit integer.</p></dd></dl><dl><dt class="spec value" id="val-read_ui16"><a href="#val-read_ui16" class="anchor"></a><code><span class="keyword">val </span>read_ui16 : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read an unsigned 16-bit word.</p></dd></dl><dl><dt class="spec value" id="val-read_i16"><a href="#val-read_i16" class="anchor"></a><code><span class="keyword">val </span>read_i16 : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read a signed 16-bit word.</p></dd></dl><dl><dt class="spec value" id="val-read_i32"><a href="#val-read_i32" class="anchor"></a><code><span class="keyword">val </span>read_i32 : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read a signed 32-bit integer. </p><dl><dt>raises Overflow</dt><dd><p>if the read integer cannot be represented as an OCaml 31-bit integer.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-read_real_i32"><a href="#val-read_real_i32" class="anchor"></a><code><span class="keyword">val </span>read_real_i32 : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int32</code></dt><dd><p>Read a signed 32-bit integer as an OCaml int32.</p></dd></dl><dl><dt class="spec value" id="val-read_i64"><a href="#val-read_i64" class="anchor"></a><code><span class="keyword">val </span>read_i64 : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> int64</code></dt><dd><p>Read a signed 64-bit integer as an OCaml int64.</p></dd></dl><dl><dt class="spec value" id="val-read_float"><a href="#val-read_float" class="anchor"></a><code><span class="keyword">val </span>read_float : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Read an IEEE single precision floating point value.</p></dd></dl><dl><dt class="spec value" id="val-read_double"><a href="#val-read_double" class="anchor"></a><code><span class="keyword">val </span>read_double : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Read an IEEE double precision floating point value.</p></dd></dl><dl><dt class="spec value" id="val-read_string"><a href="#val-read_string" class="anchor"></a><code><span class="keyword">val </span>read_string : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Read a null-terminated string.</p></dd></dl><dl><dt class="spec value" id="val-read_line"><a href="#val-read_line" class="anchor"></a><code><span class="keyword">val </span>read_line : <a href="index.html#type-input">input</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Read a LF or CRLF terminated string.</p></dd></dl><dl><dt class="spec value" id="val-write_byte"><a href="#val-write_byte" class="anchor"></a><code><span class="keyword">val </span>write_byte : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an unsigned 8-bit byte.</p></dd></dl><dl><dt class="spec value" id="val-write_ui16"><a href="#val-write_ui16" class="anchor"></a><code><span class="keyword">val </span>write_ui16 : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an unsigned 16-bit word.</p></dd></dl><dl><dt class="spec value" id="val-write_i16"><a href="#val-write_i16" class="anchor"></a><code><span class="keyword">val </span>write_i16 : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a signed 16-bit word.</p></dd></dl><dl><dt class="spec value" id="val-write_i32"><a href="#val-write_i32" class="anchor"></a><code><span class="keyword">val </span>write_i32 : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a signed 32-bit integer.</p></dd></dl><dl><dt class="spec value" id="val-write_real_i32"><a href="#val-write_real_i32" class="anchor"></a><code><span class="keyword">val </span>write_real_i32 : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int32 <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an OCaml int32.</p></dd></dl><dl><dt class="spec value" id="val-write_i64"><a href="#val-write_i64" class="anchor"></a><code><span class="keyword">val </span>write_i64 : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> int64 <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an OCaml int64.</p></dd></dl><dl><dt class="spec value" id="val-write_double"><a href="#val-write_double" class="anchor"></a><code><span class="keyword">val </span>write_double : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an IEEE double precision floating point value.</p></dd></dl><dl><dt class="spec value" id="val-write_float"><a href="#val-write_float" class="anchor"></a><code><span class="keyword">val </span>write_float : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> unit</code></dt><dd><p>Write an IEEE single precision floating point value.</p></dd></dl><dl><dt class="spec value" id="val-write_string"><a href="#val-write_string" class="anchor"></a><code><span class="keyword">val </span>write_string : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a string and append an null character.</p></dd></dl><dl><dt class="spec value" id="val-write_line"><a href="#val-write_line" class="anchor"></a><code><span class="keyword">val </span>write_line : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Write a line and append a LF (it might be converted to CRLF on some systems depending on the underlying BatIO).</p></dd></dl><dl><dt class="spec external" id="val-cast_output"><a href="#val-cast_output" class="anchor"></a><code><span class="keyword">val </span>cast_output : <span class="type-var">'a</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> unit <a href="index.html#type-output">output</a></code></dt><dd><p>You can safely transform any output to an unit output in a safe way by using this function.</p></dd></dl></section><section><header><h6 id="for-compatibility-purposes"><a href="#for-compatibility-purposes" class="anchor"></a>For compatibility purposes</h6></header><dl><dt class="spec value" id="val-input_channel"><a href="#val-input_channel" class="anchor"></a><code><span class="keyword">val </span>input_channel : ?&#8288;autoclose:bool <span>&#45;&gt;</span> ?&#8288;cleanup:bool <span>&#45;&gt;</span> Pervasives.in_channel <span>&#45;&gt;</span> <a href="index.html#type-input">input</a></code></dt><dd><p>Create an input that will read from a channel.</p><dl><dt>parameter autoclose</dt><dd><p>If true or unspecified, the <a href="index.html#type-input"><code>input</code></a> will be automatically closed when the underlying <code>in_channel</code> has reached its end.</p></dd></dl><dl><dt>parameter cleanup</dt><dd><p>If true, the channel will be automatically closed when the <a href="index.html#type-input"><code>input</code></a> is closed. Otherwise, you will need to close the channel manually.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-output_channel"><a href="#val-output_channel" class="anchor"></a><code><span class="keyword">val </span>output_channel : ?&#8288;cleanup:bool <span>&#45;&gt;</span> Pervasives.out_channel <span>&#45;&gt;</span> unit <a href="index.html#type-output">output</a></code></dt><dd><p>Create an output that will write into a channel.</p><dl><dt>parameter cleanup</dt><dd><p>If true, the channel will be automatically closed when the <a href="index.html#type-output"><code>output</code></a> is closed. Otherwise, you will need to close the channel manually.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-stdin"><a href="#val-stdin" class="anchor"></a><code><span class="keyword">val </span>stdin : <a href="index.html#type-input">input</a></code></dt><dd><p>Standard input, as per Unix/Windows conventions (by default, keyboard).</p></dd></dl><dl><dt class="spec value" id="val-stdout"><a href="#val-stdout" class="anchor"></a><code><span class="keyword">val </span>stdout : unit <a href="index.html#type-output">output</a></code></dt><dd><p>Standard output, as per Unix/Windows conventions (by default, console).</p><p>Use this output to display regular messages.</p></dd></dl><dl><dt class="spec value" id="val-stderr"><a href="#val-stderr" class="anchor"></a><code><span class="keyword">val </span>stderr : unit <a href="index.html#type-output">output</a></code></dt><dd><p>Standard error output, as per Unix/Windows conventions.</p><p>Use this output to display warnings and error messages.</p></dd></dl><dl><dt class="spec value" id="val-stdnull"><a href="#val-stdnull" class="anchor"></a><code><span class="keyword">val </span>stdnull : unit <a href="index.html#type-output">output</a></code></dt><dd><p>An output which discards everything written to it.</p><p>Use this output to ignore messages.</p></dd></dl></section><section><header><h6 id="comparison"><a href="#comparison" class="anchor"></a>Comparison</h6><p>The following modules may be useful to create hashtables of inputs or outputs.</p></header><div class="spec module" id="module-Input"><a href="#module-Input" class="anchor"></a><code><span class="keyword">module </span><a href="Input/index.html">Input</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Output"><a href="#module-Output" class="anchor"></a><code><span class="keyword">module </span><a href="Output/index.html">Output</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>