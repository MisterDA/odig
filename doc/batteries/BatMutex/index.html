<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatMutex (batteries.BatMutex)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatMutex</nav><h1>Module <code>BatMutex</code></h1><p>Locks for mutual exclusion.</p><p>Mutexes (mutual-exclusion locks) are used to implement critical sections and protect shared mutable data structures against concurrent accesses. The typical use is (if <code>m</code> is the mutex associated with the data structure <code>D</code>):</p><pre><code class="ml">Mutex.synchronize ~lock:m (fun () -&gt;
  (* Critical section that operates over D *);
) ()</code></pre><p>This module implements <span class="xref-unresolved" title="unresolved reference to &quot;Control.Concurrency.Common&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Control.Concurrency&quot;"><code>Control</code>.Concurrency</span>.Common</span></p><dl><dt>author</dt><dd>Xavier Leroy (Base module)</dd></dl><dl><dt>author</dt><dd>Damien Doligez (Base module)</dd></dl><dl><dt>author</dt><dd>David Teller</dd></dl></header><dl><dt class="spec value" id="val-synchronize"><a href="#val-synchronize" class="anchor"></a><code><span class="keyword">val </span>synchronize : ?&#8288;lock:Mutex.t <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Protect a function.</p><p><code>synchronize f</code> returns a new function <code>f'</code> with the same behavior as <code>f</code> but such that concurrent calls to <code>f'</code> are queued if necessary to avoid races.</p><p><code>synchronize ~lock:l f</code> behaves as <code>synchronize f</code> but uses a user-specified lock <code>l</code>, which may be useful to share a lock between several function. This is necessary in particular when the lock is specific to a data structure rather than to a function.</p><p>In either case, the lock is acquired when entering the function and released when the function call ends, whether this is due to normal termination or to some exception being raised.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val </span>make : unit <span>&#45;&gt;</span> BatConcurrent.lock</code></dt><dd><p>Create a new abstract lock based on Mutexes.</p></dd></dl><dl><dt class="spec module" id="module-DebugMutex"><a href="#module-DebugMutex" class="anchor"></a><code><span class="keyword">module </span><a href="DebugMutex/index.html">DebugMutex</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>/*</p></dd></dl></div></body></html>