<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatOption (batteries.BatOption)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatOption</nav><h1>Module <code>BatOption</code></h1><p>Functions for the option type.</p><p>Options are an Ocaml standard type that can be either <code>None</code> (undefined) or <code>Some x</code> where x can be any value. Options are widely used in Ocaml to represent undefined values (a little like NULL in C, but in a type and memory safe way). This module adds some functions for working with options.</p><dl><dt>author</dt><dd>Nicolas Cannasse</dd></dl><dl><dt>author</dt><dd>David Teller</dd></dl><nav class="toc"><ul><li><a href="#the-option-monad">The Option Monad</a></li><li><a href="#boilerplate-code">Boilerplate code</a></li><li><a href="#printing">Printing</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code><code> = <span class="type-var">'a</span> option</code></dt></dl><dl><dt class="spec value" id="val-some"><a href="#val-some" class="anchor"></a><code><span class="keyword">val</span> some : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>some x</code> returns <code>Some x</code>.</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-may"><a href="#val-may" class="anchor"></a><code><span class="keyword">val</span> may : (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> unit</code></dt><dd><p><code>may f (Some x)</code> calls <code>f x</code> and <code>may f None</code> does nothing.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span> option</code></dt><dd><p><code>map f (Some x)</code> returns <code>Some (f x)</code> and <code>map f None</code> returns <code>None</code>.</p></dd></dl><dl><dt class="spec value" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val</span> bind : <span class="type-var">'a</span> option <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'b</span> option</code></dt><dd><p><code>bind (Some x) f</code> returns <code>f x</code> and <code>bind None f</code> returns <code>None</code>.</p><p>@example &quot;Our functions return option types. Compose them to propagate <code>None</code>.&quot;</p><pre><code class="ml">let pick_long case =
  try
    Some (List.find (fun data -&gt; List.length data &gt; 1000) case)
  with Not_found -&gt; None
let last_null data = List.rindex_of 0 data
let interesting_positions dataset =
  List.filter_map
    (fun case -&gt; Option.bind last_null (pick_long case))
    dataset</code></pre></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) option <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>apply None x</code> returns <code>x</code> and <code>apply (Some f) x</code> returns <code>f x</code></p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>filter f None</code> returns <code>None</code>, <code>filter f (Some x)</code> returns <code>Some x</code> if <code>f x</code> is true, and <code>None</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>default x (Some v)</code> returns <code>v</code> and <code>default x None</code> returns <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-(|?)"><a href="#val-(|?)" class="anchor"></a><code><span class="keyword">val</span> (|?) : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Like <a href="index.html#val-default"><code>default</code></a>, with the arguments reversed. <code>None |? 10</code> returns <code>10</code>, while <code>Some &quot;foo&quot; |? &quot;bar&quot;</code> returns <code>&quot;foo&quot;</code>.</p><p><b>Note</b> This operator does not short circuit like <code>( || )</code> and <code>( &amp;&amp; )</code>. Both arguments will be evaluated.</p><dl><dt>since</dt><dd>2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-default_delayed"><a href="#val-default_delayed" class="anchor"></a><code><span class="keyword">val</span> default_delayed : (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Like <a href="index.html#val-default"><code>default</code></a>, but the default value is passed as a thunk that is only computed if needed.</p><dl><dt>since</dt><dd>2.1</dd></dl></dd></dl><dl><dt class="spec value" id="val-map_default"><a href="#val-map_default" class="anchor"></a><code><span class="keyword">val</span> map_default : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>map_default f x (Some v)</code> returns <code>f v</code> and <code>map_default f x None</code> returns <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-map_default_delayed"><a href="#val-map_default_delayed" class="anchor"></a><code><span class="keyword">val</span> map_default_delayed : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Like <a href="index.html#val-map_default"><code>map_default</code></a>, but the default value is passed as a thunk that is only computed if needed.</p><dl><dt>since</dt><dd>2.1</dd></dl></dd></dl><dl><dt class="spec value" id="val-is_none"><a href="#val-is_none" class="anchor"></a><code><span class="keyword">val</span> is_none : <span class="type-var">'a</span> option <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_none None</code> returns <code>true</code> otherwise it returns <code>false</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_some"><a href="#val-is_some" class="anchor"></a><code><span class="keyword">val</span> is_some : <span class="type-var">'a</span> option <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_some (Some x)</code> returns <code>true</code> otherwise it returns <code>false</code>.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>get (Some x)</code> returns <code>x</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>on <code>get None</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-get_exn"><a href="#val-get_exn" class="anchor"></a><code><span class="keyword">val</span> get_exn : <span class="type-var">'a</span> option <span>&#45;&gt;</span> exn <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>get_exn (Some x) e</code> returns <code>x</code> and <code>get_exn None e</code> raises <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : ?&#8288;cmp:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> int</code></dt><dd><p>Compare two options, possibly using custom comparators for the value. <code>None</code> is always assumed to be less than <code>Some _</code>. The parameter <code>cmp</code> defaults to <code>Pervasives.compare</code>.</p></dd></dl><dl><dt class="spec value" id="val-eq"><a href="#val-eq" class="anchor"></a><code><span class="keyword">val</span> eq : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> bool</code></dt><dd><p>Test for equality between option types, possibly using a custom equality predicate. The parameter <code>eq</code> defaults to <code>Pervasives.(=)</code>.</p><dl><dt>since</dt><dd>1.4.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-enum"><a href="#val-enum" class="anchor"></a><code><span class="keyword">val</span> enum : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p><code>enum (Some x)</code> returns the singleton <code>x</code>, while <code>enum None</code> returns the empty enumeration.</p></dd></dl><dl><dt class="spec value" id="val-of_enum"><a href="#val-of_enum" class="anchor"></a><code><span class="keyword">val</span> of_enum : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>of_enum e</code> consumes the first element of <code>e</code>, if it exists, and returns <code>Some e</code>. If <code>e</code> is empty, return <code>None</code>.</p></dd></dl><section><header><h6 id="the-option-monad"><a href="#the-option-monad" class="anchor"></a>The Option Monad</h6></header><dl><dt class="spec module" id="module-Monad"><a href="#module-Monad" class="anchor"></a><code><span class="keyword">module</span> <a href="Monad/index.html">Monad</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>This module provides everything needed to write and execute computations in the Option monad.</p></dd></dl></section><section><header><h6 id="boilerplate-code"><a href="#boilerplate-code" class="anchor"></a>Boilerplate code</h6></header><dl><dt class="spec value" id="val-ord"><a href="#val-ord" class="anchor"></a><code><span class="keyword">val</span> ord : <span class="type-var">'a</span> <a href="../BatOrd/index.html#type-ord">BatOrd.ord</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="../BatOrd/index.html#type-ord">BatOrd.ord</a></code></dt><dd><p>Comparison between optional values</p><dl><dt>since</dt><dd>2.2.0</dd></dl></dd></dl></section><section><header><h6 id="printing"><a href="#printing" class="anchor"></a>Printing</h6></header><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val</span> print : (<span class="type-var">'a</span> <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec module" id="module-Labels"><a href="#module-Labels" class="anchor"></a><code><span class="keyword">module</span> <a href="Labels/index.html">Labels</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Operations on options, with labels.</p></dd></dl><div class="spec module" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span class="keyword">module</span> <a href="Infix/index.html">Infix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>