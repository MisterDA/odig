<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>BatPervasives (batteries.BatPervasives)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">batteries</a> &#x00BB; BatPervasives</nav><h1>Module <code>BatPervasives</code></h1><h6 id="additional-functions."><a href="#additional-functions." class="anchor"></a>Additional functions.</h6><dl><dt>author</dt><dd>Xavier Leroy (Base module)</dd></dl><dl><dt>author</dt><dd>Nicolas Cannasse</dd></dl><dl><dt>author</dt><dd>David Teller</dd></dl><dl><dt>author</dt><dd>Zheng Li</dd></dl><nav class="toc"><ul><li><a href="#list-operations">List operations</a></li><li><a href="#input/output">Input/output</a></li><li><a href="#output-functions-on-standard-output">Output functions on standard output</a></li><li><a href="#output-functions-on-standard-error">Output functions on standard error</a></li><li><a href="#general-output-functions">General output functions</a></li><li><a href="#general-input-functions">General input functions</a></li><li><a href="#fundamental-functions-and-operators">Fundamental functions and operators</a></li><li><a href="#enumerations">Enumerations</a></li><li><a href="#general-purpose-loops">General-purpose loops</a></li><li><a href="#other-operations-on-enumerations">Other operations on enumerations</a></li><li><a href="#results">Results</a></li><li><a href="#thread-safety-internals">Thread-safety internals</a></li></ul></nav></header><aside><p>The initially opened module.</p><p>This module provides the basic operations over the built-in types (numbers, booleans, strings, exceptions, references, lists, arrays, input-output channels, ...)</p><p>This module is automatically opened at the beginning of each compilation. All components of this module can therefore be referred by their short name, without prefixing them by <code>BatPervasives</code>.</p><dl><dt>author</dt><dd>Xavier Leroy (Base module)</dd></dl><dl><dt>author</dt><dd>Nicolas Cannasse</dd></dl><dl><dt>author</dt><dd>David Teller</dd></dl><dl><dt>author</dt><dd>Zheng Li</dd></dl></aside><dl><dt class="spec value" id="val-input_lines"><a href="#val-input_lines" class="anchor"></a><code><span class="keyword">val</span> input_lines : <a href="../../ocaml/Stdlib/Pervasives/index.html#type-in_channel">Stdlib.Pervasives.in_channel</a> <span>&#45;&gt;</span> string <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Returns an enumeration over lines of an input channel, as read by the <code>input_line</code> function.</p></dd></dl><dl><dt class="spec value" id="val-input_chars"><a href="#val-input_chars" class="anchor"></a><code><span class="keyword">val</span> input_chars : <a href="../../ocaml/Stdlib/Pervasives/index.html#type-in_channel">Stdlib.Pervasives.in_channel</a> <span>&#45;&gt;</span> char <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Returns an enumeration over characters of an input channel.</p></dd></dl><dl><dt class="spec value" id="val-input_list"><a href="#val-input_list" class="anchor"></a><code><span class="keyword">val</span> input_list : <a href="../../ocaml/Stdlib/Pervasives/index.html#type-in_channel">Stdlib.Pervasives.in_channel</a> <span>&#45;&gt;</span> string list</code></dt><dd><p>Returns the list of lines read from an input channel.</p></dd></dl><dl><dt class="spec value" id="val-input_all"><a href="#val-input_all" class="anchor"></a><code><span class="keyword">val</span> input_all : <a href="../../ocaml/Stdlib/Pervasives/index.html#type-in_channel">Stdlib.Pervasives.in_channel</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Return the whole contents of an input channel as a single string.</p></dd></dl><dl><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val</span> dump : <span class="type-var">'a</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Attempt to convert a value to a string.</p><p>Works well for a lot of cases such as non-empty lists, algebraic datatype, and records.</p><p>However, since types are lost at compile-time, the representation might not match your type. (0, 1) will be printed as expected, but (1, 0) and <code>1</code> have the same representation and will get printed in the same way. The result of <code>dump</code> is unspecified and may change in future versions, so you should only use it for debugging and never have program behavior depend on the output.</p><p>Here is a list of some of the surprising corner cases of the current implementation:</p><ul><li>(3, 0) is printed <code>3</code>, (0.5, 0) is printed <code>0.5</code>, etc.</li><li>None, false and <code></code> are printed 0</li></ul><p><code>dump</code> may fail for ill-formed values, such as obtained from a faulty C binding or crazy uses of <code>Obj.set_tag</code>.</p></dd></dl><dl><dt class="spec value" id="val-print_any"><a href="#val-print_any" class="anchor"></a><code><span class="keyword">val</span> print_any : <span class="type-var">'b</span> <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Attempt to print a value to an output.</p><p>Uses <code>dump</code> to convert the value to a string and prints that string to the output.</p></dd></dl><section><header><h6 id="list-operations"><a href="#list-operations" class="anchor"></a>List operations</h6><p>More list operations are provided in module <code>List</code>.</p></header><dl><dt class="spec value" id="val-(@)"><a href="#val-(@)" class="anchor"></a><code><span class="keyword">val</span> (@) : <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span> list</code></dt><dd><p>List concatenation.</p></dd></dl></section><section><header><h6 id="input/output"><a href="#input/output" class="anchor"></a>Input/output</h6><p>This section only contains the most common input/output operations. More operations may be found in modules <a href="../BatIO/index.html"><code>BatIO</code></a> and <code>File</code>.</p></header><dl><dt class="spec value" id="val-stdin"><a href="#val-stdin" class="anchor"></a><code><span class="keyword">val</span> stdin : <a href="../BatIO/index.html#type-input">BatIO.input</a></code></dt><dd><p>Standard input, as per Unix/Windows conventions (by default, keyboard).</p><p>Use this input to read what the user is writing on the keyboard.</p></dd></dl><dl><dt class="spec value" id="val-stdout"><a href="#val-stdout" class="anchor"></a><code><span class="keyword">val</span> stdout : unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p>Standard output, as per Unix/Windows conventions (by default, console).</p><p>Use this output to display regular messages.</p></dd></dl><dl><dt class="spec value" id="val-stderr"><a href="#val-stderr" class="anchor"></a><code><span class="keyword">val</span> stderr : unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p>Standard error output, as per Unix/Windows conventions.</p><p>Use this output to display warnings and error messages.</p></dd></dl><dl><dt class="spec value" id="val-stdnull"><a href="#val-stdnull" class="anchor"></a><code><span class="keyword">val</span> stdnull : unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p>An output which discards everything written to it.</p><p>Use this output to ignore messages.</p></dd></dl><dl><dt class="spec value" id="val-flush_all"><a href="#val-flush_all" class="anchor"></a><code><span class="keyword">val</span> flush_all : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Write all pending data to output channels, ignore all errors.</p><p>It is normally not necessary to call this function, as all pending data is written when an output channel is closed or when the program itself terminates, either normally or because of an uncaught exception. However, this function is useful for debugging, as it forces pending data to be written immediately.</p></dd></dl></section><section><header><h6 id="output-functions-on-standard-output"><a href="#output-functions-on-standard-output" class="anchor"></a>Output functions on standard output</h6></header><dl><dt class="spec value" id="val-print_bool"><a href="#val-print_bool" class="anchor"></a><code><span class="keyword">val</span> print_bool : bool <span>&#45;&gt;</span> unit</code></dt><dd><p>Print a boolean on standard output.</p></dd></dl><dl><dt class="spec value" id="val-print_guess"><a href="#val-print_guess" class="anchor"></a><code><span class="keyword">val</span> print_guess : <span class="type-var">'a</span> <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Attempt to print the representation of a runtime value on the standard output. See remarks for <a href="index.html#val-dump"><code>dump</code></a>. This function is useful mostly for debugging. As a general rule, it should not be used in production code.</p></dd></dl><dl><dt class="spec value" id="val-print_all"><a href="#val-print_all" class="anchor"></a><code><span class="keyword">val</span> print_all : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Print the contents of an input to the standard output.</p></dd></dl></section><section><header><h6 id="output-functions-on-standard-error"><a href="#output-functions-on-standard-error" class="anchor"></a>Output functions on standard error</h6></header><dl><dt class="spec value" id="val-prerr_bool"><a href="#val-prerr_bool" class="anchor"></a><code><span class="keyword">val</span> prerr_bool : bool <span>&#45;&gt;</span> unit</code></dt><dd><p>Print a boolean to stderr.</p></dd></dl><dl><dt class="spec value" id="val-prerr_guess"><a href="#val-prerr_guess" class="anchor"></a><code><span class="keyword">val</span> prerr_guess : <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Attempt to print the representation of a runtime value on the error output. See remarks for <a href="index.html#val-dump"><code>dump</code></a>. This function is useful mostly for debugging.</p></dd></dl><dl><dt class="spec value" id="val-prerr_all"><a href="#val-prerr_all" class="anchor"></a><code><span class="keyword">val</span> prerr_all : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Print the contents of an input to the error output.</p></dd></dl></section><section><header><h6 id="general-output-functions"><a href="#general-output-functions" class="anchor"></a>General output functions</h6></header><dl><dt class="spec value" id="val-output_file"><a href="#val-output_file" class="anchor"></a><code><span class="keyword">val</span> output_file : filename:string <span>&#45;&gt;</span> text:string <span>&#45;&gt;</span> unit</code></dt><dd><p>creates a filename, write text into it and close it.</p></dd></dl><dl><dt class="spec value" id="val-open_out"><a href="#val-open_out" class="anchor"></a><code><span class="keyword">val</span> open_out : ?&#8288;mode:<a href="../BatFile/index.html#type-open_out_flag">BatFile.open_out_flag</a> list <span>&#45;&gt;</span> ?&#8288;perm:<a href="../BatFile/index.html#type-permission">BatFile.permission</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p>Open the named file for writing, and return a new output channel on that file. You will need to close the file once you have finished using it.</p><p>You may use optional argument <code>mode</code> to decide whether the output will overwrite the contents of the file (by default) or to add things at the end of the file, whether the file should be created if it does not exist yet (the default) or not, whether this operation should proceed if the file exists already (the default) or not, whether the file should be opened as text (the default) or as binary, and whether the file should be opened for non-blocking operations.</p><p>You may use optional argument <code>perm</code> to specify the permissions of the file, as per Unix conventions. By default, files are created with default permissions (which depend on your setup).</p><dl><dt>raises Sys_error</dt><dd><p>if the file could not be opened.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-open_out_bin"><a href="#val-open_out_bin" class="anchor"></a><code><span class="keyword">val</span> open_out_bin : string <span>&#45;&gt;</span> unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p>Same as <a href="index.html#val-open_out"><code>open_out</code></a>, but the file is opened in binary mode, so that no translation takes place during writes. On operating systems that do not distinguish between text mode and binary mode, this function behaves like <a href="index.html#val-open_out"><code>open_out</code></a> without any <code>mode</code> or <code>perm</code>.</p></dd></dl><dl><dt class="spec value" id="val-open_out_gen"><a href="#val-open_out_gen" class="anchor"></a><code><span class="keyword">val</span> open_out_gen : <a href="../../ocaml/Stdlib/index.html#type-open_flag">Stdlib.open_flag</a> list <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit <a href="../BatIO/index.html#type-output">BatIO.output</a></code></dt><dd><p><code>open_out_gen mode perm filename</code> opens the named file for writing, as described above. The extra argument <code>mode</code> specifies the opening mode. The extra argument <code>perm</code> specifies the file permissions, in case the file must be created.</p><dl><dt>deprecated</dt><dd><p>Use <code>open_out instead</code></p></dd></dl></dd></dl><dl><dt class="spec value" id="val-flush"><a href="#val-flush" class="anchor"></a><code><span class="keyword">val</span> flush : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Flush the buffer associated with the given output, performing all pending writes on that channel. Interactive programs must be careful about flushing standard output and standard error at the right time.</p></dd></dl><dl><dt class="spec value" id="val-output_char"><a href="#val-output_char" class="anchor"></a><code><span class="keyword">val</span> output_char : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> char <span>&#45;&gt;</span> unit</code></dt><dd><p>Write the character on the given output channel.</p></dd></dl><dl><dt class="spec value" id="val-output_string"><a href="#val-output_string" class="anchor"></a><code><span class="keyword">val</span> output_string : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p>Write the string on the given output channel.</p></dd></dl><dl><dt class="spec value" id="val-output"><a href="#val-output" class="anchor"></a><code><span class="keyword">val</span> output : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>output oc buf pos len</code> writes <code>len</code> characters from byte sequence <code>buf</code>, starting at offset <code>pos</code>, to the given output channel <code>oc</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pos</code> and <code>len</code> do not designate a valid subsequence of <code>buf</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-output_substring"><a href="#val-output_substring" class="anchor"></a><code><span class="keyword">val</span> output_substring : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>output_substring oc buf pos len</code> writes <code>len</code> characters from string <code>buf</code>, starting at offset <code>pos</code>, to the given output channel <code>oc</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pos</code> and <code>len</code> do not designate a valid substring of <code>buf</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-output_byte"><a href="#val-output_byte" class="anchor"></a><code><span class="keyword">val</span> output_byte : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write one 8-bit integer (as the single character with that code) on the given output channel. The given integer is taken modulo 256.</p></dd></dl><dl><dt class="spec value" id="val-output_binary_int"><a href="#val-output_binary_int" class="anchor"></a><code><span class="keyword">val</span> output_binary_int : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p>Write one integer in binary format (4 bytes, big-endian) on the given output channel. The given integer is taken modulo 2<sup>32</sup>. The only reliable way to read it back is through the <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.input_binary_int&quot;"><code>Pervasives</code>.input_binary_int</span> function. The format is compatible across all machines for a given version of OCaml.</p></dd></dl><dl><dt class="spec value" id="val-output_binary_float"><a href="#val-output_binary_float" class="anchor"></a><code><span class="keyword">val</span> output_binary_float : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> float <span>&#45;&gt;</span> unit</code></dt><dd><p>Write one float in binary format (8 bytes, IEEE 754 double format) on the given output channel. The only reliable way to read it back is through the <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.input_binary_float&quot;"><code>Pervasives</code>.input_binary_float</span> function. The format is compatible across all machines for a given version of OCaml.</p></dd></dl><dl><dt class="spec value" id="val-output_value"><a href="#val-output_value" class="anchor"></a><code><span class="keyword">val</span> output_value : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Write the representation of a structured value of any type to a channel. Circularities and sharing inside the value are detected and preserved. The object can be read back, by the function <a href="index.html#val-input_value"><code>input_value</code></a>. See the description of module <code>Marshal</code> for more information. <a href="index.html#val-output_value"><code>output_value</code></a> is equivalent to <span class="xref-unresolved" title="unresolved reference to &quot;Marshal.output&quot;"><code>Marshal</code>.output</span> with an empty list of flags.</p></dd></dl><dl><dt class="spec value" id="val-close_out"><a href="#val-close_out" class="anchor"></a><code><span class="keyword">val</span> close_out : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Close the given channel, flushing all buffered write operations. Output functions raise a <code>Sys_error</code> exception when they are applied to a closed output channel, except <code>close_out</code> and <code>flush</code>, which do nothing when applied to an already closed channel.</p><dl><dt>raises Sys_error</dt><dd><p>if the operating system signals an error when flushing or closing.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-close_out_noerr"><a href="#val-close_out_noerr" class="anchor"></a><code><span class="keyword">val</span> close_out_noerr : unit <a href="../BatIO/index.html#type-output">BatIO.output</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Same as <code>close_out</code>, but ignore all errors.</p></dd></dl></section><section><header><h6 id="general-input-functions"><a href="#general-input-functions" class="anchor"></a>General input functions</h6></header><dl><dt class="spec value" id="val-input_file"><a href="#val-input_file" class="anchor"></a><code><span class="keyword">val</span> input_file : ?&#8288;bin:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>returns the data of a given filename.</p></dd></dl><dl><dt class="spec value" id="val-open_in"><a href="#val-open_in" class="anchor"></a><code><span class="keyword">val</span> open_in : ?&#8288;mode:<a href="../BatFile/index.html#type-open_in_flag">BatFile.open_in_flag</a> list <span>&#45;&gt;</span> ?&#8288;perm:<a href="../BatFile/index.html#type-permission">BatFile.permission</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../BatIO/index.html#type-input">BatIO.input</a></code></dt><dd><p>Open the named file for reading. You will need to close the file once you have finished using it.</p><p>You may use optional argument <code>mode</code> to decide whether the opening should fail if the file doesn't exist yet (by default) or whether the file should be created if it doesn't exist yet, whether the opening should fail if the file already exists or not (by default), whether the file should be read as binary (by default) or as text, and whether reading should be non-blocking.</p><p>You may use optional argument <code>perm</code> to specify the permissions of the file, should it be created, as per Unix conventions. By default, files are created with default permissions (which depend on your setup).</p><dl><dt>raises Sys_error</dt><dd><p>if the file could not be opened.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-open_in_bin"><a href="#val-open_in_bin" class="anchor"></a><code><span class="keyword">val</span> open_in_bin : string <span>&#45;&gt;</span> <a href="../BatIO/index.html#type-input">BatIO.input</a></code></dt><dd><p>Same as <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.open_in&quot;"><code>Pervasives</code>.open_in</span>, but the file is opened in binary mode, so that no translation takes place during reads. On operating systems that do not distinguish between text mode and binary mode, this function behaves like <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.open_in&quot;"><code>Pervasives</code>.open_in</span>.</p></dd></dl><dl><dt class="spec value" id="val-open_in_gen"><a href="#val-open_in_gen" class="anchor"></a><code><span class="keyword">val</span> open_in_gen : <a href="../../ocaml/Stdlib/index.html#type-open_flag">Stdlib.open_flag</a> list <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../BatIO/index.html#type-input">BatIO.input</a></code></dt><dd><p><code>open_in_gen mode perm filename</code> opens the named file for reading, as described above. The extra arguments <code>mode</code> and <code>perm</code> specify the opening mode and file permissions. <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.open_in&quot;"><code>Pervasives</code>.open_in</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.open_in_bin&quot;"><code>Pervasives</code>.open_in_bin</span> are special cases of this function.</p><dl><dt>deprecated</dt><dd><p>Use <code>open_in instead</code></p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_char"><a href="#val-input_char" class="anchor"></a><code><span class="keyword">val</span> input_char : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> char</code></dt><dd><p>Read one character from the given input channel.</p><dl><dt>raises End_of_file</dt><dd><p>if there are no more characters to read.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_line"><a href="#val-input_line" class="anchor"></a><code><span class="keyword">val</span> input_line : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Read characters from the given input channel, until a newline character is encountered. Return the string of all characters read, without the newline character at the end.</p><dl><dt>raises End_of_file</dt><dd><p>if the end of the file is reached at the beginning of line.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input"><a href="#val-input" class="anchor"></a><code><span class="keyword">val</span> input : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int</code></dt><dd><p><code>input ic buf pos len</code> reads up to <code>len</code> characters from the given channel <code>ic</code>, storing them in byte sequence <code>buf</code>, starting at character number <code>pos</code>. It returns the actual number of characters read, between 0 and <code>len</code> (inclusive). A return value of 0 means that the end of file was reached. A return value between 0 and <code>len</code> exclusive means that not all requested <code>len</code> characters were read, either because no more characters were available at that time, or because the implementation found it convenient to do a partial read; <code>input</code> must be called again to read the remaining characters, if desired. (See also <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.really_input&quot;"><code>Pervasives</code>.really_input</span> for reading exactly <code>len</code> characters.)</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pos</code> and <code>len</code> do not designate a valid subsequence of <code>buf</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-really_input"><a href="#val-really_input" class="anchor"></a><code><span class="keyword">val</span> really_input : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>really_input ic buf pos len</code> reads <code>len</code> characters from channel <code>ic</code>, storing them in byte sequence <code>buf</code>, starting at character number <code>pos</code>. </p><dl><dt>raises End_of_file</dt><dd><p>if the end of file is reached before <code>len</code> characters have been read.</p></dd></dl><dl><dt>raises Invalid_argument</dt><dd><p>if <code>pos</code> and <code>len</code> do not designate a valid subsequence of <code>buf</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_byte"><a href="#val-input_byte" class="anchor"></a><code><span class="keyword">val</span> input_byte : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Same as <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.input_char&quot;"><code>Pervasives</code>.input_char</span>, but return the 8-bit integer representing the character.</p><dl><dt>raises End_of_file</dt><dd><p>if an end of file was reached.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_binary_int"><a href="#val-input_binary_int" class="anchor"></a><code><span class="keyword">val</span> input_binary_int : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Read an integer encoded in binary format (4 bytes, big-endian) from the given input channel. See <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.output_binary_int&quot;"><code>Pervasives</code>.output_binary_int</span>.</p><dl><dt>raises End_of_file</dt><dd><p>if an end of file was reached while reading the integer.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_binary_float"><a href="#val-input_binary_float" class="anchor"></a><code><span class="keyword">val</span> input_binary_float : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> float</code></dt><dd><p>Read a float encoded in binary format (8 bytes, IEEE 754 double format) from the given input channel. See <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.output_binary_float&quot;"><code>Pervasives</code>.output_binary_float</span>.</p><dl><dt>raises End_of_file</dt><dd><p>if an end of file was reached while reading the float.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-input_value"><a href="#val-input_value" class="anchor"></a><code><span class="keyword">val</span> input_value : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Read the representation of a structured value, as produced by <a href="index.html#val-output_value"><code>output_value</code></a>, and return the corresponding value. This function is identical to <span class="xref-unresolved" title="unresolved reference to &quot;Marshal.input&quot;"><code>Marshal</code>.input</span>; see the description of module <code>Marshal</code> for more information, in particular concerning the lack of type safety.</p></dd></dl><dl><dt class="spec value" id="val-close_in"><a href="#val-close_in" class="anchor"></a><code><span class="keyword">val</span> close_in : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Close the given channel. Input functions raise a <code>Sys_error</code> exception when they are applied to a closed input channel, except <code>close_in</code>, which does nothing when applied to an already closed channel.</p><dl><dt>raises Sys_error</dt><dd><p>if the operating system signals an error.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-close_in_noerr"><a href="#val-close_in_noerr" class="anchor"></a><code><span class="keyword">val</span> close_in_noerr : <a href="../BatIO/index.html#type-input">BatIO.input</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Same as <code>close_in</code>, but ignore all errors.</p></dd></dl></section><section><header><h6 id="fundamental-functions-and-operators"><a href="#fundamental-functions-and-operators" class="anchor"></a>Fundamental functions and operators</h6></header><dl><dt class="spec external" id="val-identity"><a href="#val-identity" class="anchor"></a><code><span class="keyword">val</span> identity : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>The identity function.</p></dd></dl><dl><dt class="spec value" id="val-undefined"><a href="#val-undefined" class="anchor"></a><code><span class="keyword">val</span> undefined : ?&#8288;message:string <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>The undefined function.</p><p>Evaluating <code>undefined x</code> always fails and raises an exception &quot;Undefined&quot;. Optional argument <code>message</code> permits the customization of the error message.</p></dd></dl><dl><dt class="spec external" id="val-(@@)"><a href="#val-(@@)" class="anchor"></a><code><span class="keyword">val</span> (@@) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt></dl><aside><p>Function application. <code>f @@ x</code> is equivalent to <code>f x</code>. However, it binds less tightly (between <code>::</code> and <code>=</code>,<code>&lt;</code>,<code>&gt;</code>,etc) and is right-associative, which makes it useful for composing sequences of function calls without too many parentheses. It is similar to Haskell's <code>$</code>. Note that it replaces pre-2.0 <code>**&gt;</code> and <code>&lt;|</code>.</p></aside><dl><dt class="spec value" id="val-(%)"><a href="#val-(%)" class="anchor"></a><code><span class="keyword">val</span> (%) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> (<span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Function composition: the mathematical <code>o</code> operator. <code>f % g</code> is <code>fun x -&gt; f (g x)</code>. It is similar to Haskell's <code>.</code>.</p><p>Examples: the following are equivalent: <code>f (g (h x))</code>, <code>f @@ g @@ h x</code>, <code>f % g % h @@ x</code>.</p></dd></dl><dl><dt class="spec external" id="val-(|&gt;)"><a href="#val-(|&gt;)" class="anchor"></a><code><span class="keyword">val</span> (|&gt;) : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>The &quot;pipe&quot;: function application. <code>x |&gt; f</code> is equivalent to <code>f x</code>.</p><p>This operator is commonly used to write a function composition by order of evaluation (the order used in object-oriented programming) rather than by inverse order (the order typically used in functional programming).</p><p>For instance, <code>g (f x)</code> means &quot;apply <code>f</code> to <code>x</code>, then apply <code>g</code> to the result.&quot; The corresponding notation in most object-oriented programming languages would be somewhere along the lines of <code>x.f.g.h()</code>, or &quot;starting from <code>x</code>, apply <code>f</code>, then apply <code>g</code>.&quot; In OCaml, using the ( |&gt; ) operator, this is written <code>x |&gt; f |&gt; g |&gt; h</code>.</p><p>This operator may also be useful for composing sequences of function calls without too many parentheses.</p></dd></dl><dl><dt class="spec value" id="val-(%&gt;)"><a href="#val-(%&gt;)" class="anchor"></a><code><span class="keyword">val</span> (%&gt;) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p>Piping function composition. <code>f %&gt; g</code> is <code>fun x -&gt; g (f x)</code>. Whereas <code>f % g</code> applies <code>g</code> first and <code>f</code> second, <code>f %&gt; g</code> applies <code>f</code>, then <code>g</code>. Note that it plays well with pipes, so for instance <code>x |&gt; f %&gt; g %&gt; h |&gt; i %&gt; j</code> yields the expected result... but in such cases it's still recommended to use <code>|&gt;</code> only. Note that it replaces pre-2.0 <code>|-</code>, which <i>didn't</i> integrate with pipes.</p></dd></dl><dl><dt class="spec value" id="val-(|?)"><a href="#val-(|?)" class="anchor"></a><code><span class="keyword">val</span> (|?) : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Like <a href="../BatOption/index.html#val-default"><code>BatOption.default</code></a>, with the arguments reversed. <code>None |? 10</code> returns <code>10</code>, while <code>Some &quot;foo&quot; |? &quot;bar&quot;</code> returns <code>&quot;foo&quot;</code>.</p><p><b>Note</b> This operator does not short circuit like <code>( || )</code> and <code>( &amp;&amp; )</code>. Both arguments will be evaluated.</p><dl><dt>since</dt><dd>2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-flip"><a href="#val-flip" class="anchor"></a><code><span class="keyword">val</span> flip : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p>Argument flipping.</p><p><code>flip f x y</code> is <code>f y x</code>. Don't abuse this function, it may shorten considerably your code but it also has the nasty habit of making it harder to read.</p></dd></dl><dl><dt class="spec value" id="val-curry"><a href="#val-curry" class="anchor"></a><code><span class="keyword">val</span> curry : ((<span class="type-var">'a</span> * <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p>Convert a function which accepts a pair of arguments into a function which accepts two arguments.</p><p><code>curry f</code> is <code>fun x y -&gt; f (x,y)</code></p></dd></dl><dl><dt class="spec value" id="val-uncurry"><a href="#val-uncurry" class="anchor"></a><code><span class="keyword">val</span> uncurry : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p>Convert a function which accepts a two arguments into a function which accepts a pair of arguments.</p><p><code>uncurry f</code> is <code>fun (x, y) -&gt; f x y</code></p></dd></dl><dl><dt class="spec value" id="val-neg"><a href="#val-neg" class="anchor"></a><code><span class="keyword">val</span> neg : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>neg p</code> returns a new predicate that is the negation of the given predicate. That is, the new predicate returns <code>false</code> when the input predicate returns <code>true</code> and vice versa. This is for predicates with one argument.</p><p><code>neg p</code> is <code>fun x -&gt; not (p x)</code></p></dd></dl><dl><dt class="spec value" id="val-neg2"><a href="#val-neg2" class="anchor"></a><code><span class="keyword">val</span> neg2 : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> bool</code></dt><dd><p>as <code>neg</code> but for predicates with two arguments</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">_</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Ignore its second argument.</p><p><code>const x</code> is the function which always returns <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-unique"><a href="#val-unique" class="anchor"></a><code><span class="keyword">val</span> unique : unit <span>&#45;&gt;</span> int</code></dt><dd><p>Returns an unique identifier every time it is called.</p><p><b>Note</b> This is thread-safe.</p></dd></dl><dl><dt class="spec value" id="val-tap"><a href="#val-tap" class="anchor"></a><code><span class="keyword">val</span> tap : (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Allows application of a function in the middle of a pipe sequence without disturbing the sequence. <code>x |&gt; tap f</code> evaluates to <code>x</code>, but has the side effect of <code>f x</code>. Useful for debugging.</p></dd></dl><dl><dt class="spec value" id="val-finally"><a href="#val-finally" class="anchor"></a><code><span class="keyword">val</span> finally : (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>finally fend f x</code> calls <code>f x</code> and then <code>fend()</code> even if <code>f x</code> raised an exception.</p></dd></dl><dl><dt class="spec value" id="val-with_dispose"><a href="#val-with_dispose" class="anchor"></a><code><span class="keyword">val</span> with_dispose : dispose:(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>with_dispose dispose f x</code> invokes <code>f</code> on <code>x</code>, calling <code>dispose x</code> when <code>f</code> terminates (either with a return value or an exception).</p></dd></dl><dl><dt class="spec value" id="val-forever"><a href="#val-forever" class="anchor"></a><code><span class="keyword">val</span> forever : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>forever f x</code> invokes <code>f</code> on <code>x</code> repeatedly (until an exception occurs).</p></dd></dl><dl><dt class="spec value" id="val-ignore_exceptions"><a href="#val-ignore_exceptions" class="anchor"></a><code><span class="keyword">val</span> ignore_exceptions : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>ignore_exceptions f x</code> invokes <code>f</code> on <code>x</code>, ignoring both the returned value and the exceptions that may be raised.</p></dd></dl><dl><dt class="spec value" id="val-verify_arg"><a href="#val-verify_arg" class="anchor"></a><code><span class="keyword">val</span> verify_arg : bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>verify_arg condition message</code> will raise <code>Invalid_argument message</code> if <code>condition</code> is false, otherwise it does nothing.</p><dl><dt>since</dt><dd>2.0</dd></dl></dd></dl><dl><dt class="spec value" id="val-args"><a href="#val-args" class="anchor"></a><code><span class="keyword">val</span> args : unit <span>&#45;&gt;</span> string <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>An enumeration of the arguments passed to this program through the command line.</p><p><code>args ()</code> is given by the elements of <code>Sys.argv</code>, minus the first element.</p></dd></dl><dl><dt class="spec value" id="val-exe"><a href="#val-exe" class="anchor"></a><code><span class="keyword">val</span> exe : string</code></dt><dd><p>The name of the current executable.</p><p><code>exe</code> is given by the first argument of <code>Sys.argv</code></p></dd></dl></section><section><header><h6 id="enumerations"><a href="#enumerations" class="anchor"></a>Enumerations</h6><p>In OCaml Batteries Included, all data structures are enumerable, which means that they support a number of standard operations, transformations, etc. The general manner of <i>enumerating</i> the contents of a data structure is to invoke the <code>enum</code> function of your data structure.</p><p>For instance, you may use the <a href="index.html#val-foreach"><code>foreach</code></a> loop to apply a function <code>f</code> to all the consecutive elements of a string <code>s</code>. For this purpose, you may write either <code>foreach (String.enum s) f</code> or <code>open
   String in foreach (enum s) f</code>. Either possibility states that you are enumerating through a character string <code>s</code>. Should you prefer your enumeration to proceed from the end of the string to the beginning, you may replace <span class="xref-unresolved" title="unresolved reference to &quot;String.enum&quot;"><code>String</code>.enum</span> with <span class="xref-unresolved" title="unresolved reference to &quot;String.backwards&quot;"><code>String</code>.backwards</span>. Therefore, either <code>foreach (String.backwards s)
   f</code> or <code>open String in foreach (backwards s) f</code> will apply <code>f</code> to all the consecutive elements of string <code>s</code>, from the last to the first.</p><p>Similarly, you may use <span class="xref-unresolved" title="unresolved reference to &quot;List.enum&quot;"><code>List</code>.enum</span> instead of <span class="xref-unresolved" title="unresolved reference to &quot;String.enum&quot;"><code>String</code>.enum</span> to visit the elements of a list in the usual order, or <span class="xref-unresolved" title="unresolved reference to &quot;List.backwards&quot;"><code>List</code>.backwards</span> instead of <span class="xref-unresolved" title="unresolved reference to &quot;String.backwards&quot;"><code>String</code>.backwards</span> to visit them in the opposite order, or <span class="xref-unresolved" title="unresolved reference to &quot;Hashtbl.enum&quot;"><code>Hashtbl</code>.enum</span> for hash tables, etc.</p><p>More operations on enumerations are defined in module <a href="../BatEnum/index.html"><code>BatEnum</code></a>, including the necessary constructors to make your own structures enumerable.</p><p>The various kinds of loops are detailed further in this documentation.</p></header><dl><dt class="spec value" id="val-foreach"><a href="#val-foreach" class="anchor"></a><code><span class="keyword">val</span> foreach : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dd><p>Imperative loop on an enumeration.</p><p><code>foreach e f</code> applies function <code>f</code> to each successive element of <code>e</code>. For instance, <code>foreach (1 -- 10) print_int</code> invokes function <code>print_int</code> on <code>1</code>, <code>2</code>, ..., <code>10</code>, printing <code>12345678910</code>.</p><p><b>Note</b> This function is one of the many loops available on enumerations. Other commonly used loops are <a href="index.html#val-iter"><code>iter</code></a> (same usage scenario as <code>foreach</code>, but with different notations), <a href="index.html#val-map"><code>map</code></a> (convert an enumeration to another enumeration) or <a href="index.html#val-fold"><code>fold</code></a> (flatten an enumeration by applying an operation to each element).</p></dd></dl></section><section><header><h6 id="general-purpose-loops"><a href="#general-purpose-loops" class="anchor"></a>General-purpose loops</h6><p><code>topic loops</code></p><p>The following functions are the three main general-purpose loops available in OCaml. By opposition to the loops available in imperative languages, OCaml loops are regular functions, which may be passed, composed, currified, etc. In particular, each of these loops may be considered either as a manner of applying a function to a data structure or as transforming a function into another function which will act on a whole data structure.</p><p>For instance, if <code>f</code> is a function operating on one value, you may lift this function to operate on all values of an enumeration (and consequently on all values of any data structure of OCaml Batteries Included) by applying <a href="index.html#val-iter"><code>iter</code></a>, <a href="index.html#val-map"><code>map</code></a> or <a href="index.html#val-fold"><code>fold</code></a> to this function.</p></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Imperative loop on an enumeration. This loop is typically used to lift a function with an effect but no meaningful result and get it to work on enumerations.</p><p>If <code>f</code> is a function <code>iter f</code> is a function which behaves as <code>f</code> but acts upon enumerations rather than individual elements. As indicated in the type of <code>iter</code>, <code>f</code> must produce values of type <code>unit</code> (i.e. <code>f</code> has no meaningful result) the resulting function produces no meaningful result either.</p><p>In other words, <code>iter f</code> is a function which, when applied upon an enumeration <code>e</code>, calls <code>f</code> with each element of <code>e</code> in turn.</p><p>For instance, <code>iter f (1 -- 10)</code> invokes function <code>f</code> on <code>1</code>, <code>2</code>, ..., <code>10</code> and produces value <code>()</code>.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Transformation loop on an enumeration, used to build an enumeration from another enumeration. This loop is typically used to transform an enumeration into another enumeration with the same number of elements, in the same order.</p><p>If <code>f</code> is a function, <code>map f e</code> is a function which behaves as <code>f</code> but acts upon enumerations rather than individual elements -- and builds a new enumeration from the results of each application.</p><p>In other words, <code>map f</code> is a function which, when applied upon an enumeration containing elements <code>e0</code>, <code>e1</code>, ..., produces enumeration <code>f e0</code>, <code>f e1</code>, ...</p><p>For instance, if <code>odd</code> is the function which returns <code>true</code> when applied to an odd number or <code>false</code> when applied to an even number, <code>map odd (1 -- 10)</code> produces enumeration <code>true</code>, <code>false</code>, <code>true</code>, ..., <code>false</code>.</p><p>Similarly, if <code>square</code> is the function <code>fun x -&gt; x * x</code>, <code>map square (1 -- 10)</code> produces the enumeration of the square numbers of all numbers between <code>1</code> and <code>10</code>.</p></dd></dl><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Similar to a map, except that you can skip over some items of the incoming enumeration by returning None instead of Some value. Think of it as a <a href="index.html#val-filter"><code>filter</code></a> combined with a <a href="index.html#val-map"><code>map</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-reduce"><a href="#val-reduce" class="anchor"></a><code><span class="keyword">val</span> reduce : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Transformation loop on an enumeration, used to build a single value from an enumeration.</p><p>If <code>f</code> is a function and <code>e</code> is an enumeration, <code>reduce f e</code> applies function <code>f</code> to the first two elements of <code>e</code>, then to the result of this expression and to the third element of <code>e</code>, then to the result of this new expression and to the fourth element of <code>e</code>...</p><p>In other words, <code>reduce f e</code> returns <code>a0</code> if <code>e</code> contains only one element <code>a0</code>, otherwise <code>f (... (f (f a0) a1) ...) aN</code> where <code>a0,a1..aN</code> are the elements of <code>e</code>.</p><dl><dt>raises Not_found</dt><dd><p>if <code>e</code> is empty.</p><p>For instance, if <code>add</code> is the function <code>fun x y -&gt; x + y</code>, <code>reduce add</code> is the function which computes the sum of the elements of an enumeration -- and doesn't work on empty enumerations. Therefore, <code>reduce add (1 -- 10)</code> produces result <code>55</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Transformation loop on an enumeration, used to build a single value from an enumeration. This is the most powerful general-purpose loop and also the most complex.</p><p>If <code>f</code> is a function, <code>fold f v e</code> applies <code>f v</code> to the first element of <code>e</code>, then, calling <code>acc_1</code> the result of this operation, applies <code>f acc_1</code> to the second element of <code>e</code>, then, calling <code>acc_2</code> the result of this operation, applies <code>f acc_2</code> to the third element of <code>e</code>...</p><p>In other words, <code>fold f v e</code> returns <code>v</code> if <code>e</code> is empty, otherwise <code>f (... (f (f v a0) a1) ...) aN</code> where a0,a1..aN are the elements of <code>e</code>.</p><p>For instance, if <code>add</code> is the function <code>fun x y -&gt; x + y</code>, <code>fold add 0</code> is the function which computes the sum of the elements of an enumeration. Therefore, <code>fold add 0 (1 -- 10)</code> produces result <code>55</code>.</p></dd></dl><dl><dt class="spec value" id="val-scanl"><a href="#val-scanl" class="anchor"></a><code><span class="keyword">val</span> scanl : (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Functional loop on an enumeration, used to build an enumeration from both an enumeration and an initial value. This function may be seen as a variant of <a href="index.html#val-fold"><code>fold</code></a> which returns not only the final result of <a href="index.html#val-fold"><code>fold</code></a> but the enumeration of all the intermediate results of <a href="index.html#val-fold"><code>fold</code></a>.</p><p>If <code>f</code> is a function, <code>scanl f v e</code> is applies <code>f v</code> to the first element of <code>e</code>, then, calling <code>acc_1</code> the result of this operation, applies <code>f acc_1</code> to the second element of <code>e</code>, then, calling <code>acc_2</code> the result of this operation, applies <code>f acc_2</code> to the third element of <code>e</code>...</p><p>For instance, if <code>add</code> is the function <code>fun x y -&gt; x + y</code>, <code>scanl add 0</code> is the function which computes the sum of the elements of an enumeration. Therefore, <code>scanl add 0 (1 -- 10)</code> produces result the enumeration with elements <code>0, 1, 3, 6, 10,
    15, 21, 28, 36, 45, 55</code>.</p></dd></dl><dl><dt class="spec value" id="val-(/@)"><a href="#val-(/@)" class="anchor"></a><code><span class="keyword">val</span> (/@) : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dt class="spec value" id="val-(@/)"><a href="#val-(@/)" class="anchor"></a><code><span class="keyword">val</span> (@/) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Mapping operators.</p><p>These operators have the same meaning as function <a href="index.html#val-map"><code>map</code></a> but are sometimes more readable than this function, when chaining several transformations in a row.</p></dd></dl><dl><dt class="spec value" id="val-(//@)"><a href="#val-(//@)" class="anchor"></a><code><span class="keyword">val</span> (//@) : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dt class="spec value" id="val-(@//)"><a href="#val-(@//)" class="anchor"></a><code><span class="keyword">val</span> (@//) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Map combined with filter. Same as <a href="index.html#val-filter_map"><code>filter_map</code></a>.</p></dd></dl></section><section><header><h6 id="other-operations-on-enumerations"><a href="#other-operations-on-enumerations" class="anchor"></a>Other operations on enumerations</h6></header><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val</span> exists : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>exists f e</code> returns <code>true</code> if there is some <code>x</code> in <code>e</code> such that <code>f x</code></p></dd></dl><dl><dt class="spec value" id="val-for_all"><a href="#val-for_all" class="anchor"></a><code><span class="keyword">val</span> for_all : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>for_all f e</code> returns <code>true</code> if for every <code>x</code> in <code>e</code>, <code>f x</code> is true</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>find f e</code> returns the first element <code>x</code> of <code>e</code> such that <code>f x</code> returns <code>true</code>, consuming the enumeration up to and including the found element, or, raises <code>Not_found</code> if no such element exists in the enumeration, consuming the whole enumeration in the search.</p><p>Since <code>find</code> consumes a prefix of the enumeration, it can be used several times on the same enumeration to find the next element.</p><dl><dt>raises Not_found</dt><dd><p>if no element in the whole enumeration satisfies the predicate</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span class="keyword">val</span> peek : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>peek e</code> returns <code>None</code> if <code>e</code> is empty or <code>Some x</code> where <code>x</code> is the next element of <code>e</code>. The element is not removed from the enumeration.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>get e</code> returns <code>None</code> if <code>e</code> is empty or <code>Some x</code> where <code>x</code> is the next element of <code>e</code>, in which case the element is removed from the enumeration.</p></dd></dl><dl><dt class="spec value" id="val-push"><a href="#val-push" class="anchor"></a><code><span class="keyword">val</span> push : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>push e x</code> will add <code>x</code> at the beginning of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-junk"><a href="#val-junk" class="anchor"></a><code><span class="keyword">val</span> junk : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>junk e</code> removes the first element from the enumeration, if any.</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p><code>filter f e</code> returns an enumeration over all elements <code>x</code> of <code>e</code> such as <code>f x</code> returns <code>true</code>.</p></dd></dl><dl><dt class="spec value" id="val-(//)"><a href="#val-(//)" class="anchor"></a><code><span class="keyword">val</span> (//) : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Filtering (pronounce this operator name &quot;such that&quot;).</p><p>For instance, <code>(1 -- 37) // odd</code> is the enumeration of all odd numbers between 1 and 37.</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p><code>concat e</code> returns an enumeration over all elements of all enumerations of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-(--)"><a href="#val-(--)" class="anchor"></a><code><span class="keyword">val</span> (--) : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Enumerate numbers.</p><p><code>5 -- 10</code> is the enumeration 5,6,7,8,9,10. <code>10 -- 5</code> is the empty enumeration</p></dd></dl><dl><dt class="spec value" id="val-(--^)"><a href="#val-(--^)" class="anchor"></a><code><span class="keyword">val</span> (--^) : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>Enumerate numbers, without the right endpoint</p><p><code>5 -- 10</code> is the enumeration 5,6,7,8,9.</p></dd></dl><dl><dt class="spec value" id="val-(--.)"><a href="#val-(--.)" class="anchor"></a><code><span class="keyword">val</span> (--.) : (float * float) <span>&#45;&gt;</span> float <span>&#45;&gt;</span> float <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p><code>(a, step) --. b)</code> creates a float enumeration from <code>a</code> to <code>b</code> with an increment of <code>step</code> between elements.</p><p><code>(5.0, 1.0) --. 10.0</code> is the enumeration 5.0,6.0,7.0,8.0,9.0,10.0. <code>(10.0, -1.0) --. 5.0</code> is the enumeration 10.0,9.0,8.0,7.0,6.0,5.0. <code>(10.0, 1.0) --. 1.0</code> is the empty enumeration.</p></dd></dl><dl><dt class="spec value" id="val-(---)"><a href="#val-(---)" class="anchor"></a><code><span class="keyword">val</span> (---) : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>As <code>--</code>, but accepts enumerations in reverse order.</p><p><code>5 --- 10</code> is the enumeration 5,6,7,8,9,10. <code>10 --- 5</code> is the enumeration 10,9,8,7,6,5.</p></dd></dl><dl><dt class="spec value" id="val-(--~)"><a href="#val-(--~)" class="anchor"></a><code><span class="keyword">val</span> (--~) : char <span>&#45;&gt;</span> char <span>&#45;&gt;</span> char <a href="../BatEnum/index.html#type-t">BatEnum.t</a></code></dt><dd><p>As ( -- ), but for characters.</p></dd></dl><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val</span> print : ?&#8288;first:string <span>&#45;&gt;</span> ?&#8288;last:string <span>&#45;&gt;</span> ?&#8288;sep:string <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../BatInnerIO/index.html#type-output">BatInnerIO.output</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../BatEnum/index.html#type-t">BatEnum.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Print and consume the contents of an enumeration.</p></dd></dl></section><section><header><h6 id="results"><a href="#results" class="anchor"></a>Results</h6></header><dl><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b) result</code><code> = (<span class="type-var">'a</span>,Â <span class="type-var">'b</span>) <a href="../BatInnerPervasives/index.html#type-result">BatInnerPervasives.result</a></code><code> = </code><table class="variant"><tr id="type-result.Ok" class="anchored"><td class="def constructor"><a href="#type-result.Ok" class="anchor"></a><code>| </code><code><span class="constructor">Ok</span> <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr><tr id="type-result.Bad" class="anchored"><td class="def constructor"><a href="#type-result.Bad" class="anchor"></a><code>| </code><code><span class="constructor">Bad</span> <span class="keyword">of</span> <span class="type-var">'b</span></code></td><td class="doc"><p>The result of a computation - either an <code>Ok</code> with the normal result or a <code>Bad</code> with some value (often an exception) containing failure information</p></td></tr></table></dt><dd><p>This type represents the outcome of a function which has the possibility of failure. Normal results of type <code>'a</code> are marked with <code>Ok</code>, while failure values of type <code>'b</code> are marked with <code>Bad</code>.</p><p>This is intended to be a safer alternative to functions raising exceptions to signal failure. It is safer in that the possibility of failure has to be handled before the result of that computation can be used.</p><p>For more functions related to this type, see the <a href="../BatResult/index.html"><code>BatResult</code></a> module.</p></dd></dl><dl><dt class="spec value" id="val-ignore_ok"><a href="#val-ignore_ok" class="anchor"></a><code><span class="keyword">val</span> ignore_ok : (<span class="type-var">'a</span>,Â exn) <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>ignore_ok (f x)</code> ignores the result of <code>f x</code> if it's ok, but throws the exception contained if <code>Bad</code> is returned.</p></dd></dl><dl><dt class="spec value" id="val-ok"><a href="#val-ok" class="anchor"></a><code><span class="keyword">val</span> ok : (<span class="type-var">'a</span>,Â exn) <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>f x |&gt; ok</code> unwraps the <code>Ok</code> result of <code>f x</code> and returns it, or throws the exception contained if <code>Bad</code> is returned.</p></dd></dl><dl><dt class="spec value" id="val-wrap"><a href="#val-wrap" class="anchor"></a><code><span class="keyword">val</span> wrap : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'b</span>,Â exn) <a href="index.html#type-result">result</a></code></dt><dd><p><code>wrap f x</code> wraps a function that would normally throw an exception on failure such that it now returns a result with either the <code>Ok</code> return value or the <code>Bad</code> exception.</p></dd></dl></section><section><header><h6 id="thread-safety-internals"><a href="#thread-safety-internals" class="anchor"></a>Thread-safety internals</h6><p>Unless you are attempting to adapt Batteries Included to a new model of concurrency, you probably won't need this.</p></header><dl><dt class="spec value" id="val-lock"><a href="#val-lock" class="anchor"></a><code><span class="keyword">val</span> lock : <a href="../BatConcurrent/index.html#type-lock">BatConcurrent.lock</a> <a href="../../ocaml/Stdlib/index.html#type-ref">Stdlib.ref</a></code></dt><dd><p>A lock used to synchronize internal operations.</p><p>By default, this is <a href="../BatConcurrent/index.html#val-nolock"><code>BatConcurrent.nolock</code></a>. However, if you're using a version of Batteries compiled in threaded mode, this uses <a href="../BatMutex/index.html"><code>BatMutex</code></a>. If you're attempting to use Batteries with another concurrency model, set the lock appropriately.</p></dd></dl></section></div></body></html>