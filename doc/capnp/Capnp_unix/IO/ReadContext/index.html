<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ReadContext (capnp.Capnp_unix.IO.ReadContext)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">capnp</a> &#x00BB; <a href="../../index.html">Capnp_unix</a> &#x00BB; <a href="../index.html">IO</a> &#x00BB; ReadContext</nav><h1>Module <code>IO.ReadContext</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : read:(<span class="type-var">'a</span> <span>&#45;&gt;</span> buf:<a href="../../../../ocaml/Stdlib/Bytes/index.html#type-t">Stdlib.Bytes.t</a> <span>&#45;&gt;</span> pos:int <span>&#45;&gt;</span> len:int <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> compression:<a href="../../../Capnp/Codecs/index.html#type-compression_t">Capnp.Codecs.compression_t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create ~read ~compression descr</code> creates a new context for reading data from the specified descriptor using the specified <code>compression</code> method.</p><p>The semantics of the <code>read</code> function shall mimic that of <code>Unix.read</code>, attempting to read into a substring of the <code>buf</code> and returning the number of bytes actually read. A read of length 0 indicates end-of-file.</p></dd></dl><dl><dt class="spec value" id="val-dequeue_message"><a href="#val-dequeue_message" class="anchor"></a><code><span class="keyword">val</span> dequeue_message : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../Capnp/Message/index.html#type-rw">Capnp.Message.rw</a> <a href="../../../Capnp__Message/BytesMessage/Message/index.html#type-t">Capnp.Message.BytesMessage.Message.t</a> option</code></dt><dd><p><code>dequeue_message context</code> attempts to remove a complete message from the incoming queue of the read <code>context</code>. No data will be read from the underlying descriptor.</p><dl><dt>returns</dt><dd><p>None if there is insufficient data stored in the read context to decode a complete message</p></dd></dl><dl><dt>raises Unsupported_message_frame</dt><dd><p>if the frame header describes a segment count or segment size that is too large for the implementation</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-bytes_available"><a href="#val-bytes_available" class="anchor"></a><code><span class="keyword">val</span> bytes_available : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>bytes_available context</code> obtains the number of bytes already read which are currently stored in the read <code>context</code>.</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val</span> read : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>read context</code> attempts to read some data from the underlying descriptor, storing it in the read <code>context</code>.</p><dl><dt>returns</dt><dd><p>the number of bytes actually read</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-read_message"><a href="#val-read_message" class="anchor"></a><code><span class="keyword">val</span> read_message : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../Capnp/Message/index.html#type-rw">Capnp.Message.rw</a> <a href="../../../Capnp__Message/BytesMessage/Message/index.html#type-t">Capnp.Message.BytesMessage.Message.t</a> option</code></dt><dd><p><code>read_message context</code> attempts to remove a complete message from the incoming queue of the read <code>context</code>. <code>read</code> may be invoked repeatedly to provide enough buffered data to decode a complete message.</p><dl><dt>returns</dt><dd><p>None if end-of-file was reached before a complete message could be read</p></dd></dl><dl><dt>raises Unsupported_message_frame</dt><dd><p>if the frame header describes a segment count or segment size that is too large for the implementation</p></dd></dl></dd></dl></div></body></html>