<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Encode (cconv.CConv.Encode)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">cconv</a> &#x00BB; <a href="../index.html">CConv</a> &#x00BB; Encode</nav><h1>Module <code>CConv.Encode</code></h1><nav class="toc"><ul><li><a href="#composite-types">Composite Types</a></li></ul></nav></header><dl><dt class="spec type" id="type-output"><a href="#type-output" class="anchor"></a><code><span class="keyword">type</span> 'a output</code><code> = </code><code>{</code><table class="record"><tr id="type-output.unit" class="anchored"><td class="def field"><a href="#type-output.unit" class="anchor"></a><code>unit : <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.bool" class="anchored"><td class="def field"><a href="#type-output.bool" class="anchor"></a><code>bool : bool <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.float" class="anchored"><td class="def field"><a href="#type-output.float" class="anchor"></a><code>float : float <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.char" class="anchored"><td class="def field"><a href="#type-output.char" class="anchor"></a><code>char : char <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.int" class="anchored"><td class="def field"><a href="#type-output.int" class="anchor"></a><code>int : int <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.nativeint" class="anchored"><td class="def field"><a href="#type-output.nativeint" class="anchor"></a><code>nativeint : nativeint <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.int32" class="anchored"><td class="def field"><a href="#type-output.int32" class="anchor"></a><code>int32 : int32 <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.int64" class="anchored"><td class="def field"><a href="#type-output.int64" class="anchor"></a><code>int64 : int64 <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.string" class="anchored"><td class="def field"><a href="#type-output.string" class="anchor"></a><code>string : string <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.list" class="anchored"><td class="def field"><a href="#type-output.list" class="anchor"></a><code>list : <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.option" class="anchored"><td class="def field"><a href="#type-output.option" class="anchor"></a><code>option : <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.record" class="anchored"><td class="def field"><a href="#type-output.record" class="anchor"></a><code>record : (string * <span class="type-var">'a</span>) list <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.tuple" class="anchored"><td class="def field"><a href="#type-output.tuple" class="anchor"></a><code>tuple : <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-output.sum" class="anchored"><td class="def field"><a href="#type-output.sum" class="anchor"></a><code>sum : string <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-string_target"><a href="#val-string_target" class="anchor"></a><code><span class="keyword">val</span> string_target : string <a href="index.html#type-output">output</a></code></dt><dd><p>Print values. Caution, inefficient! Should be used for debugging only</p></dd></dl><dl><dt class="spec type" id="type-encoder"><a href="#type-encoder" class="anchor"></a><code><span class="keyword">type</span> -'src encoder</code><code> = </code><code>{</code><table class="record"><tr id="type-encoder.emit" class="anchored"><td class="def field"><a href="#type-encoder.emit" class="anchor"></a><code>emit : into. <span class="type-var">'into</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'src</span> <span>&#45;&gt;</span> <span class="type-var">'into</span>;</code></td></tr></table><code>}</code></dt><dd><p>A way to encode values of type <code>'src</code> into any serialization format</p></dd></dl><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : unit <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : bool <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : float <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val</span> char : char <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : int <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-nativeint"><a href="#val-nativeint" class="anchor"></a><code><span class="keyword">val</span> nativeint : nativeint <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span class="keyword">val</span> int32 : int32 <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span class="keyword">val</span> int64 : int64 <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : string <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-array"><a href="#val-array" class="anchor"></a><code><span class="keyword">val</span> array : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> array <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-sequence"><a href="#val-sequence" class="anchor"></a><code><span class="keyword">val</span> sequence : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-sequence">sequence</a> <a href="index.html#type-encoder">encoder</a></code></dt></dl><section><header><h6 id="composite-types"><a href="#composite-types" class="anchor"></a>Composite Types</h6></header><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : <span class="type-var">'into</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'src</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'src</span> <span>&#45;&gt;</span> <span class="type-var">'into</span></code></dt><dd><p>Helper to apply an encoder to a value</p></dd></dl><dl><dt class="spec type" id="type-record_encoder"><a href="#type-record_encoder" class="anchor"></a><code><span class="keyword">type</span> 'r record_encoder</code><code> = </code><code>{</code><table class="record"><tr id="type-record_encoder.record_emit" class="anchored"><td class="def field"><a href="#type-record_encoder.record_emit" class="anchor"></a><code>record_emit : into. <span class="type-var">'into</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'r</span> <span>&#45;&gt;</span> (string * <span class="type-var">'into</span>) list;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-record"><a href="#val-record" class="anchor"></a><code><span class="keyword">val</span> record : <span class="type-var">'r</span> <a href="index.html#type-record_encoder">record_encoder</a> <span>&#45;&gt;</span> <span class="type-var">'r</span> <a href="index.html#type-encoder">encoder</a></code></dt><dd><p>Encode a record, using the polymorphic record <a href="index.html#type-record_encoder"><code>record_encoder</code></a> to generate an association list</p></dd></dl><dl><dt class="spec value" id="val-record_fix"><a href="#val-record_fix" class="anchor"></a><code><span class="keyword">val</span> record_fix : (<span class="type-var">'r</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'r</span> <a href="index.html#type-record_encoder">record_encoder</a>) <span>&#45;&gt;</span> <span class="type-var">'r</span> <a href="index.html#type-encoder">encoder</a></code></dt><dd><p>Fixpoint on record definition</p></dd></dl><aside><p>Example:</p><pre><code class="ml">type point = {x:int; y:int; c:string};;
  let enc_point = record
    {record_emit=fun into {x;y;c} -&gt;
       [ &quot;x&quot;, into.int x
       ; &quot;y&quot;, into.int y
       ; &quot;c&quot;, into.string c
       ]
   } ;;</code></pre></aside><dl><dt class="spec type" id="type-tuple_encoder"><a href="#type-tuple_encoder" class="anchor"></a><code><span class="keyword">type</span> 't tuple_encoder</code><code> = </code><code>{</code><table class="record"><tr id="type-tuple_encoder.tuple_emit" class="anchored"><td class="def field"><a href="#type-tuple_encoder.tuple_emit" class="anchor"></a><code>tuple_emit : into. <span class="type-var">'into</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'t</span> <span>&#45;&gt;</span> <span class="type-var">'into</span> list;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-tuple"><a href="#val-tuple" class="anchor"></a><code><span class="keyword">val</span> tuple : <span class="type-var">'a</span> <a href="index.html#type-tuple_encoder">tuple_encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></code></dt><dd><p>General encoding of tuples (returns a list of values)</p></dd></dl><dl><dt class="spec value" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span class="keyword">val</span> pair : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span>) <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-triple"><a href="#val-triple" class="anchor"></a><code><span class="keyword">val</span> triple : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>) <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-quad"><a href="#val-quad" class="anchor"></a><code><span class="keyword">val</span> quad : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>) <a href="index.html#type-encoder">encoder</a></code></dt></dl><dl><dt class="spec type" id="type-sum_encoder"><a href="#type-sum_encoder" class="anchor"></a><code><span class="keyword">type</span> 's sum_encoder</code><code> = </code><code>{</code><table class="record"><tr id="type-sum_encoder.sum_emit" class="anchored"><td class="def field"><a href="#type-sum_encoder.sum_emit" class="anchor"></a><code>sum_emit : into. <span class="type-var">'into</span> <a href="index.html#type-output">output</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> string * <span class="type-var">'into</span> list;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-sum"><a href="#val-sum" class="anchor"></a><code><span class="keyword">val</span> sum : <span class="type-var">'a</span> <a href="index.html#type-sum_encoder">sum_encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></code></dt><dt class="spec value" id="val-sum0"><a href="#val-sum0" class="anchor"></a><code><span class="keyword">val</span> sum0 : (<span class="type-var">'a</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></code></dt><dd><p>Constant sums, only put the name</p></dd></dl><dl><dt class="spec value" id="val-sum_fix"><a href="#val-sum_fix" class="anchor"></a><code><span class="keyword">val</span> sum_fix : (<span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-sum_encoder">sum_encoder</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a></code></dt><dd><p>Fixpoint on sum types</p></dd></dl><aside><p>Example:</p><pre><code class="ml">type tree = Empty | Leaf of int | Node of tree * tree;;
 let encode_tree = sum_fix
   (fun self -&gt; {sum_emit=fun into x -&gt; match x with
     | Empty -&gt; &quot;empty&quot;, []
     | Leaf i -&gt; &quot;leaf&quot;, [int.emit into i]
     | Node (l,r) -&gt; &quot;node&quot;, [self.emit into l; self.emit into r]
   });;</code></pre></aside><dl><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : <span class="type-var">'a</span> <a href="index.html#type-encoder">encoder</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="index.html#type-encoder">encoder</a></code></dt></dl></section></div></body></html>