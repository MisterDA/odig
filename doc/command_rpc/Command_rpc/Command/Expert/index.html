<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Expert (command_rpc.Command_rpc.Command.Expert)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">command_rpc</a> &#x00BB; <a href="../../index.html">Command_rpc</a> &#x00BB; <a href="../index.html">Command</a> &#x00BB; Expert</nav><h1>Module <code>Command.Expert</code></h1></header><dl><dt class="spec value" id="val-param"><a href="#val-param" class="anchor"></a><code><span class="keyword">val</span> param : ?&#8288;heartbeat_config:<a href="../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Connection/Heartbeat_config/index.html#type-t">Async.Rpc.Connection.Heartbeat_config.t</a> <span>&#45;&gt;</span> ?&#8288;log_not_previously_seen_version:(name:string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="../index.html#type-t">t</a> list <span>&#45;&gt;</span> unit <a href="../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <a href="../../../../core/Core__Command/Param/index.html#type-t">Async.Command.Param.t</a></code></dt><dd><p><code>param ?heartbeat_config ?log_not_previously_seen_version ()</code> returns a command line parameter which produces a function. You can do any initialization (e.g. of mutable state) and then call the function with your RPC implementations to start the RPC server. The deferred it returns will become determined when the client closes their connection, after which you may do any cleanup you need and then exit (possibly with an appropriate exit status).</p><p>This interface is marked <code>Expert</code> because consuming from stdin or writing to stdout during your initialization may prevent you from receiving RPCs or responding to them properly, but we cannot check that you don't do this or prevent you from doing it, so you just have to be careful.</p><p>You are responsible for ensuring that the async scheduler is started, e.g., by calling <code>Command.async_or_error'</code>.</p></dd></dl></div></body></html>