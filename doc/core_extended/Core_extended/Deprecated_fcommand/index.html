<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Deprecated_fcommand (core_extended.Core_extended.Deprecated_fcommand)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">core_extended</a> &#x00BB; <a href="../index.html">Core_extended</a> &#x00BB; Deprecated_fcommand</nav><h1>Module <code>Core_extended.Deprecated_fcommand</code></h1></header><aside><p>This module is a wrapper around Command that allows you to do away with accumulators. Here's an example:</p><p>Fcommand.cmd ~summary:&quot;Frobnicate something&quot; Fcommand.( flag &quot;-n&quot; (required int) ~doc:&quot;N number of times to frobnicate&quot; ++ anon (args &quot;item&quot; string)) (fun n items -&gt; ...)</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('main_in, 'main_out) t</code></dt><dd><p><code>('main_in, 'main_out) t</code> is a type of composable command-line specifications.</p><p>Every combinator for building <code>t</code>-values is polymorphic in <code>'main_out</code>. In the final specification expected by <code>cmd</code> used to construct a command, <code>'main_out</code> is specialized to <code>unit</code>). Various primitive specifications add parameters one at a time, so the resulting type of <code>main</code> is</p><p><code>arg1 -&gt; ... -&gt; argN -&gt; unit</code></p><p>It may help to think of <code>('a, 'b) t</code> as a function space <code>'a -&gt; 'b</code> embellished with extra information about how to parse command line, including documentation about what various flags are for.</p></dd></dl><aside><p>argument parsing</p></aside><dl><dt class="spec type" id="type-parse"><a href="#type-parse" class="anchor"></a><code><span class="keyword">type</span> 'a parse</code><code> = string <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : string <a href="index.html#type-parse">parse</a></code></dt><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : int <a href="index.html#type-parse">parse</a></code></dt><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : float <a href="index.html#type-parse">parse</a></code></dt><dt class="spec value" id="val-date"><a href="#val-date" class="anchor"></a><code><span class="keyword">val</span> date : <a href="../../../core/Core__/Core_date/index.html#type-t">Core.Date.t</a> <a href="index.html#type-parse">parse</a></code></dt><dt class="spec value" id="val-sexp"><a href="#val-sexp" class="anchor"></a><code><span class="keyword">val</span> sexp : <a href="../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core.Sexp.t</a> <a href="index.html#type-parse">parse</a></code></dt></dl><aside><p>flags</p></aside><div class="spec module" id="module-Flag"><a href="#module-Flag" class="anchor"></a><code><span class="keyword">module</span> <a href="Flag/index.html">Flag</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-required"><a href="#val-required" class="anchor"></a><code><span class="keyword">val</span> required : <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-optional"><a href="#val-optional" class="anchor"></a><code><span class="keyword">val</span> optional : <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-optional_with_default"><a href="#val-optional_with_default" class="anchor"></a><code><span class="keyword">val</span> optional_with_default : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-listed"><a href="#val-listed" class="anchor"></a><code><span class="keyword">val</span> listed : <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-no_arg"><a href="#val-no_arg" class="anchor"></a><code><span class="keyword">val</span> no_arg : [ `Present | `Absent ] <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-no_arg_bool"><a href="#val-no_arg_bool" class="anchor"></a><code><span class="keyword">val</span> no_arg_bool : bool <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-capture_remaining_command_line"><a href="#val-capture_remaining_command_line" class="anchor"></a><code><span class="keyword">val</span> capture_remaining_command_line : string list option <a href="Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-flag"><a href="#val-flag" class="anchor"></a><code><span class="keyword">val</span> flag : string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Flag/index.html#type-t">Flag.t</a> <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'m</span>, <span class="type-var">'m</span>) <a href="index.html#type-t">t</a></code></dt></dl><aside><p>anonymous arguments</p></aside><div class="spec module" id="module-Anons"><a href="#module-Anons" class="anchor"></a><code><span class="keyword">module</span> <a href="Anons/index.html">Anons</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-(%:)"><a href="#val-(%:)" class="anchor"></a><code><span class="keyword">val</span> (%:) : string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-many"><a href="#val-many" class="anchor"></a><code><span class="keyword">val</span> many : string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-parse">parse</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-maybe"><a href="#val-maybe" class="anchor"></a><code><span class="keyword">val</span> maybe : <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-maybe_with_default"><a href="#val-maybe_with_default" class="anchor"></a><code><span class="keyword">val</span> maybe_with_default : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span class="keyword">val</span> zero : unit <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-t2"><a href="#val-t2" class="anchor"></a><code><span class="keyword">val</span> t2 : <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span>) <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-t3"><a href="#val-t3" class="anchor"></a><code><span class="keyword">val</span> t3 : <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>) <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-t4"><a href="#val-t4" class="anchor"></a><code><span class="keyword">val</span> t4 : <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> <span class="type-var">'d</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>) <a href="Anons/index.html#type-t">Anons.t</a></code></dt><dt class="spec value" id="val-anon"><a href="#val-anon" class="anchor"></a><code><span class="keyword">val</span> anon : <span class="type-var">'a</span> <a href="Anons/index.html#type-t">Anons.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'m</span>, <span class="type-var">'m</span>) <a href="index.html#type-t">t</a></code></dt></dl><aside><p>various combinators</p></aside><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : unit <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'m</span>, <span class="type-var">'m</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-either"><a href="#val-either" class="anchor"></a><code><span class="keyword">val</span> either : string <span>&#45;&gt;</span> (<span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span>, <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(++)"><a href="#val-(++)" class="anchor"></a><code><span class="keyword">val</span> (++) : (<span class="type-var">'m1</span>, <span class="type-var">'m2</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'m2</span>, <span class="type-var">'m3</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'m1</span>, <span class="type-var">'m3</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>spec1 ++ spec2</code> composes command-line specifications <code>spec1</code> and <code>spec2</code>. Parameters specified by <code>spec1</code> will come before those specified by <code>spec2</code> in the eventual main function.</p></dd></dl><dl><dt class="spec value" id="val-step"><a href="#val-step" class="anchor"></a><code><span class="keyword">val</span> step : (<span class="type-var">'m1</span> <span>&#45;&gt;</span> <span class="type-var">'m2</span>) <span>&#45;&gt;</span> (<span class="type-var">'m1</span>, <span class="type-var">'m2</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>step</code> allows you to transform the way parameters are applied. For example, if you want labelled arguments, you can do:</p><p>Fcommand.cmd ~summary:&quot;...&quot; Fcommand.( step (fun main x y z -&gt; main ~x ~y ~z) ++ flag &quot;-x&quot; (optional string) ~doc:&quot;...&quot; ++ flag &quot;-y&quot; (required string) ~doc:&quot;...&quot; ++ flag &quot;-z&quot; (optional int) ~doc:&quot;...&quot; ) (fun ~x ~y ~z -&gt; ... )</p></dd></dl><aside><p>constructing the command we've specified</p></aside><dl><dt class="spec value" id="val-cmd"><a href="#val-cmd" class="anchor"></a><code><span class="keyword">val</span> cmd : summary:string <span>&#45;&gt;</span> ?&#8288;readme:(unit <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> ?&#8288;autocomplete:<a href="../Deprecated_command/Autocomplete/index.html#type-t">Deprecated_command.Autocomplete.t</a> <span>&#45;&gt;</span> ?&#8288;global_flags:unit <a href="../Deprecated_command/Flag/index.html#type-t">Deprecated_command.Flag.t</a> list <span>&#45;&gt;</span> (<span class="type-var">'main</span>, unit) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'main</span> <span>&#45;&gt;</span> <a href="../Deprecated_command/index.html#type-t">Deprecated_command.t</a></code></dt></dl></div></body></html>