<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pp (core_extended.Core_extended.Pp)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">core_extended</a> &#x00BB; <a href="../index.html">Core_extended</a> &#x00BB; Pp</nav><h1>Module <code>Core_extended.Pp</code></h1><nav class="toc"><ul><li><a href="#grouping-and-nesting">Grouping and nesting</a></li><li><a href="#pretty-printing">Pretty Printing</a></li><li><a href="#auxiliaries">Auxiliaries</a></li></ul></nav></header><aside><p>Functional pretty printing.</p></aside><aside><p>This is a pretty printing library originally written by Christian Lindig and released under the Copyleft licence for the <a href="http://www.cminusminus.org">c--</a> project. The design of this library is discussed in the article &quot;<a href="http://citeseer.ist.psu.edu/lindig00strictly.html">Strictly pretty</a>&quot;.</p><p>The pretty printer provided by the <code>Pp</code> module is intended for tree-like structures. Documents are represented by an abstract type <code>t</code>. A document can be printed to a file or a string and during this process the pretty printer decides about the final outcome of the document. The only parameter it takes into account is the total line width and the number of characters a sub-document occupies.</p><p>A document of type <code>t</code> can be very small entity like a single word. Functions combine small documents to larger ones which then can be pretty printed.</p><dl><dt>author</dt><dd>Christian Lindig</dd></dl><dl><dt>author</dt><dd>Till Varoquaux</dd></dl><dl><dt>see <a href="http://legacy.cs.uu.nl/daan/download/pprint/pprint.html">http://legacy.cs.uu.nl/daan/download/pprint/pprint.html</a></dt><dd><p>PPrint.</p></dd></dl></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>The empty document is pretty printed to the empty string. Typically <code>empty</code> is used in one branch of an <code>if</code> statement.</p></dd></dl><dl><dt class="spec value" id="val-($)"><a href="#val-($)" class="anchor"></a><code><span class="keyword">val</span> ($) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The infix operator <code>x $ y</code> concatenates two documents <code>x</code> and <code>y</code> into a larger one. It does not introduce any space or other separation between the two original documents.</p></dd></dl><dl><dt class="spec value" id="val-text"><a href="#val-text" class="anchor"></a><code><span class="keyword">val</span> text : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The <code>text</code> function turns a string into a document. The pretty printed representation of the resulting document is exactly the string <code>text</code> was applied to.</p></dd></dl><dl><dt class="spec value" id="val-break"><a href="#val-break" class="anchor"></a><code><span class="keyword">val</span> break : <a href="index.html#type-t">t</a></code></dt><dd><p>The important points in a document are so-called <code>break</code>s. A <code>break</code> can be either represented by a single space or a newline followed by a number of spaces. The pretty printer makes this decision based on the available space. So think of a <code>break</code> as a space that might come out as a newline. To give the pretty printer enough flexibility documents must be joined with <code>break</code>s: <code>x $ break $ y</code>.</p></dd></dl><dl><dt class="spec value" id="val-break_null"><a href="#val-break_null" class="anchor"></a><code><span class="keyword">val</span> break_null : <a href="index.html#type-t">t</a></code></dt><dd><p><code>break_null</code> behaves like <code>break</code> except it does not insert anything when no newline is inserted.</p></dd></dl><dl><dt class="spec value" id="val-break_with"><a href="#val-break_with" class="anchor"></a><code><span class="keyword">val</span> break_with : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The space character used by <code>break</code> my be not always appropriate. The function <code>break_with s</code> behaves like <code>break</code> except that it uses a user supplied string <code>s</code> instead of the space.</p></dd></dl><section><header><h4 id="grouping-and-nesting"><a href="#grouping-and-nesting" class="anchor"></a>Grouping and nesting</h4><p>The pretty printer considers the representation of <code>break</code>s not one by one but looks at all <code>break</code>s of a sub-document. Documents are structured into sub-documents by group-operators. Different group operators exist to control the behavior of the pretty printer.</p></header><dl><dt class="spec value" id="val-nest"><a href="#val-nest" class="anchor"></a><code><span class="keyword">val</span> nest : int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>When the pretty printer decides to represent a <code>break</code> as a newline it also prints some spaces after it to indent the following line. The number of spaces is controlled by the <code>nest</code> operator that takes a document as argument: <code>nest n d</code>. All breaks turned to newlines inside document <code>d</code> are followed by <code>n</code> spaces. The <code>nest</code> operator nests properly such that it takes the spaces introduced by <code>nest</code>s on the outer level also into account.</p></dd></dl><dl><dt class="spec value" id="val-hgrp"><a href="#val-hgrp" class="anchor"></a><code><span class="keyword">val</span> hgrp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>A group operator takes a document and let it become a group. The <code>hgrp</code> operator creates a <i>horizontal</i> group. Breaks inside a <code>hgrp</code> are never turned into newlines but always come out as spaces. This group has a very limited usefulness because it easily overruns any given line length.</p></dd></dl><dl><dt class="spec value" id="val-vgrp"><a href="#val-vgrp" class="anchor"></a><code><span class="keyword">val</span> vgrp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The <code>vgrp</code> operator creates a <i>vertical</i> group. All <code>break</code>s inside a <code>vgrp</code> are represented as newlines followed by spaces. Although all <code>break</code>s come out as newlines the indentation of lines inside the group may differ: nesting is independent of grouping and thus different nesting levels can be active in the same group. Because of the fixed pretty printing strategy <code>vgrp</code>s are used mostly at the top level of documents only.</p></dd></dl><dl><dt class="spec value" id="val-agrp"><a href="#val-agrp" class="anchor"></a><code><span class="keyword">val</span> agrp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The <i>automatic</i> group <code>agrp</code> is the most versatile. Breaks inside this group are either all turned into newlines (followed by spaces), or into spaces. Subgroups are, of course, not affected but considered individually.</p></dd></dl><dl><dt class="spec value" id="val-fgrp"><a href="#val-fgrp" class="anchor"></a><code><span class="keyword">val</span> fgrp : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The break policy inside an <code>agrp</code> is fixed for all breaks of the group. Inside a <i>flexible</i> group <code>fgrp</code> each <code>break</code> is considered individually: when the document up to the next <code>break</code> fits into the current line the <code>break</code> comes out as space. Otherwise it comes out as newline followed by spaces.</p></dd></dl></section><section><header><h4 id="pretty-printing"><a href="#pretty-printing" class="anchor"></a>Pretty Printing</h4></header><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : ?&#8288;width:int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-to_file"><a href="#val-to_file" class="anchor"></a><code><span class="keyword">val</span> to_file : ?&#8288;width:int <span>&#45;&gt;</span> <a href="../../../ocaml/Stdlib/index.html#type-out_channel">Stdlib.out_channel</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h4 id="auxiliaries"><a href="#auxiliaries" class="anchor"></a>Auxiliaries</h4></header><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : sep:<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>A list of objects which are seperated by some seperator is very common. The <code>list sep f</code> function takes care to insert the separator only between objects but not at the end of the list. It creates a <code>sep</code> separated list. Individual items are printed using <code>f</code>. For the common case where commas are used for separating we also provide an extra definition</p></dd></dl><dl><dt class="spec value" id="val-commalist"><a href="#val-commalist" class="anchor"></a><code><span class="keyword">val</span> commalist : f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-($/)"><a href="#val-($/)" class="anchor"></a><code><span class="keyword">val</span> ($/) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Instead of writing <code>x $ break $ y</code> to insert a <code>break</code> it is convenient to define an operator for this: <code>x ^/ y</code> joins <code>x</code> and <code>y</code> with a <code>break</code>.</p></dd></dl><dl><dt class="spec value" id="val-($//)"><a href="#val-($//)" class="anchor"></a><code><span class="keyword">val</span> ($//) : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Joins two documents with a <code>break_null</code>.</p></dd></dl><dl><dt class="spec value" id="val-block"><a href="#val-block" class="anchor"></a><code><span class="keyword">val</span> block : ?&#8288;indent:int <span>&#45;&gt;</span> f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>A <code>block</code> contains objects <code>xs</code> formatted by <code>f</code> and enclosed by curly braces. Its body will be indented in case it does not fit on a single line. The default indentation is 4</p></dd></dl><div class="spec module" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span class="keyword">module</span> <a href="Infix/index.html">Infix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-hlist"><a href="#val-hlist" class="anchor"></a><code><span class="keyword">val</span> hlist : <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><pre><code class="ml">hlist [x1,..,xn] = hgrp [x1; break; x2; ...; break; xn) </code></pre></dd></dl><dl><dt class="spec value" id="val-vlist"><a href="#val-vlist" class="anchor"></a><code><span class="keyword">val</span> vlist : <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><pre><code class="ml">vlist [x1,..,xn] = vgrp [x1; break; x2; ...; break; xn) </code></pre></dd></dl><dl><dt class="spec value" id="val-alist"><a href="#val-alist" class="anchor"></a><code><span class="keyword">val</span> alist : <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></section></div></body></html>