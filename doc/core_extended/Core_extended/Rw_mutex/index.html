<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rw_mutex (core_extended.Core_extended.Rw_mutex)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">core_extended</a> &#x00BB; <a href="../index.html">Core_extended</a> &#x00BB; Rw_mutex</nav><h1>Module <code>Core_extended.Rw_mutex</code></h1><nav class="toc"><ul><li><a href="#types">Types</a><ul><li><a href="#real-types">Real types</a></li><li><a href="#phantom-types">Phantom types</a></li></ul></li><li><a href="#phantom-values">Phantom values</a></li><li><a href="#mutex-operations">Mutex operations</a></li></ul></nav></header><aside><p>Read/write mutexes</p><dl><dt>author</dt><dd>Markus Mottl &lt;mmottl\@janestreet.com&gt;</dd></dl></aside><section><header><h3 id="types"><a href="#types" class="anchor"></a>Types</h3></header><section><header><h4 id="real-types"><a href="#real-types" class="anchor"></a>Real types</h4></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'pref t</code></dt><dd><p>Type of r/w mutexes</p></dd></dl></section><section><header><h4 id="phantom-types"><a href="#phantom-types" class="anchor"></a>Phantom types</h4></header><dl><dt class="spec type" id="type-pref"><a href="#type-pref" class="anchor"></a><code><span class="keyword">type</span> pref</code> = <code>[ </code><table class="variant"><tr id="type-pref.Readers" class="anchored"><td class="def constructor"><a href="#type-pref.Readers" class="anchor"></a><code>| </code><code>`Readers</code></td></tr><tr id="type-pref.Writers" class="anchored"><td class="def constructor"><a href="#type-pref.Writers" class="anchor"></a><code>| </code><code>`Writers</code></td></tr><tr id="type-pref.NoPref" class="anchored"><td class="def constructor"><a href="#type-pref.NoPref" class="anchor"></a><code>| </code><code>`NoPref</code></td></tr></table><code> ]</code></dt><dd><p>Preference for readers, writers, or no preference</p></dd></dl><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type</span> 'pref kind</code></dt><dd><p>Preference kind of read/write mutexes</p></dd></dl></section></section><section><header><h3 id="phantom-values"><a href="#phantom-values" class="anchor"></a>Phantom values</h3></header><dl><dt class="spec value" id="val-r_pref"><a href="#val-r_pref" class="anchor"></a><code><span class="keyword">val</span> r_pref : [ `Readers ] <a href="index.html#type-kind">kind</a></code></dt><dd><p><code>r_pref</code> preference kind for readers.</p></dd></dl><dl><dt class="spec value" id="val-w_pref"><a href="#val-w_pref" class="anchor"></a><code><span class="keyword">val</span> w_pref : [ `Writers ] <a href="index.html#type-kind">kind</a></code></dt><dd><p><code>w_pref</code> preference kind for writers.</p></dd></dl><dl><dt class="spec value" id="val-np_pref"><a href="#val-np_pref" class="anchor"></a><code><span class="keyword">val</span> np_pref : [ `NoPref ] <a href="index.html#type-kind">kind</a></code></dt><dd><p><code>np_pref</code> no preference for readers or writers.</p></dd></dl></section><section><header><h3 id="mutex-operations"><a href="#mutex-operations" class="anchor"></a>Mutex operations</h3></header><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <span class="type-var">'pref</span> <a href="index.html#type-kind">kind</a> <span>&#45;&gt;</span> <span class="type-var">'pref</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create pref</code> </p><dl><dt>returns</dt><dd><p>a r/w-mutex with preference kind <code>pref</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-r_lock"><a href="#val-r_lock" class="anchor"></a><code><span class="keyword">val</span> r_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>r_lock mtx</code> locks <code>mtx</code> for a reader.</p></dd></dl><dl><dt class="spec value" id="val-r_unlock"><a href="#val-r_unlock" class="anchor"></a><code><span class="keyword">val</span> r_unlock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>r_unlock mtx</code> unlocks <code>mtx</code> for a reader.</p></dd></dl><dl><dt class="spec value" id="val-w_lock"><a href="#val-w_lock" class="anchor"></a><code><span class="keyword">val</span> w_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>w_lock mtx</code> locks <code>mtx</code> for a writer.</p></dd></dl><dl><dt class="spec value" id="val-w_unlock"><a href="#val-w_unlock" class="anchor"></a><code><span class="keyword">val</span> w_unlock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>w_unlock mtx</code> unlocks <code>mtx</code> for a writer.</p></dd></dl><dl><dt class="spec value" id="val-try_r_lock"><a href="#val-try_r_lock" class="anchor"></a><code><span class="keyword">val</span> try_r_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>try_r_lock mtx</code> tries to lock <code>mtx</code> for a reader without blocking.</p><dl><dt>returns</dt><dd><p><code>true</code> iff <code>mtx</code> could be locked, <code>false</code> otherwise.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-try_w_lock"><a href="#val-try_w_lock" class="anchor"></a><code><span class="keyword">val</span> try_w_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>try_w_lock mtx</code> tries to lock <code>mtx</code> for a writer without blocking.</p><dl><dt>returns</dt><dd><p><code>true</code> iff <code>mtx</code> could be locked, <code>false</code> otherwise.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-wrap_r_lock"><a href="#val-wrap_r_lock" class="anchor"></a><code><span class="keyword">val</span> wrap_r_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>wrap_r_lock mtx f</code> locks <code>mtx</code> for a reader, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p>the result of <code>f</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-try_wrap_r_lock"><a href="#val-try_wrap_r_lock" class="anchor"></a><code><span class="keyword">val</span> try_wrap_r_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>try_wrap_r_lock mtx f</code> tries to lock <code>mtx</code> for a reader without blocking, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p><code>Some
    res</code>, where <code>res</code> is the result of <code>f</code>, iff the mutex could be locked, <code>None</code> otherwise.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-btry_wrap_r_lock"><a href="#val-btry_wrap_r_lock" class="anchor"></a><code><span class="keyword">val</span> btry_wrap_r_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> bool</code></dt><dd><p><code>btry_wrap_r_lock mtx f</code> tries to lock <code>mtx</code> for a reader without blocking, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p><code>true</code> iff the mutex could be locked, <code>false</code> otherwise.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-wrap_w_lock"><a href="#val-wrap_w_lock" class="anchor"></a><code><span class="keyword">val</span> wrap_w_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>wrap_w_lock mtx f</code> locks <code>mtx</code> for a writer, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p>the result of <code>f</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-try_wrap_w_lock"><a href="#val-try_wrap_w_lock" class="anchor"></a><code><span class="keyword">val</span> try_wrap_w_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>try_wrap_w_lock mtx f</code> tries to lock <code>mtx</code> for a writer without blocking, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p><code>Some
    res</code>, where <code>res</code> is the result of <code>f</code>, iff the mutex could be locked, <code>None</code> otherwise.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-btry_wrap_w_lock"><a href="#val-btry_wrap_w_lock" class="anchor"></a><code><span class="keyword">val</span> btry_wrap_w_lock : [&lt; <a href="index.html#type-pref">pref</a> ] <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> bool</code></dt><dd><p><code>btry_wrap_w_lock mtx f</code> tries to lock <code>mtx</code> for a writer without blocking, executes <code>f</code> and unlocks the mutex again. </p><dl><dt>returns</dt><dd><p><code>true</code> iff the mutex could be locked, <code>false</code> otherwise.</p></dd></dl></dd></dl></section></div></body></html>