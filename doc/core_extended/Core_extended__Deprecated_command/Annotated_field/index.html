<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Annotated_field (core_extended.Core_extended__Deprecated_command.Annotated_field)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">core_extended</a> &#x00BB; <a href="../index.html">Core_extended__Deprecated_command</a> &#x00BB; Annotated_field</nav><h1>Module <code>Core_extended__Deprecated_command.Annotated_field</code></h1><p>This module is intended to help in using pa_fields to easily generate Command.t's when you have a record type each field of which you would like specified as a command line argument.</p><p>An example is as follows:</p><pre><code class="ml">module M = struct
  type t = {
    field1 : int;
    field2 : float;
    field3 : bool;
    field4 : string option;
  } with fields

  module A = Annotated_field

  let ann_fields = Fields.fold ~init:[]
    ~field1:(A.required ~doc:&quot; documentation for field1&quot;)
    ~field2:(A.default 1.0 string_of_float ~doc:&quot; documentation for field2&quot;)
    ~field3:(A.set ~doc:&quot; documentation for field3&quot;)
    ~field4:(A.optional ~doc:&quot; documentation for field4&quot;)

  let command = create
    ~summary:&quot;summary&quot;
    ~init:(fun () -&gt; A.init ann_fields)
    ~usage_arg:&quot;&quot;
    ~flags:(List.map ann_fields ~f:A.to_flag)
    ~final:(fun accum _anon_args -&gt;
      let get of_string = A.get accum of_string in
      let get_opt of_string = A.get_opt accum of_string in
      Fields.map
        ~field1:(get int_of_string)
        ~field2:(get Float.of_string)
        ~field3:(get bool_of_string)
        ~field4:(get_opt ident)
    )
    ~main:(fun _ -&gt; assert false)</code></pre><p>end</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dt class="spec type" id="type-accum"><a href="#type-accum" class="anchor"></a><code><span class="keyword">type</span> accum</code></dt></dl><dl><dt class="spec value" id="val-required"><a href="#val-required" class="anchor"></a><code><span class="keyword">val</span> required : ?&#8288;name:string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val</span> default : ?&#8288;name:string <span>&#45;&gt;</span> <span class="type-var">'field</span> <span>&#45;&gt;</span> (<span class="type-var">'field</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">'field</span>) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-optional"><a href="#val-optional" class="anchor"></a><code><span class="keyword">val</span> optional : ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;suppress_word_optional:bool <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">_</span> option) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : ?&#8288;name:string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, bool) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val</span> clear : ?&#8288;name:string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, bool) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : ?&#8288;name:string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> doc:string <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">_</span> list) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list</code></dt><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-accum">accum</a></code></dt><dt class="spec value" id="val-to_flag"><a href="#val-to_flag" class="anchor"></a><code><span class="keyword">val</span> to_flag : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-accum">accum</a> <a href="../Flag/index.html#type-t">Flag.t</a></code></dt><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-accum">accum</a> <span>&#45;&gt;</span> (string <span>&#45;&gt;</span> <span class="type-var">'field</span>) <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">'field</span>) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <span class="type-var">'field</span></code></dt><dt class="spec value" id="val-get_opt"><a href="#val-get_opt" class="anchor"></a><code><span class="keyword">val</span> get_opt : <a href="index.html#type-accum">accum</a> <span>&#45;&gt;</span> (string <span>&#45;&gt;</span> <span class="type-var">'field</span>) <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">'field</span> option) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <span class="type-var">'field</span> option</code></dt><dt class="spec value" id="val-get_list"><a href="#val-get_list" class="anchor"></a><code><span class="keyword">val</span> get_list : <a href="index.html#type-accum">accum</a> <span>&#45;&gt;</span> (string <span>&#45;&gt;</span> <span class="type-var">'field</span>) <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">'field</span> list) <a href="../../../base/Base/Field/index.html#type-t">Fieldslib.Field.t</a> <span>&#45;&gt;</span> <span class="type-var">'field</span> list</code></dt></dl></div></body></html>