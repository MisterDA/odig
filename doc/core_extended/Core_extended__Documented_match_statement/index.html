<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Core_extended__Documented_match_statement (core_extended.Core_extended__Documented_match_statement)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">core_extended</a> &#x00BB; Core_extended__Documented_match_statement</nav><h1>Module <code>Core_extended__Documented_match_statement</code></h1><p>A <code>t</code> represents a match statement where every case is documented. You can then use it in one way to extract documentation, and in another way as the underlying function.</p><p>More specifically, an <code>('input,'output) t</code> represents a match statement matching things of type <code>input'</code> and producing things of type <code>'output</code>. It consists of <code>specific_cases</code> and a <code>catchall_case</code>.</p><p>The <code>specific_cases</code> are straightforward: <code>{pattern=pattern;documentation=documentation;value=value}</code> represents &quot;| pattern -&gt; value&quot;, with <code>documentation</code> explaining what's going on.</p><p>The <code>catchall_case</code> can be either <code>`Unused x</code>, representing &quot;| _ -&gt; x&quot; with no documentation, or <code>`Used case</code>, representing &quot;| x -&gt; f x&quot;, where <code>f</code> is <code>case.value</code>, and <code>case.documentation</code> explains what's going on with <code>f</code>. This is intended to allow many input values to be handled uniformly without having to document each one individually.</p></header><dl><dt class="spec type" id="type-case"><a href="#type-case" class="anchor"></a><code><span class="keyword">type</span> ('input, 'output) case</code><code> = </code><code>{</code><table class="record"><tr id="type-case.pattern" class="anchored"><td class="def field"><a href="#type-case.pattern" class="anchor"></a><code>pattern : <span class="type-var">'input</span> list;</code></td></tr><tr id="type-case.documentation" class="anchored"><td class="def field"><a href="#type-case.documentation" class="anchor"></a><code>documentation : string;</code></td></tr><tr id="type-case.value" class="anchored"><td class="def field"><a href="#type-case.value" class="anchor"></a><code>value : <span class="type-var">'output</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('input, 'output) t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.specific_cases" class="anchored"><td class="def field"><a href="#type-t.specific_cases" class="anchor"></a><code>specific_cases : (<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output</span>) <a href="index.html#type-case">case</a> list;</code></td></tr><tr id="type-t.catchall_case" class="anchored"><td class="def field"><a href="#type-t.catchall_case" class="anchor"></a><code>catchall_case : [ `Used of ([ `Catchall ], <span class="type-var">'input</span> <span>&#45;&gt;</span> <span class="type-var">'output</span>) <a href="index.html#type-case">case</a> | `Unused of unit <span>&#45;&gt;</span> <span class="type-var">'output</span> ];</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'input</span>, <span class="type-var">'output1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<span class="type-var">'output1</span> <span>&#45;&gt;</span> <span class="type-var">'output2</span>) <span>&#45;&gt;</span> (<span class="type-var">'input</span>, <span class="type-var">'output2</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-map_case"><a href="#val-map_case" class="anchor"></a><code><span class="keyword">val</span> map_case : (<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output1</span>) <a href="index.html#type-case">case</a> <span>&#45;&gt;</span> f:(<span class="type-var">'output1</span> <span>&#45;&gt;</span> <span class="type-var">'output2</span>) <span>&#45;&gt;</span> (<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output2</span>) <a href="index.html#type-case">case</a></code></dt><dt class="spec value" id="val-map_cases"><a href="#val-map_cases" class="anchor"></a><code><span class="keyword">val</span> map_cases : (<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output1</span>) <a href="index.html#type-case">case</a> list <span>&#45;&gt;</span> f:(<span class="type-var">'output1</span> <span>&#45;&gt;</span> <span class="type-var">'output2</span>) <span>&#45;&gt;</span> (<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output2</span>) <a href="index.html#type-case">case</a> list</code></dt><dt class="spec value" id="val-map_pattern"><a href="#val-map_pattern" class="anchor"></a><code><span class="keyword">val</span> map_pattern : (<span class="type-var">'input1</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f1:(<span class="type-var">'input1</span> <span>&#45;&gt;</span> <span class="type-var">'input2</span>) <span>&#45;&gt;</span> f2:(<span class="type-var">'input2</span> <span>&#45;&gt;</span> <span class="type-var">'input1</span>) <span>&#45;&gt;</span> (<span class="type-var">'input2</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-prepend"><a href="#val-prepend" class="anchor"></a><code><span class="keyword">val</span> prepend : specific_cases:(<span class="type-var">'input</span>, unit <span>&#45;&gt;</span> <span class="type-var">'output</span>) <a href="index.html#type-case">case</a> list <span>&#45;&gt;</span> (<span class="type-var">'input</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'input</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a></code></dt><dd><p><code>prepend ~specific_cases t</code> matches on <code>specific_cases</code> before moving on to <code>t</code>.</p><p>A common situation is representing</p><pre><code class="ml">let f t x =
  match x with
  | `A -&gt; ...
  | `B -&gt; ...
  | _ -&gt; {t with field = g t.field x}</code></pre><p>which can be done by combining <code>prepend</code> and <code>map</code>:</p><pre><code class="ml">let f' =
  prepend ~specific_cases:[{pattern = `A;...};{pattern = `B;...}]
  (map g' ~f:(fun h t -&gt; {t with field = h t.field}))</code></pre></dd></dl><dl><dt class="spec value" id="val-match_"><a href="#val-match_" class="anchor"></a><code><span class="keyword">val</span> match_ : (<span class="type-var">'input</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'input</span> <span>&#45;&gt;</span> <span class="type-var">'output</span></code></dt><dd><p><code>match_ t</code> pulls out the underlying function of <code>t</code></p></dd></dl><dl><dt class="spec value" id="val-documentation"><a href="#val-documentation" class="anchor"></a><code><span class="keyword">val</span> documentation : (<span class="type-var">'input</span>, <span class="type-var">'output</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> input_to_string:(<span class="type-var">'input</span> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> title:string <span>&#45;&gt;</span> string list</code></dt></dl></div></body></html>