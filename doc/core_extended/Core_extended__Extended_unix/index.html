<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Core_extended__Extended_unix (core_extended.Core_extended__Extended_unix)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">core_extended</a> &#x00BB; Core_extended__Extended_unix</nav><h1>Module <code>Core_extended__Extended_unix</code></h1></header><dl><dt class="spec value" id="val-fork_exec"><a href="#val-fork_exec" class="anchor"></a><code><span class="keyword">val</span> fork_exec : ?&#8288;stdin:<a href="../../core/Core__Core_unix/File_descr/index.html#type-t">Core.Unix.File_descr.t</a> <span>&#45;&gt;</span> ?&#8288;stdout:<a href="../../core/Core__Core_unix/File_descr/index.html#type-t">Core.Unix.File_descr.t</a> <span>&#45;&gt;</span> ?&#8288;stderr:<a href="../../core/Core__Core_unix/File_descr/index.html#type-t">Core.Unix.File_descr.t</a> <span>&#45;&gt;</span> ?&#8288;path_lookup:bool <span>&#45;&gt;</span> ?&#8288;env:[ `Extend of (string * string) list | `Replace of (string * string) list ] <span>&#45;&gt;</span> ?&#8288;working_dir:string <span>&#45;&gt;</span> ?&#8288;setuid:int <span>&#45;&gt;</span> ?&#8288;setgid:int <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Pid/index.html#type-t">Core.Pid.t</a></code></dt><dd><p><code>fork_exec prog args ~stdin ~stdout ~stderr ~setuid ~setgid</code> forks a new process that executes the program in file <code>prog</code>, with arguments <code>args</code>. The pid of the new process is returned immediately; the new process executes concurrently with the current process.</p><p>The function raises EPERM if when using <code>set{gid,uid}</code> and the user id is not 0.</p><p>The standard input and outputs of the new process are connected to the descriptors <code>stdin</code>, <code>stdout</code> and <code>stderr</code>.</p><p>The close_on_exec flag is cleared from <code>stderr</code> <code>stdout</code> and <code>stdin</code> so it's safe to pass in fds with <code>close_on_exec</code> set.</p><dl><dt>parameter path_lookup</dt><dd><p>if <code>true</code> than we use PATH to find the process to exec. @env specifies the environment the process runs in</p><p>ERRORS: Unix.unix_error. This function should not raise EINTR; it will restart itself automatically.</p><p>RATIONAL: <code>setuid</code> and <code>setgid</code> do not do a full id drop (e.g.: they save the id in saved id) when the user does not have the privileges required to setuid to anyone.</p><p>By default all file descriptors should be set_closexec ASAP after being open to avoid being captured in parallel execution of fork_exec; resetting the closexec flag on the forked flag is a cleaner and more thread safe approach.</p><p>BUGS: The capabilities for setuid in linux are not tied to the uid 0 (man 7 capabilities). It is still fair to assume that under most system this capability is there IFF uid == 0. A more fine grain permissionning approach would make this function non-portable and be hard to implement in an async-signal-way.</p><p>Because this function keeps the lock for most of its lifespan and restarts automatically on EINTR it might prevent the OCaml signal handlers to run in that thread.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-seteuid"><a href="#val-seteuid" class="anchor"></a><code><span class="keyword">val</span> seteuid : int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-setreuid"><a href="#val-setreuid" class="anchor"></a><code><span class="keyword">val</span> setreuid : uid:int <span>&#45;&gt;</span> euid:int <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec external" id="val-ntohl"><a href="#val-ntohl" class="anchor"></a><code><span class="keyword">val</span> ntohl : <a href="../../core_kernel/Core_kernel/Int32/index.html#type-t">Core.Int32.t</a> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Int32/index.html#type-t">Core.Int32.t</a></code></dt><dd><p>Network to host order long, like C.</p></dd></dl><dl><dt class="spec external" id="val-htonl"><a href="#val-htonl" class="anchor"></a><code><span class="keyword">val</span> htonl : <a href="../../core_kernel/Core_kernel/Int32/index.html#type-t">Core.Int32.t</a> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Int32/index.html#type-t">Core.Int32.t</a></code></dt><dd><p>Host to network order long, like C.</p></dd></dl><dl><dt class="spec type" id="type-statvfs"><a href="#type-statvfs" class="anchor"></a><code><span class="keyword">type</span> statvfs</code><code> = </code><code>{</code><table class="record"><tr id="type-statvfs.bsize" class="anchored"><td class="def field"><a href="#type-statvfs.bsize" class="anchor"></a><code>bsize : int;</code></td><td class="doc"><p>file system block size</p></td></tr><tr id="type-statvfs.frsize" class="anchored"><td class="def field"><a href="#type-statvfs.frsize" class="anchor"></a><code>frsize : int;</code></td><td class="doc"><p>fragment size</p></td></tr><tr id="type-statvfs.blocks" class="anchored"><td class="def field"><a href="#type-statvfs.blocks" class="anchor"></a><code>blocks : int;</code></td><td class="doc"><p>size of fs in frsize units</p></td></tr><tr id="type-statvfs.bfree" class="anchored"><td class="def field"><a href="#type-statvfs.bfree" class="anchor"></a><code>bfree : int;</code></td><td class="doc"><p># free blocks</p></td></tr><tr id="type-statvfs.bavail" class="anchored"><td class="def field"><a href="#type-statvfs.bavail" class="anchor"></a><code>bavail : int;</code></td><td class="doc"><p># free blocks for non-root</p></td></tr><tr id="type-statvfs.files" class="anchored"><td class="def field"><a href="#type-statvfs.files" class="anchor"></a><code>files : int;</code></td><td class="doc"><p># inodes</p></td></tr><tr id="type-statvfs.ffree" class="anchored"><td class="def field"><a href="#type-statvfs.ffree" class="anchor"></a><code>ffree : int;</code></td><td class="doc"><p># free inodes</p></td></tr><tr id="type-statvfs.favail" class="anchored"><td class="def field"><a href="#type-statvfs.favail" class="anchor"></a><code>favail : int;</code></td><td class="doc"><p># free inodes for non-root</p></td></tr><tr id="type-statvfs.fsid" class="anchored"><td class="def field"><a href="#type-statvfs.fsid" class="anchor"></a><code>fsid : int;</code></td><td class="doc"><p>file system ID</p></td></tr><tr id="type-statvfs.flag" class="anchored"><td class="def field"><a href="#type-statvfs.flag" class="anchor"></a><code>flag : int;</code></td><td class="doc"><p>mount flags</p></td></tr><tr id="type-statvfs.namemax" class="anchored"><td class="def field"><a href="#type-statvfs.namemax" class="anchor"></a><code>namemax : int;</code></td><td class="doc"><p>maximum filename length</p></td></tr></table><code>}</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-statvfs_of_sexp"><a href="#val-statvfs_of_sexp" class="anchor"></a><code><span class="keyword">val</span> statvfs_of_sexp : <a href="../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-statvfs">statvfs</a></code></dt><dt class="spec value" id="val-sexp_of_statvfs"><a href="#val-sexp_of_statvfs" class="anchor"></a><code><span class="keyword">val</span> sexp_of_statvfs : <a href="index.html#type-statvfs">statvfs</a> <span>&#45;&gt;</span> <a href="../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt><dt class="spec value" id="val-bin_statvfs"><a href="#val-bin_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a></code></dt><dt class="spec value" id="val-bin_read_statvfs"><a href="#val-bin_read_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_read_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></code></dt><dt class="spec value" id="val-__bin_read_statvfs__"><a href="#val-__bin_read_statvfs__" class="anchor"></a><code><span class="keyword">val</span> __bin_read_statvfs__ : (int <span>&#45;&gt;</span> <a href="index.html#type-statvfs">statvfs</a>) <a href="../../bin_prot/Bin_prot/Read/index.html#type-reader">Bin_prot.Read.reader</a></code></dt><dt class="spec value" id="val-bin_reader_statvfs"><a href="#val-bin_reader_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_reader_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-reader">Bin_prot.Type_class.reader</a></code></dt><dt class="spec value" id="val-bin_size_statvfs"><a href="#val-bin_size_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_size_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Size/index.html#type-sizer">Bin_prot.Size.sizer</a></code></dt><dt class="spec value" id="val-bin_write_statvfs"><a href="#val-bin_write_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_write_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Write/index.html#type-writer">Bin_prot.Write.writer</a></code></dt><dt class="spec value" id="val-bin_writer_statvfs"><a href="#val-bin_writer_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_writer_statvfs : <a href="index.html#type-statvfs">statvfs</a> <a href="../../bin_prot/Bin_prot/Type_class/index.html#type-writer">Bin_prot.Type_class.writer</a></code></dt><dt class="spec value" id="val-bin_shape_statvfs"><a href="#val-bin_shape_statvfs" class="anchor"></a><code><span class="keyword">val</span> bin_shape_statvfs : <a href="../../bin_prot/Bin_prot/Shape/index.html#type-t">Bin_prot.Shape.t</a></code></dt></dl></details></div></div></div><dl><dt class="spec external" id="val-statvfs"><a href="#val-statvfs" class="anchor"></a><code><span class="keyword">val</span> statvfs : string <span>&#45;&gt;</span> <a href="index.html#type-statvfs">statvfs</a></code></dt><dd><p>get file system statistics</p></dd></dl><dl><dt class="spec external" id="val-getloadavg"><a href="#val-getloadavg" class="anchor"></a><code><span class="keyword">val</span> getloadavg : unit <span>&#45;&gt;</span> float * float * float</code></dt><dd><p>get load averages</p></dd></dl><div class="spec module" id="module-Extended_passwd"><a href="#module-Extended_passwd" class="anchor"></a><code><span class="keyword">module</span> <a href="Extended_passwd/index.html">Extended_passwd</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec external" id="val-strptime"><a href="#val-strptime" class="anchor"></a><code><span class="keyword">val</span> strptime : fmt:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../core/Core__/Core_unix/index.html#type-tm">Core.Unix.tm</a></code></dt></dl><aside><p>The CIDR module moved into Core.Unix</p></aside><dl><dt class="spec module" id="module-Inet_port"><a href="#module-Inet_port" class="anchor"></a><code><span class="keyword">module</span> <a href="Inet_port/index.html">Inet_port</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Simple int wrapper to be explicit about ports.</p></dd></dl><div class="spec module" id="module-Mac_address"><a href="#module-Mac_address" class="anchor"></a><code><span class="keyword">module</span> <a href="Mac_address/index.html">Mac_address</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Quota"><a href="#module-Quota" class="anchor"></a><code><span class="keyword">module</span> <a href="Quota/index.html">Quota</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Mount_entry"><a href="#module-Mount_entry" class="anchor"></a><code><span class="keyword">module</span> <a href="Mount_entry/index.html">Mount_entry</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-terminal_width"><a href="#val-terminal_width" class="anchor"></a><code><span class="keyword">val</span> terminal_width : int <a href="../../core_kernel/Core_kernel/Lazy/index.html#type-t">Core.Lazy.t</a></code></dt></dl></div></body></html>