<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Offline (core_profiler.Core_profiler.Offline)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">core_profiler</a> &#x00BB; <a href="../index.html">Core_profiler</a> &#x00BB; Offline</nav><h1>Module <code>Core_profiler.Offline</code></h1></header><aside><p>Running a program with offline metrics collection causes it to write out a data file on exit. This data file is typically called <code>profiler.dat</code>. The collected metrics can then be analyzed using <code>profiler-tool.exe</code>.</p><p>I don't trust these numbers, but here they are:</p><pre>    ┌──────────────────────────────────────────────────────┬──────────┬────────────┐
    │ Name                                                 │ Time/Run │ Percentage │
    ├──────────────────────────────────────────────────────┼──────────┼────────────┤
    │ [offline.ml:Timer] at                                │  18.29ns │     10.34% │
    │ [offline.ml:Probe] at                                │  21.92ns │     12.38% │
    │ [offline.ml:Delta_timer] start_async                 │  10.94ns │      6.18% │
    │ [offline.ml:Delta_timer] stop_async                  │  22.78ns │     12.87% │
    │ [offline.ml:Delta_timer] start                       │  11.23ns │      6.34% │
    │ [offline.ml:Delta_timer] stop                        │  22.84ns │     12.91% │
    │ [offline.ml:Delta_timer.wrap_sync] nop               │   2.45ns │      1.38% │
    │ [offline.ml:Delta_timer.wrap_sync] wrapped_nop       │  40.59ns │     22.93% │
    │ [offline.ml:Delta_timer.wrap_sync] count_256         │ 143.57ns │     81.12% │
    │ [offline.ml:Delta_timer.wrap_sync] wrapped_count_256 │ 176.99ns │    100.00% │
    │ [offline.ml:Delta_probe] start                       │   2.47ns │      1.40% │
    │ [offline.ml:Delta_probe] stop                        │  22.11ns │     12.49% │
    │ [offline.ml:Delta_probe] start_async                 │   2.44ns │      1.38% │
    │ [offline.ml:Delta_probe] stop_async                  │  22.20ns │     12.54% │
    └──────────────────────────────────────────────────────┴──────────┴────────────┘</pre></aside><aside><p>In <code>Offline</code>, a <code>Delta_probe</code> differs from a two point <code>Group</code> in that for each start/stop pair, only one message is written to the buffer. This means that only the delta in the probe is available, as opposed to deltas in both probe and time.</p></aside><div><div class="spec include"><div class="doc"><div class="spec module" id="module-Profiler"><a href="#module-Profiler" class="anchor"></a><code><span class="keyword">module</span> <a href="Profiler/index.html">Profiler</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Timer"><a href="#module-Timer" class="anchor"></a><code><span class="keyword">module</span> <a href="Timer/index.html">Timer</a> : <a href="../../Core_profiler_disabled/Intf/index.html#module-type-Probe">Core_profiler_disabled.Intf.Probe</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-create_args">create_args</a> := <span class="type-var">'a</span> <a href="../../Core_profiler_disabled/Intf/index.html#type-timer_create_args">Core_profiler_disabled.Intf.timer_create_args</a> <span class="keyword">and</span> <span class="keyword">type</span> 'a <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-record_args">record_args</a> := <span class="type-var">'a</span> <a href="../../Core_profiler_disabled/Intf/index.html#type-timer_record_args">Core_profiler_disabled.Intf.timer_record_args</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-t">t</a> = <span class="keyword">private</span> int</code></dt><dd><p>A <code>Timer</code> contains only a time stamp and no extra information; however, it is useful because (in <code>Offline</code>) the current time is recorded when measurements are made.</p></dd></dl><dl><dt class="spec module" id="module-Probe"><a href="#module-Probe" class="anchor"></a><code><span class="keyword">module</span> <a href="Probe/index.html">Probe</a> : <a href="../../Core_profiler_disabled/Intf/index.html#module-type-Probe">Core_profiler_disabled.Intf.Probe</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-create_args">create_args</a> := <span class="type-var">'a</span> <a href="../../Core_profiler_disabled/Intf/index.html#type-probe_create_args">Core_profiler_disabled.Intf.probe_create_args</a> <span class="keyword">and</span> <span class="keyword">type</span> 'a <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-record_args">record_args</a> := <span class="type-var">'a</span> <a href="../../Core_profiler_disabled/Intf/index.html#type-probe_record_args">Core_profiler_disabled.Intf.probe_record_args</a> <span class="keyword">and</span> <span class="keyword">type</span> <a href="../../Core_profiler_disabled/Intf/module-type-Probe/index.html#type-t">t</a> = <span class="keyword">private</span> int</code></dt><dd><p>A <code>Probe</code> records some integer value that is passed to <code>at</code> along with a timestamp.</p></dd></dl><dl><dt class="spec module" id="module-Delta_probe"><a href="#module-Delta_probe" class="anchor"></a><code><span class="keyword">module</span> <a href="Delta_probe/index.html">Delta_probe</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Delta_probe/index.html#type-state">state</a> = <span class="keyword">private</span> int</code></dt><dd><p><code>Delta_probe</code> is an optimized two-probe group to track changes to some counter.</p></dd></dl><dl><dt class="spec module" id="module-Delta_timer"><a href="#module-Delta_timer" class="anchor"></a><code><span class="keyword">module</span> <a href="Delta_timer/index.html">Delta_timer</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Delta_timer/index.html#type-state">state</a> = <span class="keyword">private</span> <a href="../../../core/Core__/Core_time_ns/index.html#type-t">Core.Time_ns.t</a></code></dt><dd><p><code>Delta_timer</code> is an optimized two-probe group to track time differences between calls to <code>start</code> and <code>stop</code>.</p></dd></dl></div></div></div></div></body></html>