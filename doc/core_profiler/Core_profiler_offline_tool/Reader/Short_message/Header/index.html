<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Header (core_profiler.Core_profiler_offline_tool.Reader.Short_message.Header)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">core_profiler</a> &#x00BB; <a href="../../../index.html">Core_profiler_offline_tool</a> &#x00BB; <a href="../../index.html">Reader</a> &#x00BB; <a href="../index.html">Short_message</a> &#x00BB; Header</nav><h1>Module <code>Short_message.Header</code></h1></header><aside><p>Packs <code>Probe_id.t</code> and <code>Time_ns.t</code> into a single <code>int</code>.</p></aside><aside><p>The goal of <code>Short_header</code> is to pack a <code>Timer.record</code> into one word (we want to write an integer number of words for alignment, and don't want to pay for the size or time of writing a second word if we don't have to).</p><p>A short header &quot;contains&quot; an <code>Probe_id.t</code> and a <code>Time_ns.t</code>. A short header is a single word / integer; we have 63 bits to play with. The 9 most significant bits contain <code>Probe_id.to_int_exn</code>; the remaining 54 bits contain a time, stored as a number of nanoseconds from some <code>Profiler_epoch.t</code> (the epoch is written into the header; see <code>Writer.write_epoch</code>).</p><p>2 ** 54 nanoseconds is approximately 208 days. The epoch is set to equal a little before now when OCaml starts up, so the header should continue to work for ~208 days after that.</p></aside><dl><dt class="spec value" id="val-id_bits"><a href="#val-id_bits" class="anchor"></a><code><span class="keyword">val</span> id_bits : int</code></dt><dt class="spec value" id="val-time_bits"><a href="#val-time_bits" class="anchor"></a><code><span class="keyword">val</span> time_bits : int</code></dt><dt class="spec value" id="val-max_id"><a href="#val-max_id" class="anchor"></a><code><span class="keyword">val</span> max_id : int</code></dt><dt class="spec value" id="val-max_time_diff"><a href="#val-max_time_diff" class="anchor"></a><code><span class="keyword">val</span> max_time_diff : <a href="../../../../../core/Core__Core_time_ns/Span/index.html#type-t">Core.Time_ns.Span.t</a></code></dt><dt class="spec value" id="val-pack_exn"><a href="#val-pack_exn" class="anchor"></a><code><span class="keyword">val</span> pack_exn : <a href="../../../../Core_profiler/Profiler_epoch/index.html#type-t">Core_profiler.Profiler_epoch.t</a> <span>&#45;&gt;</span> <a href="../../../../Core_profiler/Probe_id/index.html#type-t">Core_profiler.Probe_id.t</a> <span>&#45;&gt;</span> <a href="../../../../../core/Core__/Core_time_ns/index.html#type-t">Core.Time_ns.t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-pack_unsafe"><a href="#val-pack_unsafe" class="anchor"></a><code><span class="keyword">val</span> pack_unsafe : <a href="../../../../Core_profiler/Profiler_epoch/index.html#type-t">Core_profiler.Profiler_epoch.t</a> <span>&#45;&gt;</span> <a href="../../../../Core_profiler/Probe_id/index.html#type-t">Core_profiler.Probe_id.t</a> <span>&#45;&gt;</span> <a href="../../../../../core/Core__/Core_time_ns/index.html#type-t">Core.Time_ns.t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-unpack_id"><a href="#val-unpack_id" class="anchor"></a><code><span class="keyword">val</span> unpack_id : int <span>&#45;&gt;</span> <a href="../../../../Core_profiler/Probe_id/index.html#type-t">Core_profiler.Probe_id.t</a></code></dt><dt class="spec value" id="val-unpack_time"><a href="#val-unpack_time" class="anchor"></a><code><span class="keyword">val</span> unpack_time : <a href="../../../../Core_profiler/Profiler_epoch/index.html#type-t">Core_profiler.Profiler_epoch.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../../../../../core/Core__/Core_time_ns/index.html#type-t">Core.Time_ns.t</a></code></dt><dt class="spec value" id="val-unpack"><a href="#val-unpack" class="anchor"></a><code><span class="keyword">val</span> unpack : <a href="../../../../Core_profiler/Profiler_epoch/index.html#type-t">Core_profiler.Profiler_epoch.t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../../../../Core_profiler/Probe_id/index.html#type-t">Core_profiler.Probe_id.t</a> * <a href="../../../../../core/Core__/Core_time_ns/index.html#type-t">Core.Time_ns.t</a></code></dt></dl></div></body></html>