<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dtd (csvfields.Xml_light.Dtd)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">csvfields</a> &#x00BB; <a href="../index.html">Xml_light</a> &#x00BB; Dtd</nav><h1>Module <code>Xml_light.Dtd</code></h1><nav class="toc"><ul><li><a href="#the-dtd-types">The DTD Types</a></li><li><a href="#the-dtd-functions">The DTD Functions</a></li><li><a href="#the-dtd-exceptions">The DTD Exceptions</a></li></ul></nav></header><aside><p>Xml Light DTD</p><p>This module provide several functions to create, check, and use DTD to prove Xml documents : </p><ul><li>using the DTD types, you can directly create your own DTD structure</li><li>the <a href="index.html#val-check"><code>Dtd.check</code></a> function can then be used to check that all DTD states have been declared, that no attributes are declared twice, and so on.</li><li>the <a href="index.html#val-prove"><code>Dtd.prove</code></a> function can be used to check an <a href="../Xml/index.html"><code>Xml</code></a> data structure with a checked DTD. The function will return the expanded Xml document or raise an exception if the DTD proving fails.</li></ul><p><i>Note about ENTITIES:</i></p><p>While parsing Xml, PCDATA is always parsed and the Xml entities &amp;amp; &amp;gt; &amp;lt; &amp;apos; &amp;quot; are replaced by their corresponding ASCII characters. For Xml attributes, theses can be put between either double or simple quotes, and the backslash character can be used to escape inner quotes. There is no support for CDATA Xml nodes or PCDATA attributes declarations in DTD, and no support for user-defined entities using the ENTITY DTD element.</p></aside><section><header><h6 id="the-dtd-types"><a href="#the-dtd-types" class="anchor"></a>The DTD Types</h6></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../index.html#module-Dtd0">Dtd0</a></code></span></summary><dl><dt class="spec type" id="type-dtd_child"><a href="#type-dtd_child" class="anchor"></a><code><span class="keyword">type</span> dtd_child</code><code> = <a href="../Types/index.html#type-dtd_child">Types.dtd_child</a></code><code> = </code><table class="variant"><tr id="type-dtd_child.DTDTag" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDTag" class="anchor"></a><code>| </code><code><span class="constructor">DTDTag</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-dtd_child.DTDPCData" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDPCData" class="anchor"></a><code>| </code><code><span class="constructor">DTDPCData</span></code></td></tr><tr id="type-dtd_child.DTDOptional" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDOptional" class="anchor"></a><code>| </code><code><span class="constructor">DTDOptional</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a></code></td></tr><tr id="type-dtd_child.DTDZeroOrMore" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDZeroOrMore" class="anchor"></a><code>| </code><code><span class="constructor">DTDZeroOrMore</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a></code></td></tr><tr id="type-dtd_child.DTDOneOrMore" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDOneOrMore" class="anchor"></a><code>| </code><code><span class="constructor">DTDOneOrMore</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a></code></td></tr><tr id="type-dtd_child.DTDChoice" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDChoice" class="anchor"></a><code>| </code><code><span class="constructor">DTDChoice</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a> list</code></td></tr><tr id="type-dtd_child.DTDChildren" class="anchored"><td class="def constructor"><a href="#type-dtd_child.DTDChildren" class="anchor"></a><code>| </code><code><span class="constructor">DTDChildren</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a> list</code></td></tr></table></dt><dt class="spec type" id="type-dtd_element_type"><a href="#type-dtd_element_type" class="anchor"></a><code><span class="keyword">type</span> dtd_element_type</code><code> = <a href="../Types/index.html#type-dtd_element_type">Types.dtd_element_type</a></code><code> = </code><table class="variant"><tr id="type-dtd_element_type.DTDEmpty" class="anchored"><td class="def constructor"><a href="#type-dtd_element_type.DTDEmpty" class="anchor"></a><code>| </code><code><span class="constructor">DTDEmpty</span></code></td></tr><tr id="type-dtd_element_type.DTDAny" class="anchored"><td class="def constructor"><a href="#type-dtd_element_type.DTDAny" class="anchor"></a><code>| </code><code><span class="constructor">DTDAny</span></code></td></tr><tr id="type-dtd_element_type.DTDChild" class="anchored"><td class="def constructor"><a href="#type-dtd_element_type.DTDChild" class="anchor"></a><code>| </code><code><span class="constructor">DTDChild</span> <span class="keyword">of</span> <a href="index.html#type-dtd_child">dtd_child</a></code></td></tr></table></dt><dt class="spec type" id="type-dtd_attr_default"><a href="#type-dtd_attr_default" class="anchor"></a><code><span class="keyword">type</span> dtd_attr_default</code><code> = <a href="../Types/index.html#type-dtd_attr_default">Types.dtd_attr_default</a></code><code> = </code><table class="variant"><tr id="type-dtd_attr_default.DTDDefault" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_default.DTDDefault" class="anchor"></a><code>| </code><code><span class="constructor">DTDDefault</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-dtd_attr_default.DTDRequired" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_default.DTDRequired" class="anchor"></a><code>| </code><code><span class="constructor">DTDRequired</span></code></td></tr><tr id="type-dtd_attr_default.DTDImplied" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_default.DTDImplied" class="anchor"></a><code>| </code><code><span class="constructor">DTDImplied</span></code></td></tr><tr id="type-dtd_attr_default.DTDFixed" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_default.DTDFixed" class="anchor"></a><code>| </code><code><span class="constructor">DTDFixed</span> <span class="keyword">of</span> string</code></td></tr></table></dt><dt class="spec type" id="type-dtd_attr_type"><a href="#type-dtd_attr_type" class="anchor"></a><code><span class="keyword">type</span> dtd_attr_type</code><code> = <a href="../Types/index.html#type-dtd_attr_type">Types.dtd_attr_type</a></code><code> = </code><table class="variant"><tr id="type-dtd_attr_type.DTDCData" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_type.DTDCData" class="anchor"></a><code>| </code><code><span class="constructor">DTDCData</span></code></td></tr><tr id="type-dtd_attr_type.DTDNMToken" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_type.DTDNMToken" class="anchor"></a><code>| </code><code><span class="constructor">DTDNMToken</span></code></td></tr><tr id="type-dtd_attr_type.DTDEnum" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_type.DTDEnum" class="anchor"></a><code>| </code><code><span class="constructor">DTDEnum</span> <span class="keyword">of</span> string list</code></td></tr><tr id="type-dtd_attr_type.DTDID" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_type.DTDID" class="anchor"></a><code>| </code><code><span class="constructor">DTDID</span></code></td></tr><tr id="type-dtd_attr_type.DTDIDRef" class="anchored"><td class="def constructor"><a href="#type-dtd_attr_type.DTDIDRef" class="anchor"></a><code>| </code><code><span class="constructor">DTDIDRef</span></code></td></tr></table></dt><dt class="spec type" id="type-dtd_item"><a href="#type-dtd_item" class="anchor"></a><code><span class="keyword">type</span> dtd_item</code><code> = <a href="../Types/index.html#type-dtd_item">Types.dtd_item</a></code><code> = </code><table class="variant"><tr id="type-dtd_item.DTDAttribute" class="anchored"><td class="def constructor"><a href="#type-dtd_item.DTDAttribute" class="anchor"></a><code>| </code><code><span class="constructor">DTDAttribute</span> <span class="keyword">of</span> string * string * <a href="index.html#type-dtd_attr_type">dtd_attr_type</a> * <a href="index.html#type-dtd_attr_default">dtd_attr_default</a></code></td></tr><tr id="type-dtd_item.DTDElement" class="anchored"><td class="def constructor"><a href="#type-dtd_item.DTDElement" class="anchor"></a><code>| </code><code><span class="constructor">DTDElement</span> <span class="keyword">of</span> string * <a href="index.html#type-dtd_element_type">dtd_element_type</a></code></td></tr></table></dt><dt class="spec type" id="type-dtd"><a href="#type-dtd" class="anchor"></a><code><span class="keyword">type</span> dtd</code><code> = <a href="index.html#type-dtd_item">dtd_item</a> list</code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-checked"><a href="#type-checked" class="anchor"></a><code><span class="keyword">type</span> checked</code></dt></dl></section><section><header><h6 id="the-dtd-functions"><a href="#the-dtd-functions" class="anchor"></a>The DTD Functions</h6></header><dl><dt class="spec value" id="val-parse_file"><a href="#val-parse_file" class="anchor"></a><code><span class="keyword">val</span> parse_file : string <span>&#45;&gt;</span> <a href="index.html#type-dtd">dtd</a></code></dt><dd><p>Parse the named file into a Dtd data structure. Raise <a href="../Xml/index.html#exception-File_not_found"><code>Xml.File_not_found</code></a> if an error occured while opening the file. Raise <a href="index.html#exception-Parse_error"><code>Dtd.Parse_error</code></a> if parsing failed.</p></dd></dl><dl><dt class="spec value" id="val-parse_in"><a href="#val-parse_in" class="anchor"></a><code><span class="keyword">val</span> parse_in : <a href="../../../ocaml/Stdlib/index.html#type-in_channel">Stdlib.in_channel</a> <span>&#45;&gt;</span> <a href="index.html#type-dtd">dtd</a></code></dt><dd><p>Read the content of the in_channel and parse it into a Dtd data structure. Raise <a href="index.html#exception-Parse_error"><code>Dtd.Parse_error</code></a> if parsing failed.</p></dd></dl><dl><dt class="spec value" id="val-parse_string"><a href="#val-parse_string" class="anchor"></a><code><span class="keyword">val</span> parse_string : string <span>&#45;&gt;</span> <a href="index.html#type-dtd">dtd</a></code></dt><dd><p>Parse the string containing a Dtd document into a Dtd data structure. Raise <a href="index.html#exception-Parse_error"><code>Dtd.Parse_error</code></a> if parsing failed.</p></dd></dl><dl><dt class="spec value" id="val-check"><a href="#val-check" class="anchor"></a><code><span class="keyword">val</span> check : <a href="index.html#type-dtd">dtd</a> <span>&#45;&gt;</span> <a href="index.html#type-checked">checked</a></code></dt><dd><p>Check the Dtd data structure declaration and return a checked DTD. Raise <a href="index.html#exception-Check_error"><code>Dtd.Check_error</code></a> if the DTD checking failed.</p></dd></dl><dl><dt class="spec value" id="val-prove"><a href="#val-prove" class="anchor"></a><code><span class="keyword">val</span> prove : <a href="index.html#type-checked">checked</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../Types/index.html#type-xml">Types.xml</a> <span>&#45;&gt;</span> <a href="../Types/index.html#type-xml">Types.xml</a></code></dt><dd><p>Prove an Xml document using a checked DTD and an entry point. The entry point is the first excepted tag of the Xml document, the returned Xml document has the same structure has the original one, excepted that non declared optional attributes have been set to their default value specified in the DTD. Raise <a href="index.html#exception-Check_error"><code>Dtd.Check_error</code></a> <code>ElementNotDeclared</code> if the entry point is not found, raise <a href="index.html#exception-Prove_error"><code>Dtd.Prove_error</code></a> if the Xml document failed to be proved with the DTD.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-dtd_item">dtd_item</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Print a DTD element into a string. You can easily get a DTD document from a DTD data structure using for example <code>String.concat &quot;\n&quot; (List.map Dtd.to_string) my_dtd</code></p></dd></dl></section><section><header><h6 id="the-dtd-exceptions"><a href="#the-dtd-exceptions" class="anchor"></a>The DTD Exceptions</h6></header><aside><p>There is three types of DTD excecptions : </p><ul><li><a href="index.html#exception-Parse_error"><code>Dtd.Parse_error</code></a> is raised when an error occured while parsing a DTD document into a DTD data structure.</li><li><a href="index.html#exception-Check_error"><code>Dtd.Check_error</code></a> is raised when an error occured while checking a DTD data structure for completeness, or when the prove entry point is not found when calling <a href="index.html#val-prove"><code>Dtd.prove</code></a>.</li><li><a href="index.html#exception-Prove_error"><code>Dtd.Prove_error</code></a> is raised when an error occured while proving an Xml document.</li></ul><p>Several string conversion functions are provided to enable you to report errors to the user.</p></aside><dl><dt class="spec type" id="type-parse_error_msg"><a href="#type-parse_error_msg" class="anchor"></a><code><span class="keyword">type</span> parse_error_msg</code><code> = </code><table class="variant"><tr id="type-parse_error_msg.InvalidDTDDecl" class="anchored"><td class="def constructor"><a href="#type-parse_error_msg.InvalidDTDDecl" class="anchor"></a><code>| </code><code><span class="constructor">InvalidDTDDecl</span></code></td></tr><tr id="type-parse_error_msg.InvalidDTDElement" class="anchored"><td class="def constructor"><a href="#type-parse_error_msg.InvalidDTDElement" class="anchor"></a><code>| </code><code><span class="constructor">InvalidDTDElement</span></code></td></tr><tr id="type-parse_error_msg.InvalidDTDAttribute" class="anchored"><td class="def constructor"><a href="#type-parse_error_msg.InvalidDTDAttribute" class="anchor"></a><code>| </code><code><span class="constructor">InvalidDTDAttribute</span></code></td></tr><tr id="type-parse_error_msg.InvalidDTDTag" class="anchored"><td class="def constructor"><a href="#type-parse_error_msg.InvalidDTDTag" class="anchor"></a><code>| </code><code><span class="constructor">InvalidDTDTag</span></code></td></tr><tr id="type-parse_error_msg.DTDItemExpected" class="anchored"><td class="def constructor"><a href="#type-parse_error_msg.DTDItemExpected" class="anchor"></a><code>| </code><code><span class="constructor">DTDItemExpected</span></code></td></tr></table></dt><dt class="spec type" id="type-check_error"><a href="#type-check_error" class="anchor"></a><code><span class="keyword">type</span> check_error</code><code> = </code><table class="variant"><tr id="type-check_error.ElementDefinedTwice" class="anchored"><td class="def constructor"><a href="#type-check_error.ElementDefinedTwice" class="anchor"></a><code>| </code><code><span class="constructor">ElementDefinedTwice</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-check_error.AttributeDefinedTwice" class="anchored"><td class="def constructor"><a href="#type-check_error.AttributeDefinedTwice" class="anchor"></a><code>| </code><code><span class="constructor">AttributeDefinedTwice</span> <span class="keyword">of</span> string * string</code></td></tr><tr id="type-check_error.ElementEmptyContructor" class="anchored"><td class="def constructor"><a href="#type-check_error.ElementEmptyContructor" class="anchor"></a><code>| </code><code><span class="constructor">ElementEmptyContructor</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-check_error.ElementReferenced" class="anchored"><td class="def constructor"><a href="#type-check_error.ElementReferenced" class="anchor"></a><code>| </code><code><span class="constructor">ElementReferenced</span> <span class="keyword">of</span> string * string</code></td></tr><tr id="type-check_error.ElementNotDeclared" class="anchored"><td class="def constructor"><a href="#type-check_error.ElementNotDeclared" class="anchor"></a><code>| </code><code><span class="constructor">ElementNotDeclared</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-check_error.WrongImplicitValueForID" class="anchored"><td class="def constructor"><a href="#type-check_error.WrongImplicitValueForID" class="anchor"></a><code>| </code><code><span class="constructor">WrongImplicitValueForID</span> <span class="keyword">of</span> string * string</code></td></tr></table></dt><dt class="spec type" id="type-prove_error"><a href="#type-prove_error" class="anchor"></a><code><span class="keyword">type</span> prove_error</code><code> = </code><table class="variant"><tr id="type-prove_error.UnexpectedPCData" class="anchored"><td class="def constructor"><a href="#type-prove_error.UnexpectedPCData" class="anchor"></a><code>| </code><code><span class="constructor">UnexpectedPCData</span></code></td></tr><tr id="type-prove_error.UnexpectedTag" class="anchored"><td class="def constructor"><a href="#type-prove_error.UnexpectedTag" class="anchor"></a><code>| </code><code><span class="constructor">UnexpectedTag</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.UnexpectedAttribute" class="anchored"><td class="def constructor"><a href="#type-prove_error.UnexpectedAttribute" class="anchor"></a><code>| </code><code><span class="constructor">UnexpectedAttribute</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.InvalidAttributeValue" class="anchored"><td class="def constructor"><a href="#type-prove_error.InvalidAttributeValue" class="anchor"></a><code>| </code><code><span class="constructor">InvalidAttributeValue</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.RequiredAttribute" class="anchored"><td class="def constructor"><a href="#type-prove_error.RequiredAttribute" class="anchor"></a><code>| </code><code><span class="constructor">RequiredAttribute</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.ChildExpected" class="anchored"><td class="def constructor"><a href="#type-prove_error.ChildExpected" class="anchor"></a><code>| </code><code><span class="constructor">ChildExpected</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.EmptyExpected" class="anchored"><td class="def constructor"><a href="#type-prove_error.EmptyExpected" class="anchor"></a><code>| </code><code><span class="constructor">EmptyExpected</span></code></td></tr><tr id="type-prove_error.DuplicateID" class="anchored"><td class="def constructor"><a href="#type-prove_error.DuplicateID" class="anchor"></a><code>| </code><code><span class="constructor">DuplicateID</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-prove_error.MissingID" class="anchored"><td class="def constructor"><a href="#type-prove_error.MissingID" class="anchor"></a><code>| </code><code><span class="constructor">MissingID</span> <span class="keyword">of</span> string</code></td></tr></table></dt><dt class="spec type" id="type-parse_error"><a href="#type-parse_error" class="anchor"></a><code><span class="keyword">type</span> parse_error</code><code> = <a href="index.html#type-parse_error_msg">parse_error_msg</a> * <a href="../Types/index.html#type-error_pos">Types.error_pos</a></code></dt></dl><dl><dt class="spec exception" id="exception-Parse_error"><a href="#exception-Parse_error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Parse_error</span> <span class="keyword">of</span> <a href="index.html#type-parse_error">parse_error</a></code></dt><dt class="spec exception" id="exception-Check_error"><a href="#exception-Check_error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Check_error</span> <span class="keyword">of</span> <a href="index.html#type-check_error">check_error</a></code></dt><dt class="spec exception" id="exception-Prove_error"><a href="#exception-Prove_error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Prove_error</span> <span class="keyword">of</span> <a href="index.html#type-prove_error">prove_error</a></code></dt></dl><dl><dt class="spec value" id="val-parse_error"><a href="#val-parse_error" class="anchor"></a><code><span class="keyword">val</span> parse_error : <a href="index.html#type-parse_error">parse_error</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-check_error"><a href="#val-check_error" class="anchor"></a><code><span class="keyword">val</span> check_error : <a href="index.html#type-check_error">check_error</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-prove_error"><a href="#val-prove_error" class="anchor"></a><code><span class="keyword">val</span> prove_error : <a href="index.html#type-prove_error">prove_error</a> <span>&#45;&gt;</span> string</code></dt></dl></section></div></body></html>