<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Xml_light__Xml (csvfields.Xml_light__Xml)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">csvfields</a> &#x00BB; Xml_light__Xml</nav><h1>Module <code>Xml_light__Xml</code></h1><p>Xml Light</p><p>Xml Light is a minimal Xml parser &amp; printer for OCaml. It provide few functions to parse a basic Xml document into an OCaml data structure and to print back the data structures to an Xml document.</p><p>Xml Light has also support for <b>DTD</b> (Document Type Definition).</p><p><i>(c)Copyright 2002-2003 Nicolas Cannasse</i></p><nav class="toc"><ul><li><a href="#xml-data-structure">Xml Data Structure</a></li><li><a href="#xml-parsing">Xml Parsing</a></li><li><a href="#exc">Xml Exceptions</a></li><li><a href="#xml-functions">Xml Functions</a></li><li><a href="#xml-printing">Xml Printing</a></li></ul></nav></header><section><header><h6 id="xml-data-structure"><a href="#xml-data-structure" class="anchor"></a>Xml Data Structure</h6></header><dl><dt class="spec type" id="type-xml"><a href="#type-xml" class="anchor"></a><code><span class="keyword">type</span> xml</code><code> = <a href="../Xml_light/Types/index.html#type-xml">Xml_light.Types.xml</a></code><code> = </code><table class="variant"><tr id="type-xml.Element" class="anchored"><td class="def constructor"><a href="#type-xml.Element" class="anchor"></a><code>| </code><code><span class="constructor">Element</span> <span class="keyword">of</span> string * (string * string) list * <a href="index.html#type-xml">xml</a> list</code></td></tr><tr id="type-xml.PCData" class="anchored"><td class="def constructor"><a href="#type-xml.PCData" class="anchor"></a><code>| </code><code><span class="constructor">PCData</span> <span class="keyword">of</span> string</code></td></tr></table></dt><dd><p>An Xml node is either <code>Element (tag-name, attributes, children)</code> or <code>PCData text</code></p></dd></dl></section><section><header><h6 id="xml-parsing"><a href="#xml-parsing" class="anchor"></a>Xml Parsing</h6></header><aside><p>For easily parsing an Xml data source into an xml data structure, you can use theses functions. But if you want advanced parsing usage, please look at the <code>XmlParser</code> module. All the parsing functions can raise some exceptions, see the <a href="#exc">Exceptions</a> section for more informations.</p></aside><dl><dt class="spec value" id="val-parse_file"><a href="#val-parse_file" class="anchor"></a><code><span class="keyword">val</span> parse_file : string <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a></code></dt><dd><p>Parse the named file into an Xml data structure.</p></dd></dl><dl><dt class="spec value" id="val-parse_in"><a href="#val-parse_in" class="anchor"></a><code><span class="keyword">val</span> parse_in : <a href="../../ocaml/Stdlib/index.html#type-in_channel">Stdlib.in_channel</a> <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a></code></dt><dd><p>Read the content of the in_channel and parse it into an Xml data structure.</p></dd></dl><dl><dt class="spec value" id="val-parse_string"><a href="#val-parse_string" class="anchor"></a><code><span class="keyword">val</span> parse_string : string <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a></code></dt><dd><p>Parse the string containing an Xml document into an Xml data structure.</p></dd></dl><dl><dt class="spec value" id="val-parse_string_with"><a href="#val-parse_string_with" class="anchor"></a><code><span class="keyword">val</span> parse_string_with : <a href="../Xml_light/XmlParser/index.html#type-t">Xml_light.XmlParser.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a></code></dt></dl></section><section><header><h6 id="exc"><a href="#exc" class="anchor"></a>Xml Exceptions</h6></header><aside><p>Several exceptions can be raised when parsing an Xml document : </p><ul><li><span class="xref-unresolved" title="unresolved reference to &quot;Xml.Error&quot;"><code>Xml</code>.Error</span> is raised when an xml parsing error occurs. the <span class="xref-unresolved" title="unresolved reference to &quot;Xml.error_msg&quot;"><code>Xml</code>.error_msg</span> tells you which error occured during parsing and the <span class="xref-unresolved" title="unresolved reference to &quot;Xml.error_pos&quot;"><code>Xml</code>.error_pos</span> can be used to retreive the document location where the error occured at.</li><li><span class="xref-unresolved" title="unresolved reference to &quot;Xml.File_not_found&quot;"><code>Xml</code>.File_not_found</span> is raised when and error occured while opening a file with the <span class="xref-unresolved" title="unresolved reference to &quot;Xml.parse_file&quot;"><code>Xml</code>.parse_file</span> function or when a DTD file declared by the Xml document is not found <i>(see the <code>XmlParser</code> module for more informations on how to handle the DTD file loading)</i>.</li></ul><p>If the Xml document is containing a DTD, then some other exceptions can be raised, see the module <code>Dtd</code> for more informations.</p></aside><dl><dt class="spec type" id="type-error_pos"><a href="#type-error_pos" class="anchor"></a><code><span class="keyword">type</span> error_pos</code></dt><dt class="spec type" id="type-error_msg"><a href="#type-error_msg" class="anchor"></a><code><span class="keyword">type</span> error_msg</code><code> = <a href="../Xml_light/Types/index.html#type-error_msg">Xml_light.Types.error_msg</a></code><code> = </code><table class="variant"><tr id="type-error_msg.UnterminatedComment" class="anchored"><td class="def constructor"><a href="#type-error_msg.UnterminatedComment" class="anchor"></a><code>| </code><code><span class="constructor">UnterminatedComment</span></code></td></tr><tr id="type-error_msg.UnterminatedString" class="anchored"><td class="def constructor"><a href="#type-error_msg.UnterminatedString" class="anchor"></a><code>| </code><code><span class="constructor">UnterminatedString</span></code></td></tr><tr id="type-error_msg.UnterminatedEntity" class="anchored"><td class="def constructor"><a href="#type-error_msg.UnterminatedEntity" class="anchor"></a><code>| </code><code><span class="constructor">UnterminatedEntity</span></code></td></tr><tr id="type-error_msg.IdentExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.IdentExpected" class="anchor"></a><code>| </code><code><span class="constructor">IdentExpected</span></code></td></tr><tr id="type-error_msg.CloseExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.CloseExpected" class="anchor"></a><code>| </code><code><span class="constructor">CloseExpected</span></code></td></tr><tr id="type-error_msg.NodeExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.NodeExpected" class="anchor"></a><code>| </code><code><span class="constructor">NodeExpected</span></code></td></tr><tr id="type-error_msg.AttributeNameExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.AttributeNameExpected" class="anchor"></a><code>| </code><code><span class="constructor">AttributeNameExpected</span></code></td></tr><tr id="type-error_msg.AttributeValueExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.AttributeValueExpected" class="anchor"></a><code>| </code><code><span class="constructor">AttributeValueExpected</span></code></td></tr><tr id="type-error_msg.EndOfTagExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.EndOfTagExpected" class="anchor"></a><code>| </code><code><span class="constructor">EndOfTagExpected</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-error_msg.EOFExpected" class="anchored"><td class="def constructor"><a href="#type-error_msg.EOFExpected" class="anchor"></a><code>| </code><code><span class="constructor">EOFExpected</span></code></td></tr></table></dt><dt class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><code><span class="keyword">type</span> error</code><code> = <a href="index.html#type-error_msg">error_msg</a> * <a href="index.html#type-error_pos">error_pos</a></code></dt></dl><dl><dt class="spec exception" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Error</span> <span class="keyword">of</span> <a href="index.html#type-error">error</a></code></dt><dt class="spec exception" id="exception-File_not_found"><a href="#exception-File_not_found" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">File_not_found</span> <span class="keyword">of</span> string</code></dt></dl><dl><dt class="spec value" id="val-error"><a href="#val-error" class="anchor"></a><code><span class="keyword">val</span> error : <a href="index.html#type-error">error</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Get a full error message from an Xml error.</p></dd></dl><dl><dt class="spec value" id="val-error_msg"><a href="#val-error_msg" class="anchor"></a><code><span class="keyword">val</span> error_msg : <a href="index.html#type-error_msg">error_msg</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Get the Xml error message as a string.</p></dd></dl><dl><dt class="spec value" id="val-line"><a href="#val-line" class="anchor"></a><code><span class="keyword">val</span> line : <a href="index.html#type-error_pos">error_pos</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Get the line the error occured at.</p></dd></dl><dl><dt class="spec value" id="val-range"><a href="#val-range" class="anchor"></a><code><span class="keyword">val</span> range : <a href="index.html#type-error_pos">error_pos</a> <span>&#45;&gt;</span> int * int</code></dt><dd><p>Get the relative character range (in current line) the error occured at.</p></dd></dl><dl><dt class="spec value" id="val-abs_range"><a href="#val-abs_range" class="anchor"></a><code><span class="keyword">val</span> abs_range : <a href="index.html#type-error_pos">error_pos</a> <span>&#45;&gt;</span> int * int</code></dt><dd><p>Get the absolute character range the error occured at.</p></dd></dl></section><section><header><h6 id="xml-functions"><a href="#xml-functions" class="anchor"></a>Xml Functions</h6></header><dl><dt class="spec exception" id="exception-Not_element"><a href="#exception-Not_element" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Not_element</span> <span class="keyword">of</span> <a href="index.html#type-xml">xml</a></code></dt><dt class="spec exception" id="exception-Not_pcdata"><a href="#exception-Not_pcdata" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Not_pcdata</span> <span class="keyword">of</span> <a href="index.html#type-xml">xml</a></code></dt><dt class="spec exception" id="exception-No_attribute"><a href="#exception-No_attribute" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">No_attribute</span> <span class="keyword">of</span> string</code></dt></dl><dl><dt class="spec value" id="val-tag"><a href="#val-tag" class="anchor"></a><code><span class="keyword">val</span> tag : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>tag xdata</code> returns the tag value of the xml node. Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-pcdata"><a href="#val-pcdata" class="anchor"></a><code><span class="keyword">val</span> pcdata : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>pcdata xdata</code> returns the PCData value of the xml node. Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_pcdata&quot;"><code>Xml</code>.Not_pcdata</span> if the xml is not a PCData</p></dd></dl><dl><dt class="spec value" id="val-attribs"><a href="#val-attribs" class="anchor"></a><code><span class="keyword">val</span> attribs : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> (string * string) list</code></dt><dd><p><code>attribs xdata</code> returns the attribute list of the xml node. First string if the attribute name, second string is attribute value. Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-attrib"><a href="#val-attrib" class="anchor"></a><code><span class="keyword">val</span> attrib : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p><code>attrib xdata &quot;href&quot;</code> returns the value of the <code>&quot;href&quot;</code> attribute of the xml node (attribute matching is case-insensitive). Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.No_attribute&quot;"><code>Xml</code>.No_attribute</span> if the attribute does not exists in the node's attribute list Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-children"><a href="#val-children" class="anchor"></a><code><span class="keyword">val</span> children : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a> list</code></dt><dd><p><code>children xdata</code> returns the children list of the xml node Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : (<a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f xdata</code> calls f on all children of the xml node. Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list</code></dt><dd><p><code>map f xdata</code> is equivalent to <code>List.map f (Xml.children xdata)</code> Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f init xdata</code> is equivalent to <code>List.fold_left f init (Xml.children xdata)</code> Raise <span class="xref-unresolved" title="unresolved reference to &quot;Xml.Not_element&quot;"><code>Xml</code>.Not_element</span> if the xml is not an element</p></dd></dl></section><section><header><h6 id="xml-printing"><a href="#xml-printing" class="anchor"></a>Xml Printing</h6></header><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Print the xml data structure into a compact xml string (without any user-readable formating ).</p></dd></dl><dl><dt class="spec value" id="val-to_string_fmt"><a href="#val-to_string_fmt" class="anchor"></a><code><span class="keyword">val</span> to_string_fmt : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Print the xml data structure into an user-readable string with tabs and lines break between different nodes.</p></dd></dl><dl><dt class="spec value" id="val-to_human_string"><a href="#val-to_human_string" class="anchor"></a><code><span class="keyword">val</span> to_human_string : <a href="index.html#type-xml">xml</a> <span>&#45;&gt;</span> string</code></dt></dl><div class="spec module-type" id="module-type-X"><a href="#module-type-X" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-X/index.html">X</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-X/index.html">X</a> : <a href="index.html#module-type-X">X</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>