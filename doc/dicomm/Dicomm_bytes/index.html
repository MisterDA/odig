<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dicomm_bytes (dicomm.Dicomm_bytes)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">dicomm</a> &#x00BB; Dicomm_bytes</nav><h1>Module <code>Dicomm_bytes</code></h1><p>Non-blocking, best effort zero-copy, byte stream.</p><p><b>Warning.</b> This is a private module do not use directly.</p><p>The client asks for <code>n</code> bytes with <code>Bytes.get</code>. <code>n</code> bytes can be read from <code>Bytes.start</code> in <code>Bytes.bytes</code> whenever either <code>Bytes.get</code> returned <code>`Ok</code> or if it returned <code>`Await</code> after calls to <code>Bytes.await</code> eventually returned <code>`Ok</code>. If any of these calls return <code>`End</code> then only <code>Bytes.len</code> bytes (&lt; <code>n</code>) are available. If you are interested in the string, using <code>Bytes.copy</code> is preferable to extracting the substring from <code>Bytes.bytes</code></p><nav class="toc"><ul><li><a href="#byte-stream">Byte stream</a></li><li><a href="#dicom-specific">DICOM specific</a></li></ul></nav></header><section><header><h2 id="byte-stream"><a href="#byte-stream" class="anchor"></a>Byte stream</h2></header><dl><dt class="spec type" id="type-src"><a href="#type-src" class="anchor"></a><code><span class="keyword">type </span>src</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-src.Channel" class="anchored"><td class="def constructor"><a href="#type-src.Channel" class="anchor"></a><code><span class="keyword">| </span></code><code>`Channel<span class="keyword"> of </span>Pervasives.in_channel</code></td></tr><tr id="type-src.Manual" class="anchored"><td class="def constructor"><a href="#type-src.Manual" class="anchor"></a><code><span class="keyword">| </span></code><code>`Manual</code></td></tr><tr id="type-src.String" class="anchored"><td class="def constructor"><a href="#type-src.String" class="anchor"></a><code><span class="keyword">| </span></code><code>`String<span class="keyword"> of </span>string</code></td></tr></table><code> ]</code></dt><dd><p>The type for byte sources.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code></dt><dd><p>The type for byte streams.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : [&lt; <a href="index.html#type-src">src</a> ] <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>create src</code> is a new byte stream taking its bytes from <code>src</code>.</p></dd></dl><dl><dt class="spec value" id="val-source"><a href="#val-source" class="anchor"></a><code><span class="keyword">val </span>source : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Bytes.t <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit</code></dt><dd><p><code>source bs s j l</code> provides <code>bs</code> with <code>l</code> bytes to read, starting at <code>j</code> in <code>s</code>. For <code>`Manual</code> sources only.</p></dd></dl><dl><dt class="spec value" id="val-skip"><a href="#val-skip" class="anchor"></a><code><span class="keyword">val </span>skip : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> [ `Await<span class="keyword"> | </span>`End<span class="keyword"> | </span>`Ok ]</code></dt><dd><p><code>skip bs len</code> skips <code>len</code> bytes.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> [ `Await<span class="keyword"> | </span>`End<span class="keyword"> | </span>`Ok ]</code></dt><dd><p><code>get bs len</code> reads <code>len</code> bytes.</p></dd></dl><dl><dt class="spec value" id="val-await"><a href="#val-await" class="anchor"></a><code><span class="keyword">val </span>await : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> [ `Await<span class="keyword"> | </span>`End<span class="keyword"> | </span>`Ok ]</code></dt><dd><p><code>await bs</code> awaits more bytes to fullfill <a href="index.html#val-get"><code>get</code></a> or <a href="index.html#val-skip"><code>skip</code></a> request.</p></dd></dl><dl><dt class="spec value" id="val-bytes"><a href="#val-bytes" class="anchor"></a><code><span class="keyword">val </span>bytes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> Bytes.t</code></dt><dd><p><code>bytes bs</code> holds the last (but not only) requested bytes.</p></dd></dl><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val </span>start : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>start bs</code> is the start index to read in <code>bytes d</code>.</p></dd></dl><dl><dt class="spec value" id="val-len"><a href="#val-len" class="anchor"></a><code><span class="keyword">val </span>len : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>len bs</code> is the number of bytes to read in <code>bytes bs</code></p></dd></dl><dl><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val </span>copy : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>copy bs</code> is a copy for the last requested bytes.</p></dd></dl><dl><dt class="spec value" id="val-count"><a href="#val-count" class="anchor"></a><code><span class="keyword">val </span>count : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>count bs</code> is the total number of bytes read so far.</p></dd></dl><dl><dt class="spec value" id="val-src"><a href="#val-src" class="anchor"></a><code><span class="keyword">val </span>src : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-src">src</a></code></dt><dd><p><code>src bs</code> is <code>bs</code>'s source.</p></dd></dl></section><section><header><h2 id="dicom-specific"><a href="#dicom-specific" class="anchor"></a>DICOM specific</h2></header><dl><dt class="spec value" id="val-copy_unpad_bytes"><a href="#val-copy_unpad_bytes" class="anchor"></a><code><span class="keyword">val </span>copy_unpad_bytes : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>copy_unpad_bytes bs</code> is like <a href="index.html#val-copy"><code>copy</code></a> but removes an eventual trailing '\x00' byte.</p></dd></dl><dl><dt class="spec value" id="val-copy_unpad_string"><a href="#val-copy_unpad_string" class="anchor"></a><code><span class="keyword">val </span>copy_unpad_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>copy_unpad bs</code> is like <a href="index.html#val-copy"><code>copy</code></a> but removes an eventual trailing '\x20' or '\x00' (DICOM mandates '\x20' for strings but some images are padded with '\x00' in the wild).</p></dd></dl><dl><dt class="spec value" id="val-copy_many_unpad_string"><a href="#val-copy_many_unpad_string" class="anchor"></a><code><span class="keyword">val </span>copy_many_unpad_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string list</code></dt><dd><p><code>copy_many_unpad bs c</code> is like <code>copy_unpad</code> but split the resulting string at '\\' chars.</p></dd></dl></section></div></body></html>