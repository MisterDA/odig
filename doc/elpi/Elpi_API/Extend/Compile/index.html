<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Compile (elpi.Elpi_API.Extend.Compile)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">elpi</a> &#x00BB; <a href="../../index.html">Elpi_API</a> &#x00BB; <a href="../index.html">Extend</a> &#x00BB; Compile</nav><h1>Module <code>Extend.Compile</code></h1><p>This module lets one extend the compiler by: * - &quot;compiling&quot; the query by hand * - providing quotations</p></header><dl><dt class="spec module" id="module-State"><a href="#module-State" class="anchor"></a><code><span class="keyword">module</span> <a href="State/index.html">State</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>In order to implement quotations one may * need to stick some data into the compiler state that can indeed be * extended. A piece of compiler state can also be kept and used at runtime, * e.g. if it contains some custom constraints, see CustomState</p></dd></dl><dl><dt class="spec value" id="val-query"><a href="#val-query" class="anchor"></a><code><span class="keyword">val</span> query : <a href="../../Compile/index.html#type-program">Compile.program</a> <span>&#45;&gt;</span> (depth:int <span>&#45;&gt;</span> <a href="State/index.html#type-t">State.t</a> <span>&#45;&gt;</span> <a href="State/index.html#type-t">State.t</a> * <a href="../Data/index.html#type-term">Data.term</a>) <span>&#45;&gt;</span> <a href="../../Compile/index.html#type-query">Compile.query</a></code></dt><dd><p>Generate a query starting from a compiled/hand-made term</p></dd></dl><dl><dt class="spec value" id="val-is_Arg"><a href="#val-is_Arg" class="anchor"></a><code><span class="keyword">val</span> is_Arg : <a href="State/index.html#type-t">State.t</a> <span>&#45;&gt;</span> <a href="../Data/index.html#type-term">Data.term</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-fresh_Arg"><a href="#val-fresh_Arg" class="anchor"></a><code><span class="keyword">val</span> fresh_Arg : <a href="State/index.html#type-t">State.t</a> <span>&#45;&gt;</span> name_hint:string <span>&#45;&gt;</span> args:<a href="../Data/index.html#type-term">Data.term</a> list <span>&#45;&gt;</span> <a href="State/index.html#type-t">State.t</a> * string * <a href="../Data/index.html#type-term">Data.term</a></code></dt></dl><dl><dt class="spec type" id="type-quotation"><a href="#type-quotation" class="anchor"></a><code><span class="keyword">type</span> quotation</code><code> = depth:int <span>&#45;&gt;</span> <a href="State/index.html#type-t">State.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="State/index.html#type-t">State.t</a> * <a href="../Data/index.html#type-term">Data.term</a></code></dt><dd><p>From an unparsed string to a term</p></dd></dl><dl><dt class="spec value" id="val-set_default_quotation"><a href="#val-set_default_quotation" class="anchor"></a><code><span class="keyword">val</span> set_default_quotation : <a href="index.html#type-quotation">quotation</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>The default quotation <code>{{code}}</code></p></dd></dl><dl><dt class="spec value" id="val-register_named_quotation"><a href="#val-register_named_quotation" class="anchor"></a><code><span class="keyword">val</span> register_named_quotation : name:string <span>&#45;&gt;</span> <a href="index.html#type-quotation">quotation</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Named quotation <code>{{name:code}}</code></p></dd></dl><dl><dt class="spec value" id="val-lp"><a href="#val-lp" class="anchor"></a><code><span class="keyword">val</span> lp : <a href="index.html#type-quotation">quotation</a></code></dt><dd><p>The anti-quotation to lambda Prolog</p></dd></dl><dl><dt class="spec value" id="val-quote_syntax"><a href="#val-quote_syntax" class="anchor"></a><code><span class="keyword">val</span> quote_syntax : <a href="../../Compile/index.html#type-query">Compile.query</a> <span>&#45;&gt;</span> <a href="../Data/index.html#type-term">Data.term</a> list * <a href="../Data/index.html#type-term">Data.term</a></code></dt><dd><p>See elpi_quoted_syntax.elpi (EXPERIMENTAL, used by elpi-checker)</p></dd></dl><dl><dt class="spec value" id="val-term_at"><a href="#val-term_at" class="anchor"></a><code><span class="keyword">val</span> term_at : depth:int <span>&#45;&gt;</span> <a href="../../Ast/index.html#type-query">Ast.query</a> <span>&#45;&gt;</span> <a href="../Data/index.html#type-term">Data.term</a></code></dt><dd><p>To implement the string_to_term built-in (AVOID, makes little sense * if depth is non zero, since bound variables have no name!)</p></dd></dl></div></body></html>