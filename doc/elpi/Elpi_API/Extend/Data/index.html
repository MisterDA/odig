<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Data (elpi.Elpi_API.Extend.Data)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">elpi</a> &#x00BB; <a href="../../index.html">Elpi_API</a> &#x00BB; <a href="../index.html">Extend</a> &#x00BB; Data</nav><h1>Module <code>Extend.Data</code></h1><p>This module exposes the low level representation of terms. * * The data type <code>term</code> is opaque and can only be accessed by using the * <code>look</code> API that exposes a term <code>view</code>. The <code>look</code> view automatically * substitutes assigned unification variables by their value. The <code>UVar</code> * and <code>AppUVar</code> node hence stand for unassigned unification variables.</p></header><dl><dt class="spec type" id="type-constant"><a href="#type-constant" class="anchor"></a><code><span class="keyword">type</span> constant</code><code> = int</code></dt><dd><p>De Bruijn levels (not indexes): the distance of the binder from the root. Starts at 0 and grows for bound variables; global constants have negative values.</p></dd></dl><dl><dt class="spec type" id="type-builtin"><a href="#type-builtin" class="anchor"></a><code><span class="keyword">type</span> builtin</code></dt><dd><p>De Bruijn levels (not indexes): the distance of the binder from the root. Starts at 0 and grows for bound variables; global constants have negative values.</p></dd></dl><dl><dt class="spec type" id="type-uvar_body"><a href="#type-uvar_body" class="anchor"></a><code><span class="keyword">type</span> uvar_body</code></dt><dt class="spec type" id="type-term"><a href="#type-term" class="anchor"></a><code><span class="keyword">type</span> term</code></dt><dt class="spec type" id="type-view"><a href="#type-view" class="anchor"></a><code><span class="keyword">type</span> view</code><code> = <span class="keyword">private</span> </code><table class="variant"><tr id="type-view.Const" class="anchored"><td class="def constructor"><a href="#type-view.Const" class="anchor"></a><code>| </code><code><span class="constructor">Const</span> <span class="keyword">of</span> <a href="index.html#type-constant">constant</a></code></td></tr><tr id="type-view.Lam" class="anchored"><td class="def constructor"><a href="#type-view.Lam" class="anchor"></a><code>| </code><code><span class="constructor">Lam</span> <span class="keyword">of</span> <a href="index.html#type-term">term</a></code></td></tr><tr id="type-view.App" class="anchored"><td class="def constructor"><a href="#type-view.App" class="anchor"></a><code>| </code><code><span class="constructor">App</span> <span class="keyword">of</span> <a href="index.html#type-constant">constant</a> * <a href="index.html#type-term">term</a> * <a href="index.html#type-term">term</a> list</code></td></tr><tr id="type-view.Cons" class="anchored"><td class="def constructor"><a href="#type-view.Cons" class="anchor"></a><code>| </code><code><span class="constructor">Cons</span> <span class="keyword">of</span> <a href="index.html#type-term">term</a> * <a href="index.html#type-term">term</a></code></td></tr><tr id="type-view.Nil" class="anchored"><td class="def constructor"><a href="#type-view.Nil" class="anchor"></a><code>| </code><code><span class="constructor">Nil</span></code></td></tr><tr id="type-view.Discard" class="anchored"><td class="def constructor"><a href="#type-view.Discard" class="anchor"></a><code>| </code><code><span class="constructor">Discard</span></code></td></tr><tr id="type-view.Builtin" class="anchored"><td class="def constructor"><a href="#type-view.Builtin" class="anchor"></a><code>| </code><code><span class="constructor">Builtin</span> <span class="keyword">of</span> <a href="index.html#type-builtin">builtin</a> * <a href="index.html#type-term">term</a> list</code></td></tr><tr id="type-view.CData" class="anchored"><td class="def constructor"><a href="#type-view.CData" class="anchor"></a><code>| </code><code><span class="constructor">CData</span> <span class="keyword">of</span> <a href="../CData/index.html#type-t">CData.t</a></code></td></tr><tr id="type-view.UVar" class="anchored"><td class="def constructor"><a href="#type-view.UVar" class="anchor"></a><code>| </code><code><span class="constructor">UVar</span> <span class="keyword">of</span> <a href="index.html#type-uvar_body">uvar_body</a> * int * int</code></td></tr><tr id="type-view.AppUVar" class="anchored"><td class="def constructor"><a href="#type-view.AppUVar" class="anchor"></a><code>| </code><code><span class="constructor">AppUVar</span> <span class="keyword">of</span> <a href="index.html#type-uvar_body">uvar_body</a> * int * <a href="index.html#type-term">term</a> list</code></td></tr><tr id="type-view.Arg" class="anchored"><td class="def constructor"><a href="#type-view.Arg" class="anchor"></a><code>| </code><code><span class="constructor">Arg</span> <span class="keyword">of</span> int * int</code></td></tr><tr id="type-view.AppArg" class="anchored"><td class="def constructor"><a href="#type-view.AppArg" class="anchor"></a><code>| </code><code><span class="constructor">AppArg</span> <span class="keyword">of</span> int * <a href="index.html#type-term">term</a> list</code></td></tr></table></dt></dl><dl><dt class="spec value" id="val-mkConst"><a href="#val-mkConst" class="anchor"></a><code><span class="keyword">val</span> mkConst : <a href="index.html#type-constant">constant</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dd><p>Smart constructors</p></dd></dl><dl><dt class="spec value" id="val-mkLam"><a href="#val-mkLam" class="anchor"></a><code><span class="keyword">val</span> mkLam : <a href="index.html#type-term">term</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkApp"><a href="#val-mkApp" class="anchor"></a><code><span class="keyword">val</span> mkApp : <a href="index.html#type-constant">constant</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> list <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkCons"><a href="#val-mkCons" class="anchor"></a><code><span class="keyword">val</span> mkCons : <a href="index.html#type-term">term</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkNil"><a href="#val-mkNil" class="anchor"></a><code><span class="keyword">val</span> mkNil : <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkDiscard"><a href="#val-mkDiscard" class="anchor"></a><code><span class="keyword">val</span> mkDiscard : <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkBuiltin"><a href="#val-mkBuiltin" class="anchor"></a><code><span class="keyword">val</span> mkBuiltin : <a href="index.html#type-builtin">builtin</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> list <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkBuiltinName"><a href="#val-mkBuiltinName" class="anchor"></a><code><span class="keyword">val</span> mkBuiltinName : string <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> list <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkCData"><a href="#val-mkCData" class="anchor"></a><code><span class="keyword">val</span> mkCData : <a href="../CData/index.html#type-t">CData.t</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkUVar"><a href="#val-mkUVar" class="anchor"></a><code><span class="keyword">val</span> mkUVar : <a href="index.html#type-uvar_body">uvar_body</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-mkAppUVar"><a href="#val-mkAppUVar" class="anchor"></a><code><span class="keyword">val</span> mkAppUVar : <a href="index.html#type-uvar_body">uvar_body</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> list <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-look"><a href="#val-look" class="anchor"></a><code><span class="keyword">val</span> look : depth:int <span>&#45;&gt;</span> <a href="index.html#type-term">term</a> <span>&#45;&gt;</span> <a href="index.html#type-view">view</a></code></dt><dd><p>Terms must be inspected after dereferencing their head. If the resulting term is UVar then its uvar_body is such that get_assignment uvar_body = None</p></dd></dl><dl><dt class="spec value" id="val-kool"><a href="#val-kool" class="anchor"></a><code><span class="keyword">val</span> kool : <a href="index.html#type-view">view</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt></dl><dl><dt class="spec type" id="type-clause_src"><a href="#type-clause_src" class="anchor"></a><code><span class="keyword">type</span> clause_src</code><code> = </code><code>{</code><table class="record"><tr id="type-clause_src.hdepth" class="anchored"><td class="def field"><a href="#type-clause_src.hdepth" class="anchor"></a><code>hdepth : int;</code></td></tr><tr id="type-clause_src.hsrc" class="anchored"><td class="def field"><a href="#type-clause_src.hsrc" class="anchor"></a><code>hsrc : <a href="index.html#type-term">term</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-of_term"><a href="#val-of_term" class="anchor"></a><code><span class="keyword">val</span> of_term : <a href="../../Data/index.html#type-term">Data.term</a> <span>&#45;&gt;</span> <a href="index.html#type-term">term</a></code></dt><dt class="spec value" id="val-fresh_uvar_body"><a href="#val-fresh_uvar_body" class="anchor"></a><code><span class="keyword">val</span> fresh_uvar_body : unit <span>&#45;&gt;</span> <a href="index.html#type-uvar_body">uvar_body</a></code></dt></dl><dl><dt class="spec type" id="type-custom_state"><a href="#type-custom_state" class="anchor"></a><code><span class="keyword">type</span> custom_state</code><code> = <a href="../../Data/index.html#type-custom_state">Data.custom_state</a></code></dt></dl><div class="spec module" id="module-StrMap"><a href="#module-StrMap" class="anchor"></a><code><span class="keyword">module</span> StrMap = <a href="../../Data/index.html#module-StrMap">Data.StrMap</a></code></div><dl><dt class="spec type" id="type-solution"><a href="#type-solution" class="anchor"></a><code><span class="keyword">type</span> solution</code><code> = </code><code>{</code><table class="record"><tr id="type-solution.assignments" class="anchored"><td class="def field"><a href="#type-solution.assignments" class="anchor"></a><code>assignments : <a href="index.html#type-term">term</a> <a href="../../Data/StrMap/index.html#type-t">StrMap.t</a>;</code></td></tr><tr id="type-solution.constraints" class="anchored"><td class="def field"><a href="#type-solution.constraints" class="anchor"></a><code>constraints : <a href="../../Data/index.html#type-constraints">Data.constraints</a>;</code></td></tr><tr id="type-solution.state" class="anchored"><td class="def field"><a href="#type-solution.state" class="anchor"></a><code>state : <a href="index.html#type-custom_state">custom_state</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-of_solution"><a href="#val-of_solution" class="anchor"></a><code><span class="keyword">val</span> of_solution : <a href="../../Data/index.html#type-solution">Data.solution</a> <span>&#45;&gt;</span> <a href="index.html#type-solution">solution</a></code></dt></dl><dl><dt class="spec type" id="type-idx"><a href="#type-idx" class="anchor"></a><code><span class="keyword">type</span> idx</code></dt><dt class="spec type" id="type-hyps"><a href="#type-hyps" class="anchor"></a><code><span class="keyword">type</span> hyps</code><code> = <a href="index.html#type-clause_src">clause_src</a> list</code></dt><dt class="spec type" id="type-suspended_goal"><a href="#type-suspended_goal" class="anchor"></a><code><span class="keyword">type</span> suspended_goal</code><code> = </code><code>{</code><table class="record"><tr id="type-suspended_goal.context" class="anchored"><td class="def field"><a href="#type-suspended_goal.context" class="anchor"></a><code>context : <a href="index.html#type-hyps">hyps</a>;</code></td></tr><tr id="type-suspended_goal.goal" class="anchored"><td class="def field"><a href="#type-suspended_goal.goal" class="anchor"></a><code>goal : int * <a href="index.html#type-term">term</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-constraints"><a href="#val-constraints" class="anchor"></a><code><span class="keyword">val</span> constraints : <a href="../../Data/index.html#type-constraints">Data.constraints</a> <span>&#45;&gt;</span> <a href="index.html#type-suspended_goal">suspended_goal</a> list</code></dt></dl><dl><dt class="spec module" id="module-C"><a href="#module-C" class="anchor"></a><code><span class="keyword">module</span> <a href="C/index.html">C</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>LambdaProlog built-in data types</p></dd></dl><dl><dt class="spec module" id="module-Constants"><a href="#module-Constants" class="anchor"></a><code><span class="keyword">module</span> <a href="Constants/index.html">Constants</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>LambdaProlog built-in global constants</p></dd></dl></div></body></html>