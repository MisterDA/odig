<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Expect_test_helpers (expect_test_helpers.Expect_test_helpers)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">expect_test_helpers</a> &#x00BB; Expect_test_helpers</nav><h1>Module <code>Expect_test_helpers</code></h1><p>An extension of <code>Expect_test_helpers_kernel</code> with Async-aware functions.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">sig</span> ... <span class="keyword">end</span> <span class="keyword">with</span> <span class="keyword">module</span> <a href="Expect_test_config/index.html">Expect_test_config</a> := <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/index.html#module-Expect_test_config">Expect_test_helpers_kernel.Expect_test_config</a></code></span></summary><div class="spec module-type" id="module-type-Set"><a href="#module-type-Set" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Set/index.html">Set</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-Set">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.Set</a></code></div><div class="spec module-type" id="module-type-With_containers"><a href="#module-type-With_containers" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_containers/index.html">With_containers</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-With_containers">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.With_containers</a></code></div><div class="spec module-type" id="module-type-With_comparable"><a href="#module-type-With_comparable" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_comparable/index.html">With_comparable</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-With_comparable">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.With_comparable</a></code></div><div class="spec module-type" id="module-type-With_hashable"><a href="#module-type-With_hashable" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_hashable/index.html">With_hashable</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-With_hashable">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.With_hashable</a></code></div><div class="spec module-type" id="module-type-With_compare"><a href="#module-type-With_compare" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_compare/index.html">With_compare</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-With_compare">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.With_compare</a></code></div><div class="spec module-type" id="module-type-With_equal"><a href="#module-type-With_equal" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_equal/index.html">With_equal</a> = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel__/Expect_test_helpers_kernel_intf/index.html#module-type-With_equal">Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.With_equal</a></code></div><div class="spec module" id="module-Allocation_limit"><a href="#module-Allocation_limit" class="anchor"></a><code><span class="keyword">module</span> Allocation_limit = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/index.html#module-Allocation_limit">Expect_test_helpers_kernel.Allocation_limit</a></code></div><div class="spec module" id="module-CR"><a href="#module-CR" class="anchor"></a><code><span class="keyword">module</span> CR = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/index.html#module-CR">Expect_test_helpers_kernel.CR</a></code></div><dl><dt class="spec value" id="val-hide_positions_in_string"><a href="#val-hide_positions_in_string" class="anchor"></a><code><span class="keyword">val</span> hide_positions_in_string : string <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-sexp_to_string"><a href="#val-sexp_to_string" class="anchor"></a><code><span class="keyword">val</span> sexp_to_string : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-print_s"><a href="#val-print_s" class="anchor"></a><code><span class="keyword">val</span> print_s : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-print_and_check_stable_type"><a href="#val-print_and_check_stable_type" class="anchor"></a><code><span class="keyword">val</span> print_and_check_stable_type : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;max_binable_length:int <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="../../core_kernel/Core_kernel/module-type-Stable_without_comparator/index.html">Core_kernel.Stable_without_comparator</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../core_kernel/Core_kernel/module-type-Stable_without_comparator/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-print_and_check_stable_int63able_type"><a href="#val-print_and_check_stable_int63able_type" class="anchor"></a><code><span class="keyword">val</span> print_and_check_stable_int63able_type : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;max_binable_length:int <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="../../core_kernel/Core_kernel/module-type-Stable_int63able/index.html">Core_kernel.Stable_int63able</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../core_kernel/Core_kernel/module-type-Stable_int63able/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-print_cr"><a href="#val-print_cr" class="anchor"></a><code><span class="keyword">val</span> print_cr : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require"><a href="#val-require" class="anchor"></a><code><span class="keyword">val</span> require : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;if_false_then_print_s:<a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <a href="../../core_kernel/Core_kernel/Lazy/index.html#type-t">Core_kernel.Lazy.t</a> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_equal"><a href="#val-require_equal" class="anchor"></a><code><span class="keyword">val</span> require_equal : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;if_false_then_print_s:<a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <a href="../../core_kernel/Core_kernel/Lazy/index.html#type-t">Core_kernel.Lazy.t</a> <span>&#45;&gt;</span> ?&#8288;message:string <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_equal/index.html">With_equal</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_equal/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_compare_equal"><a href="#val-require_compare_equal" class="anchor"></a><code><span class="keyword">val</span> require_compare_equal : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;message:string <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_compare/index.html">With_compare</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_compare/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_sets_are_equal"><a href="#val-require_sets_are_equal" class="anchor"></a><code><span class="keyword">val</span> require_sets_are_equal : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;names:(string * string) <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-Set/index.html">Set</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Set/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-show_raise"><a href="#val-show_raise" class="anchor"></a><code><span class="keyword">val</span> show_raise : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_does_not_raise"><a href="#val-require_does_not_raise" class="anchor"></a><code><span class="keyword">val</span> require_does_not_raise : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_does_raise"><a href="#val-require_does_raise" class="anchor"></a><code><span class="keyword">val</span> require_does_raise : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-require_allocation_does_not_exceed"><a href="#val-require_allocation_does_not_exceed" class="anchor"></a><code><span class="keyword">val</span> require_allocation_does_not_exceed : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/Allocation_limit/index.html#type-t">Allocation_limit.t</a> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-require_no_allocation"><a href="#val-require_no_allocation" class="anchor"></a><code><span class="keyword">val</span> require_no_allocation : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dt class="spec value" id="val-print_and_check_container_sexps"><a href="#val-print_and_check_container_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_container_sexps : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_containers/index.html">With_containers</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_containers/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-print_and_check_comparable_sexps"><a href="#val-print_and_check_comparable_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_comparable_sexps : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_comparable/index.html">With_comparable</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_comparable/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-print_and_check_hashable_sexps"><a href="#val-print_and_check_hashable_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_hashable_sexps : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_hashable/index.html">With_hashable</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_hashable/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-quickcheck"><a href="#val-quickcheck" class="anchor"></a><code><span class="keyword">val</span> quickcheck : <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;seed:<a href="../../core_kernel/Core_kernel/Quickcheck/index.html#type-seed">Core_kernel.Quickcheck.seed</a> <span>&#45;&gt;</span> ?&#8288;sizes:int <a href="../../core_kernel/Core_kernel/Sequence/index.html#type-t">Core_kernel.Sequence.t</a> <span>&#45;&gt;</span> ?&#8288;trials:int <span>&#45;&gt;</span> ?&#8288;shrinker:<span class="type-var">'a</span> <a href="../../core_kernel/Core_kernel__Quickcheck/Shrinker/index.html#type-t">Core_kernel.Quickcheck.Shrinker.t</a> <span>&#45;&gt;</span> ?&#8288;shrink_attempts:<a href="../../core_kernel/Core_kernel/Quickcheck/index.html#type-shrink_attempts">Core_kernel.Quickcheck.shrink_attempts</a> <span>&#45;&gt;</span> ?&#8288;examples:<span class="type-var">'a</span> list <span>&#45;&gt;</span> sexp_of:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a>) <span>&#45;&gt;</span> f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../core_kernel/Core_kernel__Quickcheck/Generator/index.html#type-t">Core_kernel.Quickcheck.Generator.t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-on_print_cr"><a href="#val-on_print_cr" class="anchor"></a><code><span class="keyword">val</span> on_print_cr : (string <span>&#45;&gt;</span> unit) <a href="../../core_kernel/Core_kernel/index.html#type-ref">Core_kernel.ref</a></code></dt></dl><div class="spec module" id="module-Expect_test_config"><a href="#module-Expect_test_config" class="anchor"></a><code><span class="keyword">module</span> Expect_test_config = <a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/index.html#module-Expect_test_config">Expect_test_helpers_kernel.Expect_test_config</a></code></div></details></div></div></div><dl><dt class="spec value" id="val-with_temp_dir"><a href="#val-with_temp_dir" class="anchor"></a><code><span class="keyword">val</span> with_temp_dir : (string <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>with_temp_dir f</code> creates a temporary directory which is fed to <code>f</code>. The directory is removed after <code>f</code> exits.</p></dd></dl><dl><dt class="spec value" id="val-within_temp_dir"><a href="#val-within_temp_dir" class="anchor"></a><code><span class="keyword">val</span> within_temp_dir : ?&#8288;links:(string * [ `In_path_as | `In_temp_as ] * string) list <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>within_temp_dir ?links f</code> creates a temporary directory, $T, and:</p><p>1. Adds $T/bin to the PATH environment variable. 2. For each <code>file, `In_path_as, name</code> in <code>links</code>, links <code>file</code> as $T/bin/<code>name</code>. 3. For each <code>file, `In_temp_as, name</code> in <code>links</code>, links <code>file</code> as $T/<code>name</code>.</p><p>It then <code>cd</code>s to $T and calls <code>f</code>. After <code>f</code> exits, it <code>cd</code>s back, removes the temporary directory, and restores the original PATH.</p></dd></dl><dl><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : ?&#8288;enable_ocaml_backtraces:bool <span>&#45;&gt;</span> ?&#8288;extend_env:(string * string) list <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;print_cmdline:bool <span>&#45;&gt;</span> ?&#8288;stdin:string <span>&#45;&gt;</span> ?&#8288;working_dir:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>run prog args</code> creates a child process that runs <code>prog</code>, with arguments <code>args</code>, its environment extended with <code>extend_env</code> and its stdin coming from <code>stdin</code>. No expansion or escaping is done to <code>args</code> or <code>stdin</code>. The child process's stdout and stderr are captured separately for comparison.</p></dd></dl><dl><dt class="spec value" id="val-system"><a href="#val-system" class="anchor"></a><code><span class="keyword">val</span> system : ?&#8288;enable_ocaml_backtraces:bool <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;print_cmdline:bool <span>&#45;&gt;</span> ?&#8288;stdin:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>system ?stdin cmd</code> creates a child process that runs <code>/bin/sh</code>, with arguments <code>&quot;-c&quot;; cmd</code> and its stdin coming from <code>stdin</code>. The child process's stdout and stderr are captured separately for comparison. Unlike with <code>Unix.system</code>, the child shell's stdin is never a tty, even if the stdin of this process is a tty, and the child shell's stderr is never copied to this process's stderr.</p></dd></dl><dl><dt class="spec value" id="val-show_raise'"><a href="#val-show_raise'" class="anchor"></a><code><span class="keyword">val</span> show_raise' : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>show_raise' ?hide_positions ?rest f</code> calls <code>f ()</code> and prints either the exception raised by <code>f</code> or &quot;did not raise&quot;. <code>show_raise'</code> ignores the result of <code>f</code> so that one doesn't have to put an <code>ignore</code> inside <code>f</code>. <code>~hide_positions</code> operates as in <code>print_s</code>, to make output less fragile. Once a result is returned, the rest of the errors are printed to stdout.</p></dd></dl><dl><dt class="spec value" id="val-require_does_not_raise'"><a href="#val-require_does_not_raise'" class="anchor"></a><code><span class="keyword">val</span> require_does_not_raise' : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>require_does_not_raise'</code> is like <code>require_does_not_raise</code>, but for functions that produce a deferred result.</p></dd></dl><dl><dt class="spec value" id="val-require_does_raise'"><a href="#val-require_does_raise'" class="anchor"></a><code><span class="keyword">val</span> require_does_raise' : ?&#8288;cr:<a href="../../expect_test_helpers_kernel/Expect_test_helpers_kernel/CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">_</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p><code>require_does_raise'</code> is like <code>require_does_raise</code>, but for functions that produce a deferred result.</p></dd></dl><dl><dt class="spec module" id="module-Expect_test_config"><a href="#module-Expect_test_config" class="anchor"></a><code><span class="keyword">module</span> <a href="Expect_test_config/index.html">Expect_test_config</a> : <a href="../../ppx_expect/Expect_test_config/index.html#module-type-S">Expect_test_helpers__.Import.Expect_test_config_lib.S</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../ppx_expect/Expect_test_config/module-type-S/IO/index.html#type-t">IO.t</a> = <span class="type-var">'a</span> <a href="../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a></code></dt><dd><p>We export <code>Expect_test_config</code> so that the <code>%expect</code> syntax uses Async, to prevent a confusing situation in which one is using <code>Expect_test_helpers</code> functions, which expect Async to be running, but Async isn't running. Also, we override <code>Expect_test_config.run f</code> so that, if <code>f ()</code> raises, <code>run</code> prints the exception rather than raising. Printing works better with the expect-test workflow than an unhandled exception, because there is a <code>.corrected</code> file that one can accept and inspect.</p></dd></dl></div></body></html>