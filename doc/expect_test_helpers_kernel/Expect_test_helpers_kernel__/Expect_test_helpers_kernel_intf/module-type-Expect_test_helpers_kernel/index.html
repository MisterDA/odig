<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Expect_test_helpers_kernel (expect_test_helpers_kernel.Expect_test_helpers_kernel__.Expect_test_helpers_kernel_intf.Expect_test_helpers_kernel)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">expect_test_helpers_kernel</a> &#x00BB; <a href="../../index.html">Expect_test_helpers_kernel__</a> &#x00BB; <a href="../index.html">Expect_test_helpers_kernel_intf</a> &#x00BB; Expect_test_helpers_kernel</nav><h1>Module type <code>Expect_test_helpers_kernel_intf.Expect_test_helpers_kernel</code></h1></header><div class="spec module-type" id="module-type-Set"><a href="#module-type-Set" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Set/index.html">Set</a> = <a href="../index.html#module-type-Set">Set</a></code></div><div class="spec module-type" id="module-type-With_containers"><a href="#module-type-With_containers" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_containers/index.html">With_containers</a> = <a href="../index.html#module-type-With_containers">With_containers</a></code></div><div class="spec module-type" id="module-type-With_comparable"><a href="#module-type-With_comparable" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_comparable/index.html">With_comparable</a> = <a href="../index.html#module-type-With_comparable">With_comparable</a></code></div><div class="spec module-type" id="module-type-With_hashable"><a href="#module-type-With_hashable" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_hashable/index.html">With_hashable</a> = <a href="../index.html#module-type-With_hashable">With_hashable</a></code></div><div class="spec module-type" id="module-type-With_compare"><a href="#module-type-With_compare" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_compare/index.html">With_compare</a> = <a href="../index.html#module-type-With_compare">With_compare</a></code></div><div class="spec module-type" id="module-type-With_equal"><a href="#module-type-With_equal" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-With_equal/index.html">With_equal</a> = <a href="../index.html#module-type-With_equal">With_equal</a></code></div><div class="spec module" id="module-Allocation_limit"><a href="#module-Allocation_limit" class="anchor"></a><code><span class="keyword">module</span> <a href="Allocation_limit/index.html">Allocation_limit</a> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-CR"><a href="#module-CR" class="anchor"></a><code><span class="keyword">module</span> <a href="CR/index.html">CR</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-hide_positions_in_string"><a href="#val-hide_positions_in_string" class="anchor"></a><code><span class="keyword">val</span> hide_positions_in_string : string <span>&#45;&gt;</span> string</code></dt><dd><p><code>hide_positions_in_string</code> does line-based regexp matching to replace line numbers and column numbers that appear in source-code positions with constant text <code>LINE</code> and <code>COL</code>. This can be useful in making displayed test output less fragile.</p></dd></dl><dl><dt class="spec value" id="val-sexp_to_string"><a href="#val-sexp_to_string" class="anchor"></a><code><span class="keyword">val</span> sexp_to_string : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Renders an s-expression as a string. With <code>~hide_positions:true</code>, patterns in the string that match OCaml-style file positions are modified to hide the line number, column number, and character positions, to make output less fragile.</p></dd></dl><dl><dt class="spec value" id="val-print_s"><a href="#val-print_s" class="anchor"></a><code><span class="keyword">val</span> print_s : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>For printing an s-expression to stdout. <code>hide_positions</code> works as in <code>sexp_to_string</code>.</p></dd></dl><dl><dt class="spec value" id="val-print_and_check_stable_type"><a href="#val-print_and_check_stable_type" class="anchor"></a><code><span class="keyword">val</span> print_and_check_stable_type : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;max_binable_length:int <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="../../../../core_kernel/Core_kernel/module-type-Stable_without_comparator/index.html">Core_kernel.Stable_without_comparator</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../core_kernel/Core_kernel/module-type-Stable_without_comparator/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_and_check_stable_type</code> prints the bin-io digest for the given type, and the bin-io and sexp serializations of the given values. Prints an error message for any serializations that fail to round-trip, and for any bin-io serializations that exceed <code>max_binable_length</code>.</p></dd></dl><dl><dt class="spec value" id="val-print_and_check_stable_int63able_type"><a href="#val-print_and_check_stable_int63able_type" class="anchor"></a><code><span class="keyword">val</span> print_and_check_stable_int63able_type : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;max_binable_length:int <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="../../../../core_kernel/Core_kernel/module-type-Stable_int63able/index.html">Core_kernel.Stable_int63able</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../../../../core_kernel/Core_kernel/module-type-Stable_int63able/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_and_check_stable_int63able_type</code> works like <code>print_and_check_stable_type</code>, and includes <code>Int63.t</code> serializations.</p></dd></dl><dl><dt class="spec value" id="val-print_cr"><a href="#val-print_cr" class="anchor"></a><code><span class="keyword">val</span> print_cr : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_cr here message</code> prints a <code>CR require-failed</code>, which will appear in expect-test output. The CR will appear in the feature owner's <code>fe todo</code>, thus preventing release of the feature. <code>print_cr</code> is an expect-test-friendly version of <code>assert false</code>. It works with the normal expect-test workflow because it does not raise, and it prevents mistakenly releasing features that violate a required property. There is no need to 'X' a <code>CR require-failed</code>; simply fix the property that triggered the <code>print_cr</code> and re-run the test to restore the empty output.</p></dd></dl><dl><dt class="spec value" id="val-require"><a href="#val-require" class="anchor"></a><code><span class="keyword">val</span> require : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;if_false_then_print_s:<a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <a href="../../../../core_kernel/Core_kernel/Lazy/index.html#type-t">Core_kernel.Lazy.t</a> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> bool <span>&#45;&gt;</span> unit</code></dt><dd><p><code>require here bool</code> is a no-op if <code>bool = true</code>, but if not, prints a <code>CR
      require-failed</code> similarly to <code>print_cr</code>, with a message determined by the <code>if_false_then_print_s</code> argument, if any.</p><p><code>if_false_then_print_s</code> is useful for including information that may help debug the problem, but that would otherwise be too voluminous. <code>if_false_then_print_s</code> is lazy to avoid construction of the sexp except when needed.</p></dd></dl><dl><dt class="spec value" id="val-require_equal"><a href="#val-require_equal" class="anchor"></a><code><span class="keyword">val</span> require_equal : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;if_false_then_print_s:<a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a> <a href="../../../../core_kernel/Core_kernel/Lazy/index.html#type-t">Core_kernel.Lazy.t</a> <span>&#45;&gt;</span> ?&#8288;message:string <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_equal/index.html">With_equal</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_equal/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>require_equal</code> compares its two arguments using the equality predicate of the provided module. If the comparison fails, prints a message that renders the arguments as sexps.</p></dd></dl><dl><dt class="spec value" id="val-require_compare_equal"><a href="#val-require_compare_equal" class="anchor"></a><code><span class="keyword">val</span> require_compare_equal : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;message:string <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_compare/index.html">With_compare</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_compare/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Like <code>require_equal</code>, but derives an equality predicate from a comparison function.</p></dd></dl><dl><dt class="spec value" id="val-require_sets_are_equal"><a href="#val-require_sets_are_equal" class="anchor"></a><code><span class="keyword">val</span> require_sets_are_equal : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;names:(string * string) <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-Set/index.html">Set</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Set/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Like <code>require_equal</code>, but when equality fails produces a message including sexps of both <code>Set.diff first second</code> and <code>Set.diff second first</code> to aid in debugging.</p></dd></dl><dl><dt class="spec value" id="val-show_raise"><a href="#val-show_raise" class="anchor"></a><code><span class="keyword">val</span> show_raise : ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">_</span>) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>show_raise</code> calls <code>f ()</code> and prints the exception that it raises, or, if it doesn't raise, prints <code>did not raise</code>. <code>show_raise</code> ignores the result of <code>f</code> so that one doesn't have to put an <code>ignore</code> inside the body of an <code>f</code> that is expected to raise. <code>~hide_positions:true</code> operates as in <code>print_s</code>, to make output less fragile. Using <code>~show_backtrace:true</code> will result in a CR in the expectation, but it's still available here as it is still valuable when initially writing tests and debugging.</p></dd></dl><dl><dt class="spec value" id="val-require_does_not_raise"><a href="#val-require_does_not_raise" class="anchor"></a><code><span class="keyword">val</span> require_does_not_raise : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>require_does_not_raise</code> is like <code>show_raise</code>, but does not print anything if the function does not raise, and prints a CR along with the exception if it does raise. Unlike for <code>show_raise</code>, the supplied function is required to return <code>unit</code> to avoid mistakes like incomplete partial application that silently would not raise, but for the wrong reason.</p></dd></dl><dl><dt class="spec value" id="val-require_does_raise"><a href="#val-require_does_raise" class="anchor"></a><code><span class="keyword">val</span> require_does_raise : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;show_backtrace:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">_</span>) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>require_does_raise</code> is like <code>show_raise</code>, but additionally prints a CR if the function does not raise.</p></dd></dl><dl><dt class="spec value" id="val-require_allocation_does_not_exceed"><a href="#val-require_allocation_does_not_exceed" class="anchor"></a><code><span class="keyword">val</span> require_allocation_does_not_exceed : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="Allocation_limit/index.html#type-t">Allocation_limit.t</a> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>require_allocation_does_not_exceed</code> is a specialized form of <code>require</code> that only produces output when <code>f ()</code> allocates more than the given limits. The output will include the actual number of major and minor words allocated. We do NOT include these numbers in the successful case because those numbers are not stable with respect to compiler versions and build flags.</p><p>If <code>f</code> returns a value that should be ignored, use this idiom:</p><pre><code class="ml">ignore (show_allocation f : t)</code></pre><p>rather than this idiom:</p><pre><code class="ml">show_allocation (fun () -&gt; ignore (f () : t))</code></pre><p>With the latter idiom, the compiler may optimize the computation of <code>f ()</code> taking advantage of the fact that the result is ignored, and eliminate allocation that is intended to be measured. With the former idiom, the compiler cannot do such optimization and must compute the result of <code>f ()</code>.</p></dd></dl><dl><dt class="spec value" id="val-require_no_allocation"><a href="#val-require_no_allocation" class="anchor"></a><code><span class="keyword">val</span> require_no_allocation : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>require_no_allocation here f</code> is equivalent to <code>require_allocation_does_not_exceed
      (Minor_words 0) here f</code>.</p></dd></dl><dl><dt class="spec value" id="val-print_and_check_container_sexps"><a href="#val-print_and_check_container_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_container_sexps : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_containers/index.html">With_containers</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_containers/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_and_check_container_sexps</code> prints the sexp representation of maps, sets, hash tables, and hash sets based on the given values. For sets and hash sets, prints a CR if the sexp does not correspond to a list of elements. For maps and hash tables, prints a CR if the sexp does not correspond to an association list keyed on elements.</p></dd></dl><dl><dt class="spec value" id="val-print_and_check_comparable_sexps"><a href="#val-print_and_check_comparable_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_comparable_sexps : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_comparable/index.html">With_comparable</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_comparable/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_and_check_comparable_sexps</code> is like <code>print_and_check_container_sexps</code> for maps and sets only.</p></dd></dl><dl><dt class="spec value" id="val-print_and_check_hashable_sexps"><a href="#val-print_and_check_hashable_sexps" class="anchor"></a><code><span class="keyword">val</span> print_and_check_hashable_sexps : ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-With_hashable/index.html">With_hashable</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-With_hashable/index.html#type-t">t</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> unit</code></dt><dd><p><code>print_and_check_hashable_sexps</code> is like <code>print_and_check_container_sexps</code> for hash tables and hash sets only.</p></dd></dl><dl><dt class="spec value" id="val-quickcheck"><a href="#val-quickcheck" class="anchor"></a><code><span class="keyword">val</span> quickcheck : <a href="../../../../core_kernel/Core_kernel/Source_code_position/index.html#type-t">Core_kernel.Source_code_position.t</a> <span>&#45;&gt;</span> ?&#8288;cr:<a href="CR/index.html#type-t">CR.t</a> <span>&#45;&gt;</span> ?&#8288;hide_positions:bool <span>&#45;&gt;</span> ?&#8288;seed:<a href="../../../../core_kernel/Core_kernel/Quickcheck/index.html#type-seed">Core_kernel.Quickcheck.seed</a> <span>&#45;&gt;</span> ?&#8288;sizes:int <a href="../../../../core_kernel/Core_kernel/Sequence/index.html#type-t">Core_kernel.Sequence.t</a> <span>&#45;&gt;</span> ?&#8288;trials:int <span>&#45;&gt;</span> ?&#8288;shrinker:<span class="type-var">'a</span> <a href="../../../../core_kernel/Core_kernel__Quickcheck/Shrinker/index.html#type-t">Core_kernel.Quickcheck.Shrinker.t</a> <span>&#45;&gt;</span> ?&#8288;shrink_attempts:<a href="../../../../core_kernel/Core_kernel/Quickcheck/index.html#type-shrink_attempts">Core_kernel.Quickcheck.shrink_attempts</a> <span>&#45;&gt;</span> ?&#8288;examples:<span class="type-var">'a</span> list <span>&#45;&gt;</span> sexp_of:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a>) <span>&#45;&gt;</span> f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../../../../core_kernel/Core_kernel__Quickcheck/Generator/index.html#type-t">Core_kernel.Quickcheck.Generator.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>quickcheck</code> is similar to <code>Quickcheck.test</code>. It stops after the first iteration that prints a CR, as detected by <code>on_print_cr</code>.</p></dd></dl><dl><dt class="spec value" id="val-on_print_cr"><a href="#val-on_print_cr" class="anchor"></a><code><span class="keyword">val</span> on_print_cr : (string <span>&#45;&gt;</span> unit) <a href="../../../../core_kernel/Core_kernel/index.html#type-ref">Core_kernel.ref</a></code></dt><dd><p><code>on_print_cr</code> determines the behavior of all functions above that print CRs, such as <code>print_cr</code> and <code>require</code>. The rendered string form of the CR is passed to <code>!on_print_cr</code>. The default value is <code>print_endline</code>; this can be overridden to replace or extend the default behavior. For example, some testing harnesses may choose to abort a series of tests after the first CR is printed.</p></dd></dl><dl><dt class="spec module" id="module-Expect_test_config"><a href="#module-Expect_test_config" class="anchor"></a><code><span class="keyword">module</span> <a href="Expect_test_config/index.html">Expect_test_config</a> : <a href="../../../../ppx_expect/Expect_test_config/index.html#module-type-S">Core_kernel.Expect_test_config.S</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../../../ppx_expect/Expect_test_config/module-type-S/IO/index.html#type-t">IO.t</a> = <span class="type-var">'a</span></code></dt><dd><p>We export <code>Expect_test_config</code> to override <code>Expect_test_config.run f</code> so that, if <code>f
      ()</code> raises, <code>run</code> prints the exception rather than raising. Printing works better with the expect-test workflow than an unhandled exception, because there is a <code>.corrected</code> file that one can accept and inspect.</p></dd></dl></div></body></html>