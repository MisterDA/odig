<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Enum (extlib.Enum)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">extlib</a> &#x00BB; Enum</nav><h1>Module <code>Enum</code></h1><p>Enumeration over abstract collection of elements.</p><p>Enumerations are entirely functional and most of the operations do not actually require the allocation of data structures. Using enumerations to manipulate data is therefore efficient and simple. All data structures in ExtLib such as lists, arrays, etc. have support to convert from and to enumerations.</p><nav class="toc"><ul><li><a href="#final-functions">Final functions</a></li><li><a href="#useful-functions">Useful functions</a></li><li><a href="#lazy-constructors">Lazy constructors</a></li><li><a href="#constructors">Constructors</a></li><li><a href="#counting">Counting</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code></dt></dl><section><header><h6 id="final-functions"><a href="#final-functions" class="anchor"></a>Final functions</h6><p>These functions consume the enumeration until it ends or an exception is raised by the first argument function.</p></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f e</code> calls the function <code>f</code> with each elements of <code>e</code> in turn.</p></dd></dl><dl><dt class="spec value" id="val-iter2"><a href="#val-iter2" class="anchor"></a><code><span class="keyword">val</span> iter2 : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter2 f e1 e2</code> calls the function <code>f</code> with the next elements of <code>e</code> and <code>e2</code> repeatedly until one of the two enumerations ends.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>fold f v e</code> returns <code>v</code> if <code>e</code> is empty, otherwise <code>f aN (... (f a2 (f a1 v)) ...)</code> where a1..N are the elements of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-fold2"><a href="#val-fold2" class="anchor"></a><code><span class="keyword">val</span> fold2 : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt><dd><p><code>fold2</code> is similar to <code>fold</code> but will fold over two enumerations at the same time until one of the two enumerations ends.</p></dd></dl><aside><p>Indexed functions : these functions are similar to previous ones except that they call the function with one additional argument which is an index starting at 0 and incremented after each call to the function.</p></aside><dl><dt class="spec value" id="val-iteri"><a href="#val-iteri" class="anchor"></a><code><span class="keyword">val</span> iteri : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-iter2i"><a href="#val-iter2i" class="anchor"></a><code><span class="keyword">val</span> iter2i : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-foldi"><a href="#val-foldi" class="anchor"></a><code><span class="keyword">val</span> foldi : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dt class="spec value" id="val-fold2i"><a href="#val-fold2i" class="anchor"></a><code><span class="keyword">val</span> fold2i : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'c</span>) <span>&#45;&gt;</span> <span class="type-var">'c</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'c</span></code></dt></dl></section><section><header><h6 id="useful-functions"><a href="#useful-functions" class="anchor"></a>Useful functions</h6></header><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>find f e</code> returns the first element <code>x</code> of <code>e</code> such that <code>f x</code> returns <code>true</code>, consuming the enumeration up to and including the found element, or, raises <code>Not_found</code> if no such element exists in the enumeration, consuming the whole enumeration in the search.</p><p>Since <code>find</code> consumes a prefix of the enumeration, it can be used several times on the same enumeration to find the next element.</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_empty e</code> returns true if <code>e</code> does not contains any element.</p></dd></dl><dl><dt class="spec value" id="val-peek"><a href="#val-peek" class="anchor"></a><code><span class="keyword">val</span> peek : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>peek e</code> returns <code>None</code> if <code>e</code> is empty or <code>Some x</code> where <code>x</code> is the next element of <code>e</code>. The element is not removed from the enumeration.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>get e</code> returns <code>None</code> if <code>e</code> is empty or <code>Some x</code> where <code>x</code> is the next element of <code>e</code>, in which case the element is removed from the enumeration.</p></dd></dl><dl><dt class="spec value" id="val-next"><a href="#val-next" class="anchor"></a><code><span class="keyword">val</span> next : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>next e</code> returns the next element of <code>e</code> (and removes it from enumeration).</p><dl><dt>raises No_more_elements</dt><dd><p>if enumeration is empty</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-push"><a href="#val-push" class="anchor"></a><code><span class="keyword">val</span> push : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>push e x</code> will add <code>x</code> at the beginning of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-junk"><a href="#val-junk" class="anchor"></a><code><span class="keyword">val</span> junk : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>junk e</code> removes the first element from the enumeration, if any.</p></dd></dl><dl><dt class="spec value" id="val-clone"><a href="#val-clone" class="anchor"></a><code><span class="keyword">val</span> clone : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>clone e</code> creates a new enumeration that is copy of <code>e</code>. If <code>e</code> is consumed by later operations, the clone will not get affected.</p></dd></dl><dl><dt class="spec value" id="val-force"><a href="#val-force" class="anchor"></a><code><span class="keyword">val</span> force : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>force e</code> forces the application of all lazy functions and the enumeration of all elements, exhausting the enumeration.</p><p>An efficient intermediate data structure of enumerated elements is constructed and <code>e</code> will now enumerate over that data structure.</p></dd></dl></section><section><header><h6 id="lazy-constructors"><a href="#lazy-constructors" class="anchor"></a>Lazy constructors</h6><p>These functions are lazy which means that they will create a new modified enumeration without actually enumerating any element until they are asked to do so by the programmer (using one of the functions above).</p><p>When the resulting enumerations of these functions are consumed, the underlying enumerations they were created from are also consumed.</p></header><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f e</code> returns an enumeration over <code>(f a1, f a2, ... , f aN)</code> where a1...N are the elements of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : (int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>mapi</code> is similar to <code>map</code> except that <code>f</code> is passed one extra argument which is the index of the element in the enumeration, starting from 0.</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>filter f e</code> returns an enumeration over all elements <code>x</code> of <code>e</code> such as <code>f x</code> returns <code>true</code>.</p></dd></dl><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val</span> filter_map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>filter_map f e</code> returns an enumeration over all elements <code>x</code> such as <code>f y</code> returns <code>Some x</code> , where <code>y</code> is an element of <code>e</code>.</p></dd></dl><dl><dt class="spec value" id="val-append"><a href="#val-append" class="anchor"></a><code><span class="keyword">val</span> append : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>append e1 e2</code> returns an enumeration that will enumerate over all elements of <code>e1</code> followed by all elements of <code>e2</code>.</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>concat e</code> returns an enumeration over all elements of all enumerations of <code>e</code>.</p></dd></dl></section><section><header><h6 id="constructors"><a href="#constructors" class="anchor"></a>Constructors</h6><p>In this section the word <i>shall</i> denotes a semantic requirement. The correct operation of the functions in this interface are conditional on the client meeting these requirements.</p></header><dl><dt class="spec exception" id="exception-No_more_elements"><a href="#exception-No_more_elements" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">No_more_elements</span></code></dt><dd><p>This exception <i>shall</i> be raised by the <code>next</code> function of <code>make</code> or <code>from</code> when no more elements can be enumerated, it <i>shall not</i> be raised by any function which is an argument to any other function specified in the interface.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>The empty enumeration : contains no element</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : next:(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> count:(unit <span>&#45;&gt;</span> int) <span>&#45;&gt;</span> clone:(unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>This function creates a fully defined enumeration.</p><ul><li>the <code>next</code> function <i>shall</i> return the next element of the enumeration or raise <code>No_more_elements</code> if the underlying data structure does not have any more elements to enumerate.</li><li>the <code>count</code> function <i>shall</i> return the actual number of remaining elements in the enumeration.</li><li>the <code>clone</code> function <i>shall</i> create a clone of the enumeration such as operations on the original enumeration will not affect the clone.</li></ul><p>For some samples on how to correctly use <code>make</code>, you can have a look at implementation of <code>ExtList.enum</code>.</p></dd></dl><dl><dt class="spec value" id="val-from"><a href="#val-from" class="anchor"></a><code><span class="keyword">val</span> from : (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>from next</code> creates an enumeration from the <code>next</code> function. <code>next</code> <i>shall</i> return the next element of the enumeration or raise <code>No_more_elements</code> when no more elements can be enumerated. Since the enumeration definition is incomplete, a call to <code>clone</code> or <code>count</code> will result in a call to <code>force</code> that will enumerate all elements in order to return a correct value.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>init n f</code> creates a new enumeration over elements <code>f 0, f 1, ..., f (n-1)</code></p></dd></dl></section><section><header><h6 id="counting"><a href="#counting" class="anchor"></a>Counting</h6></header><dl><dt class="spec value" id="val-count"><a href="#val-count" class="anchor"></a><code><span class="keyword">val</span> count : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>count e</code> returns the number of remaining elements in <code>e</code> without consuming the enumeration.</p><p>Depending of the underlying data structure that is implementing the enumeration functions, the count operation can be costly, and even sometimes can cause a call to <code>force</code>.</p></dd></dl><dl><dt class="spec value" id="val-fast_count"><a href="#val-fast_count" class="anchor"></a><code><span class="keyword">val</span> fast_count : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>For users worried about the speed of <code>count</code> you can call the <code>fast_count</code> function that will give an hint about <code>count</code> implementation. Basically, if the enumeration has been created with <code>make</code> or <code>init</code> or if <code>force</code> has been called on it, then <code>fast_count</code> will return true.</p></dd></dl></section></div></body></html>