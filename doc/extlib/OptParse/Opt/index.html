<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Opt (extlib.OptParse.Opt)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">extlib</a> &#x00BB; <a href="../index.html">OptParse</a> &#x00BB; Opt</nav><h1>Module <code>OptParse.Opt</code></h1><p>This module contains the basic functions and types for defining new option types and accessing the values of options.</p><nav class="toc"><ul><li><a href="#exceptions">Exceptions</a></li><li><a href="#types">Types</a></li><li><a href="#option-value-retrieval">Option value retrieval</a></li><li><a href="#option-creation">Option creation</a></li></ul></nav></header><section><header><h6 id="exceptions"><a href="#exceptions" class="anchor"></a>Exceptions</h6></header><dl><dt class="spec exception" id="exception-No_value"><a href="#exception-No_value" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">No_value</span></code></dt><dd><p><code>No_value</code> gets raised by <a href="index.html#val-get"><code>OptParse.Opt.get</code></a> when an option value is not available.</p></dd></dl><dl><dt class="spec exception" id="exception-Option_error"><a href="#exception-Option_error" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Option_error</span><span class="keyword"> of </span>string<span class="keyword"> * </span>string</code></dt><dd><p>This exception signals that an option value is invalid. The first string contains the option string ('-x' or '--long-name') and the second string contains an error message.</p><p>This exception is only used when implementing custom option types and can never &quot;escape&quot; the scope of a <a href="../OptParser/index.html#val-parse"><code>OptParse.OptParser.parse</code></a>. The user should therefore not attempt to catch it.</p></dd></dl><dl><dt class="spec exception" id="exception-Option_help"><a href="#exception-Option_help" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Option_help</span></code></dt><dd><p>When an option wants to display a usage message, this exception may be raised. It can never &quot;escape&quot; the scope of a <a href="../OptParser/index.html#val-parse"><code>OptParse.OptParser.parse</code></a> call and the user should therefore not attempt to catch it.</p></dd></dl></section><section><header><h6 id="types"><a href="#types" class="anchor"></a>Types</h6></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-t.option_set" class="anchored"><td class="def field"><a href="#type-t.option_set" class="anchor"></a><code>option_set : string <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-t.option_set_value" class="anchored"><td class="def field"><a href="#type-t.option_set_value" class="anchor"></a><code>option_set_value : <span class="type-var">'a</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-t.option_get" class="anchored"><td class="def field"><a href="#type-t.option_get" class="anchor"></a><code>option_get : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> option;</code></td></tr><tr id="type-t.option_metavars" class="anchored"><td class="def field"><a href="#type-t.option_metavars" class="anchor"></a><code>option_metavars : string list;</code></td></tr><tr id="type-t.option_defhelp" class="anchored"><td class="def field"><a href="#type-t.option_defhelp" class="anchor"></a><code>option_defhelp : string option;</code></td></tr></table><code>}</code></dt><dd><p>Option type.</p><p><code>option_set</code> is a closure which converts and records the value of an option so that it can be retrieved with a later call to the <code>option_get</code> closure. It is called with the option name which was given on the command line and a list of strings, each representing one of the argument values given on the command line. It may raise <code>Option_error</code> if the value is invalid (for whatever reason).</p><p><code>option_set_value</code> is a closure which sets the value of an option to a particular value.</p><p><code>option_get</code> is a closure which retrieves the recorded value of the option. If the option value has not been set from the command line, the default value is used. If there is no default value, then <code>None</code> should be returned.</p><p><code>option_metavars</code> is a list of &quot;meta-variables&quot; (arguments) which this option accepts. This is mainly for display purposes, but the length of this list determines how many arguments the option parser accepts for this option (currently only lists of length 0 or 1 are supported).</p><p><code>option_defhelp</code> is the default help string (if any). It is used for displaying help messages whenever the user does <b>not</b> specify a help string manually when adding this option. Using a non-None value here only makes sense for completely generic options like <a href="../StdOpt/index.html#val-help_option"><code>OptParse.StdOpt.help_option</code></a>.</p></dd></dl></section><section><header><h6 id="option-value-retrieval"><a href="#option-value-retrieval" class="anchor"></a>Option value retrieval</h6></header><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Get the value of an option.</p><dl><dt>returns</dt><dd><p>the value of the option. If the option has not been encountered while parsing the command line, the default value is returned.</p></dd></dl><dl><dt>raises No_value</dt><dd><p>if no default values has been given and the option value has not been set from the command line.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Set the value of an option.</p></dd></dl><dl><dt class="spec value" id="val-opt"><a href="#val-opt" class="anchor"></a><code><span class="keyword">val </span>opt : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p>Get the value of an option as an optional value.</p><dl><dt>returns</dt><dd><p><code>Some x</code> if the option has value <code>x</code> (either by default or from the command line). If the option doesn't have a value <code>None</code> is returned.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-is_set"><a href="#val-is_set" class="anchor"></a><code><span class="keyword">val </span>is_set : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Find out if the option has a value (either by default or from the command line).</p><dl><dt>returns</dt><dd><p><code>True</code> iff the option has a value.</p></dd></dl></dd></dl></section><section><header><h6 id="option-creation"><a href="#option-creation" class="anchor"></a>Option creation</h6></header><dl><dt class="spec value" id="val-value_option"><a href="#val-value_option" class="anchor"></a><code><span class="keyword">val </span>value_option : string <span>&#45;&gt;</span> <span class="type-var">'a</span> option <span>&#45;&gt;</span> (string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> (exn <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Make an option which takes a single argument.</p><p><code>value_option metavar default coerce errfmt</code> returns an option which takes a single argument from the command line and calls <code>coerce</code> to coerce it to the proper type. If <code>coerce</code> raises an exception, <code>exn</code>, then <code>errfmt exn argval</code> is called to generate an error message for display. <code>metavar</code> is the name of the metavariable of the option.</p><p><code>default</code> is the default value of the option. If <code>None</code>, the the option has no default value.</p><dl><dt>returns</dt><dd><p>the newly created option.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-callback_option"><a href="#val-callback_option" class="anchor"></a><code><span class="keyword">val </span>callback_option : string <span>&#45;&gt;</span> (string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> (exn <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit <a href="index.html#type-t">t</a></code></dt><dd><p>Make a callback option which takes a single argument.</p><p><code>callback_option metavar coerce errfmt f</code> returns an option which takes a single argument from the command line and calls <code>coerce</code> to coerce it to the proper type. If <code>coerce</code> raises an exception <code>errfmt exn argval</code> is called to format an error message for display. If <code>coerce</code> succeeds, the callback function <code>f</code> is called with the coerced value. Finally, <code>metavar</code> is the name of the metavariable of the option.</p><dl><dt>returns</dt><dd><p>the newly created option.</p></dd></dl></dd></dl></section></div></body></html>