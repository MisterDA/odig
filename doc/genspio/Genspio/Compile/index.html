<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Compile (genspio.Genspio.Compile)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">genspio</a> &#x00BB; <a href="../index.html">Genspio</a> &#x00BB; Compile</nav><h1>Module <code>Genspio.Compile</code></h1><nav class="toc"><ul><li><a href="#pretty-printing-output">Pretty-printing Output</a></li><li><a href="#compilation-to-posix-shell-scripts">Compilation to POSIX Shell Scripts</a></li><li><a href="#legacy-api">Legacy API</a></li></ul></nav></header><aside><p>Compilers of the <a href="../EDSL/index.html#type-t"><code>EDSL.t</code></a> values.</p></aside><section><header><h4 id="pretty-printing-output"><a href="#pretty-printing-output" class="anchor"></a>Pretty-printing Output</h4></header><dl><dt class="spec value" id="val-pp_hum"><a href="#val-pp_hum" class="anchor"></a><code><span class="keyword">val</span> pp_hum : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty print a Genspio expression with the <code>Format</code> module.</p></dd></dl><dl><dt class="spec value" id="val-to_string_hum"><a href="#val-to_string_hum" class="anchor"></a><code><span class="keyword">val</span> to_string_hum : <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Pretty print a Genspio expression to <code>string</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_one_line_hum"><a href="#val-to_one_line_hum" class="anchor"></a><code><span class="keyword">val</span> to_one_line_hum : <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Like <code>to_string_hum</code> but avoiding new-lines.</p></dd></dl></section><section><header><h4 id="compilation-to-posix-shell-scripts"><a href="#compilation-to-posix-shell-scripts" class="anchor"></a>Compilation to POSIX Shell Scripts</h4></header><dl><dt class="spec module" id="module-To_posix"><a href="#module-To_posix" class="anchor"></a><code><span class="keyword">module</span> <a href="To_posix/index.html">To_posix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Compiler from <a href="../EDSL/index.html#type-t"><code>EDSL.t</code></a> to POSIX shell scripts (one-liners or multiline scripts).</p></dd></dl><dl><dt class="spec module" id="module-To_slow_flow"><a href="#module-To_slow_flow" class="anchor"></a><code><span class="keyword">module</span> <a href="To_slow_flow/index.html">To_slow_flow</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Compile <a href="../EDSL/index.html#type-t"><code>EDSL.t</code></a> values to much slower but more portable scripts (which use temporary-files).</p></dd></dl></section><section><header><h4 id="legacy-api"><a href="#legacy-api" class="anchor"></a>Legacy API</h4><p>These functions are here for backwards compatibility, please use now the <a href="To_posix/index.html"><code>To_posix</code></a> module.</p></header><dl><dt class="spec value" id="val-default_max_argument_length"><a href="#val-default_max_argument_length" class="anchor"></a><code><span class="keyword">val</span> default_max_argument_length : int option</code></dt><dd><p>See argument <code>?max_argument_length</code> of <a href="index.html#val-to_one_liner"><code>to_one_liner</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-to_one_liner"><a href="#val-to_one_liner" class="anchor"></a><code><span class="keyword">val</span> to_one_liner : ?&#8288;max_argument_length:int option <span>&#45;&gt;</span> ?&#8288;no_trap:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Compile a Genspio expression to a single-line POSIX shell command.</p><p>The shell command starts by using <code>&quot;trap&quot;</code> to allow the script to abort thorugh the <a href="../EDSL/index.html#val-fail"><code>EDSL.fail</code></a> construct; one can avoid this setup with <code>~no_trap:true</code></p><p>If <code>~no_trap:true</code> is used and the script used the <a href="../EDSL/index.html#val-fail"><code>EDSL.fail</code></a> construct, <code>to_one_liner</code> fails with an exception.</p><pre><code class="ml">utop # Genspio.Compile.to_one_liner
         ~no_trap:true
         Genspio.EDSL.(
           seq [
             eprintf (str &quot;Hello\\n&quot;) [];
             fail &quot;Foo&quot;
           ]);;
Exception:
Failure
 &quot;Error: Call to `fail (user Foo)` while no “die” command is configured.;
  Code: NONE; Comment-backtrace: [] &quot;.</code></pre><p>The default value for <code>max_argument_length</code> is <a href="index.html#val-default_max_argument_length"><code>default_max_argument_length</code></a> (<code>Some 100_000</code>); it is a limit on the length of the literal command line arguments generated by the compiler. <code>None</code> means “do not check.”</p><p>If the compilation fails, the function raises a <code>Failure</code> exception containing the error message.</p></dd></dl><dl><dt class="spec value" id="val-to_many_lines"><a href="#val-to_many_lines" class="anchor"></a><code><span class="keyword">val</span> to_many_lines : ?&#8288;max_argument_length:int option <span>&#45;&gt;</span> ?&#8288;no_trap:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Compile a Genspio expression to a multi-line POSIX shell script, slightly more readable than <a href="index.html#val-to_one_liner"><code>to_one_liner</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-quick_run_exn"><a href="#val-quick_run_exn" class="anchor"></a><code><span class="keyword">val</span> quick_run_exn : ?&#8288;max_argument_length:int option <span>&#45;&gt;</span> ?&#8288;no_trap:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../EDSL/index.html#type-t">EDSL.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Compile an expression and use <code>Sys.command</code> on it; if the overall command does not return 0 an exception is raised.</p></dd></dl></section></div></body></html>