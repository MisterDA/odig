<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lookup (incr_map.Incr_map.Make.Lookup)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">incr_map</a> &#x00BB; <a href="../../index.html">Incr_map</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; Lookup</nav><h1>Module <code>Make.Lookup</code></h1><p><code>('k, 'v) Lookup.t</code> provides a way to lookup keys in a map which uses symmetric diffs to trigger updates of the lookups.</p><p>The complexity of an update depends on:</p><ul><li><code>n</code>: the number of keys in the larger of the old/updated input map</li><li><code>k</code>: the number of lookup nodes created using <code>find</code></li><li><code>m</code>: the number of elements in the symdiff of the maps</li><li><code>symdiff(n)</code>: the cost of performing the symdiff on the map (m &lt;= symdiff(n) &lt;= n)</li></ul><p>Each update should cost <code>O(symdiff(n) + m * log k)</code>, so this will be efficient when there are a lot of lookups (close to n) into a map which can be efficiently symdiffed (and therefore has a small number of changes also). The cost of updating when performing the same lookups by means of <code>Incr.map ~f:(fun m -&gt; Map.find m key)</code> is <code>O(k * log n)</code>.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('k, 'v, 'cmp) t</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;data_equal:(<span class="type-var">'v</span> <span>&#45;&gt;</span> <span class="type-var">'v</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span>) <a href="../../../../core_kernel/Core_kernel/Map/index.html#type-t">Core_kernel.Map.t</a> <a href="../argument-1-Incr/index.html#type-t">Incr.t</a> <span>&#45;&gt;</span> comparator:(<span class="type-var">'k</span>, <span class="type-var">'cmp</span>) <a href="../../../../core_kernel/Core_kernel/Comparator/index.html#type-t">Core_kernel.Comparator.t</a> <span>&#45;&gt;</span> (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">'cmp</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Create the lookup structure on an incremental map.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : (<span class="type-var">'k</span>, <span class="type-var">'v</span>, <span class="type-var">_</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'k</span> <span>&#45;&gt;</span> <span class="type-var">'v</span> option <a href="../argument-1-Incr/index.html#type-t">Incr.t</a></code></dt><dd><p>Create a node which performs <code>Map.find</code> on the input map.</p><p><code>find (create incr_map) key</code> should be equivalent to <code>Incr.map ~f:(fun m -&gt;
        Map.find m key) incr_map</code>, but when you call <code>find</code> many times for a single <code>create</code> the nodes should update more efficiently in stabilisation when <code>incr_map</code> changes in a way which can be efficiently diffed.</p><p>This will re-use existing nodes when it can, but will not always do so.</p></dd></dl><div class="spec module" id="module-For_debug"><a href="#module-For_debug" class="anchor"></a><code><span class="keyword">module</span> <a href="For_debug/index.html">For_debug</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>