<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Expert (incremental_kernel.Incremental_kernel__.Expert)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">incremental_kernel</a> &#x00BB; <a href="../index.html">Incremental_kernel__</a> &#x00BB; Expert</nav><h1>Module <code>Incremental_kernel__.Expert</code></h1></header><aside><p>A module internal to Incremental. Users should see <a href="../Incremental_intf/index.html"><code>Incremental_intf</code></a>.</p><p>An <code>Expert.t</code> is the only kind of node that can update its value and set of children incrementally. The operations to change the set of children and to react to various events (new value in a child etc) are exposed to the user.</p></aside><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec type" id="type-edge"><a href="#type-edge" class="anchor"></a><code><span class="keyword">type</span> 'a edge</code><code> = <span class="type-var">'a</span> <a href="../../Incremental_kernel__Types/Expert/index.html#type-edge">Incremental_kernel__Types.Expert.edge</a></code><code> = </code><code>{</code><table class="record"><tr id="type-edge.child" class="anchored"><td class="def field"><a href="#type-edge.child" class="anchor"></a><code>child : <span class="type-var">'a</span> <a href="../../Incremental_kernel__Types/Node/index.html#type-t">Incremental_kernel__Types.Node.t</a>;</code></td></tr><tr id="type-edge.on_change" class="anchored"><td class="def field"><a href="#type-edge.on_change" class="anchor"></a><code>on_change : <span class="type-var">'a</span> <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-edge.index" class="anchored"><td class="def field"><a href="#type-edge.index" class="anchor"></a><code><span class="keyword">mutable</span> index : int <a href="../Uopt/index.html#type-t">Incremental_kernel__.Uopt.t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-packed_edge"><a href="#type-packed_edge" class="anchor"></a><code><span class="keyword">type</span> packed_edge</code><code> = <a href="../../Incremental_kernel__Types/Expert/index.html#type-packed_edge">Incremental_kernel__Types.Expert.packed_edge</a></code><code> = </code><table class="variant"><tr id="type-packed_edge.E" class="anchored"><td class="def constructor"><a href="#type-packed_edge.E" class="anchor"></a><code>| </code><code><span class="constructor">E</span> : <span class="type-var">'a</span> <a href="index.html#type-edge">edge</a> <span>&#45;&gt;</span> <a href="index.html#type-packed_edge">packed_edge</a></code></td></tr></table></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code><code> = <span class="type-var">'a</span> <a href="../../Incremental_kernel__Types/Expert/index.html#type-t">Incremental_kernel__Types.Expert.t</a></code><code> = </code><code>{</code><table class="record"><tr id="type-t.f" class="anchored"><td class="def field"><a href="#type-t.f" class="anchor"></a><code>f : unit <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-t.on_observability_change" class="anchored"><td class="def field"><a href="#type-t.on_observability_change" class="anchor"></a><code>on_observability_change : is_now_observable:bool <span>&#45;&gt;</span> unit;</code></td></tr><tr id="type-t.children" class="anchored"><td class="def field"><a href="#type-t.children" class="anchor"></a><code><span class="keyword">mutable</span> children : <a href="index.html#type-packed_edge">packed_edge</a> <a href="../Uopt/index.html#type-t">Incremental_kernel__.Uopt.t</a> <a href="../../Incremental_kernel__Import/Array/index.html#type-t">Incremental_kernel__.Import.Array.t</a>;</code></td></tr><tr id="type-t.num_children" class="anchored"><td class="def field"><a href="#type-t.num_children" class="anchor"></a><code><span class="keyword">mutable</span> num_children : int;</code></td></tr><tr id="type-t.force_stale" class="anchored"><td class="def field"><a href="#type-t.force_stale" class="anchor"></a><code><span class="keyword">mutable</span> force_stale : bool;</code></td></tr><tr id="type-t.num_invalid_children" class="anchored"><td class="def field"><a href="#type-t.num_invalid_children" class="anchor"></a><code><span class="keyword">mutable</span> num_invalid_children : int;</code></td></tr><tr id="type-t.will_fire_all_callbacks" class="anchored"><td class="def field"><a href="#type-t.will_fire_all_callbacks" class="anchor"></a><code><span class="keyword">mutable</span> will_fire_all_callbacks : bool;</code></td></tr></table><code>}</code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../../base/Base/Invariant/index.html#module-type-S1">Core_kernel.Invariant.S1</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../../../base/Base/Invariant/module-type-S1/index.html#type-t">t</a> := <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code></dt></dl><dl><dt class="spec value" id="val-invariant"><a href="#val-invariant" class="anchor"></a><code><span class="keyword">val</span> invariant : <span class="type-var">'a</span> <a href="../../../base/Base__/Invariant_intf/index.html#type-inv">Base__.Invariant_intf.inv</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <a href="../../../base/Base__/Invariant_intf/index.html#type-inv">Base__.Invariant_intf.inv</a></code></dt></dl></details></div></div></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../Sexp_of/index.html#module-type-S1">Incremental_kernel__.Sexp_of.S1</a> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="../Sexp_of/module-type-S1/index.html#type-t">t</a> := <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'a t</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></details></div></div></div></details></div></div></div><dl><dt class="spec value" id="val-sexp_of_edge"><a href="#val-sexp_of_edge" class="anchor"></a><code><span class="keyword">val</span> sexp_of_edge : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-edge">edge</a> <span>&#45;&gt;</span> <a href="../../../core_kernel/Core_kernel/Sexp/index.html#type-t">Core_kernel.Sexp.t</a></code></dt><dt class="spec value" id="val-invariant_about_num_invalid_children"><a href="#val-invariant_about_num_invalid_children" class="anchor"></a><code><span class="keyword">val</span> invariant_about_num_invalid_children : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> is_necessary:bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : f:(unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> on_observability_change:(is_now_observable:bool <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-make_stale"><a href="#val-make_stale" class="anchor"></a><code><span class="keyword">val</span> make_stale : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> [ `Already_stale | `Ok ]</code></dt><dt class="spec value" id="val-incr_invalid_children"><a href="#val-incr_invalid_children" class="anchor"></a><code><span class="keyword">val</span> incr_invalid_children : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-decr_invalid_children"><a href="#val-decr_invalid_children" class="anchor"></a><code><span class="keyword">val</span> decr_invalid_children : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-add_child_edge"><a href="#val-add_child_edge" class="anchor"></a><code><span class="keyword">val</span> add_child_edge : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-packed_edge">packed_edge</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the index of this new edge.</p></dd></dl><dl><dt class="spec value" id="val-swap_children"><a href="#val-swap_children" class="anchor"></a><code><span class="keyword">val</span> swap_children : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> child_index1:int <span>&#45;&gt;</span> child_index2:int <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-last_child_edge_exn"><a href="#val-last_child_edge_exn" class="anchor"></a><code><span class="keyword">val</span> last_child_edge_exn : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-packed_edge">packed_edge</a></code></dt><dt class="spec value" id="val-remove_last_child_edge_exn"><a href="#val-remove_last_child_edge_exn" class="anchor"></a><code><span class="keyword">val</span> remove_last_child_edge_exn : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-before_main_computation"><a href="#val-before_main_computation" class="anchor"></a><code><span class="keyword">val</span> before_main_computation : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> [ `Invalid | `Ok ]</code></dt><dt class="spec value" id="val-observability_change"><a href="#val-observability_change" class="anchor"></a><code><span class="keyword">val</span> observability_change : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> is_now_observable:bool <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-run_edge_callback"><a href="#val-run_edge_callback" class="anchor"></a><code><span class="keyword">val</span> run_edge_callback : <span class="type-var">_</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> child_index:int <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>