<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Contents (irmin.Irmin.Dot.1-S.Private.Contents)</title><link rel="stylesheet" href="../../../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">irmin</a> &#x00BB; <a href="../../../../index.html">Irmin</a> &#x00BB; <a href="../../../index.html">Dot</a> &#x00BB; <a href="../../index.html">1-S</a> &#x00BB; <a href="../index.html">Private</a> &#x00BB; Contents</nav><h1>Module <code>Private.Contents</code></h1><p>Private content store.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../../index.html#module-type-AO">AO</a></code></span></summary><section><header><h2 id="append-only-stores"><a href="#append-only-stores" class="anchor"></a>Append-only stores</h2><p>Append-only stores are read-only store where it is also possible to add values. Keys are derived from the values raw contents and hence are deterministic.</p></header><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../../../index.html#module-type-RO">RO</a></code></span></summary><section><header><h2 id="read-only-stores"><a href="#read-only-stores" class="anchor"></a>Read-only stores</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code></dt><dd><p>The type for read-only backend stores.</p></dd></dl><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type </span>key</code></dt><dd><p>The type for keys.</p></dd></dl><dl><dt class="spec type" id="type-value"><a href="#type-value" class="anchor"></a><code><span class="keyword">type </span>value</code></dt><dd><p>The type for raw values.</p></dd></dl><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val </span>mem : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> bool Lwt.t</code></dt><dd><p><code>mem t k</code> is true iff <code>k</code> is present in <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val </span>find : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-value">value</a> option Lwt.t</code></dt><dd><p><code>find t k</code> is <code>Some v</code> if <code>k</code> is associated to <code>v</code> in <code>t</code> and <code>None</code> is <code>k</code> is not present in <code>t</code>.</p></dd></dl></section></details></div></div></div><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val </span>add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-value">value</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> Lwt.t</code></dt><dd><p>Write the contents of a value to the store. It's the responsibility of the append-only store to generate a consistent key.</p></dd></dl></section></details></div></div></div><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val </span>merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> option <a href="../../../../Merge/index.html#type-t">Merge.t</a></code></dt><dd><p><code>merge t</code> lifts the merge functions defined on contents values to contents key. The merge function will: <em>(i)</em> read the values associated with the given keys, <em>(ii)</em> use the merge function defined on values and <em>(iii)</em> write the resulting values into the store to get the resulting key. See <a href="../../../../Contents/module-type-S/index.html#val-merge"><code>Contents.S.merge</code></a>.</p><p>If any of these operations fail, return <code>`Conflict</code>.</p></dd></dl><dl><dt class="spec module" id="module-Key"><a href="#module-Key" class="anchor"></a><code><span class="keyword">module </span><a href="Key/index.html">Key</a> : <a href="../../../../Hash/index.html#module-type-S">Hash.S</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../../../../Hash/module-type-S/index.html#type-t">t</a><span class="keyword"> = </span><a href="index.html#type-key">key</a></code></dt><dd><p><code>Key</code> provides base functions for user-defined contents keys.</p></dd></dl><dl><dt class="spec module" id="module-Val"><a href="#module-Val" class="anchor"></a><code><span class="keyword">module </span><a href="Val/index.html">Val</a> : <a href="../../../../Contents/index.html#module-type-S">Contents.S</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../../../../Contents/module-type-S/index.html#type-t">t</a><span class="keyword"> = </span><a href="index.html#type-value">value</a></code></dt><dd><p><code>Val</code> provides base functions for user-defined contents values.</p></dd></dl></div></body></html>