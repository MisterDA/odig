<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Head (irmin.Irmin.S_MAKER.Head)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">irmin</a> &#x00BB; <a href="../../index.html">Irmin</a> &#x00BB; <a href="../index.html">S_MAKER</a> &#x00BB; Head</nav><h1>Module <code>S_MAKER.Head</code></h1><p>Managing the store's heads.</p></header><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val </span>list : <a href="../index.html#type-repo">repo</a> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> list Lwt.t</code></dt><dd><p><code>list t</code> is the list of all the heads in local store. Similar to <code>git rev-list --all</code>.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val </span>find : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> option Lwt.t</code></dt><dd><p><code>find t</code> is the current head of the store <code>t</code>. This works for both persistent and temporary branches. In the case of a persistent branch, this involves getting the the head associated with the branch, so this may block. In the case of a temporary store, it simply returns the current head. Returns <code>None</code> if the store has no contents. Similar to <code>git rev-parse
        HEAD</code>.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> Lwt.t</code></dt><dd><p>Same as <a href="index.html#val-find"><code>find</code></a> but raise <code>Invalid_argument</code> if the store does not have any contents.</p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>set t h</code> updates <code>t</code>'s contents with the contents of the commit <code>h</code>. Can cause data loss as it discards the current contents. Similar to <code>git reset --hard &lt;hash&gt;</code>.</p></dd></dl><dl><dt class="spec value" id="val-fast_forward"><a href="#val-fast_forward" class="anchor"></a><code><span class="keyword">val </span>fast_forward : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> ?&#8288;max_depth:int <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> (unit, [ `No_change<span class="keyword"> | </span>`Rejected<span class="keyword"> | </span><a href="../index.html#type-lca_error">lca_error</a> ]) Result.result Lwt.t</code></dt><dd><p><code>fast_forward t h</code> is similar to <code>update</code> but the <code>t</code>'s head is updated to <code>h</code> only if <code>h</code> is stricly in the future of <code>t</code>'s current head. <code>max_depth</code> or <code>n</code> are used to limit the search space of the lowest common ancestors (see <a href="../index.html#val-lcas"><code>lcas</code></a>).</p><p>The result is:</p><ul><li><code>Ok ()</code> if the operation is succesfull;</li><li><code>Error `No_change</code> if <code>h</code> is already <code>t</code>'s head;</li><li><code>Error `Rejected</code> if <code>h</code> is not in the strict future of <code>t</code>'s head.</li><li><code>Error e</code> if the history exploration has been cut before getting useful results. In that case. the operation can be retried using different parameters of <code>n</code> and <code>max_depth</code> to get better results.</li></ul></dd></dl><dl><dt class="spec value" id="val-test_and_set"><a href="#val-test_and_set" class="anchor"></a><code><span class="keyword">val </span>test_and_set : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> test:<a href="../index.html#type-commit">commit</a> option <span>&#45;&gt;</span> set:<a href="../index.html#type-commit">commit</a> option <span>&#45;&gt;</span> bool Lwt.t</code></dt><dd><p>Same as <code>update_head</code> but check that the value is <code>test</code> before updating to <code>set</code>. Use <code>update</code> or <a href="index.html#val-merge"><code>merge</code></a> instead if possible.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val </span>merge : into:<a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> info:<a href="../../Info/index.html#type-f">Info.f</a> <span>&#45;&gt;</span> ?&#8288;max_depth:int <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> (unit, <a href="../../Merge/index.html#type-conflict">Merge.conflict</a>) Result.result Lwt.t</code></dt><dd><p><code>merge ~into:t ?max_head ?n commit</code> merges the contents of the commit associated to <code>commit</code> into <code>t</code>. <code>max_depth</code> is the maximal depth used for getting the lowest common ancestor. <code>n</code> is the maximum number of lowest common ancestors. If present, <code>max_depth</code> or <code>n</code> are used to limit the search space of the lowest common ancestors (see <a href="../index.html#val-lcas"><code>lcas</code></a>).</p></dd></dl></div></body></html>