<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lens (lens.Lens)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">lens</a> &#x00BB; Lens</nav><h1>Module <code>Lens</code></h1><p>Functional lenses.</p><p>Based on F# implementation in <a href="https://github.com/fsharp/fsharpx">FSharpx</a> (see <a href="https://github.com/fsharp/fsharpx/blob/master/src/FSharpx.Core/Lens.fs">src/FSharpx.Core/Lens.fs</a> for the original implementation)</p><dl><dt>see <a href="http://bugsquash.blogspot.com/2011/11/lenses-in-f.html">http://bugsquash.blogspot.com/2011/11/lenses-in-f.html</a></dt><dd><p>Lenses in F#</p></dd></dl><dl><dt>see <a href="http://stackoverflow.com/questions/8179485/updating-nested-immutable-data-structures">http://stackoverflow.com/questions/8179485/updating-nested-immutable-data-structures</a></dt><dd><p>Stackoverflow question about Updating nested immutable data structures</p></dd></dl><dl><dt>see <a href="http://stackoverflow.com/questions/5767129/lenses-fclabels-data-accessor-which-library-for-structure-access-and-mutatio">http://stackoverflow.com/questions/5767129/lenses-fclabels-data-accessor-which-library-for-structure-access-and-mutatio</a></dt><dd><p>Haskell libraries for structure access and mutation</p></dd></dl><dl><dt>see <a href="http://www.youtube.com/watch?v=efv0SQNde5Q">http://www.youtube.com/watch?v=efv0SQNde5Q</a></dt><dd><p>Functional lenses for Scala by Edward Kmett on YouTube</p></dd></dl><dl><dt>see <a href="http://patternsinfp.wordpress.com/2011/01/31/lenses-are-the-coalgebras-for-the-costate-comonad/">http://patternsinfp.wordpress.com/2011/01/31/lenses-are-the-coalgebras-for-the-costate-comonad/</a></dt><dd><p>Lenses are the coalgebras for the costate comonad by Jeremy Gibbons</p></dd></dl><nav class="toc"><ul><li><a href="#combinators">Combinators</a></li><li><a href="#state-monad-integration">State monad integration</a></li><li><a href="#stock-lenses">Stock lenses</a></li><li><a href="#list-combinators">List combinators</a></li><li><a href="#isomorphism">Isomorphism</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b) t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.get" class="anchored"><td class="def field"><a href="#type-t.get" class="anchor"></a><code>get : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>;</code></td><td class="doc"><p>Functional getter</p></td></tr><tr id="type-t.set" class="anchored"><td class="def field"><a href="#type-t.set" class="anchor"></a><code>set : <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td><td class="doc"><p>Functional setter</p></td></tr></table><code>}</code></dt><dd><p>Lens type definition</p></dd></dl><dl><dt class="spec value" id="val-modify"><a href="#val-modify" class="anchor"></a><code><span class="keyword">val</span> modify : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Updates a value through a lens</p></dd></dl><section><header><h4 id="combinators"><a href="#combinators" class="anchor"></a>Combinators</h4></header><dl><dt class="spec value" id="val-compose"><a href="#val-compose" class="anchor"></a><code><span class="keyword">val</span> compose : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Sequentially composes two lenses</p></dd></dl><dl><dt class="spec value" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span class="keyword">val</span> pair : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'c</span>, <span class="type-var">'b</span> * <span class="type-var">'d</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Pairs two lenses</p></dd></dl><dl><dt class="spec value" id="val-pair3"><a href="#val-pair3" class="anchor"></a><code><span class="keyword">val</span> pair3 : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'d</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'e</span>, <span class="type-var">'f</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> * <span class="type-var">'c</span> * <span class="type-var">'e</span>, <span class="type-var">'b</span> * <span class="type-var">'d</span> * <span class="type-var">'f</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Pairs three lenses</p></dd></dl><dl><dt class="spec value" id="val-cond"><a href="#val-cond" class="anchor"></a><code><span class="keyword">val</span> cond : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Selects a lens checking a predicate.</p><p><code>cond pred lensTrue lensFalse</code>: <code>pred</code> is applied to source. If <code>true</code>, <code>lensTrue</code> is selected. If <code>false</code>, <code>lensFalse</code> is selected.</p></dd></dl></section><section><header><h4 id="state-monad-integration"><a href="#state-monad-integration" class="anchor"></a>State monad integration</h4></header><dl><dt class="spec value" id="val-get_state"><a href="#val-get_state" class="anchor"></a><code><span class="keyword">val</span> get_state : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> * <span class="type-var">'a</span></code></dt><dd><p>Gets a value from the state monad.</p></dd></dl><dl><dt class="spec value" id="val-put_state"><a href="#val-put_state" class="anchor"></a><code><span class="keyword">val</span> put_state : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit * <span class="type-var">'a</span></code></dt><dd><p>Puts a value in the state monad.</p></dd></dl><dl><dt class="spec value" id="val-modify_state"><a href="#val-modify_state" class="anchor"></a><code><span class="keyword">val</span> modify_state : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit * <span class="type-var">'a</span></code></dt><dd><p>Modifies a value in the state monad.</p></dd></dl></section><section><header><h4 id="stock-lenses"><a href="#stock-lenses" class="anchor"></a>Stock lenses</h4></header><dl><dt class="spec value" id="val-ignore"><a href="#val-ignore" class="anchor"></a><code><span class="keyword">val</span> ignore : (<span class="type-var">'a</span>, unit) <a href="index.html#type-t">t</a></code></dt><dd><p>Trivial lens</p></dd></dl><dl><dt class="spec value" id="val-id"><a href="#val-id" class="anchor"></a><code><span class="keyword">val</span> id : (<span class="type-var">'a</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Identity lens</p></dd></dl><dl><dt class="spec value" id="val-first"><a href="#val-first" class="anchor"></a><code><span class="keyword">val</span> first : (<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Gets/sets the first element in a pair</p></dd></dl><dl><dt class="spec value" id="val-second"><a href="#val-second" class="anchor"></a><code><span class="keyword">val</span> second : (<span class="type-var">'a</span> * <span class="type-var">'b</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Gets/sets the second element in a pair</p></dd></dl><dl><dt class="spec value" id="val-head"><a href="#val-head" class="anchor"></a><code><span class="keyword">val</span> head : (<span class="type-var">'a</span> list, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Gets/sets the first element in a list</p></dd></dl><dl><dt class="spec value" id="val-tail"><a href="#val-tail" class="anchor"></a><code><span class="keyword">val</span> tail : (<span class="type-var">'a</span> list, <span class="type-var">'a</span> list) <a href="index.html#type-t">t</a></code></dt><dd><p>Gets/sets the tail of a list</p></dd></dl><dl><dt class="spec value" id="val-for_hash"><a href="#val-for_hash" class="anchor"></a><code><span class="keyword">val</span> for_hash : <span class="type-var">'a</span> <span>&#45;&gt;</span> ((<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="../../ocaml/Stdlib/Hashtbl/index.html#type-t">Stdlib.Hashtbl.t</a>, <span class="type-var">'b</span> option) <a href="index.html#type-t">t</a></code></dt><dd><p>Lens for a particular key in a hashtable</p></dd></dl><dl><dt class="spec value" id="val-for_assoc"><a href="#val-for_assoc" class="anchor"></a><code><span class="keyword">val</span> for_assoc : <span class="type-var">'a</span> <span>&#45;&gt;</span> ((<span class="type-var">'a</span> * <span class="type-var">'b</span>) list, <span class="type-var">'b</span> option) <a href="index.html#type-t">t</a></code></dt><dd><p>Lens for a particular key in an associative list</p></dd></dl><dl><dt class="spec value" id="val-for_array"><a href="#val-for_array" class="anchor"></a><code><span class="keyword">val</span> for_array : int <span>&#45;&gt;</span> (<span class="type-var">'a</span> array, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Lens for a particular position in an array</p></dd></dl><dl><dt class="spec value" id="val-for_list"><a href="#val-for_list" class="anchor"></a><code><span class="keyword">val</span> for_list : int <span>&#45;&gt;</span> (<span class="type-var">'a</span> list, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Lens for a particular position in a list</p></dd></dl><dl><dt class="spec value" id="val-option_get"><a href="#val-option_get" class="anchor"></a><code><span class="keyword">val</span> option_get : (<span class="type-var">'a</span> option, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Lens for extracting the value from an option type (same as Option.get)</p></dd></dl></section><section><header><h4 id="list-combinators"><a href="#list-combinators" class="anchor"></a>List combinators</h4></header><dl><dt class="spec value" id="val-list_map"><a href="#val-list_map" class="anchor"></a><code><span class="keyword">val</span> list_map : (<span class="type-var">'a</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> list, <span class="type-var">'b</span> list) <a href="index.html#type-t">t</a></code></dt><dd><p>Creates a lens that maps the given lens in a list</p></dd></dl></section><section><header><h4 id="isomorphism"><a href="#isomorphism" class="anchor"></a>Isomorphism</h4></header><dl><dt class="spec value" id="val-xmap"><a href="#val-xmap" class="anchor"></a><code><span class="keyword">val</span> xmap : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> (<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'c</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>Applies an isomorphism to the value viewed through a lens</p></dd></dl><dl><dt class="spec module" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span class="keyword">module</span> <a href="Infix/index.html">Infix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Infix operators</p></dd></dl><dl><dt class="spec module" id="module-StateInfix"><a href="#module-StateInfix" class="anchor"></a><code><span class="keyword">module</span> <a href="StateInfix/index.html">StateInfix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Infix operators for the state monad</p></dd></dl></section></div></body></html>