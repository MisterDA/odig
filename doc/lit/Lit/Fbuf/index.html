<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Fbuf (lit.Lit.Fbuf)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">lit</a> &#x00BB; <a href="../index.html">Lit</a> &#x00BB; Fbuf</nav><h1>Module <code>Lit.Fbuf</code></h1><p>Framebuffers.</p><nav class="toc"><ul><li><a href="#clears">Clears</a></li><li><a href="#attachements">Attachements</a></li><li><a href="#framebuffers">Framebuffers</a></li><li><a href="#framebuffer-status">Framebuffer status</a></li><li><a href="#framebuffer-reading-and-blitting">Framebuffer reading and blitting</a></li></ul></nav></header><section><header><h2 id="clears"><a href="#clears" class="anchor"></a>Clears</h2></header><dl><dt class="spec type" id="type-clears"><a href="#type-clears" class="anchor"></a><code><span class="keyword">type </span>clears</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-clears.clear_color" class="anchored"><td class="def field"><a href="#type-clears.clear_color" class="anchor"></a><code>clear_color : Gg.color option;</code></td></tr><tr id="type-clears.clear_depth" class="anchored"><td class="def field"><a href="#type-clears.clear_depth" class="anchor"></a><code>clear_depth : float option;</code></td></tr><tr id="type-clears.clear_stencil" class="anchored"><td class="def field"><a href="#type-clears.clear_stencil" class="anchor"></a><code>clear_stencil : int option;</code></td></tr></table><code>}</code></dt><dd><p>The type for framebuffer clears. If a field is <code>None</code> the corresponding buffer is not cleared.</p></dd></dl><dl><dt class="spec value" id="val-clears_default"><a href="#val-clears_default" class="anchor"></a><code><span class="keyword">val </span>clears_default : <a href="index.html#type-clears">clears</a></code></dt><dd><p><code>clear_default</code> is the default clears:</p><ul><li><code>clears_default.clear_color</code> is <code>Some </code><span class="xref-unresolved" title="unresolved reference to &quot;Color.void&quot;"><code>Color</code>.void</span></li><li><code>clears_default.clear_depth</code> is <code>Some 1.</code></li><li><code>clears_default.clear_stencil</code> is <code>None</code>.</li></ul></dd></dl></section><section><header><h2 id="attachements"><a href="#attachements" class="anchor"></a>Attachements</h2></header><dl><dt class="spec module" id="module-Rbuf"><a href="#module-Rbuf" class="anchor"></a><code><span class="keyword">module </span><a href="Rbuf/index.html">Rbuf</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Render buffers.</p></dd></dl><dl><dt class="spec type" id="type-image"><a href="#type-image" class="anchor"></a><code><span class="keyword">type </span>image</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-image.Tex" class="anchored"><td class="def constructor"><a href="#type-image.Tex" class="anchor"></a><code><span class="keyword">| </span></code><code>`Tex<span class="keyword"> of </span>int<span class="keyword"> * </span><a href="../index.html#type-tex">tex</a></code></td></tr><tr id="type-image.Tex_layer" class="anchored"><td class="def constructor"><a href="#type-image.Tex_layer" class="anchor"></a><code><span class="keyword">| </span></code><code>`Tex_layer<span class="keyword"> of </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span><a href="../index.html#type-tex">tex</a></code></td></tr><tr id="type-image.Rbuf" class="anchored"><td class="def constructor"><a href="#type-image.Rbuf" class="anchor"></a><code><span class="keyword">| </span></code><code>`Rbuf<span class="keyword"> of </span><a href="Rbuf/index.html#type-t">Rbuf.t</a></code></td></tr></table><code> ]</code></dt><dd><p>The type for framebuffer images.</p></dd></dl><dl><dt class="spec type" id="type-attachement"><a href="#type-attachement" class="anchor"></a><code><span class="keyword">type </span>attachement</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-attachement.Color" class="anchored"><td class="def constructor"><a href="#type-attachement.Color" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color<span class="keyword"> of </span>int<span class="keyword"> * </span><a href="index.html#type-image">image</a></code></td></tr><tr id="type-attachement.Depth" class="anchored"><td class="def constructor"><a href="#type-attachement.Depth" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depth<span class="keyword"> of </span><a href="index.html#type-image">image</a></code></td></tr><tr id="type-attachement.Stencil" class="anchored"><td class="def constructor"><a href="#type-attachement.Stencil" class="anchor"></a><code><span class="keyword">| </span></code><code>`Stencil<span class="keyword"> of </span><a href="index.html#type-image">image</a></code></td></tr><tr id="type-attachement.Depth_stencil" class="anchored"><td class="def constructor"><a href="#type-attachement.Depth_stencil" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depth_stencil<span class="keyword"> of </span><a href="index.html#type-image">image</a></code></td></tr></table><code> ]</code></dt><dd><p>The type for framebuffer attachements.</p></dd></dl></section><section><header><h2 id="framebuffers"><a href="#framebuffers" class="anchor"></a>Framebuffers</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="../index.html#type-fbuf">fbuf</a></code></dt><dd><p>The type for framebuffers.</p></dd></dl><dl><dt class="spec value" id="val-default"><a href="#val-default" class="anchor"></a><code><span class="keyword">val </span>default : <a href="../index.html#type-fbuf">fbuf</a></code></dt><dd><p><code>default</code> is the default framebuffer with <a href="index.html#val-clears_default"><code>clears_default</code></a> clears.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : ?&#8288;clears:<a href="index.html#type-clears">clears</a> <span>&#45;&gt;</span> <a href="index.html#type-attachement">attachement</a> list <span>&#45;&gt;</span> <a href="../index.html#type-fbuf">fbuf</a></code></dt><dd><p><code>create attachements</code> is a framebuffer with attachements <code>attachments</code>.</p></dd></dl><dl><dt class="spec value" id="val-attachements"><a href="#val-attachements" class="anchor"></a><code><span class="keyword">val </span>attachements : <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-attachement">attachement</a> list</code></dt><dd><p><code>attachements fb</code> is <code>fb</code>'s attachements. Irrelevant on <a href="index.html#val-default"><code>default</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-is_multisample"><a href="#val-is_multisample" class="anchor"></a><code><span class="keyword">val </span>is_multisample : <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_multisample fb</code> is <code>true</code> if <code>fb</code> is a multisample framebuffer. Always <code>false</code> on <a href="index.html#val-default"><code>default</code></a>, though not entirely accurate it's always possible to <a href="index.html#type-read"><code>read</code></a> from a multisample framebuffer.</p></dd></dl><dl><dt class="spec value" id="val-clears"><a href="#val-clears" class="anchor"></a><code><span class="keyword">val </span>clears : <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-clears">clears</a></code></dt><dd><p><code>clears fb</code> is <code>fb</code>'s clears.</p></dd></dl><dl><dt class="spec value" id="val-set_clears"><a href="#val-set_clears" class="anchor"></a><code><span class="keyword">val </span>set_clears : <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-clears">clears</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_clears fb clears</code> sets <code>fb</code>'s clears to <code>clears</code>.</p></dd></dl><dl><dt class="spec value" id="val-clear"><a href="#val-clear" class="anchor"></a><code><span class="keyword">val </span>clear : <a href="../index.html#type-renderer">renderer</a> <span>&#45;&gt;</span> <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>clear r fb</code> clears the framebuffer <code>fb</code> using <code>clears fb</code>. Only <code>r</code>'s <a href="../Renderer/index.html#val-view"><code>Renderer.view</code></a> viewport is affected.</p></dd></dl></section><section><header><h2 id="framebuffer-status"><a href="#framebuffer-status" class="anchor"></a>Framebuffer status</h2></header><dl><dt class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><code><span class="keyword">type </span>status</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-status.Complete" class="anchored"><td class="def constructor"><a href="#type-status.Complete" class="anchor"></a><code><span class="keyword">| </span></code><code>`Complete</code></td></tr><tr id="type-status.Incomplete_attachement" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_attachement" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_attachement</code></td></tr><tr id="type-status.Incomplete_draw_buffer" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_draw_buffer" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_draw_buffer</code></td></tr><tr id="type-status.Incomplete_layer_targets" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_layer_targets" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_layer_targets</code></td></tr><tr id="type-status.Incomplete_missing_attachement" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_missing_attachement" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_missing_attachement</code></td></tr><tr id="type-status.Incomplete_multisample" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_multisample" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_multisample</code></td></tr><tr id="type-status.Incomplete_read_buffer" class="anchored"><td class="def constructor"><a href="#type-status.Incomplete_read_buffer" class="anchor"></a><code><span class="keyword">| </span></code><code>`Incomplete_read_buffer</code></td></tr><tr id="type-status.Undefined" class="anchored"><td class="def constructor"><a href="#type-status.Undefined" class="anchor"></a><code><span class="keyword">| </span></code><code>`Undefined</code></td></tr><tr id="type-status.Unsupported" class="anchored"><td class="def constructor"><a href="#type-status.Unsupported" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unsupported</code></td></tr><tr id="type-status.Unknown" class="anchored"><td class="def constructor"><a href="#type-status.Unknown" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unknown<span class="keyword"> of </span>int</code></td></tr></table><code> ]</code></dt><dd><p>The type for frame buffer statuses.</p></dd></dl><dl><dt class="spec value" id="val-pp_status"><a href="#val-pp_status" class="anchor"></a><code><span class="keyword">val </span>pp_status : Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-status">status</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_status ppf s</code> prints a textual representation of <code>s</code> on <code>ppf</code>.</p></dd></dl><dl><dt class="spec value" id="val-status"><a href="#val-status" class="anchor"></a><code><span class="keyword">val </span>status : <a href="../index.html#type-renderer">renderer</a> <span>&#45;&gt;</span> <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-status">status</a></code></dt><dd><p><code>status r fb</code> is <code>fb</code>'s status.</p></dd></dl></section><section><header><h2 id="framebuffer-reading-and-blitting"><a href="#framebuffer-reading-and-blitting" class="anchor"></a>Framebuffer reading and blitting</h2></header><dl><dt class="spec type" id="type-read"><a href="#type-read" class="anchor"></a><code><span class="keyword">type </span>read</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-read.Color_r" class="anchored"><td class="def constructor"><a href="#type-read.Color_r" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color_r<span class="keyword"> of </span>int</code></td></tr><tr id="type-read.Color_g" class="anchored"><td class="def constructor"><a href="#type-read.Color_g" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color_g<span class="keyword"> of </span>int</code></td></tr><tr id="type-read.Color_b" class="anchored"><td class="def constructor"><a href="#type-read.Color_b" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color_b<span class="keyword"> of </span>int</code></td></tr><tr id="type-read.Color_rgb" class="anchored"><td class="def constructor"><a href="#type-read.Color_rgb" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color_rgb<span class="keyword"> of </span>int</code></td></tr><tr id="type-read.Color_rgba" class="anchored"><td class="def constructor"><a href="#type-read.Color_rgba" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color_rgba<span class="keyword"> of </span>int</code></td></tr><tr id="type-read.Depth" class="anchored"><td class="def constructor"><a href="#type-read.Depth" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depth</code></td></tr><tr id="type-read.Stencil" class="anchored"><td class="def constructor"><a href="#type-read.Stencil" class="anchor"></a><code><span class="keyword">| </span></code><code>`Stencil</code></td></tr><tr id="type-read.Depth_stencil" class="anchored"><td class="def constructor"><a href="#type-read.Depth_stencil" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depth_stencil</code></td></tr></table><code> ]</code></dt><dd><p>The type for framebuffer reads. For color components the integer denotes the color attachement (ignored for <a href="index.html#val-default"><code>default</code></a>).</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val </span>read : ?&#8288;first:int <span>&#45;&gt;</span> ?&#8288;w_stride:int <span>&#45;&gt;</span> <a href="../index.html#type-renderer">renderer</a> <span>&#45;&gt;</span> <a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-read">read</a> <span>&#45;&gt;</span> Gg.box2 <span>&#45;&gt;</span> <a href="../index.html#type-buf">buf</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>read r fb read box buf</code> asynchronously reads the contents of framebuffer <code>fb</code> according to <code>read</code> in the rectangle <code>box</code> specified in integral screen coordinates and stores the result in the GPU buffer of <code>buf</code>, starting at index <code>first</code> (defaults to 0) and using <code>w_stride</code> <em>pixels</em> (defaults to <code>(Box2.w box)</code>) to move from line to line.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>`Depth_stencil</code> is used and the scalar type of <code>buf</code> is not <code>`UInt32</code> (the data is packed as 24 bits of depth and 8 bits of stencil) or if <code>is_multisample fb</code> is <code>true</code>.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-blit_buffer"><a href="#type-blit_buffer" class="anchor"></a><code><span class="keyword">type </span>blit_buffer</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-blit_buffer.Color" class="anchored"><td class="def constructor"><a href="#type-blit_buffer.Color" class="anchor"></a><code><span class="keyword">| </span></code><code>`Color</code></td></tr><tr id="type-blit_buffer.Depth" class="anchored"><td class="def constructor"><a href="#type-blit_buffer.Depth" class="anchor"></a><code><span class="keyword">| </span></code><code>`Depth</code></td></tr><tr id="type-blit_buffer.Stencil" class="anchored"><td class="def constructor"><a href="#type-blit_buffer.Stencil" class="anchor"></a><code><span class="keyword">| </span></code><code>`Stencil</code></td></tr></table><code> ]</code></dt><dd><p>The type for framebuffer buffers to blit.</p></dd></dl><dl><dt class="spec type" id="type-blit_filter"><a href="#type-blit_filter" class="anchor"></a><code><span class="keyword">type </span>blit_filter</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-blit_filter.Nearest" class="anchored"><td class="def constructor"><a href="#type-blit_filter.Nearest" class="anchor"></a><code><span class="keyword">| </span></code><code>`Nearest</code></td></tr><tr id="type-blit_filter.Linear" class="anchored"><td class="def constructor"><a href="#type-blit_filter.Linear" class="anchor"></a><code><span class="keyword">| </span></code><code>`Linear</code></td></tr></table><code> ]</code></dt><dd><p>The type for blit filter if the blit is only on <code>`Color</code> buffer.</p></dd></dl><dl><dt class="spec value" id="val-blit"><a href="#val-blit" class="anchor"></a><code><span class="keyword">val </span>blit : ?&#8288;filter:<a href="index.html#type-blit_filter">blit_filter</a> <span>&#45;&gt;</span> <a href="../index.html#type-renderer">renderer</a> <span>&#45;&gt;</span> <a href="index.html#type-blit_buffer">blit_buffer</a> list <span>&#45;&gt;</span> src:<a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> Gg.box2 <span>&#45;&gt;</span> dst:<a href="../index.html#type-fbuf">fbuf</a> <span>&#45;&gt;</span> Gg.box2 <span>&#45;&gt;</span> unit</code></dt><dd><p><code>blit filter r src sbox dst dbox</code> blits between the buffers bufs <code>src</code> and <code>dfb</code>. <code>blit_filter</code> defaults to <code>`Nearest</code> and can be only set to <code>`Linear</code> for blits that involve only color buffers.</p><p><b>TODO.</b> No way to specify color attachement.</p><p><b>FIXME.</b> There are a lot of things to <a href="http://www.opengl.org/wiki/Framebuffer#Blitting">consider</a> for this operation. We should try to make more checks.</p></dd></dl></section></div></body></html>