<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Prim (lit.Lit.Prim)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">lit</a> &#x00BB; <a href="../index.html">Lit</a> &#x00BB; Prim</nav><h1>Module <code>Lit.Prim</code></h1><p>Primitives.</p><p>A primitive defines a vertex stream (set of <a href="../Attr/index.html"><span>attributes</span></a>) sent to the GPU and how this stream must be interpreted as geometrical primitives. A primitive defines the <a href="index.html#type-kind"><code>kind</code></a> of primitive for the geometry shader (if any) and its set of attributes define the values of the input variables of the vertex shader.</p><p>A primitive value gathers a set of attributes, an optional index buffer to specify the stream of vertices and a primitive <a href="index.html#type-kind"><code>kind</code></a>. Primitives are immutable but the underlying buffers are not.</p><nav class="toc"><ul><li><a href="#primitive-kinds">Primitive kinds</a></li><li><a href="#primitives">Primitives</a></li><li><a href="#primitive-attributes">Primitive Attributes</a></li></ul></nav></header><section><header><h2 id="primitive-kinds"><a href="#primitive-kinds" class="anchor"></a>Primitive kinds</h2></header><dl><dt class="spec type" id="type-kind"><a href="#type-kind" class="anchor"></a><code><span class="keyword">type </span>kind</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-kind.Points" class="anchored"><td class="def constructor"><a href="#type-kind.Points" class="anchor"></a><code><span class="keyword">| </span></code><code>`Points</code></td></tr><tr id="type-kind.Lines" class="anchored"><td class="def constructor"><a href="#type-kind.Lines" class="anchor"></a><code><span class="keyword">| </span></code><code>`Lines</code></td></tr><tr id="type-kind.Line_strip" class="anchored"><td class="def constructor"><a href="#type-kind.Line_strip" class="anchor"></a><code><span class="keyword">| </span></code><code>`Line_strip</code></td></tr><tr id="type-kind.Line_loop" class="anchored"><td class="def constructor"><a href="#type-kind.Line_loop" class="anchor"></a><code><span class="keyword">| </span></code><code>`Line_loop</code></td></tr><tr id="type-kind.Lines_adjacency" class="anchored"><td class="def constructor"><a href="#type-kind.Lines_adjacency" class="anchor"></a><code><span class="keyword">| </span></code><code>`Lines_adjacency</code></td></tr><tr id="type-kind.Line_strip_adjacency" class="anchored"><td class="def constructor"><a href="#type-kind.Line_strip_adjacency" class="anchor"></a><code><span class="keyword">| </span></code><code>`Line_strip_adjacency</code></td></tr><tr id="type-kind.Triangles" class="anchored"><td class="def constructor"><a href="#type-kind.Triangles" class="anchor"></a><code><span class="keyword">| </span></code><code>`Triangles</code></td></tr><tr id="type-kind.Triangle_strip" class="anchored"><td class="def constructor"><a href="#type-kind.Triangle_strip" class="anchor"></a><code><span class="keyword">| </span></code><code>`Triangle_strip</code></td></tr><tr id="type-kind.Triangle_fan" class="anchored"><td class="def constructor"><a href="#type-kind.Triangle_fan" class="anchor"></a><code><span class="keyword">| </span></code><code>`Triangle_fan</code></td></tr><tr id="type-kind.Triangles_adjacency" class="anchored"><td class="def constructor"><a href="#type-kind.Triangles_adjacency" class="anchor"></a><code><span class="keyword">| </span></code><code>`Triangles_adjacency</code></td></tr><tr id="type-kind.Triangle_strip_adjacency" class="anchored"><td class="def constructor"><a href="#type-kind.Triangle_strip_adjacency" class="anchor"></a><code><span class="keyword">| </span></code><code>`Triangle_strip_adjacency</code></td></tr></table><code> ]</code></dt><dd><p>The kind of primitive. Defines how the vertex stream is interpreted.</p></dd></dl><dl><dt class="spec value" id="val-pp_kind"><a href="#val-pp_kind" class="anchor"></a><code><span class="keyword">val </span>pp_kind : Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-kind">kind</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp_kind ppf kind</code> prints an unspecified representation of <code>kind</code> on <code>ppf</code>.</p></dd></dl></section><section><header><h2 id="primitives"><a href="#primitives" class="anchor"></a>Primitives</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="../index.html#type-prim">prim</a></code></dt><dd><p>The type for primitives.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : ?&#8288;tr:Gg.M4.t <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;first:int <span>&#45;&gt;</span> ?&#8288;count:int <span>&#45;&gt;</span> ?&#8288;index:<a href="../Buf/index.html#type-t">Buf.t</a> <span>&#45;&gt;</span> <a href="index.html#type-kind">kind</a> <span>&#45;&gt;</span> <a href="../index.html#type-attr">attr</a> list <span>&#45;&gt;</span> <a href="../index.html#type-prim">prim</a></code></dt><dd><p><code>create name tr first count index kind attrs</code> is a primitive such that:</p><ul><li><code>tr</code> is a is a transform that is right-multiplied to the render operation matrix (e.g. for normalizing disparate model coordinate scales); TODO defaults to <code>id</code>.</li><li><code>name</code> is an optional client name for identifiying the primitive; auto generated by default.</li><li><code>first</code> is the scalar index of the first vertex index in <code>index</code>, ignored if <code>index</code> is unspecified; defaults to <code>0</code>.</li><li><code>count</code> is the number of <em>vertices</em> that are part of the vertex stream. <code>count</code> must be specified if <code>index</code> is unspecified. In that case <code>count</code> attribute elements in each attribute are read to define the vertex stream.</li><li><code>index</code> if specified must be a buffer of unsigned integers used to index the attribute elements to specify the vertex stream. If <code>count</code> is specified then always <code>count</code> indices will be read from <code>index</code> starting at <code>first</code>. If <code>count</code> is unspecified then all indices starting at <code>first</code> until the end of buffer will be read (hence the primitive's size may change dynamically).</li><li><code>kind</code> the kind of primitive to render.</li><li><code>attrs</code>, the primitive's attributes.</li></ul><dl><dt>raises Invalid_argument</dt><dd><p>if:</p><ul><li>both <code>count</code> and <code>index</code> are unspecified</li><li>if <code>index</code> scalar type is not an unsigned integer.</li><li>if there there are two attributes of the same name in <code>attrs</code></li></ul></dd></dl></dd></dl><dl><dt class="spec value" id="val-kind"><a href="#val-kind" class="anchor"></a><code><span class="keyword">val </span>kind : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> <a href="index.html#type-kind">kind</a></code></dt><dd><p><code>kind p</code> is the kind of <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val </span>name : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>name p</code> is the name of <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-index"><a href="#val-index" class="anchor"></a><code><span class="keyword">val </span>index : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> <a href="../Buf/index.html#type-t">Buf.t</a> option</code></dt><dd><p><code>index p</code> is the index of <code>p</code> (if any). See <a href="index.html#val-create"><code>create</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-first"><a href="#val-first" class="anchor"></a><code><span class="keyword">val </span>first : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>first p</code> is first scalar index read from <code>index</code>. See <a href="index.html#val-create"><code>create</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-count"><a href="#val-count" class="anchor"></a><code><span class="keyword">val </span>count : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> int option</code></dt><dd><p><code>cout p</code> is the <code>count</code> of <code>p</code> as specified at primitive creation. See also <a href="index.html#val-count_now"><code>count_now</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-count_now"><a href="#val-count_now" class="anchor"></a><code><span class="keyword">val </span>count_now : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>count_now p</code> is the number of vertices in the vertex stream. If <code>count</code> was specified at creation time, this is always that number. Otherwise, let <code>b</code> be <a href="index.html#val-index"><code>Prim.index</code></a><code> p</code> and <code>first</code> be <a href="index.html#val-first"><code>Prim.first</code></a><code> p</code>:</p><ul><li>If <a href="../Buf/index.html#val-gpu_upload"><code>Buf.gpu_upload</code></a><code> b</code> is <code>true</code>, <a href="../Buf/index.html#val-cpu_count"><code>Buf.cpu_count</code></a><code> b - first</code> is returned.</li><li>Otherwise <a href="../Buf/index.html#val-gpu_count"><code>Buf.gpu_count</code></a><code> b - first</code> is returned.</li></ul></dd></dl><dl><dt class="spec value" id="val-tr"><a href="#val-tr" class="anchor"></a><code><span class="keyword">val </span>tr : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> Gg.M4.t</code></dt><dd><p><code>tr p</code> is pre-transform matrix of <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val </span>pp : Format.formatter <span>&#45;&gt;</span> <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp ppf p</code> prints an unspecified representation of <code>p</code> on <code>ppf</code>.</p></dd></dl></section><section><header><h2 id="primitive-attributes"><a href="#primitive-attributes" class="anchor"></a>Primitive Attributes</h2></header><dl><dt class="spec value" id="val-attrs"><a href="#val-attrs" class="anchor"></a><code><span class="keyword">val </span>attrs : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> <a href="../index.html#type-attr">attr</a> list</code></dt><dd><p><code>attrs p</code> is the attributes of <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val </span>iter : (<a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter p f</code> iterates <code>f</code> over the attributes of <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../index.html#type-attr">attr</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f acc p</code> folds <code>f</code> over the attributes of <code>p</code> starting with <code>acc</code>.</p></dd></dl><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val </span>mem : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> bool</code></dt><dd><p><code>mem p n</code> is <code>true</code> there is an attribute with name <code>n</code> in <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val </span>find : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../index.html#type-attr">attr</a> option</code></dt><dd><p><code>find p n</code> is the attribute named <code>n</code> of <code>p</code> (if any).</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <a href="../index.html#type-prim">prim</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../index.html#type-attr">attr</a></code></dt><dd><p><code>get p n</code> is the attribute named <code>n</code> of <code>p</code>.</p><dl><dt>raises Invalid_argument</dt><dd><p>if there is no attribute named <code>n</code> in p.</p></dd></dl></dd></dl></section></div></body></html>