<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Prim (lit.Litu.Prim)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">lit</a> &#x00BB; <a href="../index.html">Litu</a> &#x00BB; Prim</nav><h1>Module <code>Litu.Prim</code></h1><p>Higher level primitives.</p><p>All these primitives define at least a <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.vertex&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.vertex</span> attribute. Buffers are created with <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Buf.create&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Buf&quot;"><code>Lit</code>.Buf</span>.create</span>'s default arguments.</p><nav class="toc"><ul><li><a href="#primitives">Primitives</a></li><li><a href="#functions">Functions</a></li></ul></nav></header><section><header><h2 id="primitives"><a href="#primitives" class="anchor"></a>Primitives</h2><p><b>Note.</b> All these primitives are <code>`Triangles</code> primitives.</p></header><dl><dt class="spec value" id="val-rect"><a href="#val-rect" class="anchor"></a><code><span class="keyword">val </span>rect : ?&#8288;tr:Gg.m4 <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;tex:string <span>&#45;&gt;</span> ?&#8288;segs:Gg.Size2.t <span>&#45;&gt;</span> ?&#8288;d2:bool <span>&#45;&gt;</span> Gg.box2 <span>&#45;&gt;</span> Lit.prim</code></dt><dd><p><code>rect tr name tex d2 segs box</code> is an axis-aligned Oxy 2D plane bounded by <code>b</code>.</p><p>The plane is divided in <code>Size2.w segs</code> segments along the x-axis and <code>Size2.h segs</code> along the y-axis (<code>segs</code> defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Size2.unit&quot;"><code>Size2</code>.unit</span>, its number are rounded to integers). Each segment is made of two triangles.</p><p>If <code>d2</code> is <code>true</code> (defaults to <code>false</code>), the primitive's vertex attribute has dimension 2.</p><p>If <code>tex</code> is specified, 2D texture coordinates are added to the primitive under that attribute name. The bottom left corner of the plane is (0,0) and top right (1,1).</p><p><code>tr</code> and <code>name</code> are given to <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim.create&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim&quot;"><code>Lit</code>.Prim</span>.create</span>.</p></dd></dl><dl><dt class="spec value" id="val-cuboid"><a href="#val-cuboid" class="anchor"></a><code><span class="keyword">val </span>cuboid : ?&#8288;tr:Gg.m4 <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;dups:bool <span>&#45;&gt;</span> Gg.box3 <span>&#45;&gt;</span> Lit.prim</code></dt><dd><p><code>cuboid tr dups box</code> is an axis-aligned cuboid bounded by <code>box</code>. If <code>dups</code> is <code>true</code> (default) vertices in the mesh are triplicated so that per vertex normal computation defines planar facets.</p><p><code>tr</code> and <code>name</code> are given to <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim.create&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim&quot;"><code>Lit</code>.Prim</span>.create</span>.</p></dd></dl><dl><dt class="spec value" id="val-cube"><a href="#val-cube" class="anchor"></a><code><span class="keyword">val </span>cube : ?&#8288;tr:Gg.m4 <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;dups:bool <span>&#45;&gt;</span> float <span>&#45;&gt;</span> Lit.prim</code></dt><dd><p><code>cube tr name dups s</code> is <code>cube tr name dups (Box3.v_mid P3.o (Size3.v s s s))</code>.</p></dd></dl><dl><dt class="spec value" id="val-sphere"><a href="#val-sphere" class="anchor"></a><code><span class="keyword">val </span>sphere : ?&#8288;tr:Gg.m4 <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> ?&#8288;level:int <span>&#45;&gt;</span> float <span>&#45;&gt;</span> Lit.prim</code></dt><dd><p><code>sphere tr name level r</code> is a sphere of radius <code>r</code> centered on the origin obtained by subdividing an octahedron (<code>level = 0</code>). <code>level</code> defaults to <code>4</code>. The number of vertices is 4<sup>level + 1</sup> + 2 and the number of triangles is 8 * 4<sup>level</sup>. If the number of vertices is greater than 2<sup>31</sup> all sorts of bad things may happen...</p><p><code>tr</code> and <code>name</code> are given to <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim.create&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Prim&quot;"><code>Lit</code>.Prim</span>.create</span>.</p></dd></dl></section><section><header><h2 id="functions"><a href="#functions" class="anchor"></a>Functions</h2></header><dl><dt class="spec value" id="val-with_normals"><a href="#val-with_normals" class="anchor"></a><code><span class="keyword">val </span>with_normals : ?&#8288;scalar_type:[ `Float32<span class="keyword"> | </span>`Float64 ] <span>&#45;&gt;</span> ?&#8288;name:string <span>&#45;&gt;</span> Lit.prim <span>&#45;&gt;</span> Lit.prim</code></dt><dd><p><code>with_normals prim</code> is <code>prim</code> with a <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.normal&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.normal</span> attribute added or replaced. The attribute has a normal per <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.vertex&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.vertex</span> attribute computed from the primitive's triangles. In case a vertex belongs to multiple triangles the contribution of each triangle is summed up and the result normalized.</p><p><b>Warning.</b> Vertex data is looked up by taking vertices from their buffer taking into account <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.first&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.first</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.stride&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.stride</span> <b>until the end</b> of the buffer.</p><dl><dt>raises Invalid_argument</dt><dd><p>if one of these conditions holds:</p><ul><li><code>Prim.kind prim</code> is not <code>`Triangles</code></li><li>There is no <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.vertex&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.vertex</span> attribute or its dimension is not 3.</li><li>The <span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr.vertex&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Lit.Attr&quot;"><code>Lit</code>.Attr</span>.vertex</span> attribute buffer is not in CPU memory or its bigarray buffer can't be read using <code>float</code>s.</li><li>The <code>Prim.index prim</code> buffer (if any) is not in CPU memory or its bigarray buffer can't be read using <code>int</code>s or <code>int32</code>.</li></ul></dd></dl></dd></dl></section></div></body></html>