<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Mesh (mesh.Mesh)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">mesh</a> &#x00BB; Mesh</nav><h1>Module <code>Mesh</code></h1><p>Generic mesh structure to be used with various meshers. It also defines some functions to help to display and design geometries.</p><p>General remark: The two dimensional arrays below are described for the <code>fortran_layout</code>. If you use a <code>c_layout</code>, they are transposed. Also indices, such as the indices points, triangles,..., start at <code>0</code> instead of <code>1</code> . For example <code>mesh#point</code> is of size <code>n * 2</code> and the coordinates of point <code>i</code> are given by <code>(point.{i,0}, point.{i,1})</code>.</p><dl><dt>author</dt><dd>Christophe Troestler (Christophe.Troestler\@umons.ac.be)</dd></dl><nav class="toc"><ul><li><a href="#mesh-data-format">Mesh data format</a></li><li><a href="#band">Band computation and reduction</a></li><li><a href="#latex-output">LaTeX output</a></li><li><a href="#scilab">Scilab</a></li><li><a href="#matlab">Matlab</a></li><li><a href="#mathematica">Mathematica</a></li></ul></nav></header><section><header><h3 id="mesh-data-format"><a href="#mesh-data-format" class="anchor"></a>Mesh data format</h3></header><dl><dt class="spec type" id="type-vec"><a href="#type-vec" class="anchor"></a><code><span class="keyword">type</span> 'layout vec</code><code> = (float, <a href="../../ocaml/Bigarray/index.html#type-float64_elt">Bigarray.float64_elt</a>, <span class="type-var">'layout</span>) <a href="../../ocaml/Bigarray/Array1/index.html#type-t">Bigarray.Array1.t</a></code></dt><dd><p>Float vector (parametrized by the layout).</p></dd></dl><dl><dt class="spec type" id="type-mat"><a href="#type-mat" class="anchor"></a><code><span class="keyword">type</span> 'layout mat</code><code> = (float, <a href="../../ocaml/Bigarray/index.html#type-float64_elt">Bigarray.float64_elt</a>, <span class="type-var">'layout</span>) <a href="../../ocaml/Bigarray/Array2/index.html#type-t">Bigarray.Array2.t</a></code></dt><dd><p>Float matrix (parametrized by the layout).</p></dd></dl><dl><dt class="spec type" id="type-int_vec"><a href="#type-int_vec" class="anchor"></a><code><span class="keyword">type</span> 'layout int_vec</code><code> = (int, <a href="../../ocaml/Bigarray/index.html#type-int_elt">Bigarray.int_elt</a>, <span class="type-var">'layout</span>) <a href="../../ocaml/Bigarray/Array1/index.html#type-t">Bigarray.Array1.t</a></code></dt><dd><p>Integer vector (parametrized by the layout).</p></dd></dl><dl><dt class="spec type" id="type-int_mat"><a href="#type-int_mat" class="anchor"></a><code><span class="keyword">type</span> 'layout int_mat</code><code> = (int, <a href="../../ocaml/Bigarray/index.html#type-int_elt">Bigarray.int_elt</a>, <span class="type-var">'layout</span>) <a href="../../ocaml/Bigarray/Array2/index.html#type-t">Bigarray.Array2.t</a></code></dt><dd><p>Integer matrix (parametrized by the layout).</p></dd></dl><dl><dt class="spec class" id="class-pslg"><a href="#class-pslg" class="anchor"></a><code><span class="keyword">class</span> 'l<a href="class-pslg/index.html">pslg</a> : <span class="type-var">'l</span> <a href="../../ocaml/Bigarray/index.html#type-layout">Bigarray.layout</a> <span>&#45;&gt;</span> <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Planar Straight Line Graph datastructure. By default, creating an object from this class results in all methods being initialized with empty arrays.</p></dd></dl><dl><dt class="spec value" id="val-pslg"><a href="#val-pslg" class="anchor"></a><code><span class="keyword">val</span> pslg : ?&#8288;hole:<span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;region:<span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;point_marker:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;segment_marker:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-int_mat">int_mat</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-pslg/index.html">pslg</a></code></dt><dd><p><code>pslg point segment</code> creates a PSLG with the proper methods. The default values for unspecified values are empty arrays.</p><dl><dt>raises Invalid_argument</dt><dd><p>if a size is incorrect.</p></dd></dl></dd></dl><dl><dt class="spec class-type" id="class-type-t"><a href="#class-type-t" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">type</span> 'layout<a href="class-type-t/index.html">t</a> = <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Object describing various characteristics of a mesh.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : ?&#8288;hole:<span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;region:<span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;point_marker:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-mat">mat</a> <span>&#45;&gt;</span> ?&#8288;segment_marker:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> ?&#8288;segment:<span class="type-var">'l</span> <a href="index.html#type-int_mat">int_mat</a> <span>&#45;&gt;</span> ?&#8288;neighbor:<span class="type-var">'l</span> <a href="index.html#type-int_mat">int_mat</a> <span>&#45;&gt;</span> ?&#8288;edge:<span class="type-var">'l</span> <a href="index.html#type-int_mat">int_mat</a> <span>&#45;&gt;</span> ?&#8288;edge_marker:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-int_mat">int_mat</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>create point triangle</code> creates a mesh with the proper methods. The default values for unspecified values are empty arrays.</p><dl><dt>raises Invalid_argument</dt><dd><p>if a size is incorrect.</p></dd></dl></dd></dl><dl><dt class="spec class-type" id="class-type-voronoi"><a href="#class-type-voronoi" class="anchor"></a><code><span class="keyword">class</span> <span class="keyword">type</span> 'layout<a href="class-type-voronoi/index.html">voronoi</a> = <span class="keyword">object</span> ... <span class="keyword">end</span></code></dt><dd><p>Voronoi diagram.</p></dd></dl><dl><dt class="spec value" id="val-layout"><a href="#val-layout" class="anchor"></a><code><span class="keyword">val</span> layout : <span class="type-var">'l</span> <a href="class-pslg/index.html">pslg</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="../../ocaml/Bigarray/index.html#type-layout">Bigarray.layout</a></code></dt><dd><p><code>layout mesh</code> returns the layout of <code>mesh</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_c_layout"><a href="#val-is_c_layout" class="anchor"></a><code><span class="keyword">val</span> is_c_layout : <span class="type-var">'l</span> <a href="class-pslg/index.html">pslg</a> <span>&#45;&gt;</span> bool</code></dt><dd><dl><dt>deprecated</dt><dd><p><code>is_c_layout</code> returns true if the mesh layout is C.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>new copy mesh</code> returns an identical mesh where all matrices are a fresh copy of the ones of <code>mesh</code>.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> ?&#8288;pos:int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>sub mesh ?pos len</code> returns a new mesh keeping only the points with indices between <code>pos</code> and <code>pos + len - 1</code> (included). Only triangles whose 3 vertices have been selected are kept. Beware that some sub-matrices may be shared.</p><dl><dt>parameter pos</dt><dd><p>default: <code>1</code> (<code>fortran_layout</code>) or 0 (<code>c_layout</code>).</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-permute_points"><a href="#val-permute_points" class="anchor"></a><code><span class="keyword">val</span> permute_points : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> ?&#8288;inv:bool <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>permute_points mesh p</code> returns a new mesh identical to the given <code>mesh</code> except that the points indices are transformed through the permutation <code>p</code>: the point of index <code>i</code> in the new mesh will be the one of index <code>p.{i}</code> in <code>mesh</code>. In other words, <code>p</code> lists <code>mesh</code> indices in the order they will have after permutation.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>p</code> is not a permutation.</p></dd></dl><dl><dt>parameter inv</dt><dd><p>consider that the inverse permutation is given. If <code>true</code>, the point of index <code>i</code> in <code>mesh</code> will be mapped to the point of index <code>p.{i}</code> in the returned mesh. Default: <code>false</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-permute_triangles"><a href="#val-permute_triangles" class="anchor"></a><code><span class="keyword">val</span> permute_triangles : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> ?&#8288;inv:bool <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>permute_triangles mesh p</code> returns a new mesh identical to the given <code>mesh</code> except that the trangle indices are transformed through the permutation <code>p</code>: the triangle of index <code>i</code> in the new mesh will be the one of index <code>p.{i}</code> in <code>mesh</code>. In other words, <code>p</code> lists <code>mesh</code> indices in the order they will have after permutation.</p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>p</code> is not a permutation.</p></dd></dl><dl><dt>parameter inv</dt><dd><p>consider that the inverse permutation is given. If <code>true</code>, the point of index <code>i</code> in <code>mesh</code> will be mapped to the point of index <code>p.{i}</code> in the returned mesh. Default: <code>false</code>.</p></dd></dl></dd></dl></section><section><header><h3 id="band"><a href="#band" class="anchor"></a>Band computation and reduction</h3></header><dl><dt class="spec value" id="val-band_height_P1"><a href="#val-band_height_P1" class="anchor"></a><code><span class="keyword">val</span> band_height_P1 : ?&#8288;filter:(int <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>band_height mesh</code> returns the number of nonzero super-diagonals + 1 (for the diagonal) of symmetric band matrices for P1 finite elements inner products. It is the maximum on all triangles T of max(|i1 - i2|, |i2 - i3|, |i3 - i1|) where i1, i2, and i3 are the indices of the nodes of the three corners of the triangle T.</p><dl><dt>parameter filter</dt><dd><p>If provided, only perform the compuation on nodes <code>i</code> such that <code>filter i</code> is true. Default: no filter.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-cuthill_mckee"><a href="#val-cuthill_mckee" class="anchor"></a><code><span class="keyword">val</span> cuthill_mckee : ?&#8288;rev:bool <span>&#45;&gt;</span> ?&#8288;perm:<span class="type-var">'l</span> <a href="index.html#type-int_vec">int_vec</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a></code></dt><dd><p><code>cuthill_mckee mesh</code> return a new mesh that is identical to <code>mesh</code> except that the labelling of the nodes has been changed to lower its band (as computed by <a href="index.html#val-band_height_P1"><code>band_height_P1</code></a>).</p><dl><dt>parameter rev</dt><dd><p>whether if true, use the Reverse CutHill-McKee algorithm. Default: <code>true</code>.</p></dd></dl><dl><dt>parameter perm</dt><dd><p>if provided, the permutation will be stored in that vector. More precisely, <code>perm.{l} = i</code> means that <code>l</code> is the new label for the node initially labeled <code>i</code>. This permutation is needed to transfer vectors defined on the initial labeling. The length of the permutation vector must be the number of nodes.</p></dd></dl></dd></dl></section><section><header><h3 id="latex-output"><a href="#latex-output" class="anchor"></a>LaTeX output</h3></header><dl><dt class="spec module" id="module-LaTeX"><a href="#module-LaTeX" class="anchor"></a><code><span class="keyword">module</span> <a href="LaTeX/index.html">LaTeX</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>LaTex output. It is given in terms of three macros <code>\meshline</code>, <code>\meshpoint</code>, and <code>\meshtriangle</code> to plot edges, points and (filled) triangles. The arguments of these macros are described by comments in the output files. If you do not provide your own implementations, default ones will be used. The LaTeX package <a href="https://sourceforge.net/projects/pgf/">tikz</a> is required -- which works for PostScript as well as PDF output.</p></dd></dl></section><section><header><h3 id="scilab"><a href="#scilab" class="anchor"></a>Scilab</h3></header><dl><dt class="spec value" id="val-scilab"><a href="#val-scilab" class="anchor"></a><code><span class="keyword">val</span> scilab : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> ?&#8288;longitude:float <span>&#45;&gt;</span> ?&#8288;azimuth:float <span>&#45;&gt;</span> ?&#8288;mode:[ `Triangles | `Triangles_only | `No_triangles ] <span>&#45;&gt;</span> ?&#8288;box:[ `None | `Behind | `Box_only | `Full ] <span>&#45;&gt;</span> ?&#8288;edgecolor:[ `Color of int | `Grey of float ] <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>scilab mesh z file</code> saves the mesh data and the function values <code>z</code> (i.e. <code>z.{i}</code> is the function value at the point <code>mesh#point.{_,i}</code> (<code>fortran layout</code>)) on that mesh so that when Scilab runs the created <code>file</code>.sci script, the graph of the function is drawn.</p><dl><dt>parameter longitude</dt><dd><p>sets the longitude in degrees of the observation point.</p></dd></dl><dl><dt>parameter azimuth</dt><dd><p>sets the azimuth in degrees of the observation point.</p></dd></dl><dl><dt>parameter mode</dt><dd><p><code>`Triangles</code> draw the triangles on the surface, <code>`Triangles_only</code> only draw the triangles (no surface color), <code>`No_triangles</code> only draw the colored surface.</p></dd></dl><dl><dt>parameter box</dt><dd><p><code>`None</code> draw no bow at all, <code>`Behind</code> only draw the axes behind the plot, <code>`Box_only</code> only draw the box and label axes, <code>`Full</code> draw the box, label axes, and add ticks.</p></dd></dl></dd></dl></section><section><header><h3 id="matlab"><a href="#matlab" class="anchor"></a>Matlab</h3></header><dl><dt class="spec value" id="val-matlab"><a href="#val-matlab" class="anchor"></a><code><span class="keyword">val</span> matlab : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> ?&#8288;edgecolor:[ `None | `Flat | `Interp | `Color of int ] <span>&#45;&gt;</span> ?&#8288;linestyle:string <span>&#45;&gt;</span> ?&#8288;facealpha:float <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>matlab mesh z file</code> saves the mesh data and the function values <code>z</code> (i.e. <code>z.{i}</code> is the function value at the point <code>mesh.point.{_,i}</code> (<code>fortran layout</code>)) on that mesh so that when Matlab runs the created <code>file</code>.m script, the graph of the function is drawn.</p><dl><dt>parameter edgecolor</dt><dd><p>the name of the color for the edges of the triangles. Default: <code>`Color 0</code> i.e., black. <code>`Color c</code> use the color given as <code>0xRRGGBB</code> (if <code>c &lt; 0</code>, then <code>`Color c</code> is interpreted as <code>`None</code>). The value <code>`None</code> removes them.</p></dd></dl><dl><dt>parameter linestyle</dt><dd><p>is a symbol representing a style of line: <code>&quot;-&quot;</code> is a solid line, <code>&quot;--&quot;</code> a dashed line, <code>&quot;:&quot;</code> a dotted line, <code>&quot;-.&quot;</code> a dash-dot line and <code>&quot;none&quot;</code> means that no line is drawn. Default: <code>&quot;-&quot;</code>.</p></dd></dl><dl><dt>parameter facealpha</dt><dd><p>the transparency of faces, <code>0.</code> meaning fully transparent and <code>1.</code> opaque. Default: <code>1.</code>.</p></dd></dl></dd></dl></section><section><header><h3 id="mathematica"><a href="#mathematica" class="anchor"></a>Mathematica</h3></header><dl><dt class="spec value" id="val-mathematica"><a href="#val-mathematica" class="anchor"></a><code><span class="keyword">val</span> mathematica : <span class="type-var">'l</span> <a href="class-type-t/index.html">t</a> <span>&#45;&gt;</span> <span class="type-var">'l</span> <a href="index.html#type-vec">vec</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit</code></dt><dd><p><code>mathematica mesh z file</code> saves the mesh data and the function values <code>z</code> (i.e. <code>z.{i}</code> is the function value at the point <code>mesh.point.{_,i}</code> (<code>fortran layout</code>)) in the file <code>file</code>.m so that running &quot;&lt;&lt;file.m&quot; in mathematica plots the function. The variables <code>File`xyz</code> and <code>File`adj</code> (where <code>File</code> is the capitalized file name which is used as the context) are defined and the mathematica command <code>TriangularSurfacePlot[File`xyz,
    File`adj]</code> does the plot.</p><p>If <code>file</code> contains other digits than alphanumeric (e.g. underscores), they are removed for the context names <code>File</code> used for internal variables.</p></dd></dl></section></div></body></html>