<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>With_locations (mustache.Mustache.With_locations)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">mustache</a> &#x00BB; <a href="../index.html">Mustache</a> &#x00BB; With_locations</nav><h1>Module <code>Mustache.With_locations</code></h1><p>Variant of the <code>t</code> mustache datatype which includes source-file locations, and associated functions.</p></header><dl><dt class="spec type" id="type-loc"><a href="#type-loc" class="anchor"></a><code><span class="keyword">type</span> loc</code><code> = </code><code>{</code><table class="record"><tr id="type-loc.loc_start" class="anchored"><td class="def field"><a href="#type-loc.loc_start" class="anchor"></a><code>loc_start : <a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a>;</code></td></tr><tr id="type-loc.loc_end" class="anchored"><td class="def field"><a href="#type-loc.loc_end" class="anchor"></a><code>loc_end : <a href="../../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-desc"><a href="#type-desc" class="anchor"></a><code><span class="keyword">type</span> desc</code><code> = </code><table class="variant"><tr id="type-desc.String" class="anchored"><td class="def constructor"><a href="#type-desc.String" class="anchor"></a><code>| </code><code><span class="constructor">String</span> <span class="keyword">of</span> string</code></td></tr><tr id="type-desc.Escaped" class="anchored"><td class="def constructor"><a href="#type-desc.Escaped" class="anchor"></a><code>| </code><code><span class="constructor">Escaped</span> <span class="keyword">of</span> <a href="../index.html#type-dotted_name">dotted_name</a></code></td></tr><tr id="type-desc.Section" class="anchored"><td class="def constructor"><a href="#type-desc.Section" class="anchor"></a><code>| </code><code><span class="constructor">Section</span> <span class="keyword">of</span> <a href="index.html#type-section">section</a></code></td></tr><tr id="type-desc.Unescaped" class="anchored"><td class="def constructor"><a href="#type-desc.Unescaped" class="anchor"></a><code>| </code><code><span class="constructor">Unescaped</span> <span class="keyword">of</span> <a href="../index.html#type-dotted_name">dotted_name</a></code></td></tr><tr id="type-desc.Partial" class="anchored"><td class="def constructor"><a href="#type-desc.Partial" class="anchor"></a><code>| </code><code><span class="constructor">Partial</span> <span class="keyword">of</span> <a href="index.html#type-partial">partial</a></code></td></tr><tr id="type-desc.Inverted_section" class="anchored"><td class="def constructor"><a href="#type-desc.Inverted_section" class="anchor"></a><code>| </code><code><span class="constructor">Inverted_section</span> <span class="keyword">of</span> <a href="index.html#type-section">section</a></code></td></tr><tr id="type-desc.Concat" class="anchored"><td class="def constructor"><a href="#type-desc.Concat" class="anchor"></a><code>| </code><code><span class="constructor">Concat</span> <span class="keyword">of</span> <a href="index.html#type-t">t</a> list</code></td></tr><tr id="type-desc.Comment" class="anchored"><td class="def constructor"><a href="#type-desc.Comment" class="anchor"></a><code>| </code><code><span class="constructor">Comment</span> <span class="keyword">of</span> string</code></td></tr></table></dt><dt class="spec type" id="type-section"><a href="#type-section" class="anchor"></a><code><span class="keyword">and</span> section</code><code> = </code><code>{</code><table class="record"><tr id="type-section.name" class="anchored"><td class="def field"><a href="#type-section.name" class="anchor"></a><code>name : <a href="../index.html#type-dotted_name">dotted_name</a>;</code></td></tr><tr id="type-section.contents" class="anchored"><td class="def field"><a href="#type-section.contents" class="anchor"></a><code>contents : <a href="index.html#type-t">t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-partial"><a href="#type-partial" class="anchor"></a><code><span class="keyword">and</span> partial</code><code> = </code><code>{</code><table class="record"><tr id="type-partial.indent" class="anchored"><td class="def field"><a href="#type-partial.indent" class="anchor"></a><code>indent : int;</code></td></tr><tr id="type-partial.name" class="anchored"><td class="def field"><a href="#type-partial.name" class="anchor"></a><code>name : <a href="../index.html#type-name">name</a>;</code></td></tr><tr id="type-partial.contents" class="anchored"><td class="def field"><a href="#type-partial.contents" class="anchor"></a><code>contents : <a href="index.html#type-t">t</a> option <a href="../../../ocaml/Stdlib/Lazy/index.html#type-t">Stdlib.Lazy.t</a>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">and</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.loc" class="anchored"><td class="def field"><a href="#type-t.loc" class="anchor"></a><code>loc : <a href="index.html#type-loc">loc</a>;</code></td></tr><tr id="type-t.desc" class="anchored"><td class="def field"><a href="#type-t.desc" class="anchor"></a><code>desc : <a href="index.html#type-desc">desc</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-dummy_loc"><a href="#val-dummy_loc" class="anchor"></a><code><span class="keyword">val</span> dummy_loc : <a href="index.html#type-loc">loc</a></code></dt><dd><p>A value of type <code>loc</code>, guaranteed to be different from any valid location.</p></dd></dl><dl><dt class="spec value" id="val-parse_lx"><a href="#val-parse_lx" class="anchor"></a><code><span class="keyword">val</span> parse_lx : <a href="../../../ocaml/Stdlib/Lexing/index.html#type-lexbuf">Stdlib.Lexing.lexbuf</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read</p></dd></dl><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp fmt template</code> print a template as raw mustache to the formatter <code>fmt</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_formatter"><a href="#val-to_formatter" class="anchor"></a><code><span class="keyword">val</span> to_formatter : <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Alias for compatibility</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string template</code> uses <code>to_formatter</code> in order to return a string representing the template as raw mustache.</p></dd></dl><dl><dt class="spec value" id="val-render_fmt"><a href="#val-render_fmt" class="anchor"></a><code><span class="keyword">val</span> render_fmt : ?&#8288;strict:bool <span>&#45;&gt;</span> ?&#8288;partials:(<a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option) <span>&#45;&gt;</span> <a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Json/index.html#type-t">Json.t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>render_fmt fmt template json</code> render <code>template</code>, filling it with data from <code>json</code>, printing it to formatter <code>fmt</code>.</p><p>For each partial <code>p</code>, if <code>partials p</code> is <code>Some t</code> then the partial is substituted by <code>t</code>. Otherwise, the partial is substituted by the empty string is <code>strict</code> is <code>false</code>. If <code>strict</code> is <code>true</code>, the <code>Missing_partial
      p</code> exception is raised.</p></dd></dl><dl><dt class="spec value" id="val-render"><a href="#val-render" class="anchor"></a><code><span class="keyword">val</span> render : ?&#8288;strict:bool <span>&#45;&gt;</span> ?&#8288;partials:(<a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../Json/index.html#type-t">Json.t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>render template json</code> use <code>render_fmt</code> to render <code>template</code> with data from <code>json</code> and returns the resulting string.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : string:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> section:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> inverted:bool <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> escaped:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> unescaped:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> partial:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option <a href="../../../ocaml/Stdlib/Lazy/index.html#type-t">Stdlib.Lazy.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> comment:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> concat:(loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> list <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold template</code> is the composition of <code>f</code> over parts of <code>template</code>, called in order of occurrence, where each <code>f</code> is one of the labelled arguments applied to the corresponding part. The default for <code>f</code> is the identity function.</p><dl><dt>parameter string</dt><dd><p>Applied to each literal part of the template.</p></dd></dl><dl><dt>parameter escaped</dt><dd><p>Applied to <code>&quot;name&quot;</code> for occurrences of <code>{{name}}</code>.</p></dd></dl><dl><dt>parameter unescaped</dt><dd><p>Applied to <code>&quot;name&quot;</code> for occurrences of <code>{{{name}}}</code>.</p></dd></dl><dl><dt>parameter partial</dt><dd><p>Applied to <code>&quot;box&quot;</code> for occurrences of <code>{{&gt; box}}</code>.</p></dd></dl><dl><dt>parameter comment</dt><dd><p>Applied to <code>&quot;comment&quot;</code> for occurrences of <code>{{! comment}}</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-expand_partials"><a href="#val-expand_partials" class="anchor"></a><code><span class="keyword">val</span> expand_partials : (<a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>expand_partials f template</code> is <code>template</code> where for each <code>Partial p</code> node, <code>p.contents</code> now evaluates to <code>f p.name</code> if they were evaluating to <code>None</code>. Note that no lazy is forced at this point, and calls to <code>f</code> are delayed until <code>p.contents</code> is forced.</p></dd></dl><dl><dt class="spec module" id="module-Infix"><a href="#module-Infix" class="anchor"></a><code><span class="keyword">module</span> <a href="Infix/index.html">Infix</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Shortcut for concatening two templates pieces.</p></dd></dl><dl><dt class="spec value" id="val-raw"><a href="#val-raw" class="anchor"></a><code><span class="keyword">val</span> raw : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>&lt;p&gt;This is raw text.&lt;/p&gt;</code></p></dd></dl><dl><dt class="spec value" id="val-escaped"><a href="#val-escaped" class="anchor"></a><code><span class="keyword">val</span> escaped : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{name}}</code></p></dd></dl><dl><dt class="spec value" id="val-unescaped"><a href="#val-unescaped" class="anchor"></a><code><span class="keyword">val</span> unescaped : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{{name}}}</code></p></dd></dl><dl><dt class="spec value" id="val-inverted_section"><a href="#val-inverted_section" class="anchor"></a><code><span class="keyword">val</span> inverted_section : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{^person}} {{/person}}</code></p></dd></dl><dl><dt class="spec value" id="val-section"><a href="#val-section" class="anchor"></a><code><span class="keyword">val</span> section : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="../index.html#type-dotted_name">dotted_name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{#person}} {{/person}}</code></p></dd></dl><dl><dt class="spec value" id="val-partial"><a href="#val-partial" class="anchor"></a><code><span class="keyword">val</span> partial : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> ?&#8288;indent:int <span>&#45;&gt;</span> <a href="../index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option <a href="../../../ocaml/Stdlib/Lazy/index.html#type-t">Stdlib.Lazy.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{&gt; box}}</code></p></dd></dl><dl><dt class="spec value" id="val-comment"><a href="#val-comment" class="anchor"></a><code><span class="keyword">val</span> comment : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>{{! this is a comment}}</code></p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : loc:<a href="index.html#type-loc">loc</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Group a <code>t list</code> as a single <code>t</code>.</p></dd></dl></div></body></html>