<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>E (note.Note.E)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">note</a> &#x00BB; <a href="../index.html">Note</a> &#x00BB; E</nav><h1>Module <code>Note.E</code></h1><p>Events.</p><p>An event is a value with discrete occurences over time.</p><nav class="toc"><ul><li><a href="#ev">Events</a></li><li><a href="#stdlib">Stdlib types support</a></li></ul></nav></header><section><header><h2 id="ev"><a href="#ev" class="anchor"></a>Events</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p>The type for events with occurences of type <code>'a</code>.</p></dd></dl><dl><dt class="spec type" id="type-send"><a href="#type-send" class="anchor"></a><code><span class="keyword">type </span>'a send</code><code><span class="keyword"> = </span>?&#8288;step:<a href="../Step/index.html#type-t">Step.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>The type for functions sending event occurences of type <code>'a</code>. See <a href="index.html#val-create"><code>create</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-obs"><a href="#val-obs" class="anchor"></a><code><span class="keyword">val </span>obs : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option <a href="../Logr/index.html#type-obs">Logr.obs</a></code></dt><dd><p><code>obs e</code> is an observation for <code>e</code>'s occurences.</p></dd></dl><dl><dt class="spec value" id="val-log"><a href="#val-log" class="anchor"></a><code><span class="keyword">val </span>log : ?&#8288;now:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="../Logr/index.html#type-t">Logr.t</a> option</code></dt><dd><p><code>log ?now e f</code> is <code>Some (Logr.(create ?now (const f $ obs e)))</code> if <code>e</code> is not <a href="index.html#val-never"><code>never</code></a> and <code>None</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-send">send</a></code></dt><dd><p><code>create ()</code> is a primitive event <code>e</code> and a <code>send</code> function. The function <code>send</code> is such that:</p><ul><li><code>send v</code> generates an occurence <code>v</code> of <code>e</code> at the time it is called .</li><li><code>send ~step v</code> generates an occurence <code>v</code> of <code>e</code> at the time <code>step</code>. The function should not be called again before <code>step</code> is <a href="../Step/index.html#val-execute"><span>executed</span></a>.</li></ul><p><b>Warning.</b> <code>send</code> must not be used in the definition of signals or events.</p></dd></dl><dl><dt class="spec value" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">val </span>value : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option</code></dt><dd><p><code>value e</code> is the value of event <code>e</code> at call time. If this is <code>None</code> the event has no occurence, if this is <code>Some v</code>, the event occurs with <code>v</code>.</p></dd></dl><dl><dt class="spec value" id="val-never"><a href="#val-never" class="anchor"></a><code><span class="keyword">val </span>never : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>never</code> is a never occuring event, [<code>never</code>]<sub>t</sub> <code>= None</code>.</p></dd></dl><dl><dt class="spec value" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val </span>bind : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>bind e f</code> is the event that results from applying <code>f</code> to the last event of <code>e</code>:</p><ul><li>[<code>bind e f</code>]<sub>t</sub> <code>=</code> [<code>f v</code>]<sub>t</sub> if [<code>e</code>]<sub>&lt;=t</sub> <code>= Some v</code>.</li><li>[<code>bind e f</code>]<sub>t</sub> <code>=</code> <code>never</code> if [<code>e</code>]<sub>&lt;=t</sub> <code>= None</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val </span>join : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>join ee</code> is <code>bind ee (fun e -&gt; e)</code>.</p></dd></dl><dl><dt class="spec value" id="val-swap"><a href="#val-swap" class="anchor"></a><code><span class="keyword">val </span>swap : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>swap es</code> is the current event of <code>es</code>, [<code>swap es</code>]<sub>t</sub> <code>=</code> [[<code>es</code>]<sub>t</sub>]<sub>t</sub>.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>map f e</code> applies <code>f</code> to <code>e</code>'s occurrences.</p><ul><li>[<code>map f e</code>]<sub>t</sub> <code>= Some (f v)</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>map f e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-stamp"><a href="#val-stamp" class="anchor"></a><code><span class="keyword">val </span>stamp : <span class="type-var">'b</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>stamp e v</code> is <code>map e (fun _ -&gt; v)</code></p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val </span>filter : (<span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>filter p e</code> are the occurences of <code>e</code> that satisfy <code>p</code>.</p><ul><li>[<code>filter p e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and <code>p v = true</code></li><li>[<code>filter p e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span class="keyword">val </span>filter_map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> option) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>filter_map fm e</code> are <code>e</code>'s occurrences filtered and mapped by <code>fm</code>.</p><ul><li>[<code>filter_map fm e</code>]<sub>t</sub> <code>= Some v</code> if <code>fm</code> [<code>e</code>]<sub>t</sub> <code>= Some v</code></li><li>[<code>filter_map fm e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-select"><a href="#val-select" class="anchor"></a><code><span class="keyword">val </span>select : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>select el</code> is the occurences of every event in <code>el</code>. If more than one event occurs simlutanously, the leftmost is taken and the other are lost:</p><ul><li>[<code>select el</code>]<sub>t</sub> <code>=</code> [<code>List.find (fun e -&gt; </code>[<code>e</code>]<sub>t</sub> <code>&lt;&gt; None) el</code>]<sub>t</sub>.</li><li>[<code>select el</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-accum"><a href="#val-accum" class="anchor"></a><code><span class="keyword">val </span>accum : <span class="type-var">'a</span> <span>&#45;&gt;</span> (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>accum i e</code> accumulates a value, starting with <code>i</code>, using <code>e</code>'s functional occurrences.</p><ul><li>[<code>accum i e</code>]<sub>t</sub> <code>= Some (f i)</code> if [<code>e</code>]<sub>t</sub> <code>= Some f</code> and [<code>e</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>accum i e</code>]<sub>t</sub> <code>= Some (f acc)</code> if [<code>e</code>]<sub>t</sub> <code>= Some f</code> and [<code>accum i e</code>]<sub>&lt;t</sub> <code>= Some acc</code>.</li><li>[<code>accum i e</code>] <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-until"><a href="#val-until" class="anchor"></a><code><span class="keyword">val </span>until : ?&#8288;limit:bool <span>&#45;&gt;</span> next:<span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>until ~limit ~next e</code> is <code>e</code>'s occurences until <code>next</code> occurs. At that point if <code>e</code> occurs simultaneously the occurence is discarded (<code>limit</code> is <code>false</code>, default) or kept (<code>limit</code> is <code>true</code>) and after this the event never occurs again.</p><ul><li>[<code>until ~limit ~next e</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t</sub> if [<code>next</code>]<sub>&lt;=t</sub> <code>= None</code></li><li>[<code>until ~limit:false ~next e</code>]<sub>t</sub> <code>= None</code> if [<code>next</code>]<sub>t</sub> <code>= Some _</code> and [<code>next</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>until ~limit:true ~next e</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t</sub> if [<code>next</code>]<sub>t</sub> <code>= Some _</code> and [<code>next</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>until ~limit ~next e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-follow"><a href="#val-follow" class="anchor"></a><code><span class="keyword">val </span>follow : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> on:bool <a href="../index.html#type-signal">signal</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>follow e ~on</code> is <code>e</code>'s occurences whenever <code>on</code> is <code>true</code>.</p><ul><li>[<code>follow e ~on</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t</sub> if [<code>on</code>]<sub>t</sub> <code>= true</code></li><li>[<code>follow e ~on</code>]<sub>t</sub> <code>= None</code> if [<code>on</code>]<sub>t</sub> <code>= false</code></li></ul></dd></dl><dl><dt class="spec value" id="val-defer"><a href="#val-defer" class="anchor"></a><code><span class="keyword">val </span>defer : <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a></code></dt><dd><p><code>defer s</code> is <code>s</code> delayed by an infinitesimal amount of time. At creation time <code>init</code> is used (defaults to <code>S.value s</code>).</p><ul><li>[<code>defer e</code>]<sub>t</sub> <code>=</code> <code>None</code> for t = 0.</li><li>[<code>defer e</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t-dt</sub> otherwise.</li></ul></dd></dl><dl><dt class="spec value" id="val-fix"><a href="#val-fix" class="anchor"></a><code><span class="keyword">val </span>fix : (<span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a><span class="keyword"> * </span><span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p><code>fix ef</code> allows to refer to the value an event had an infinitesimal amount of time before.</p><p>In <code>fix ef</code>, <code>ef</code> is called with an event <code>e</code> that represents the event returned by <code>ef</code> delayed by an infinitesimal amount of time. If <code>e', r = ef e</code> then <code>r</code> is returned by <code>fix</code> and <code>e</code> is such that :</p><ul><li>[<code>e</code>]<sub>t</sub> <code>=</code> <code>None</code> if t = 0</li><li>[<code>e</code>]<sub>t</sub> <code>=</code> [<code>e'</code>]<sub>t-dt</sub> otherwise</li></ul><p><b>Raises.</b> <code>Invalid_argument</code> if <code>e'</code> is directly a delayed event (i.e. an event given to a fixing function).</p></dd></dl></section><section><header><h2 id="stdlib"><a href="#stdlib" class="anchor"></a>Stdlib types support</h2></header><dl><dt class="spec module" id="module-Option"><a href="#module-Option" class="anchor"></a><code><span class="keyword">module </span><a href="Option/index.html">Option</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Option events</p></dd></dl><dl><dt class="spec module" id="module-Pair"><a href="#module-Pair" class="anchor"></a><code><span class="keyword">module </span><a href="Pair/index.html">Pair</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Pair events.</p></dd></dl><dl><dt class="spec value" id="val-dump_src_ids"><a href="#val-dump_src_ids" class="anchor"></a><code><span class="keyword">val </span>dump_src_ids : Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="../index.html#type-event">event</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>/*</p><p>/*</p></dd></dl></section></div></body></html>