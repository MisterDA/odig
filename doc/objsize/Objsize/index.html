<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Objsize (objsize.Objsize)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">objsize</a> &#x00BB; Objsize</nav><h1>Module <code>Objsize</code></h1><p>Compute memory usage of OCaml heap values (by recursively inspecting runtime representation)</p></header><dl><dt class="spec type" id="type-tag_info"><a href="#type-tag_info" class="anchor"></a><code><span class="keyword">type</span> tag_info</code><code> = </code><code>{</code><table class="record"><tr id="type-tag_info.tag" class="anchored"><td class="def field"><a href="#type-tag_info.tag" class="anchor"></a><code>tag : int;</code></td><td class="doc"><p>heap value tag</p></td></tr><tr id="type-tag_info.count" class="anchored"><td class="def field"><a href="#type-tag_info.count" class="anchor"></a><code>count : int;</code></td><td class="doc"><p>number of values with this tag (eq. words used for headers)</p></td></tr><tr id="type-tag_info.words" class="anchored"><td class="def field"><a href="#type-tag_info.words" class="anchor"></a><code>words : int;</code></td><td class="doc"><p>heap words used for data</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info</code><code> = </code><code>{</code><table class="record"><tr id="type-info.data" class="anchored"><td class="def field"><a href="#type-info.data" class="anchor"></a><code>data : int;</code></td></tr><tr id="type-info.headers" class="anchored"><td class="def field"><a href="#type-info.headers" class="anchor"></a><code>headers : int;</code></td></tr><tr id="type-info.depth" class="anchored"><td class="def field"><a href="#type-info.depth" class="anchor"></a><code>depth : int;</code></td></tr><tr id="type-info.tags" class="anchored"><td class="def field"><a href="#type-info.tags" class="anchor"></a><code>tags : <a href="index.html#type-tag_info">tag_info</a> array;</code></td><td class="doc"><p>counts grouped by tags </p><dl><dt>since</dt><dd>0.17</dd></dl></td></tr></table><code>}</code></dt><dd><p>Information gathered while walking through values.</p></dd></dl><dl><dt class="spec value" id="val-objsize"><a href="#val-objsize" class="anchor"></a><code><span class="keyword">val</span> objsize : <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p>Returns information for first argument.</p></dd></dl><dl><dt class="spec value" id="val-objsize_limit"><a href="#val-objsize_limit" class="anchor"></a><code><span class="keyword">val</span> objsize_limit : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p><code>objsize_limit limit v</code></p><dl><dt>returns</dt><dd><p>memory usage information for <code>v</code>. <code>limit</code> limits the maximum depth to follow (to prevent excess stack usage). If maximum depth is reached during heap traversal then the returned result may be less than actual. One can detect this situation by comparing returned depth against the limit.</p></dd></dl><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-size_with_headers"><a href="#val-size_with_headers" class="anchor"></a><code><span class="keyword">val</span> size_with_headers : <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Calculate size in bytes</p></dd></dl><dl><dt class="spec value" id="val-size_without_headers"><a href="#val-size_without_headers" class="anchor"></a><code><span class="keyword">val</span> size_without_headers : <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-objsize_roots"><a href="#val-objsize_roots" class="anchor"></a><code><span class="keyword">val</span> objsize_roots : unit <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p>Walk through all the roots and return information for the whole heap.</p><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-objsize_roots_limit"><a href="#val-objsize_roots_limit" class="anchor"></a><code><span class="keyword">val</span> objsize_roots_limit : int <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p>Walk through all the roots and return information for the whole heap. Integer parameter limits the maximum depth to follow (to prevent excess stack usage). If maximum depth is reached during heap traversal then the returned result may be less than actual. One can detect this situation by comparing returned depth against the limit.</p><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val</span> sub : ?&#8288;tweak:bool <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p><code>sub next base</code> calculate <code>next - base</code>, i.e. the changes from <code>base</code> to <code>next</code>.</p><dl><dt>parameter tweak</dt><dd><p>account for the memory occupied by one <code>info</code> structure, default true</p></dd></dl><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-string_of_tag"><a href="#val-string_of_tag" class="anchor"></a><code><span class="keyword">val</span> string_of_tag : int <span>&#45;&gt;</span> string</code></dt><dd><dl><dt>returns</dt><dd><p>human readable name for the tag number</p></dd></dl><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-show_info"><a href="#val-show_info" class="anchor"></a><code><span class="keyword">val</span> show_info : ?&#8288;map:(int <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> string</code></dt><dd><dl><dt>returns</dt><dd><p>human readable representation of memory usage in general</p></dd></dl><dl><dt>parameter map</dt><dd><p>convert number of words to string</p></dd></dl><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl><dl><dt class="spec value" id="val-show_tags"><a href="#val-show_tags" class="anchor"></a><code><span class="keyword">val</span> show_tags : ?&#8288;map:(int <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> string list</code></dt><dd><dl><dt>returns</dt><dd><p>human readable representation of memory usage grouped by tags</p></dd></dl><dl><dt>parameter map</dt><dd><p>convert number of words to string</p></dd></dl><dl><dt>since</dt><dd>0.17</dd></dl></dd></dl></div></body></html>