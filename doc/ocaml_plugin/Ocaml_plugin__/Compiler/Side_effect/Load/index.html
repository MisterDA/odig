<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Load (ocaml_plugin.Ocaml_plugin__.Compiler.Side_effect.Load)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">ocaml_plugin</a> &#x00BB; <a href="../../../index.html">Ocaml_plugin__</a> &#x00BB; <a href="../../index.html">Compiler</a> &#x00BB; <a href="../index.html">Side_effect</a> &#x00BB; Load</nav><h1>Module <code>Side_effect.Load</code></h1><p><code>Load</code> contains functions similar to the ones above, and can be used if you want to separate extraction of the compiler from building/loading files. It can be useful if you want to extract the compiler upfront (to improve latency a bit) or if you want to share the cost of extracting the compiler for the current executable over multiple compilations. Probably not needed by the casual user.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-load_ocaml_src_files"><a href="#val-load_ocaml_src_files" class="anchor"></a><code><span class="keyword">val</span> load_ocaml_src_files : <a href="../../../../Ocaml_plugin/Dynloader/index.html#type-dynloader">Ocaml_plugin.Dynloader.dynloader</a> <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Load a bunch of ocaml files source files (.ml + .mli). The last module's signature should be compatible with the signature <code>X.repr</code>. If the type does not match, there will be an error during OCaml compilation. The files are copied into the compilation directory, and compiled versus a generated mli file including the relevant module signature. This generated file is then dynlinked with the current executable.</p><p>The compilation happens using <code>Dynlink.loadfile_private</code>, meaning that the toplevel definition defined in these files are hidden (cannot be referenced) from other modules dynamically loaded afterwards</p></dd></dl><dl><dt class="spec value" id="val-load_ocaml_src_files_without_running_them"><a href="#val-load_ocaml_src_files_without_running_them" class="anchor"></a><code><span class="keyword">val</span> load_ocaml_src_files_without_running_them : <a href="../../../../Ocaml_plugin/Dynloader/index.html#type-dynloader">Ocaml_plugin.Dynloader.dynloader</a> <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a>) <a href="../../../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Loads the given source files, same as <code>load_ocaml_src_files</code>, but instead of running their toplevel, you are given a closure that will run the toplevel. You can use this to run the toplevel multiple times, or lazily, or outside the async thread, or get precise control over the raised exceptions.</p></dd></dl><dl><dt class="spec value" id="val-check_ocaml_src_files"><a href="#val-check_ocaml_src_files" class="anchor"></a><code><span class="keyword">val</span> check_ocaml_src_files : <a href="../../../../Ocaml_plugin/Dynloader/index.html#type-dynloader">Ocaml_plugin.Dynloader.dynloader</a> <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> unit <a href="../../../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Similar to <code>load_ocaml_src_files</code>, but does not execute the plugin toplevel, just checks that compilation and dynamic linking work.</p></dd></dl><div class="spec module" id="module-Expert"><a href="#module-Expert" class="anchor"></a><code><span class="keyword">module</span> <a href="Expert/index.html">Expert</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>