<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dynloader (ocaml_plugin.Ocaml_plugin__.Dynloader)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">ocaml_plugin</a> &#x00BB; <a href="../index.html">Ocaml_plugin__</a> &#x00BB; Dynloader</nav><h1>Module <code>Ocaml_plugin__.Dynloader</code></h1></header><aside><p>Ocaml plugin loader, from ocaml source file. Wrapper around Dynlink module, including on the fly async ocaml compilation.</p><p>This is a low level module, casual user should rather use <code>Compiler</code> apart from Make to create a dedicated Plugin loader.</p></aside><dl><dt class="spec value" id="val-default_disabled_warnings"><a href="#val-default_disabled_warnings" class="anchor"></a><code><span class="keyword">val</span> default_disabled_warnings : int list</code></dt><dd><p>See the labelled argument <code>custom_warnings_spec</code> for what these are for.</p></dd></dl><dl><dt class="spec value" id="val-warnings_spec"><a href="#val-warnings_spec" class="anchor"></a><code><span class="keyword">val</span> warnings_spec : disabled_warnings:int list <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-default_warnings_spec"><a href="#val-default_warnings_spec" class="anchor"></a><code><span class="keyword">val</span> default_warnings_spec : string</code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Mutable type for loading ocaml modules.</p></dd></dl><dl><dt class="spec type" id="type-dynloader"><a href="#type-dynloader" class="anchor"></a><code><span class="keyword">type</span> dynloader</code><code> = <a href="index.html#type-t">t</a></code></dt><dt class="spec type" id="type-create_arguments"><a href="#type-create_arguments" class="anchor"></a><code><span class="keyword">type</span> 'a create_arguments</code><code> = ?&#8288;in_dir:string <span>&#45;&gt;</span> ?&#8288;in_dir_perm:<a href="../../../async_unix/Async_unix/Unix/index.html#type-file_perm">Async.Unix.file_perm</a> <span>&#45;&gt;</span> ?&#8288;include_directories:string list <span>&#45;&gt;</span> ?&#8288;custom_warnings_spec:string <span>&#45;&gt;</span> ?&#8288;strict_sequence:bool <span>&#45;&gt;</span> ?&#8288;cmx_flags:string list <span>&#45;&gt;</span> ?&#8288;cmxs_flags:string list <span>&#45;&gt;</span> ?&#8288;trigger_unused_value_warnings_despite_mli:bool <span>&#45;&gt;</span> ?&#8288;use_cache:<a href="../../Ocaml_plugin/Plugin_cache/Config/index.html#type-t">Ocaml_plugin.Plugin_cache.Config.t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt></dl><div class="spec module" id="module-Ppx"><a href="#module-Ppx" class="anchor"></a><code><span class="keyword">module</span> <a href="Ppx/index.html">Ppx</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Preprocessor"><a href="#module-Preprocessor" class="anchor"></a><code><span class="keyword">module</span> <a href="Preprocessor/index.html">Preprocessor</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Compilation_config"><a href="#module-Compilation_config" class="anchor"></a><code><span class="keyword">module</span> <a href="Compilation_config/index.html">Compilation_config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : (?&#8288;initialize:(directory:string <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a>) <span>&#45;&gt;</span> ?&#8288;compilation_config:<a href="Compilation_config/index.html#type-t">Compilation_config.t</a> <span>&#45;&gt;</span> ?&#8288;ocamlopt_opt:string <span>&#45;&gt;</span> ?&#8288;ocamldep_opt:string <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a>) <a href="index.html#type-create_arguments">create_arguments</a></code></dt><dd><p>Currently this library works with native code only. The function <code>create</code> will raise if called in bytecode.</p></dd></dl><dl><dt class="spec value" id="val-clean"><a href="#val-clean" class="anchor"></a><code><span class="keyword">val</span> clean : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Cleaning the files generated by this Dynloader.t from the begining of his life, and try to remove the directory if it is empty once the files have been removed. Doesn't fail if the directory contains other files, keep them and keep the directory in that case. Once cleaned, you cannot use a dynloader anymore, you should just leave it alone and let it be collected by the GC at some point. Using a cleaned dynloader will result in an error.</p></dd></dl><div class="spec module" id="module-Univ_constr"><a href="#module-Univ_constr" class="anchor"></a><code><span class="keyword">module</span> <a href="Univ_constr/index.html">Univ_constr</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Module_type"><a href="#module-type-Module_type" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Module_type/index.html">Module_type</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-find_dependencies"><a href="#val-find_dependencies" class="anchor"></a><code><span class="keyword">val</span> find_dependencies : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string list <a href="../../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p><code>find_dependencies t file</code> uses ocamldep to compute the list of .ml and .mli files that <code>file</code> depends on transitively, which you can then pass to <code>load_ocaml_src_files</code>. <code>file</code> must be an .ml file, and all the files it depend on must be in the same folder.</p></dd></dl><div class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-X/index.html">X</a> : <a href="index.html#module-type-Module_type">Module_type</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Make/index.html#type-t">t</a> := <a href="Make/argument-1-X/index.html#type-t">X.t</a></code></div><dl><dt class="spec module" id="module-Side_effect"><a href="#module-Side_effect" class="anchor"></a><code><span class="keyword">module</span> <a href="Side_effect/index.html">Side_effect</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> := unit</code></dt><dd><p>In some cases, we are only interested by the toplevel side effects of dynlinked modules.</p></dd></dl><div class="spec module-type" id="module-type-Side_effect"><a href="#module-type-Side_effect" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Side_effect/index.html">Side_effect</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-side_effect_univ_constr"><a href="#val-side_effect_univ_constr" class="anchor"></a><code><span class="keyword">val</span> side_effect_univ_constr : (<span class="keyword">module</span> <a href="module-type-Side_effect/index.html">Side_effect</a>) <a href="Univ_constr/index.html#type-t">Univ_constr.t</a></code></dt><dt class="spec value" id="val-return_plugin"><a href="#val-return_plugin" class="anchor"></a><code><span class="keyword">val</span> return_plugin : <span class="type-var">'a</span> <a href="Univ_constr/index.html#type-t">Univ_constr.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>