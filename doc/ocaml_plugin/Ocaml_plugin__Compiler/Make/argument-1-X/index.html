<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>1-X (ocaml_plugin.Ocaml_plugin__Compiler.Make.1-X)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ocaml_plugin</a> &#x00BB; <a href="../../index.html">Ocaml_plugin__Compiler</a> &#x00BB; <a href="../index.html">Make</a> &#x00BB; 1-X</nav><h1>Parameter <code>Make.1-X</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The type <code>t</code> is the type of a first level module you want to load. This is typically the type of your expected config file, as a top level ocaml module.</p><p>The field <code>t_repr</code> is the concrete OCaml syntax for this module type.</p><p>The field <code>univ_constr</code> is used to constr and match_ values of type t, embedded in a value of type Univ.t.</p><p>The field <code>univ_constr_repr</code> is the concrete OCaml syntax for the field <code>univ_constr</code>.</p><p>Example : <code>module M : A.S</code> defined in the library &quot;mylib.cmxa&quot;.</p><pre><code class="ml">module My_config_loader = Ocaml_plugin.Dynloader.Make (
struct
  type t = (module A.S)
  let t_repr = &quot;Mylib.A.S&quot;
  let univ_constr = A.univ_constr
  let univ_constr_repr = &quot;Mylib.A.univ_constr&quot;
end)</code></pre><p><code>t_repr</code> and <code>univ_constr_repr</code> should be complete paths, as it would be used by an ocaml file to link with the shared cmi files, in particular be aware that if you have some 'open' statements in your file, you might have different t and t_repr, which is a bad practice.</p><p>If the module type <code>A.M_intf</code> is defined in a package, you would need to add it in the t_repr, as it is part of the complete path of the module type (&quot;Mylib&quot; in the example).</p></dd></dl><dl><dt class="spec value" id="val-t_repr"><a href="#val-t_repr" class="anchor"></a><code><span class="keyword">val</span> t_repr : string</code></dt><dt class="spec value" id="val-univ_constr"><a href="#val-univ_constr" class="anchor"></a><code><span class="keyword">val</span> univ_constr : <a href="index.html#type-t">t</a> <a href="../../../Ocaml_plugin/Dynloader/Univ_constr/index.html#type-t">Ocaml_plugin.Dynloader.Univ_constr.t</a></code></dt><dt class="spec value" id="val-univ_constr_repr"><a href="#val-univ_constr_repr" class="anchor"></a><code><span class="keyword">val</span> univ_constr_repr : string</code></dt></dl><aside><p>This implementation is type safe. Some properties should be verified so that the library would work properly:</p><p>-the type <code>t</code> and its representation '<code>t_repr</code>' should match, -the plugin implementation doesn't override the module type sig represented by the string <code>t_repr</code>: -the plugin implementation doesn't override the univ_constr scope name represented by the string <code>univ_constr_repr</code> -the value <code>univ_constr</code> and its representation <code>univ_constr_repr</code> should match.</p></aside></div></body></html>