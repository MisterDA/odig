<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocaml_plugin__Ocamldep (ocaml_plugin.Ocaml_plugin__Ocamldep)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocaml_plugin</a> &#x00BB; Ocaml_plugin__Ocamldep</nav><h1>Module <code>Ocaml_plugin__Ocamldep</code></h1></header><dl><dt class="spec value" id="val-find_dependencies"><a href="#val-find_dependencies" class="anchor"></a><code><span class="keyword">val</span> find_dependencies : prog:string <span>&#45;&gt;</span> args:string list <span>&#45;&gt;</span> working_dir:string <span>&#45;&gt;</span> target:string <span>&#45;&gt;</span> string list <a href="../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Call <code>ocamldep</code> to recursively find dependencies for the <code>target</code> compilation unit, return a list of compilation units the <code>target</code> depends on in topological order.</p><p>Failure cases includes:</p><ul><li>cannot run ocamldep.opt</li><li>invalid working_dir, target not found</li><li>ocamldep errors (the program crashes, syntax errors, etc.)</li><li>cyclic dependency detected</li></ul><p>A compilation unit is a string representing an ml/mli module. It does not contain the extension. Example:</p><pre>       file              compilation unit
       a.mli?            &quot;a&quot;
       Stack.mli?        &quot;Stack&quot;
       /path/to/file.ml  &quot;file&quot;
       /other/file.ml    &quot;file&quot;</pre><p>This function assumes that the target and all its dependencies are located under the same directory, that is <code>working_dir</code>, and that an .ml and an .mli for the same module have the same case.</p></dd></dl></div></body></html>