<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocaml_plugin__Plugin_cache (ocaml_plugin.Ocaml_plugin__Plugin_cache)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocaml_plugin</a> &#x00BB; Ocaml_plugin__Plugin_cache</nav><h1>Module <code>Ocaml_plugin__Plugin_cache</code></h1><p>This cache avoid recompilation of sources if there are no changes in the files. Since we want the side effects to be executed in case of a re-loading, this isn't a cache of dynloading. The purpose of this cache is to speed up the initialization of programs relying on an ml config set up. The cache is meant to be persistent between different executions of the program. Basically, cmxs files are stored in a specific location. This is not a ram cache. This module handles version upgrades. The info file contains the version of the executable using the cache. If the version doesn't match, the cache is deleted (or just skipped if no write access).</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Mutable type containing information about the cached files.</p></dd></dl><dl><dt class="spec type" id="type-filename"><a href="#type-filename" class="anchor"></a><code><span class="keyword">type</span> filename</code><code> = string</code></dt></dl><div class="spec module" id="module-Sources"><a href="#module-Sources" class="anchor"></a><code><span class="keyword">module</span> <a href="Sources/index.html">Sources</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Plugin"><a href="#module-Plugin" class="anchor"></a><code><span class="keyword">module</span> <a href="Plugin/index.html">Plugin</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span class="keyword">module</span> <a href="Config/index.html">Config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="Config/index.html#type-t">Config.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Loading info and cache initialization, including some clean-up if needed, etc. cleaning old version files if present.</p></dd></dl><dl><dt class="spec value" id="val-digest"><a href="#val-digest" class="anchor"></a><code><span class="keyword">val</span> digest : <a href="../Ocaml_plugin__/Ml_bundle/index.html#type-t">Ocaml_plugin__.Ml_bundle.t</a> list <span>&#45;&gt;</span> <a href="Sources/index.html#type-t">Sources.t</a> <a href="../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Sources/index.html#type-t">Sources.t</a> <span>&#45;&gt;</span> <a href="Plugin/index.html#type-t">Plugin.t</a> option</code></dt><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Sources/index.html#type-t">Sources.t</a> <span>&#45;&gt;</span> <a href="../Ocaml_plugin__/Plugin_uuid/index.html#type-t">Ocaml_plugin__.Plugin_uuid.t</a> <span>&#45;&gt;</span> <a href="index.html#type-filename">filename</a> <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Update the info in the file system, perform some clean-up if needed.</p></dd></dl><dl><dt class="spec value" id="val-clean"><a href="#val-clean" class="anchor"></a><code><span class="keyword">val</span> clean : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="../../async_kernel/Async_kernel__/Deferred_or_error/index.html#type-t">Async.Deferred.Or_error.t</a></code></dt><dd><p>Release this plugin cache lock.</p></dd></dl><dl><dt class="spec module" id="module-Digest"><a href="#module-Digest" class="anchor"></a><code><span class="keyword">module</span> <a href="Digest/index.html">Digest</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Exported to be used in some other part of ocaml_plugin.</p></dd></dl></div></body></html>