<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Json_repr (ocplib-json-typed.Json_repr)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocplib-json-typed</a> &#x00BB; Json_repr</nav><h1>Module <code>Json_repr</code></h1><p>Representations of JSON documents</p><nav class="toc"><ul><li><a href="#abstraction-over-json-representations">Abstraction over JSON representations</a></li><li><a href="#third-party-in-memory-json-document-representations">Third party in-memory JSON document representations</a></li><li><a href="#representation-agnostic-json-format">Representation-agnostic JSON format</a></li><li><a href="#predefined-converters-for-">Predefined converters for <em></em></a></li></ul></nav></header><section><header><h3 id="abstraction-over-json-representations"><a href="#abstraction-over-json-representations" class="anchor"></a>Abstraction over JSON representations</h3></header><dl><dt class="spec type" id="type-view"><a href="#type-view" class="anchor"></a><code><span class="keyword">type</span> 'a view</code> = <code>[ </code><table class="variant"><tr id="type-view.O" class="anchored"><td class="def constructor"><a href="#type-view.O" class="anchor"></a><code>| </code><code>`O <span class="keyword">of</span> (string * <span class="type-var">'a</span>) list</code></td><td class="doc"><p>An associative table (object).</p></td></tr><tr id="type-view.A" class="anchored"><td class="def constructor"><a href="#type-view.A" class="anchor"></a><code>| </code><code>`A <span class="keyword">of</span> <span class="type-var">'a</span> list</code></td><td class="doc"><p>An (integer indexed) array.</p></td></tr><tr id="type-view.Bool" class="anchored"><td class="def constructor"><a href="#type-view.Bool" class="anchor"></a><code>| </code><code>`Bool <span class="keyword">of</span> bool</code></td><td class="doc"><p>A JS boolean <code>true</code> or <code>false</code>.</p></td></tr><tr id="type-view.Float" class="anchored"><td class="def constructor"><a href="#type-view.Float" class="anchor"></a><code>| </code><code>`Float <span class="keyword">of</span> float</code></td><td class="doc"><p>A floating point number (double precision).</p></td></tr><tr id="type-view.String" class="anchored"><td class="def constructor"><a href="#type-view.String" class="anchor"></a><code>| </code><code>`String <span class="keyword">of</span> string</code></td><td class="doc"><p>An UTF-8 encoded string.</p></td></tr><tr id="type-view.Null" class="anchored"><td class="def constructor"><a href="#type-view.Null" class="anchor"></a><code>| </code><code>`Null</code></td><td class="doc"><p>The <code>null</code> constant.</p></td></tr></table><code> ]</code></dt><dd><p>The internal format used by the library. A common format to view JSON structures from different representations. It only shows the head of structures, hiding the contents of fields, so that the conversion from another format or a stream can be done lazily.</p></dd></dl><dl><dt class="spec type" id="type-repr_uid"><a href="#type-repr_uid" class="anchor"></a><code><span class="keyword">type</span> 'a repr_uid</code></dt><dd><p>Each representation must provide a unique identifier, obtained via the <a href="index.html#type-repr_uid"><code>repr_uid</code></a> function. This identifier is used when converting between representations, to optimize out a copy when converting from a representation to itself. Beware that this optimization relies only on this <code>uid</code> token. Converting between values of the same type using two different representation modules with different <code>uid</code>s will perform a copy. A practical way to ensure that the optimization is made is to write your representations as toplevel modules, and not inside functors.</p></dd></dl><dl><dt class="spec value" id="val-repr_uid"><a href="#val-repr_uid" class="anchor"></a><code><span class="keyword">val</span> repr_uid : unit <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-repr_uid">repr_uid</a></code></dt><dd><p>See <a href="index.html#type-repr_uid"><code>repr_uid</code></a>.</p></dd></dl><dl><dt class="spec module-type" id="module-type-Repr"><a href="#module-type-Repr" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html">Repr</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>A view over a given implementation.</p></dd></dl><dl><dt class="spec value" id="val-convert"><a href="#val-convert" class="anchor"></a><code><span class="keyword">val</span> convert : (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'tf</span>) <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'tt</span>) <span>&#45;&gt;</span> <span class="type-var">'tf</span> <span>&#45;&gt;</span> <span class="type-var">'tt</span></code></dt><dd><p>Convert a JSON value from one representation to another.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : ?&#8288;compact:bool <span>&#45;&gt;</span> ?&#8288;pp_string:(<a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'tf</span>) <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <span class="type-var">'tf</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>Generic pretty-printer. If <code>compact</code> is set (by default), then the output is not really pretty (no space is output). Ascii-compatible string encoding is expected, as printing only escapes double quotes and control characters. Use <code>pp_string</code> for more advanced escaping. This function does not claim to be the best JSON pretty printer, it is mostly a small utility.</p></dd></dl></section><section><header><h3 id="third-party-in-memory-json-document-representations"><a href="#third-party-in-memory-json-document-representations" class="anchor"></a>Third party in-memory JSON document representations</h3></header><dl><dt class="spec type" id="type-ezjsonm"><a href="#type-ezjsonm" class="anchor"></a><code><span class="keyword">type</span> ezjsonm</code> = <code>[ </code><table class="variant"><tr id="type-ezjsonm.O" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.O" class="anchor"></a><code>| </code><code>`O <span class="keyword">of</span> (string * <a href="index.html#type-ezjsonm">ezjsonm</a>) list</code></td><td class="doc"><p>An associative table (object).</p></td></tr><tr id="type-ezjsonm.A" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.A" class="anchor"></a><code>| </code><code>`A <span class="keyword">of</span> <a href="index.html#type-ezjsonm">ezjsonm</a> list</code></td><td class="doc"><p>An (integer indexed) array.</p></td></tr><tr id="type-ezjsonm.Bool" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.Bool" class="anchor"></a><code>| </code><code>`Bool <span class="keyword">of</span> bool</code></td><td class="doc"><p>A JS boolean <code>true</code> or <code>false</code>.</p></td></tr><tr id="type-ezjsonm.Float" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.Float" class="anchor"></a><code>| </code><code>`Float <span class="keyword">of</span> float</code></td><td class="doc"><p>A floating point number (double precision).</p></td></tr><tr id="type-ezjsonm.String" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.String" class="anchor"></a><code>| </code><code>`String <span class="keyword">of</span> string</code></td><td class="doc"><p>An UTF-8 encoded string.</p></td></tr><tr id="type-ezjsonm.Null" class="anchored"><td class="def constructor"><a href="#type-ezjsonm.Null" class="anchor"></a><code>| </code><code>`Null</code></td><td class="doc"><p>The <code>null</code> constant.</p></td></tr></table><code> ]</code></dt><dd><p>A JSON value compatible with <a href="Ezjsonm/index.html#type-value"><code>Ezjsonm.value</code></a>.</p></dd></dl><dl><dt class="spec module" id="module-Ezjsonm"><a href="#module-Ezjsonm" class="anchor"></a><code><span class="keyword">module</span> <a href="Ezjsonm/index.html">Ezjsonm</a> : <a href="index.html#module-type-Repr">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <a href="index.html#type-ezjsonm">ezjsonm</a></code></dt><dd><p>A view over the <a href="index.html#type-ezjsonm"><code>ezjsonm</code></a> representation.</p></dd></dl><dl><dt class="spec type" id="type-yojson"><a href="#type-yojson" class="anchor"></a><code><span class="keyword">type</span> yojson</code> = <code>[ </code><table class="variant"><tr id="type-yojson.Bool" class="anchored"><td class="def constructor"><a href="#type-yojson.Bool" class="anchor"></a><code>| </code><code>`Bool <span class="keyword">of</span> bool</code></td><td class="doc"><p>A JS boolean <code>true</code> of <code>false</code>.</p></td></tr><tr id="type-yojson.Assoc" class="anchored"><td class="def constructor"><a href="#type-yojson.Assoc" class="anchor"></a><code>| </code><code>`Assoc <span class="keyword">of</span> (string * <a href="index.html#type-yojson">yojson</a>) list</code></td><td class="doc"><p>JSON object.</p></td></tr><tr id="type-yojson.Float" class="anchored"><td class="def constructor"><a href="#type-yojson.Float" class="anchor"></a><code>| </code><code>`Float <span class="keyword">of</span> float</code></td><td class="doc"><p>A floating point number (double precision).</p></td></tr><tr id="type-yojson.Int" class="anchored"><td class="def constructor"><a href="#type-yojson.Int" class="anchor"></a><code>| </code><code>`Int <span class="keyword">of</span> int</code></td><td class="doc"><p>A number without decimal point or exponent.</p></td></tr><tr id="type-yojson.Intlit" class="anchored"><td class="def constructor"><a href="#type-yojson.Intlit" class="anchor"></a><code>| </code><code>`Intlit <span class="keyword">of</span> string</code></td><td class="doc"><p>A number without decimal point or exponent, preserved as string.</p></td></tr><tr id="type-yojson.List" class="anchored"><td class="def constructor"><a href="#type-yojson.List" class="anchor"></a><code>| </code><code>`List <span class="keyword">of</span> <a href="index.html#type-yojson">yojson</a> list</code></td><td class="doc"><p>A JS array.</p></td></tr><tr id="type-yojson.Null" class="anchored"><td class="def constructor"><a href="#type-yojson.Null" class="anchor"></a><code>| </code><code>`Null</code></td><td class="doc"><p>The <code>null</code> constant.</p></td></tr><tr id="type-yojson.String" class="anchored"><td class="def constructor"><a href="#type-yojson.String" class="anchor"></a><code>| </code><code>`String <span class="keyword">of</span> string</code></td><td class="doc"><p>An UTF-8 encoded string.</p></td></tr><tr id="type-yojson.Tuple" class="anchored"><td class="def constructor"><a href="#type-yojson.Tuple" class="anchor"></a><code>| </code><code>`Tuple <span class="keyword">of</span> <a href="index.html#type-yojson">yojson</a> list</code></td><td class="doc"><p>A tuple (non-standard). Syntax: (&quot;abc&quot;, 123).</p></td></tr><tr id="type-yojson.Variant" class="anchored"><td class="def constructor"><a href="#type-yojson.Variant" class="anchor"></a><code>| </code><code>`Variant <span class="keyword">of</span> string * <a href="index.html#type-yojson">yojson</a> option</code></td><td class="doc"><p>A variant (non-standard). Syntax: &lt;&quot;Foo&quot;&gt; or &lt;&quot;Bar&quot;: 123&gt;.</p></td></tr></table><code> ]</code></dt><dd><p>A JSON value compatible with <span class="xref-unresolved" title="unresolved reference to &quot;Yojson.Safe.json&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Yojson.Safe&quot;"><a href="index.html#module-Yojson"><code>Yojson</code></a>.Safe</span>.json</span>.</p></dd></dl><dl><dt class="spec module" id="module-Yojson"><a href="#module-Yojson" class="anchor"></a><code><span class="keyword">module</span> <a href="Yojson/index.html">Yojson</a> : <a href="index.html#module-type-Repr">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <a href="index.html#type-yojson">yojson</a></code></dt><dd><p>A view over the <a href="index.html#type-yojson"><code>yojson</code></a> representation.</p></dd></dl></section><section><header><h3 id="representation-agnostic-json-format"><a href="#representation-agnostic-json-format" class="anchor"></a>Representation-agnostic JSON format</h3></header><dl><dt class="spec type" id="type-any"><a href="#type-any" class="anchor"></a><code><span class="keyword">type</span> any</code><code> = <span class="keyword">private</span> </code><table class="variant"><tr id="type-any.Value_with_repr" class="anchored"><td class="def constructor"><a href="#type-any.Value_with_repr" class="anchor"></a><code>| </code><code><span class="constructor">Value_with_repr</span> : (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'a</span>) * <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-any">any</a></code></td></tr></table></dt><dd><p>A meta-representation for JSON values that can unify values of different representations by boxing them with their corresponding <a href="module-type-Repr/index.html"><code>Repr</code></a> modules.</p></dd></dl><dl><dt class="spec value" id="val-any_to_repr"><a href="#val-any_to_repr" class="anchor"></a><code><span class="keyword">val</span> any_to_repr : (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-any">any</a> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Converts a boxed value from its intrinsic representation to the one of the given <a href="module-type-Repr/index.html"><code>Repr</code></a> module. Optimized if the internal representation of the value actually is the requested one.</p></dd></dl><dl><dt class="spec value" id="val-repr_to_any"><a href="#val-repr_to_any" class="anchor"></a><code><span class="keyword">val</span> repr_to_any : (<span class="keyword">module</span> <a href="module-type-Repr/index.html">Repr</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-Repr/index.html#type-value">value</a> = <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="index.html#type-any">any</a></code></dt><dd><p>Boxes a value with a compatible <a href="module-type-Repr/index.html"><code>Repr</code></a> module.</p></dd></dl><dl><dt class="spec value" id="val-pp_any"><a href="#val-pp_any" class="anchor"></a><code><span class="keyword">val</span> pp_any : ?&#8288;compact:bool <span>&#45;&gt;</span> ?&#8288;pp_string:(<a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-any">any</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Pretty-printer for values of type <a href="index.html#type-any"><code>any</code></a>. See <a href="index.html#val-pp"><code>pp</code></a> for details.</p></dd></dl></section><section><header><h3 id="predefined-converters-for-"><a href="#predefined-converters-for-" class="anchor"></a>Predefined converters for <em></em></h3></header><dl><dt class="spec value" id="val-from_yojson"><a href="#val-from_yojson" class="anchor"></a><code><span class="keyword">val</span> from_yojson : [&lt; <a href="index.html#type-yojson">yojson</a> ] <span>&#45;&gt;</span> [&gt; <a href="index.html#type-ezjsonm">ezjsonm</a> ]</code></dt><dd><p>Conversion helper.</p></dd></dl><dl><dt class="spec value" id="val-to_yojson"><a href="#val-to_yojson" class="anchor"></a><code><span class="keyword">val</span> to_yojson : [&lt; <a href="index.html#type-ezjsonm">ezjsonm</a> ] <span>&#45;&gt;</span> [&gt; <a href="index.html#type-yojson">yojson</a> ]</code></dt><dd><p>Conversion helper.</p></dd></dl><dl><dt class="spec value" id="val-from_any"><a href="#val-from_any" class="anchor"></a><code><span class="keyword">val</span> from_any : <a href="index.html#type-any">any</a> <span>&#45;&gt;</span> [&gt; <a href="index.html#type-ezjsonm">ezjsonm</a> ]</code></dt><dd><p>Converts a boxed value from its representation to <a href="index.html#type-ezjsonm"><code>ezjsonm</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-to_any"><a href="#val-to_any" class="anchor"></a><code><span class="keyword">val</span> to_any : [&lt; <a href="index.html#type-ezjsonm">ezjsonm</a> ] <span>&#45;&gt;</span> <a href="index.html#type-any">any</a></code></dt><dd><p>Boxes as <a href="index.html#type-ezjsonm"><code>ezjsonm</code></a> value.</p></dd></dl></section></div></body></html>