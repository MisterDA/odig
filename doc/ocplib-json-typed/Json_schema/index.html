<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Json_schema (ocplib-json-typed.Json_schema)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ocplib-json-typed</a> &#x00BB; Json_schema</nav><h1>Module <code>Json_schema</code></h1><p>Abstract representation of JSON schemas as of version <code>http://json-schema.org/draft-04/schema#</code>.</p><nav class="toc"><ul><li><a href="#abstract-representation-of-schemas">Abstract representation of schemas</a></li><li><a href="#combinators-to-build-schemas-and-elements">Combinators to build schemas and elements</a></li><li><a href="#named-definitions">Named definitions</a></li><li><a href="#predefined-values">Predefined values</a></li><li><a href="#json-serialization">JSON Serialization</a></li><li><a href="#errors">Errors</a></li><li><a href="#advanced-interface-for-using-a-custom-json-representation">Advanced interface for using a custom JSON representation</a></li></ul></nav></header><section><header><h3 id="abstract-representation-of-schemas"><a href="#abstract-representation-of-schemas" class="anchor"></a>Abstract representation of schemas</h3></header><dl><dt class="spec type" id="type-schema"><a href="#type-schema" class="anchor"></a><code><span class="keyword">type</span> schema</code></dt><dd><p>A JSON schema root.</p></dd></dl><dl><dt class="spec type" id="type-element"><a href="#type-element" class="anchor"></a><code><span class="keyword">and</span> element</code><code> = </code><code>{</code><table class="record"><tr id="type-element.title" class="anchored"><td class="def field"><a href="#type-element.title" class="anchor"></a><code>title : string option;</code></td><td class="doc"><p>An optional short description.</p></td></tr><tr id="type-element.description" class="anchored"><td class="def field"><a href="#type-element.description" class="anchor"></a><code>description : string option;</code></td><td class="doc"><p>An optional long description.</p></td></tr><tr id="type-element.default" class="anchored"><td class="def field"><a href="#type-element.default" class="anchor"></a><code>default : <a href="../Json_repr/index.html#type-any">Json_repr.any</a> option;</code></td><td class="doc"><p>A default constant to be substituted in case of a missing value.</p></td></tr><tr id="type-element.enum" class="anchored"><td class="def field"><a href="#type-element.enum" class="anchor"></a><code>enum : <a href="../Json_repr/index.html#type-any">Json_repr.any</a> list option;</code></td><td class="doc"><p>A valid value must equal one of these constants.</p></td></tr><tr id="type-element.kind" class="anchored"><td class="def field"><a href="#type-element.kind" class="anchor"></a><code>kind : <a href="index.html#type-element_kind">element_kind</a>;</code></td><td class="doc"><p>The type-specific part.</p></td></tr><tr id="type-element.format" class="anchored"><td class="def field"><a href="#type-element.format" class="anchor"></a><code>format : string option;</code></td><td class="doc"><p>predefined formats such as <code>date-time</code>, <code>email</code>, <code>ipv4</code>, <code>ipv6</code>, <code>uri</code>.</p></td></tr><tr id="type-element.id" class="anchored"><td class="def field"><a href="#type-element.id" class="anchor"></a><code>id : string option;</code></td><td class="doc"><p>An optional ID.</p></td></tr></table><code>}</code></dt><dd><p>A node in the schema, embeds all type-agnostic specs.</p></dd></dl><dl><dt class="spec type" id="type-element_kind"><a href="#type-element_kind" class="anchor"></a><code><span class="keyword">and</span> element_kind</code><code> = </code><table class="variant"><tr id="type-element_kind.Object" class="anchored"><td class="def constructor"><a href="#type-element_kind.Object" class="anchor"></a><code>| </code><code><span class="constructor">Object</span> <span class="keyword">of</span> <a href="index.html#type-object_specs">object_specs</a></code></td><td class="doc"><p>The type of an object.</p></td></tr><tr id="type-element_kind.Array" class="anchored"><td class="def constructor"><a href="#type-element_kind.Array" class="anchor"></a><code>| </code><code><span class="constructor">Array</span> <span class="keyword">of</span> <a href="index.html#type-element">element</a> list * <a href="index.html#type-array_specs">array_specs</a></code></td><td class="doc"><p>An fixed-length array with the types of its elements (a tuple).</p></td></tr><tr id="type-element_kind.Monomorphic_array" class="anchored"><td class="def constructor"><a href="#type-element_kind.Monomorphic_array" class="anchor"></a><code>| </code><code><span class="constructor">Monomorphic_array</span> <span class="keyword">of</span> <a href="index.html#type-element">element</a> * <a href="index.html#type-array_specs">array_specs</a></code></td><td class="doc"><p>A variable-length array with the type of its children.</p></td></tr><tr id="type-element_kind.Combine" class="anchored"><td class="def constructor"><a href="#type-element_kind.Combine" class="anchor"></a><code>| </code><code><span class="constructor">Combine</span> <span class="keyword">of</span> <a href="index.html#type-combinator">combinator</a> * <a href="index.html#type-element">element</a> list</code></td><td class="doc"><p>A mix of schemas using logical combinators.</p></td></tr><tr id="type-element_kind.Def_ref" class="anchored"><td class="def constructor"><a href="#type-element_kind.Def_ref" class="anchor"></a><code>| </code><code><span class="constructor">Def_ref</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a></code></td><td class="doc"><p>A ref to an element from its path in the JSON representation.</p></td></tr><tr id="type-element_kind.Id_ref" class="anchored"><td class="def constructor"><a href="#type-element_kind.Id_ref" class="anchor"></a><code>| </code><code><span class="constructor">Id_ref</span> <span class="keyword">of</span> string</code></td><td class="doc"><p>A ref to an element from its ID.</p></td></tr><tr id="type-element_kind.Ext_ref" class="anchored"><td class="def constructor"><a href="#type-element_kind.Ext_ref" class="anchor"></a><code>| </code><code><span class="constructor">Ext_ref</span> <span class="keyword">of</span> <a href="../../uri/Uri/index.html#type-t">Uri.t</a></code></td><td class="doc"><p>A ref to an external element.</p></td></tr><tr id="type-element_kind.String" class="anchored"><td class="def constructor"><a href="#type-element_kind.String" class="anchor"></a><code>| </code><code><span class="constructor">String</span> <span class="keyword">of</span> <a href="index.html#type-string_specs">string_specs</a></code></td><td class="doc"><p>A string (with optional characteristics).</p></td></tr><tr id="type-element_kind.Integer" class="anchored"><td class="def constructor"><a href="#type-element_kind.Integer" class="anchor"></a><code>| </code><code><span class="constructor">Integer</span> <span class="keyword">of</span> <a href="index.html#type-numeric_specs">numeric_specs</a></code></td><td class="doc"><p>An int (with optional characteristics).</p></td></tr><tr id="type-element_kind.Number" class="anchored"><td class="def constructor"><a href="#type-element_kind.Number" class="anchor"></a><code>| </code><code><span class="constructor">Number</span> <span class="keyword">of</span> <a href="index.html#type-numeric_specs">numeric_specs</a></code></td><td class="doc"><p>A float (with optional characteristics).</p></td></tr><tr id="type-element_kind.Boolean" class="anchored"><td class="def constructor"><a href="#type-element_kind.Boolean" class="anchor"></a><code>| </code><code><span class="constructor">Boolean</span></code></td><td class="doc"><p>Any boolean.</p></td></tr><tr id="type-element_kind.Null" class="anchored"><td class="def constructor"><a href="#type-element_kind.Null" class="anchor"></a><code>| </code><code><span class="constructor">Null</span></code></td><td class="doc"><p>The null value.</p></td></tr><tr id="type-element_kind.Any" class="anchored"><td class="def constructor"><a href="#type-element_kind.Any" class="anchor"></a><code>| </code><code><span class="constructor">Any</span></code></td><td class="doc"><p>Any JSON value.</p></td></tr><tr id="type-element_kind.Dummy" class="anchored"><td class="def constructor"><a href="#type-element_kind.Dummy" class="anchor"></a><code>| </code><code><span class="constructor">Dummy</span></code></td><td class="doc"><p>For building cyclic definitions, a definition bound to a dummy will be considered absent for <a href="index.html#val-add_definition"><code>add_definition</code></a> but present for <a href="index.html#val-update"><code>update</code></a>. The idea is to insert a dummy definition, build a cyclic structure using it for recursion, and finally update the definition with the structure.</p></td></tr></table></dt><dd><p>The type-specific part of schema nodes.</p></dd></dl><dl><dt class="spec type" id="type-combinator"><a href="#type-combinator" class="anchor"></a><code><span class="keyword">and</span> combinator</code><code> = </code><table class="variant"><tr id="type-combinator.Any_of" class="anchored"><td class="def constructor"><a href="#type-combinator.Any_of" class="anchor"></a><code>| </code><code><span class="constructor">Any_of</span></code></td><td class="doc"><p>Logical OR n-ary combinator.</p></td></tr><tr id="type-combinator.One_of" class="anchored"><td class="def constructor"><a href="#type-combinator.One_of" class="anchor"></a><code>| </code><code><span class="constructor">One_of</span></code></td><td class="doc"><p>Logical XOR n-ary combinator.</p></td></tr><tr id="type-combinator.All_of" class="anchored"><td class="def constructor"><a href="#type-combinator.All_of" class="anchor"></a><code>| </code><code><span class="constructor">All_of</span></code></td><td class="doc"><p>Logical AND n-ary combinator.</p></td></tr><tr id="type-combinator.Not" class="anchored"><td class="def constructor"><a href="#type-combinator.Not" class="anchor"></a><code>| </code><code><span class="constructor">Not</span></code></td><td class="doc"><p>Logical NOT unary combinator.</p></td></tr></table></dt><dd><p>Grammar combinators.</p></dd></dl><dl><dt class="spec type" id="type-array_specs"><a href="#type-array_specs" class="anchor"></a><code><span class="keyword">and</span> array_specs</code><code> = </code><code>{</code><table class="record"><tr id="type-array_specs.min_items" class="anchored"><td class="def field"><a href="#type-array_specs.min_items" class="anchor"></a><code>min_items : int;</code></td><td class="doc"><p>The minimum number of elements.</p></td></tr><tr id="type-array_specs.max_items" class="anchored"><td class="def field"><a href="#type-array_specs.max_items" class="anchor"></a><code>max_items : int option;</code></td><td class="doc"><p>The maximum number of elements.</p></td></tr><tr id="type-array_specs.unique_items" class="anchored"><td class="def field"><a href="#type-array_specs.unique_items" class="anchor"></a><code>unique_items : bool;</code></td><td class="doc"><p>Teels if all elements must be different.</p></td></tr><tr id="type-array_specs.additional_items" class="anchored"><td class="def field"><a href="#type-array_specs.additional_items" class="anchor"></a><code>additional_items : <a href="index.html#type-element">element</a> option;</code></td><td class="doc"><p>The type of additional items, if allowed.</p></td></tr></table><code>}</code></dt><dd><p>Parameters of the <code>Array</code> and <code>MonomorphicArray</code> type specifiers.</p></dd></dl><dl><dt class="spec type" id="type-numeric_specs"><a href="#type-numeric_specs" class="anchor"></a><code><span class="keyword">and</span> numeric_specs</code><code> = </code><code>{</code><table class="record"><tr id="type-numeric_specs.multiple_of" class="anchored"><td class="def field"><a href="#type-numeric_specs.multiple_of" class="anchor"></a><code>multiple_of : float option;</code></td><td class="doc"><p>An optional divisor of valid values</p></td></tr><tr id="type-numeric_specs.minimum" class="anchored"><td class="def field"><a href="#type-numeric_specs.minimum" class="anchor"></a><code>minimum : (float * [ `Inclusive | `Exclusive ]) option;</code></td><td class="doc"><p>The optional lower bound of the numeric range</p></td></tr><tr id="type-numeric_specs.maximum" class="anchored"><td class="def field"><a href="#type-numeric_specs.maximum" class="anchor"></a><code>maximum : (float * [ `Inclusive | `Exclusive ]) option;</code></td><td class="doc"><p>The optional upper bound of the numeric range</p></td></tr></table><code>}</code></dt><dd><p>Parameters of the <code>Integer</code> and <code>Number</code> type specifiers.</p></dd></dl><dl><dt class="spec type" id="type-object_specs"><a href="#type-object_specs" class="anchor"></a><code><span class="keyword">and</span> object_specs</code><code> = </code><code>{</code><table class="record"><tr id="type-object_specs.properties" class="anchored"><td class="def field"><a href="#type-object_specs.properties" class="anchor"></a><code>properties : (string * <a href="index.html#type-element">element</a> * bool * <a href="../Json_repr/index.html#type-any">Json_repr.any</a> option) list;</code></td><td class="doc"><p>The names and types of properties, with a flag to indicate if they are required (<code>true</code>) or optional.</p></td></tr><tr id="type-object_specs.pattern_properties" class="anchored"><td class="def field"><a href="#type-object_specs.pattern_properties" class="anchor"></a><code>pattern_properties : (string * <a href="index.html#type-element">element</a>) list;</code></td><td class="doc"><p>Alternative definition of properties, matching field names using regexps instead of constant strings.</p></td></tr><tr id="type-object_specs.additional_properties" class="anchored"><td class="def field"><a href="#type-object_specs.additional_properties" class="anchor"></a><code>additional_properties : <a href="index.html#type-element">element</a> option;</code></td><td class="doc"><p>The type of additional properties, if allowed.</p></td></tr><tr id="type-object_specs.min_properties" class="anchored"><td class="def field"><a href="#type-object_specs.min_properties" class="anchor"></a><code>min_properties : int;</code></td><td class="doc"><p>The minimum number of properties.</p></td></tr><tr id="type-object_specs.max_properties" class="anchored"><td class="def field"><a href="#type-object_specs.max_properties" class="anchor"></a><code>max_properties : int option;</code></td><td class="doc"><p>The maximum number of properties.</p></td></tr><tr id="type-object_specs.schema_dependencies" class="anchored"><td class="def field"><a href="#type-object_specs.schema_dependencies" class="anchor"></a><code>schema_dependencies : (string * <a href="index.html#type-element">element</a>) list;</code></td><td class="doc"><p>Additional schemas the value must verify if a property is present (property, additional schema).</p></td></tr><tr id="type-object_specs.property_dependencies" class="anchored"><td class="def field"><a href="#type-object_specs.property_dependencies" class="anchor"></a><code>property_dependencies : (string * string list) list;</code></td><td class="doc"><p>Additional properties required whenever some property is present (property, additional properties).</p></td></tr></table><code>}</code></dt><dd><p>Parameters of the <code>Object</code> type specifier.</p></dd></dl><dl><dt class="spec type" id="type-string_specs"><a href="#type-string_specs" class="anchor"></a><code><span class="keyword">and</span> string_specs</code><code> = </code><code>{</code><table class="record"><tr id="type-string_specs.pattern" class="anchored"><td class="def field"><a href="#type-string_specs.pattern" class="anchor"></a><code>pattern : string option;</code></td><td class="doc"><p>A regexp the string must conform to.</p></td></tr><tr id="type-string_specs.min_length" class="anchored"><td class="def field"><a href="#type-string_specs.min_length" class="anchor"></a><code>min_length : int;</code></td><td class="doc"><p>The minimum string length.</p></td></tr><tr id="type-string_specs.max_length" class="anchored"><td class="def field"><a href="#type-string_specs.max_length" class="anchor"></a><code>max_length : int option;</code></td><td class="doc"><p>The maximum string length.</p></td></tr></table><code>}</code></dt><dd><p>Parameters of the <code>String</code> type specifier.</p></dd></dl></section><section><header><h3 id="combinators-to-build-schemas-and-elements"><a href="#combinators-to-build-schemas-and-elements" class="anchor"></a>Combinators to build schemas and elements</h3></header><dl><dt class="spec value" id="val-element"><a href="#val-element" class="anchor"></a><code><span class="keyword">val</span> element : <a href="index.html#type-element_kind">element_kind</a> <span>&#45;&gt;</span> <a href="index.html#type-element">element</a></code></dt><dd><p>Construct a naked element (all optional properties to None).</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : <a href="index.html#type-element">element</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a></code></dt><dd><p>Construct a schema from its root, without any definition ; the element is checked not to contain any <code>Def</code> element.</p></dd></dl><dl><dt class="spec value" id="val-root"><a href="#val-root" class="anchor"></a><code><span class="keyword">val</span> root : <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="index.html#type-element">element</a></code></dt><dd><p>Extract the root element from an existing schema.</p></dd></dl><dl><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val</span> update : <a href="index.html#type-element">element</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a></code></dt><dd><p>Update a schema from its root, using the definitions from an existing schema ; the element is checked to contain only valid <code>Def</code> elements ; unused definitions are kept, see <a href="index.html#val-simplify"><code>simplify</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-self"><a href="#val-self" class="anchor"></a><code><span class="keyword">val</span> self : <a href="index.html#type-schema">schema</a></code></dt><dd><p>Describes the implemented schema specification as a schema.</p></dd></dl><dl><dt class="spec value" id="val-any"><a href="#val-any" class="anchor"></a><code><span class="keyword">val</span> any : <a href="index.html#type-schema">schema</a></code></dt><dd><p>A completely generic schema, without any definition.</p></dd></dl><dl><dt class="spec value" id="val-combine"><a href="#val-combine" class="anchor"></a><code><span class="keyword">val</span> combine : <a href="index.html#type-combinator">combinator</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> list <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a></code></dt><dd><p>Combines several schemas.</p></dd></dl><dl><dt class="spec value" id="val-is_nullable"><a href="#val-is_nullable" class="anchor"></a><code><span class="keyword">val</span> is_nullable : <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Tells is a schema accepts null.</p></dd></dl></section><section><header><h3 id="named-definitions"><a href="#named-definitions" class="anchor"></a>Named definitions</h3></header><dl><dt class="spec value" id="val-merge_definitions"><a href="#val-merge_definitions" class="anchor"></a><code><span class="keyword">val</span> merge_definitions : (<a href="index.html#type-schema">schema</a> * <a href="index.html#type-schema">schema</a>) <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> * <a href="index.html#type-schema">schema</a></code></dt><dd><p>Merges the definitions of two schemas if possible and returns the updated schemas, so that their elements can be mixed without introducing dangling references ; if two different definitions are bound to the same path, <a href="index.html#exception-Duplicate_definition"><code>Duplicate_definition</code></a> will be raised.</p></dd></dl><dl><dt class="spec value" id="val-simplify"><a href="#val-simplify" class="anchor"></a><code><span class="keyword">val</span> simplify : <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a></code></dt><dd><p>Remove the definitions that are not present in the schema.</p></dd></dl><dl><dt class="spec value" id="val-add_definition"><a href="#val-add_definition" class="anchor"></a><code><span class="keyword">val</span> add_definition : ?&#8288;definitions_path:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-element">element</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> * <a href="index.html#type-element">element</a></code></dt><dd><p>Adds a definition by its path. If the path is absolute (starting with a <code>'/'</code>), it is untouched. Otherwise, it is considered relative to <code>&quot;#/definitions&quot;</code> as recommended by the standard. May raise <a href="index.html#exception-Duplicate_definition"><code>Duplicate_definition</code></a> if this path is already used or any error raised by <span class="xref-unresolved" title="unresolved reference to &quot;Json_repr.path_of_json_pointer&quot;"><a href="../Json_repr/index.html"><code>Json_repr</code></a>.path_of_json_pointer</span> with <code>~wildcards:false</code>. Returns the modified schema and the <code>Def_ref</code> node that references this definition to be used in the schema.</p></dd></dl><dl><dt class="spec value" id="val-find_definition"><a href="#val-find_definition" class="anchor"></a><code><span class="keyword">val</span> find_definition : ?&#8288;definitions_path:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="index.html#type-element">element</a></code></dt><dd><p>Finds a definition by its path, may raise <code>Not_found</code>. See <a href="index.html#val-add_definition"><code>add_definition</code></a> for the name format.</p></dd></dl><dl><dt class="spec value" id="val-definition_exists"><a href="#val-definition_exists" class="anchor"></a><code><span class="keyword">val</span> definition_exists : ?&#8288;definitions_path:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Tells if a path leads to a definition. See <a href="index.html#val-add_definition"><code>add_definition</code></a> for the name format.</p></dd></dl><dl><dt class="spec value" id="val-definition_ref"><a href="#val-definition_ref" class="anchor"></a><code><span class="keyword">val</span> definition_ref : ?&#8288;definitions_path:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-element">element</a></code></dt><dd><p>Build a reference to a definition. See <a href="index.html#val-add_definition"><code>add_definition</code></a> for the name format.</p></dd></dl></section><section><header><h3 id="predefined-values"><a href="#predefined-values" class="anchor"></a>Predefined values</h3></header><dl><dt class="spec value" id="val-array_specs"><a href="#val-array_specs" class="anchor"></a><code><span class="keyword">val</span> array_specs : <a href="index.html#type-array_specs">array_specs</a></code></dt><dd><p>Default Parameters of the <code>Array</code> and <code>MonomorphicArray</code> type specifiers.</p></dd></dl><dl><dt class="spec value" id="val-object_specs"><a href="#val-object_specs" class="anchor"></a><code><span class="keyword">val</span> object_specs : <a href="index.html#type-object_specs">object_specs</a></code></dt><dd><p>Default parameters of the <code>Object</code> type specifier.</p></dd></dl><dl><dt class="spec value" id="val-string_specs"><a href="#val-string_specs" class="anchor"></a><code><span class="keyword">val</span> string_specs : <a href="index.html#type-string_specs">string_specs</a></code></dt><dd><p>Default parameters of the <code>String</code> type specifier.</p></dd></dl><dl><dt class="spec value" id="val-numeric_specs"><a href="#val-numeric_specs" class="anchor"></a><code><span class="keyword">val</span> numeric_specs : <a href="index.html#type-numeric_specs">numeric_specs</a></code></dt><dd><p>Default parameters of the <code>Integer</code> and <code>Number</code> type specifiers.</p></dd></dl></section><section><header><h3 id="json-serialization"><a href="#json-serialization" class="anchor"></a>JSON Serialization</h3></header><dl><dt class="spec value" id="val-to_json"><a href="#val-to_json" class="anchor"></a><code><span class="keyword">val</span> to_json : <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> <a href="../Json_repr/index.html#type-ezjsonm">Json_repr.ezjsonm</a></code></dt><dd><p>Formats a JSON schema as its JSON representation.</p><p>This function works with JSON data represented in the <a href="../Json_repr/index.html#type-ezjsonm"><code>Json_repr.ezjsonm</code></a> format. See functor <a href="Make/index.html"><code>Make</code></a> for using another representation.</p></dd></dl><dl><dt class="spec value" id="val-of_json"><a href="#val-of_json" class="anchor"></a><code><span class="keyword">val</span> of_json : <a href="../Json_repr/index.html#type-ezjsonm">Json_repr.ezjsonm</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a></code></dt><dd><p>Parse a JSON structure as a JSON schema, if possible. May throw <a href="index.html#exception-Cannot_parse"><code>Cannot_parse</code></a>.</p><p>This function works with JSON data represented in the <a href="../Json_repr/index.html#type-ezjsonm"><code>Json_repr.ezjsonm</code></a> format. See functor <a href="Make/index.html"><code>Make</code></a> for using another representation.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-schema">schema</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Formats a JSON schema in human readable format.</p></dd></dl></section><section><header><h3 id="errors"><a href="#errors" class="anchor"></a>Errors</h3></header><dl><dt class="spec exception" id="exception-Cannot_parse"><a href="#exception-Cannot_parse" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Cannot_parse</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a> * exn</code></dt><dd><p>An error happened during parsing. May box one of the following exceptions, among others..</p></dd></dl><dl><dt class="spec exception" id="exception-Dangling_reference"><a href="#exception-Dangling_reference" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Dangling_reference</span> <span class="keyword">of</span> <a href="../../uri/Uri/index.html#type-t">Uri.t</a></code></dt><dd><p>A reference to a non-existent location was detected.</p></dd></dl><dl><dt class="spec exception" id="exception-Bad_reference"><a href="#exception-Bad_reference" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Bad_reference</span> <span class="keyword">of</span> string</code></dt><dd><p>A reference litteral could not be understood.</p></dd></dl><dl><dt class="spec exception" id="exception-Unexpected"><a href="#exception-Unexpected" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Unexpected</span> <span class="keyword">of</span> string * string</code></dt><dd><p>An unexpected kind of JSON value was encountered.</p></dd></dl><dl><dt class="spec exception" id="exception-Duplicate_definition"><a href="#exception-Duplicate_definition" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Duplicate_definition</span> <span class="keyword">of</span> <a href="../Json_query/index.html#type-path">Json_query.path</a> * <a href="index.html#type-element">element</a> * <a href="index.html#type-element">element</a></code></dt><dd><p>A non-<code>Dummy</code> definition appeared twice on insertion or merge.</p></dd></dl><dl><dt class="spec value" id="val-print_error"><a href="#val-print_error" class="anchor"></a><code><span class="keyword">val</span> print_error : ?&#8288;print_unknown:(<a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> exn <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> exn <span>&#45;&gt;</span> unit</code></dt><dd><p>Produces a human readable version of an error.</p></dd></dl></section><section><header><h3 id="advanced-interface-for-using-a-custom-json-representation"><a href="#advanced-interface-for-using-a-custom-json-representation" class="anchor"></a>Advanced interface for using a custom JSON representation</h3></header><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-Repr/index.html">Repr</a> : <a href="../Json_repr/index.html#module-type-Repr">Json_repr.Repr</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>