<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Omd (omd.Omd)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">omd</a> &#x00BB; Omd</nav><h1>Module <code>Omd</code></h1><p>A markdown parser in OCaml, with no extra dependencies.</p><p>This module represents this entire Markdown library written in OCaml only.</p><p>Its main purpose is to allow you to use the Markdown library while keeping you away from the other modules.</p><p>If you want to extend the Markdown parser, you can do it without accessing any module of this library but this one, and by doing so, you are free from having to maintain a fork of this library.</p><p>N.B. This module is supposed to be reentrant, if it's not then please report the bug.</p><nav class="toc"><ul><li><a href="#representation-of-markdown-documents">Representation of Markdown documents</a></li><li><a href="#input-and-output">Input and Output</a></li><li><a href="#tansforming-markdown-documents">Tansforming Markdown documents</a></li></ul></nav></header><section><header><h3 id="representation-of-markdown-documents"><a href="#representation-of-markdown-documents" class="anchor"></a>Representation of Markdown documents</h3></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="index.html#type-element">element</a> list</code></dt><dd><p>Representation of a Markdown document.</p></dd></dl><dl><dt class="spec type" id="type-ref_container"><a href="#type-ref_container" class="anchor"></a><code><span class="keyword">and </span>ref_container</code><code><span class="keyword"> = </span>&lt; add_ref : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit; get_ref : string <span>&#45;&gt;</span> (string<span class="keyword"> * </span>string) option; get_all : (string<span class="keyword"> * </span>(string<span class="keyword"> * </span>string)) list; &gt;</code></dt><dt class="spec type" id="type-element"><a href="#type-element" class="anchor"></a><code><span class="keyword">and </span>element</code><code><span class="keyword"> = </span>Omd_representation.element</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-element.H1" class="anchored"><td class="def constructor"><a href="#type-element.H1" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H1</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 1</p></td></tr><tr id="type-element.H2" class="anchored"><td class="def constructor"><a href="#type-element.H2" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H2</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 2</p></td></tr><tr id="type-element.H3" class="anchored"><td class="def constructor"><a href="#type-element.H3" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H3</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 3</p></td></tr><tr id="type-element.H4" class="anchored"><td class="def constructor"><a href="#type-element.H4" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H4</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 4</p></td></tr><tr id="type-element.H5" class="anchored"><td class="def constructor"><a href="#type-element.H5" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H5</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 5</p></td></tr><tr id="type-element.H6" class="anchored"><td class="def constructor"><a href="#type-element.H6" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">H6</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Header of level 6</p></td></tr><tr id="type-element.Paragraph" class="anchored"><td class="def constructor"><a href="#type-element.Paragraph" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Paragraph</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>A Markdown paragraph (must be enabled in <a href="index.html#val-of_string"><code>of_string</code></a>)</p></td></tr><tr id="type-element.Text" class="anchored"><td class="def constructor"><a href="#type-element.Text" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Text</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>Text.</p></td></tr><tr id="type-element.Emph" class="anchored"><td class="def constructor"><a href="#type-element.Emph" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Emph</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Emphasis (italic)</p></td></tr><tr id="type-element.Bold" class="anchored"><td class="def constructor"><a href="#type-element.Bold" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Bold</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Bold</p></td></tr><tr id="type-element.Ul" class="anchored"><td class="def constructor"><a href="#type-element.Ul" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Ul</span><span class="keyword"> of </span><a href="index.html#type-t">t</a> list</code></td><td class="doc"><p>Unumbered list</p></td></tr><tr id="type-element.Ol" class="anchored"><td class="def constructor"><a href="#type-element.Ol" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Ol</span><span class="keyword"> of </span><a href="index.html#type-t">t</a> list</code></td><td class="doc"><p>Ordered (i.e. numbered) list</p></td></tr><tr id="type-element.Ulp" class="anchored"><td class="def constructor"><a href="#type-element.Ulp" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Ulp</span><span class="keyword"> of </span><a href="index.html#type-t">t</a> list</code></td></tr><tr id="type-element.Olp" class="anchored"><td class="def constructor"><a href="#type-element.Olp" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Olp</span><span class="keyword"> of </span><a href="index.html#type-t">t</a> list</code></td></tr><tr id="type-element.Code" class="anchored"><td class="def constructor"><a href="#type-element.Code" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Code</span><span class="keyword"> of </span><a href="index.html#type-name">name</a><span class="keyword"> * </span>string</code></td><td class="doc"><p><code>Code(lang, code)</code> represent <code>code</code> within the text (Markdown: `code`). The language <code>lang</code> cannot be specified from Markdown, it can be from <a href="index.html#val-of_string"><code>of_string</code></a> though or when programatically generating Markdown documents. Beware that the <code>code</code> is taken verbatim from Markdown and may contain characters that must be escaped for HTML.</p></td></tr><tr id="type-element.Code_block" class="anchored"><td class="def constructor"><a href="#type-element.Code_block" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Code_block</span><span class="keyword"> of </span><a href="index.html#type-name">name</a><span class="keyword"> * </span>string</code></td><td class="doc"><p><code>Code_block(lang, code)</code>: a code clock (e.g. indented by 4 spaces in the text). The first parameter <code>lang</code> is the language if specified. Beware that the <code>code</code> is taken verbatim from Markdown and may contain characters that must be escaped for HTML.</p></td></tr><tr id="type-element.Br" class="anchored"><td class="def constructor"><a href="#type-element.Br" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Br</span></code></td><td class="doc"><p>(Forced) line break</p></td></tr><tr id="type-element.Hr" class="anchored"><td class="def constructor"><a href="#type-element.Hr" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Hr</span></code></td><td class="doc"><p>Horizontal rule</p></td></tr><tr id="type-element.NL" class="anchored"><td class="def constructor"><a href="#type-element.NL" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NL</span></code></td><td class="doc"><p>Newline character. Newline characters that act like delimiters (e.g. for paragraphs) are removed from the AST.</p></td></tr><tr id="type-element.Url" class="anchored"><td class="def constructor"><a href="#type-element.Url" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Url</span><span class="keyword"> of </span><a href="index.html#type-href">href</a><span class="keyword"> * </span><a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-title">title</a></code></td></tr><tr id="type-element.Ref" class="anchored"><td class="def constructor"><a href="#type-element.Ref" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Ref</span><span class="keyword"> of </span><a href="index.html#type-ref_container">ref_container</a><span class="keyword"> * </span><a href="index.html#type-name">name</a><span class="keyword"> * </span>string<span class="keyword"> * </span><a href="index.html#type-fallback">fallback</a></code></td></tr><tr id="type-element.Img_ref" class="anchored"><td class="def constructor"><a href="#type-element.Img_ref" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Img_ref</span><span class="keyword"> of </span><a href="index.html#type-ref_container">ref_container</a><span class="keyword"> * </span><a href="index.html#type-name">name</a><span class="keyword"> * </span><a href="index.html#type-alt">alt</a><span class="keyword"> * </span><a href="index.html#type-fallback">fallback</a></code></td></tr><tr id="type-element.Html" class="anchored"><td class="def constructor"><a href="#type-element.Html" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Html</span><span class="keyword"> of </span><a href="index.html#type-name">name</a><span class="keyword"> * </span>(string<span class="keyword"> * </span>string option) list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></td></tr><tr id="type-element.Html_block" class="anchored"><td class="def constructor"><a href="#type-element.Html_block" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Html_block</span><span class="keyword"> of </span><a href="index.html#type-name">name</a><span class="keyword"> * </span>(string<span class="keyword"> * </span>string option) list<span class="keyword"> * </span><a href="index.html#type-t">t</a></code></td></tr><tr id="type-element.Html_comment" class="anchored"><td class="def constructor"><a href="#type-element.Html_comment" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Html_comment</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>An HTML comment, including &quot;&lt;!--&quot; and &quot;--&gt;&quot;.</p></td></tr><tr id="type-element.Raw" class="anchored"><td class="def constructor"><a href="#type-element.Raw" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Raw</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>Raw: something that shall never be converted</p></td></tr><tr id="type-element.Raw_block" class="anchored"><td class="def constructor"><a href="#type-element.Raw_block" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Raw_block</span><span class="keyword"> of </span>string</code></td><td class="doc"><p>Raw_block: a block with contents that shall never be converted</p></td></tr><tr id="type-element.Blockquote" class="anchored"><td class="def constructor"><a href="#type-element.Blockquote" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Blockquote</span><span class="keyword"> of </span><a href="index.html#type-t">t</a></code></td><td class="doc"><p>Quoted block</p></td></tr><tr id="type-element.Img" class="anchored"><td class="def constructor"><a href="#type-element.Img" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Img</span><span class="keyword"> of </span><a href="index.html#type-alt">alt</a><span class="keyword"> * </span><a href="index.html#type-src">src</a><span class="keyword"> * </span><a href="index.html#type-title">title</a></code></td></tr><tr id="type-element.X" class="anchored"><td class="def constructor"><a href="#type-element.X" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">X</span><span class="keyword"> of </span>&lt; name : string; to_html : ?&#8288;indent:int <span>&#45;&gt;</span> (<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string option; to_sexpr : (<a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string option; to_t : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> option; &gt;</code></td></tr></table></dt><dd><p>A element of a Markdown document.</p></dd></dl><dl><dt class="spec type" id="type-fallback"><a href="#type-fallback" class="anchor"></a><code><span class="keyword">and </span>fallback</code><code><span class="keyword"> = </span>&lt; to_string : string; to_t : <a href="index.html#type-t">t</a>; &gt;</code></dt><dd><p>Fallback for references in case they refer to non-existant references</p></dd></dl><dl><dt class="spec type" id="type-name"><a href="#type-name" class="anchor"></a><code><span class="keyword">and </span>name</code><code><span class="keyword"> = </span>string</code></dt><dd><p>Markdown reference name.</p></dd></dl><dl><dt class="spec type" id="type-alt"><a href="#type-alt" class="anchor"></a><code><span class="keyword">and </span>alt</code><code><span class="keyword"> = </span>string</code></dt><dd><p>HTML img tag attribute.</p></dd></dl><dl><dt class="spec type" id="type-src"><a href="#type-src" class="anchor"></a><code><span class="keyword">and </span>src</code><code><span class="keyword"> = </span>string</code></dt><dd><p>HTML attribute.</p></dd></dl><dl><dt class="spec type" id="type-href"><a href="#type-href" class="anchor"></a><code><span class="keyword">and </span>href</code><code><span class="keyword"> = </span>string</code></dt><dd><p>HTML attribute.</p></dd></dl><dl><dt class="spec type" id="type-title"><a href="#type-title" class="anchor"></a><code><span class="keyword">and </span>title</code><code><span class="keyword"> = </span>string</code></dt><dd><p>HTML attribute.</p></dd></dl><dl><dt class="spec type" id="type-code_stylist"><a href="#type-code_stylist" class="anchor"></a><code><span class="keyword">type </span>code_stylist</code><code><span class="keyword"> = </span>lang:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string</code></dt><dd><p>Function that takes a language name and some code and returns that code with style.</p></dd></dl></section><section><header><h3 id="input-and-output"><a href="#input-and-output" class="anchor"></a>Input and Output</h3></header><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val </span>of_string : ?&#8288;extensions:Omd_representation.extensions <span>&#45;&gt;</span> ?&#8288;default_lang:<a href="index.html#type-name">name</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_string s</code> returns the Markdown representation of the string <code>s</code>.</p><dl><dt>parameter lang</dt><dd><p>language for blocks of code where it was not specified. Default: <code>&quot;&quot;</code>.</p><p>If you want to use a custom lexer or parser, use <span class="xref-unresolved" title="unresolved reference to &quot;Omd_lexer.lex&quot;"><code>Omd_lexer</code>.lex</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Omd_parser.parse&quot;"><code>Omd_parser</code>.parse</span>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-of_bigarray"><a href="#val-of_bigarray" class="anchor"></a><code><span class="keyword">val </span>of_bigarray : ?&#8288;extensions:Omd_representation.extensions <span>&#45;&gt;</span> ?&#8288;default_lang:<a href="index.html#type-name">name</a> <span>&#45;&gt;</span> Omd_lexer.bigstring <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>As <a href="index.html#val-of_string"><code>of_string</code></a>, but read input from a bigarray rather than from a string.</p></dd></dl><dl><dt class="spec value" id="val-set_default_lang"><a href="#val-set_default_lang" class="anchor"></a><code><span class="keyword">val </span>set_default_lang : <a href="index.html#type-name">name</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>set_default_lang lang md</code> return a copy of <code>md</code> where the language of all <code>Code</code> or <code>Code_block</code> with an empty language is set to <code>lang</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_html"><a href="#val-to_html" class="anchor"></a><code><span class="keyword">val </span>to_html : ?&#8288;override:(Omd_representation.element <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;pindent:bool <span>&#45;&gt;</span> ?&#8288;nl2br:bool <span>&#45;&gt;</span> ?&#8288;cs:<a href="index.html#type-code_stylist">code_stylist</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Translate markdown representation into raw HTML. If you need a full HTML representation, you mainly have to figure out how to convert <code>Html of string</code> and <code>Html_block of string</code> into your HTML representation.</p></dd></dl><dl><dt class="spec value" id="val-to_markdown"><a href="#val-to_markdown" class="anchor"></a><code><span class="keyword">val </span>to_markdown : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Translate markdown representation into textual markdown.</p></dd></dl><dl><dt class="spec value" id="val-to_text"><a href="#val-to_text" class="anchor"></a><code><span class="keyword">val </span>to_text : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p>Translate markdown representation into raw text.</p></dd></dl></section><section><header><h3 id="tansforming-markdown-documents"><a href="#tansforming-markdown-documents" class="anchor"></a>Tansforming Markdown documents</h3></header><dl><dt class="spec value" id="val-toc"><a href="#val-toc" class="anchor"></a><code><span class="keyword">val </span>toc : ?&#8288;start:int list <span>&#45;&gt;</span> ?&#8288;depth:int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>toc md</code> returns <code>toc</code> a table of contents for <code>md</code>.</p><dl><dt>parameter start</dt><dd><p>gives the section for which the TOC must be built. For example <code>~start:[2;3]</code> will build the TOC for subsections of the second <code>H1</code> header, and within that section, the third <code>h2</code> header. If a number is <code>0</code>, it means to look for the first section at that level but stop if one encounters any other subsection. If no subsection exists, an empty TOC <code>[]</code> will be returned. Default: <code>[]</code> i.e. list all sections, starting with the first <code>H1</code>.</p></dd></dl><dl><dt>parameter depth</dt><dd><p>the table of contents. Default: <code>2</code>.</p></dd></dl></dd></dl></section></div></body></html>