<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamSolver (opam-lib.OpamSolver)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">opam-lib</a> &#x00BB; OpamSolver</nav><h1>Module <code>OpamSolver</code></h1><p>SAT-solver for package dependencies and conflicts</p><nav class="toc"><ul><li><a href="#solver">Solver</a></li></ul></nav></header><div class="spec module" id="module-Action"><a href="#module-Action" class="anchor"></a><code><span class="keyword">module </span>Action : OpamActionGraph.ACTION<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Action">Action</a>.package<span class="keyword"> = </span>OpamTypes.package</code></div><div class="spec module" id="module-ActionGraph"><a href="#module-ActionGraph" class="anchor"></a><code><span class="keyword">module </span>ActionGraph : OpamActionGraph.SIG<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-ActionGraph">ActionGraph</a>.package<span class="keyword"> = </span>OpamTypes.package</code></div><dl><dt class="spec type" id="type-solution"><a href="#type-solution" class="anchor"></a><code><span class="keyword">type </span>solution</code></dt></dl><dl><dt class="spec value" id="val-empty_universe"><a href="#val-empty_universe" class="anchor"></a><code><span class="keyword">val </span>empty_universe : OpamTypes.universe</code></dt></dl><section><header><h3 id="solver"><a href="#solver" class="anchor"></a>Solver</h3></header><dl><dt class="spec value" id="val-string_of_request"><a href="#val-string_of_request" class="anchor"></a><code><span class="keyword">val </span>string_of_request : OpamTypes.atom OpamTypes.request <span>&#45;&gt;</span> string</code></dt><dd><p>Convert a request to a string</p></dd></dl><dl><dt class="spec value" id="val-stats"><a href="#val-stats" class="anchor"></a><code><span class="keyword">val </span>stats : <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> OpamTypes.stats</code></dt><dd><p>Compute statistics about a solution</p></dd></dl><dl><dt class="spec value" id="val-new_packages"><a href="#val-new_packages" class="anchor"></a><code><span class="keyword">val </span>new_packages : <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> OpamTypes.package_set</code></dt><dd><p>Return the new packages in the solution</p></dd></dl><dl><dt class="spec value" id="val-string_of_stats"><a href="#val-string_of_stats" class="anchor"></a><code><span class="keyword">val </span>string_of_stats : OpamTypes.stats <span>&#45;&gt;</span> string</code></dt><dd><p>Pretty-printing of statistics</p></dd></dl><dl><dt class="spec value" id="val-solution_is_empty"><a href="#val-solution_is_empty" class="anchor"></a><code><span class="keyword">val </span>solution_is_empty : <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Is the solution empty ?</p></dd></dl><dl><dt class="spec value" id="val-print_solution"><a href="#val-print_solution" class="anchor"></a><code><span class="keyword">val </span>print_solution : messages:(OpamTypes.package <span>&#45;&gt;</span> string list) <span>&#45;&gt;</span> rewrite:(OpamTypes.package <span>&#45;&gt;</span> OpamTypes.package) <span>&#45;&gt;</span> requested:OpamTypes.name_set <span>&#45;&gt;</span> <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Display a solution</p></dd></dl><dl><dt class="spec value" id="val-cudf_versions_map"><a href="#val-cudf_versions_map" class="anchor"></a><code><span class="keyword">val </span>cudf_versions_map : OpamTypes.universe <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> int OpamPackage.Map.t</code></dt><dd><p>Computes an opam-&gt;cudf version map from a set of package</p></dd></dl><dl><dt class="spec value" id="val-load_cudf_universe"><a href="#val-load_cudf_universe" class="anchor"></a><code><span class="keyword">val </span>load_cudf_universe : ?&#8288;depopts:bool <span>&#45;&gt;</span> build:bool <span>&#45;&gt;</span> OpamTypes.universe <span>&#45;&gt;</span> ?&#8288;version_map:int OpamTypes.package_map <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> Cudf.universe</code></dt><dd><p>Creates a CUDF universe from an OPAM universe, including the given packages</p></dd></dl><dl><dt class="spec value" id="val-resolve"><a href="#val-resolve" class="anchor"></a><code><span class="keyword">val </span>resolve : ?&#8288;verbose:bool <span>&#45;&gt;</span> OpamTypes.universe <span>&#45;&gt;</span> orphans:OpamTypes.package_set <span>&#45;&gt;</span> OpamTypes.atom OpamTypes.request <span>&#45;&gt;</span> (<a href="index.html#type-solution">solution</a>, OpamCudf.conflict) OpamTypes.result</code></dt><dd><p>Given a description of packages, return a solution preserving the consistency of the initial description.</p></dd></dl><dl><dt class="spec value" id="val-get_atomic_action_graph"><a href="#val-get_atomic_action_graph" class="anchor"></a><code><span class="keyword">val </span>get_atomic_action_graph : <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> <a href="index.html#module-ActionGraph">ActionGraph</a>.t</code></dt><dd><p>Returns the graph of atomic actions (rm, inst) from a solution</p></dd></dl><dl><dt class="spec value" id="val-installable"><a href="#val-installable" class="anchor"></a><code><span class="keyword">val </span>installable : OpamTypes.universe <span>&#45;&gt;</span> OpamTypes.package_set</code></dt><dd><p>Keep only the packages that are installable.</p></dd></dl><dl><dt class="spec value" id="val-dependencies"><a href="#val-dependencies" class="anchor"></a><code><span class="keyword">val </span>dependencies : depopts:bool <span>&#45;&gt;</span> build:bool <span>&#45;&gt;</span> installed:bool <span>&#45;&gt;</span> ?&#8288;unavailable:bool <span>&#45;&gt;</span> OpamTypes.universe <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> OpamTypes.package list</code></dt><dd><p>Return the topological sort of the transitive dependency closures of a collection of packages.</p></dd></dl><dl><dt class="spec value" id="val-reverse_dependencies"><a href="#val-reverse_dependencies" class="anchor"></a><code><span class="keyword">val </span>reverse_dependencies : depopts:bool <span>&#45;&gt;</span> build:bool <span>&#45;&gt;</span> installed:bool <span>&#45;&gt;</span> ?&#8288;unavailable:bool <span>&#45;&gt;</span> OpamTypes.universe <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> OpamTypes.package list</code></dt><dd><p>Same as <code>dependencies</code> but for reverse dependencies</p></dd></dl><dl><dt class="spec value" id="val-check_for_conflicts"><a href="#val-check_for_conflicts" class="anchor"></a><code><span class="keyword">val </span>check_for_conflicts : OpamTypes.universe <span>&#45;&gt;</span> OpamCudf.conflict option</code></dt><dd><p>Check the current set of installed packages in a universe for inconsistencies</p></dd></dl><dl><dt class="spec value" id="val-dump_universe"><a href="#val-dump_universe" class="anchor"></a><code><span class="keyword">val </span>dump_universe : OpamTypes.universe <span>&#45;&gt;</span> Pervasives.out_channel <span>&#45;&gt;</span> unit</code></dt><dd><p>Dumps a cudf file containing all available packages in the given universe, plus version bindings (as '#v2v' comments) for the other ones.</p></dd></dl><dl><dt class="spec value" id="val-filter_solution"><a href="#val-filter_solution" class="anchor"></a><code><span class="keyword">val </span>filter_solution : (OpamTypes.package <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <a href="index.html#type-solution">solution</a> <span>&#45;&gt;</span> <a href="index.html#type-solution">solution</a></code></dt><dd><p>Filters actions in a solution. Dependents of a removed actions are removed to keep consistency</p></dd></dl></section></div></body></html>