<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (opam-repository.OpamRepositoryBackend.S)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">opam-repository</a> &#x00BB; <a href="../index.html">OpamRepositoryBackend</a> &#x00BB; S</nav><h1>Module type <code>OpamRepositoryBackend.S</code></h1><p>Backend signature</p></header><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val </span>name : OpamUrl.backend</code></dt><dt class="spec value" id="val-pull_url"><a href="#val-pull_url" class="anchor"></a><code><span class="keyword">val </span>pull_url : ?&#8288;cache_dir:OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.dirname <span>&#45;&gt;</span> OpamHash.t option <span>&#45;&gt;</span> OpamTypes.url <span>&#45;&gt;</span> OpamTypes.filename option OpamTypes.download OpamProcess.job</code></dt><dd><p><code>pull_url local_dir checksum remote_url</code> pulls the contents of <code>remote_url</code> into <code>local_dir</code>.</p><p>Two kinds of results are allowed:</p><ul><li>a single file was downloaded, in this case it is placed within <code>local_dir</code> and returned as <code>Some filename</code></li></ul><ul><li>a directory was retrieved, in this case the contents of <code>local_dir</code> have been synchronised with its own, and <code>None</code> is returned</li></ul><p><code>checksum</code> can be used for retrieval but is NOT checked by this function.</p></dd></dl><dl><dt class="spec value" id="val-fetch_repo_update"><a href="#val-fetch_repo_update" class="anchor"></a><code><span class="keyword">val </span>fetch_repo_update : OpamTypes.repository_name <span>&#45;&gt;</span> ?&#8288;cache_dir:OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.url <span>&#45;&gt;</span> <a href="../index.html#type-update">update</a> OpamProcess.job</code></dt><dd><p><code>pull_repo_update</code> fetches the remote update from <code>url</code> to the local repository at <code>dirname</code>, but does not apply it, allowing for further verifications. The file or directory returned is always temporary and should be cleaned up by the caller.</p></dd></dl><dl><dt class="spec value" id="val-repo_update_complete"><a href="#val-repo_update_complete" class="anchor"></a><code><span class="keyword">val </span>repo_update_complete : OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.url <span>&#45;&gt;</span> unit OpamProcess.job</code></dt><dd><p><code>repo_update_complete dirname url</code> finalizes the update of the repository after verification of the patch returned from <code>pull_repo_update</code> with <code>Update_patch file</code> is applied. Version control systems, e.g. Mercurial, that track the state of the working directory automatically use this to update internal caches.</p></dd></dl><dl><dt class="spec value" id="val-revision"><a href="#val-revision" class="anchor"></a><code><span class="keyword">val </span>revision : OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.version option OpamProcess.job</code></dt><dd><p>Return the (optional) revision of a given repository. Only useful for VCS backends. Is not expected to work with <code>pull_repo_update</code>, which doesn't update the VCS commit information.</p></dd></dl><dl><dt class="spec value" id="val-sync_dirty"><a href="#val-sync_dirty" class="anchor"></a><code><span class="keyword">val </span>sync_dirty : OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.url <span>&#45;&gt;</span> OpamTypes.filename option OpamTypes.download OpamProcess.job</code></dt><dd><p>Like <code>pull_url</code>, except for locally-bound version control backends, where it should get the latest, uncommited source.</p></dd></dl></div></body></html>