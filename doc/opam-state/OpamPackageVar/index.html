<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamPackageVar (opam-state.OpamPackageVar)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">opam-state</a> &#x00BB; OpamPackageVar</nav><h1>Module <code>OpamPackageVar</code></h1><p>Resolution and handling of opam variables + filters</p></header><dl><dt class="spec value" id="val-global_variable_names"><a href="#val-global_variable_names" class="anchor"></a><code><span class="keyword">val </span>global_variable_names : (string<span class="keyword"> * </span>string) list</code></dt><dd><p>Lists of available switch-global variables and their description</p></dd></dl><dl><dt class="spec value" id="val-package_variable_names"><a href="#val-package_variable_names" class="anchor"></a><code><span class="keyword">val </span>package_variable_names : (string<span class="keyword"> * </span>string) list</code></dt><dd><p>Lists of predefined package variables and their description</p></dd></dl><dl><dt class="spec value" id="val-predefined_depends_variables"><a href="#val-predefined_depends_variables" class="anchor"></a><code><span class="keyword">val </span>predefined_depends_variables : OpamTypes.full_variable list</code></dt><dd><p>Variables that are pre-defined in the dependency filtered-formula scope, and which resolution is delayed to after the universe is computed (these are the only ones allowed in the universe, and resolved by <code>OpamFilter.filter_deps</code>)</p></dd></dl><dl><dt class="spec value" id="val-resolve_global"><a href="#val-resolve_global" class="anchor"></a><code><span class="keyword">val </span>resolve_global : <span class="type-var">'a</span> OpamStateTypes.global_state <span>&#45;&gt;</span> OpamTypes.full_variable <span>&#45;&gt;</span> OpamTypes.variable_contents option</code></dt><dd><p>Resolves globally available variables only</p></dd></dl><dl><dt class="spec value" id="val-resolve_switch"><a href="#val-resolve_switch" class="anchor"></a><code><span class="keyword">val </span>resolve_switch : ?&#8288;package:OpamTypes.package <span>&#45;&gt;</span> <span class="type-var">'a</span> OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamTypes.full_variable <span>&#45;&gt;</span> OpamTypes.variable_contents option</code></dt><dd><p>Resolves global variables within the context of a switch. If a package is specified, &quot;name&quot; and &quot;version&quot; as taken to exclusively resolve to the current package name and version.</p></dd></dl><dl><dt class="spec value" id="val-resolve"><a href="#val-resolve" class="anchor"></a><code><span class="keyword">val </span>resolve : <span class="type-var">'a</span> OpamStateTypes.switch_state <span>&#45;&gt;</span> ?&#8288;opam:OpamFile.OPAM.t <span>&#45;&gt;</span> ?&#8288;local:OpamVariable.variable_contents option OpamVariable.Map.t <span>&#45;&gt;</span> OpamFilter.env</code></dt><dd><p>Resolves filter variables, including global, switch and package variables ; a map of locally defined variables can be supplied, as well as the opam file of origin, which is used to resolve self-references (implicit <code>&quot;%{bin}%&quot;</code> or explicit <code>&quot;%{_:bin}%&quot;</code></p></dd></dl><dl><dt class="spec value" id="val-resolve_switch_raw"><a href="#val-resolve_switch_raw" class="anchor"></a><code><span class="keyword">val </span>resolve_switch_raw : ?&#8288;package:OpamTypes.package <span>&#45;&gt;</span> <span class="type-var">'a</span> OpamStateTypes.global_state <span>&#45;&gt;</span> OpamTypes.switch <span>&#45;&gt;</span> OpamFile.Switch_config.t <span>&#45;&gt;</span> OpamTypes.full_variable <span>&#45;&gt;</span> OpamTypes.variable_contents option</code></dt><dd><p>Like <code>resolve_switch</code>, but takes more specific parameters so that it can be used before the switch state is fully loaded</p></dd></dl><dl><dt class="spec value" id="val-is_dev_package"><a href="#val-is_dev_package" class="anchor"></a><code><span class="keyword">val </span>is_dev_package : <span class="type-var">'a</span> OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamFile.OPAM.t <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-filter_depends_formula"><a href="#val-filter_depends_formula" class="anchor"></a><code><span class="keyword">val </span>filter_depends_formula : ?&#8288;build:bool <span>&#45;&gt;</span> ?&#8288;post:bool <span>&#45;&gt;</span> ?&#8288;test:bool <span>&#45;&gt;</span> ?&#8288;doc:bool <span>&#45;&gt;</span> ?&#8288;dev:bool <span>&#45;&gt;</span> ?&#8288;default:bool <span>&#45;&gt;</span> env:OpamFilter.env <span>&#45;&gt;</span> OpamTypes.filtered_formula <span>&#45;&gt;</span> OpamTypes.formula</code></dt><dd><p>The defaults are <code>true</code> for <code>build</code>, false for <code>dev</code> and <code>post</code>, and defined by OpamStateConfig for <code>test</code> and <code>bool</code>.</p></dd></dl><dl><dt class="spec value" id="val-all_depends"><a href="#val-all_depends" class="anchor"></a><code><span class="keyword">val </span>all_depends : ?&#8288;build:bool <span>&#45;&gt;</span> ?&#8288;post:bool <span>&#45;&gt;</span> ?&#8288;test:bool <span>&#45;&gt;</span> ?&#8288;doc:bool <span>&#45;&gt;</span> ?&#8288;dev:bool <span>&#45;&gt;</span> ?&#8288;filter_default:bool <span>&#45;&gt;</span> ?&#8288;depopts:bool <span>&#45;&gt;</span> <span class="type-var">'a</span> OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamFile.OPAM.t <span>&#45;&gt;</span> OpamTypes.formula</code></dt><dd><p>Assumes <code>filter_default=false</code> by default, i.e. dependencies with undefined filters are discarded.</p></dd></dl></div></body></html>