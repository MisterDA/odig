<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpamSwitchAction (opam-state.OpamSwitchAction)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">opam-state</a> &#x00BB; OpamSwitchAction</nav><h1>Module <code>OpamSwitchAction</code></h1><p>Switch-related actions and changes</p></header><dl><dt class="spec value" id="val-create_empty_switch"><a href="#val-create_empty_switch" class="anchor"></a><code><span class="keyword">val </span>create_empty_switch : OpamStateTypes.rw OpamStateTypes.global_state <span>&#45;&gt;</span> ?&#8288;synopsis:string <span>&#45;&gt;</span> ?&#8288;repos:OpamTypes.repository_name list <span>&#45;&gt;</span> OpamTypes.switch <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.global_state</code></dt><dd><p>Initialises a new switch with the given name in the given opam root, registers it in the global config and returns the updated global state</p></dd></dl><dl><dt class="spec value" id="val-write_selections"><a href="#val-write_selections" class="anchor"></a><code><span class="keyword">val </span>write_selections : OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> unit</code></dt><dd><p>Writes the current state file to disk (installed, pinned, root packages etc.). Unless <code>OpamStateConfig.(!r.dryrun)</code></p></dd></dl><dl><dt class="spec value" id="val-set_current_switch"><a href="#val-set_current_switch" class="anchor"></a><code><span class="keyword">val </span>set_current_switch : <span class="type-var">'a</span> OpamStateTypes.lock <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.global_state <span>&#45;&gt;</span> ?&#8288;rt:<span class="type-var">'b</span> OpamStateTypes.repos_state <span>&#45;&gt;</span> OpamTypes.switch <span>&#45;&gt;</span> <span class="type-var">'a</span> OpamStateTypes.switch_state</code></dt><dd><p>Updates the defined default switch and loads its state; fails and exits with a message if the switch is external</p></dd></dl><dl><dt class="spec value" id="val-gen_switch_config"><a href="#val-gen_switch_config" class="anchor"></a><code><span class="keyword">val </span>gen_switch_config : OpamTypes.dirname <span>&#45;&gt;</span> ?&#8288;synopsis:string <span>&#45;&gt;</span> ?&#8288;repos:OpamTypes.repository_name list <span>&#45;&gt;</span> OpamTypes.switch <span>&#45;&gt;</span> OpamFile.Switch_config.t</code></dt><dd><p>Create the default global_config structure for a switch, including default prefix</p></dd></dl><dl><dt class="spec value" id="val-install_switch_config"><a href="#val-install_switch_config" class="anchor"></a><code><span class="keyword">val </span>install_switch_config : OpamTypes.dirname <span>&#45;&gt;</span> OpamTypes.switch <span>&#45;&gt;</span> OpamFile.Switch_config.t <span>&#45;&gt;</span> unit</code></dt><dd><p>(Re-)install the configuration for a given root and switch</p></dd></dl><dl><dt class="spec value" id="val-install_metadata"><a href="#val-install_metadata" class="anchor"></a><code><span class="keyword">val </span>install_metadata : OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamTypes.package <span>&#45;&gt;</span> unit</code></dt><dd><p>Add the package metadata to the switch-local cache of installed packages</p></dd></dl><dl><dt class="spec value" id="val-remove_metadata"><a href="#val-remove_metadata" class="anchor"></a><code><span class="keyword">val </span>remove_metadata : OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> unit</code></dt><dd><p>Remove the metadata of the package from the switch-local cache of installed packages</p></dd></dl><dl><dt class="spec value" id="val-add_to_reinstall"><a href="#val-add_to_reinstall" class="anchor"></a><code><span class="keyword">val </span>add_to_reinstall : OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> unpinned_only:bool <span>&#45;&gt;</span> OpamTypes.package_set <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state</code></dt><dd><p>Update the on-disk set of packages marked to reinstall on the current switch (excepting compiler packages, and pinned packages if <code>unpinned_only</code> is set)</p></dd></dl><dl><dt class="spec value" id="val-add_to_installed"><a href="#val-add_to_installed" class="anchor"></a><code><span class="keyword">val </span>add_to_installed : OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> ?&#8288;root:bool <span>&#45;&gt;</span> OpamTypes.package <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state</code></dt><dd><p>Updates the package selections and switch config to take into account the given newly installed package. The updated state is written to disk unless <code>OpamStateConfig.(!r.dry_run)</code> and returned.</p></dd></dl><dl><dt class="spec value" id="val-remove_from_installed"><a href="#val-remove_from_installed" class="anchor"></a><code><span class="keyword">val </span>remove_from_installed : ?&#8288;keep_as_root:bool <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamTypes.package <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state</code></dt><dd><p>Updates the package selections and switch config to take into account the removed package. The updated state is written to disk unless <code>OpamStateConfig.(!r.dry_run)</code>, and returned. If <code>keep_as_root</code>, the package isn't removed from the switch state <code>installed_roots</code> set.</p></dd></dl><dl><dt class="spec value" id="val-update_switch_state"><a href="#val-update_switch_state" class="anchor"></a><code><span class="keyword">val </span>update_switch_state : ?&#8288;installed:OpamTypes.package_set <span>&#45;&gt;</span> ?&#8288;installed_roots:OpamTypes.package_set <span>&#45;&gt;</span> ?&#8288;reinstall:OpamTypes.package_set <span>&#45;&gt;</span> ?&#8288;pinned:OpamTypes.package_set <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state <span>&#45;&gt;</span> OpamStateTypes.rw OpamStateTypes.switch_state</code></dt><dd><p>Update the switch selections with the supplied optional arguments. Changes are written to disk and returned</p></dd></dl></div></body></html>