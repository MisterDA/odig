<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Patience_diff_lib__Patience_diff (patience_diff.Patience_diff_lib__Patience_diff)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">patience_diff</a> &#x00BB; Patience_diff_lib__Patience_diff</nav><h1>Module <code>Patience_diff_lib__Patience_diff</code></h1><p>This is a port of Bram Cohen's patience diff algorithm, as found in the Bazaar 1.14.1 source code, available at http://bazaar-vcs.org.</p><p>This copyright notice was included:</p><p># Copyright (C) 2005 Bram Cohen, Copyright (C) 2005, 2006 Canonical Ltd # # This program is free software; you can redistribute it and/or modify # it under the terms of the GNU General Public License as published by # the Free Software Foundation; either version 2 of the License, or # (at your option) any later version. # # This program is distributed in the hope that it will be useful, # but WITHOUT ANY WARRANTY; without even the implied warranty of # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the # GNU General Public License for more details. # # You should have received a copy of the GNU General Public License # along with this program; if not, write to the Free Software # Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</p></header><aside><p>Bram Cohen's comment from the original Python code (with syntax changed to OCaml):</p><p><code>get_matching_blocks a b</code> returns a list of triples describing matching subsequences.</p><p>Each triple is of the form (i, j, n), and means that a &lt;|&gt; (i,i+n) = b &lt;|&gt; (j,j+n). The triples are monotonically increasing in i and in j.</p><p>The last triple is a dummy, (Array.length a, Array.length b, 0), and is the only triple with n=0.</p><p>Example: get_matching_blocks <code>|&quot;a&quot;;&quot;b&quot;;&quot;x&quot;;&quot;c&quot;;&quot;d&quot;|</code> <code>|&quot;a&quot;;&quot;b&quot;;&quot;c&quot;;&quot;d&quot;|</code> returns <code>(0, 0, 2), (3, 2, 2), (5, 4, 0)</code></p></aside><div class="spec module" id="module-Matching_block"><a href="#module-Matching_block" class="anchor"></a><code><span class="keyword">module</span> <a href="Matching_block/index.html">Matching_block</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><aside><p>For handling diffs abstractly. A range is a subarray of the two original arrays with a constructor defining its relationship to the two original arrays. A <code>Same</code> range contains a series of elements which can be found in both arrays. A <code>New</code> range contains elements found only in the new array, while an <code>Old</code> range contains elements found only in the old array.</p><p>A <code>Replace</code> contains two arrays: elements in the first array are elements found only in the original, old array which have been replaced by elements in the second array, which are elements found only in the new array.</p></aside><div class="spec module" id="module-Range"><a href="#module-Range" class="anchor"></a><code><span class="keyword">module</span> <a href="Range/index.html">Range</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Hunk"><a href="#module-Hunk" class="anchor"></a><code><span class="keyword">module</span> <a href="Hunk/index.html">Hunk</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>In diff terms, a hunk is a unit of consecutive ranges with some <code>Same</code> context before and after <code>New</code>, <code>Old</code>, and <code>Replace</code> ranges. Each hunk contains information about the original arrays, specifically the starting indexes and the number of elements in both arrays to which the hunk refers.</p></dd></dl><div class="spec module" id="module-Hunks"><a href="#module-Hunks" class="anchor"></a><code><span class="keyword">module</span> <a href="Hunks/index.html">Hunks</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-Elt/index.html">Elt</a> : <a href="../../core_kernel/Core_kernel/Hashtbl/index.html#module-type-Key">Core_kernel.Hashtbl.Key</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="Make/index.html#type-elt">elt</a> = <a href="Make/argument-1-Elt/index.html#type-t">Elt.t</a></code></div><div class="spec module" id="module-String"><a href="#module-String" class="anchor"></a><code><span class="keyword">module</span> <a href="String/index.html">String</a> : <a href="index.html#module-type-S">S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="module-type-S/index.html#type-elt">elt</a> = string</code></div></div></body></html>