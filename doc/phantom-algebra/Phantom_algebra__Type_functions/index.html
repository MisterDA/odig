<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Phantom_algebra__Type_functions (phantom-algebra.Phantom_algebra__Type_functions)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">phantom-algebra</a> &#x00BB; Phantom_algebra__Type_functions</nav><h1>Module <code>Phantom_algebra__Type_functions</code></h1><p>Type-level functions</p><p>Skim through this section when reading the documentation for the first (second, third and …) time</p><nav class="toc"><ul><li><a href="#small-integer-type-representation">Small integer type representation</a></li><li><a href="#type-level-functions">Type-level functions</a></li></ul></nav></header><section><header><h3 id="small-integer-type-representation"><a href="#small-integer-type-representation" class="anchor"></a>Small integer type representation</h3></header><dl><dt class="spec type" id="type-z"><a href="#type-z" class="anchor"></a><code><span class="keyword">type</span> 'a z</code> = <code>[ </code><table class="variant"><tr id="type-z.zero" class="anchored"><td class="def constructor"><a href="#type-z.zero" class="anchor"></a><code>| </code><code>`zero <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-one"><a href="#type-one" class="anchor"></a><code><span class="keyword">type</span> 'a one</code> = <code>[ </code><table class="variant"><tr id="type-one.one" class="anchored"><td class="def constructor"><a href="#type-one.one" class="anchor"></a><code>| </code><code>`one <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-two"><a href="#type-two" class="anchor"></a><code><span class="keyword">type</span> 'a two</code> = <code>[ </code><table class="variant"><tr id="type-two.two" class="anchored"><td class="def constructor"><a href="#type-two.two" class="anchor"></a><code>| </code><code>`two <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-three"><a href="#type-three" class="anchor"></a><code><span class="keyword">type</span> 'a three</code> = <code>[ </code><table class="variant"><tr id="type-three.three" class="anchored"><td class="def constructor"><a href="#type-three.three" class="anchor"></a><code>| </code><code>`three <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-four"><a href="#type-four" class="anchor"></a><code><span class="keyword">type</span> 'a four</code> = <code>[ </code><table class="variant"><tr id="type-four.four" class="anchored"><td class="def constructor"><a href="#type-four.four" class="anchor"></a><code>| </code><code>`four <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dt class="spec type" id="type-any"><a href="#type-any" class="anchor"></a><code><span class="keyword">type</span> ('a, 'b, 'c) any</code><code> = [&lt; `zero of <span class="type-var">'b</span> * <span class="type-var">'a</span> | `one of <span class="type-var">'b</span> * <span class="type-var">'a</span> | `two of <span class="type-var">'b</span> * <span class="type-var">'a</span> ] <span class="keyword">as</span> c</code></dt></dl></section><section><header><h3 id="type-level-functions"><a href="#type-level-functions" class="anchor"></a>Type-level functions</h3></header><dl><dt class="spec type" id="type-product"><a href="#type-product" class="anchor"></a><code><span class="keyword">type</span> ('rank1, 'rank2, 'rank3, 'dim1, 'dim2, 'dim3, 'parameters) product</code><code> = [&lt; `zero of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> * <span class="type-var">'p2</span> <a href="index.html#type-one">one</a> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim2</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim2</span> ] | `one of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim2</span> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> ] | `two of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim2</span> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> ] ] <span class="keyword">as</span> rank1</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p1</span> * <span class="type-var">'p2</span> * <span class="type-var">'p3</span></code></dt><dd><p><code>(x,y,z,d1,d2,d3_ ) product</code> computes the types of (x,d1) * (y,d2= and put the result inside z and d3. In practice, the aims is to direct the unification of the type variables using the type values of the inputs. For the product we have the following types <code>(''dim1, 'rank1) t -&gt; ('dim2,'rank2) t -&gt; ('dim3, 'rank3) t </code> and we want to unify <code>'rank3</code> and <code>'dim3</code> with the right values</p></dd></dl><dl><dt class="spec type" id="type-div"><a href="#type-div" class="anchor"></a><code><span class="keyword">type</span> ('rank1, 'rank2, 'rank3, 'dim1, 'dim2, 'dim3, 'parameters) div</code><code> = [&lt; `zero of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> * <span class="type-var">'p2</span> <a href="index.html#type-one">one</a> ] | `one of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> ] | `two of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim1</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim2</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p2</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim1</span> ] ] <span class="keyword">as</span> rank1</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p1</span> * <span class="type-var">'p2</span> * <span class="type-var">'p3</span></code></dt><dd><p>(x,y,z,_ ) div computes the rank of x * y and put the result inside z</p></dd></dl><dl><dt class="spec type" id="type-rank_diff"><a href="#type-rank_diff" class="anchor"></a><code><span class="keyword">type</span> ('rank1, 'rank2, 'rank3, 'parameters) rank_diff</code><code> = [&lt; `one of <span class="type-var">'rank2</span> * [&lt; `one of <span class="type-var">'rank3</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> ] | `two of <span class="type-var">'rank2</span> * [&lt; `one of <span class="type-var">'rank3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> ] ] <span class="keyword">as</span> rank1</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p1</span></code></dt><dd><p>(x,y,z,_ ) diff computes the rank of x - y and put the result inside z</p></dd></dl><dl><dt class="spec type" id="type-sum"><a href="#type-sum" class="anchor"></a><code><span class="keyword">type</span> ('rank1, 'rank2, 'rank3, 'dim1, 'dim2, 'dim3, 'parameters) sum</code><code> = [&lt; `zero of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> * <span class="type-var">'p2</span> <a href="index.html#type-one">one</a> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim2</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim2</span> ] | `one of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim1</span> | `one of <span class="type-var">'rank3</span> * <span class="type-var">'dim1</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> * <span class="type-var">'dim2</span> * <span class="type-var">'dim2</span> ] | `two of <span class="type-var">'rank2</span> * [&lt; `zero of <span class="type-var">'rank3</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim1</span> | `two of <span class="type-var">'rank3</span> * <span class="type-var">'dim1</span> * <span class="type-var">'dim3</span> * <span class="type-var">'p1</span> <a href="index.html#type-two">two</a> * <span class="type-var">'dim1</span> * <span class="type-var">'dim3</span> ] ] <span class="keyword">as</span> rank1</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p1</span> * <span class="type-var">'p2</span> * <span class="type-var">'p3</span></code></dt><dd><p>(x,y,z,_ ) sum computes the rank of x + y and put the result inside z</p></dd></dl><dl><dt class="spec type" id="type-cross"><a href="#type-cross" class="anchor"></a><code><span class="keyword">type</span> ('dim, 'res, 'parameters) cross</code><code> = [&lt; `two of <span class="type-var">'res</span> * <span class="type-var">'p2</span> * <span class="type-var">'p1</span> <a href="index.html#type-z">z</a> | `three of <span class="type-var">'res</span> * <span class="type-var">'p2</span> <a href="index.html#type-three">three</a> * <span class="type-var">'p1</span> <a href="index.html#type-one">one</a> ] <span class="keyword">as</span> dim</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p1</span> * <span class="type-var">'p2</span></code></dt><dt class="spec type" id="type-simple_sum"><a href="#type-simple_sum" class="anchor"></a><code><span class="keyword">type</span> ('dim1, 'dim2, 'dim3, 'p) simple_sum</code><code> = [&lt; `one of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-two">two</a> | `two of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-three">three</a> | `three of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] | `two of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-three">three</a> | `two of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] | `three of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] ] <span class="keyword">as</span> dim1</code></dt><dt class="spec type" id="type-nat_sum"><a href="#type-nat_sum" class="anchor"></a><code><span class="keyword">type</span> ('dim1, 'dim2, 'dim3, 'p) nat_sum</code><code> = [&lt; `one of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-two">two</a> | `two of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-three">three</a> | `three of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] | `two of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-three">three</a> | `two of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] | `three of <span class="type-var">'dim2</span> * [&lt; `one of <span class="type-var">'dim3</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> ] ] <span class="keyword">as</span> dim1</code></dt><dt class="spec type" id="type-superindexing"><a href="#type-superindexing" class="anchor"></a><code><span class="keyword">type</span> ('tensor_rank, 'index_rank, 'res_rank, 'dim, 'res_dim, 'len, 'parameters) superindexing</code><code> = [&lt; `two of <span class="type-var">'index_rank</span> * [&lt; `two of <span class="type-var">'len</span> * [&lt; `one of <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-z">z</a> | `two of <span class="type-var">'res_dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'s</span> <a href="index.html#type-two">two</a> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> | `three of <span class="type-var">'res_dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'s</span> <a href="index.html#type-three">three</a> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> | `four of <span class="type-var">'res_dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'s</span> <a href="index.html#type-four">four</a> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> ] | `one of <span class="type-var">'dim</span> * <span class="type-var">'len</span> * <span class="type-var">'res_dim</span> * [&lt; `one of <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> | `two of <span class="type-var">'dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-two">two</a> * <span class="type-var">'s</span> <a href="index.html#type-two">two</a> | `three of <span class="type-var">'dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-three">three</a> * <span class="type-var">'s</span> <a href="index.html#type-two">two</a> | `four of <span class="type-var">'dim</span> * <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-four">four</a> * <span class="type-var">'s</span> <a href="index.html#type-two">two</a> ] ] | `one of <span class="type-var">'len</span> * [&lt; `one of <span class="type-var">'res_rank</span> * <span class="type-var">'p</span> <a href="index.html#type-z">z</a> | `two of <span class="type-var">'res_rank</span> * <span class="type-var">'res_dim</span> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> * <span class="type-var">'s</span> <a href="index.html#type-two">two</a> | `three of <span class="type-var">'res_rank</span> * <span class="type-var">'res_dim</span> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> * <span class="type-var">'s</span> <a href="index.html#type-three">three</a> | `four of <span class="type-var">'res_rank</span> * <span class="type-var">'res_dim</span> * <span class="type-var">'p</span> <a href="index.html#type-one">one</a> * <span class="type-var">'s</span> <a href="index.html#type-four">four</a> ] ] <span class="keyword">as</span> tensor_rank</code><code> <span class="keyword">constraint</span> <span class="type-var">'parameters</span> = <span class="type-var">'p</span> * <span class="type-var">'s</span></code></dt></dl></section></div></body></html>