<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ppx_test__Test (ppx_test.Ppx_test__Test)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">ppx_test</a> &#x00BB; Ppx_test__Test</nav><h1>Module <code>Ppx_test__Test</code></h1><nav class="toc"><ul><li><a href="#test-registration">Test registration</a></li><li><a href="#module-opened-in-the-test-code">Module opened in the test code</a></li><li><a href="#higher-level-api">Higher level API</a></li><li><a href="#middle-level-apis">Middle level APIs</a></li><li><a href="#lower-level-apis">Lower level APIs</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The test type</p></dd></dl><section><header><h6 id="test-registration"><a href="#test-registration" class="anchor"></a>Test registration</h6></header><dl><dt class="spec value" id="val-test_unit"><a href="#val-test_unit" class="anchor"></a><code><span class="keyword">val</span> test_unit : <a href="../Ppx_test/Location/index.html#type-t">Ppx_test.Location.t</a> <span>&#45;&gt;</span> <a href="../Ppx_test/Longident/index.html#type-t">Ppx_test.Longident.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a test of type <code>unit -&gt; unit</code>. This is called when <code>let %TEST_UNIT</code> ppx phrase is called.</p></dd></dl><dl><dt class="spec value" id="val-test"><a href="#val-test" class="anchor"></a><code><span class="keyword">val</span> test : <a href="../Ppx_test/Location/index.html#type-t">Ppx_test.Location.t</a> <span>&#45;&gt;</span> <a href="../Ppx_test/Longident/index.html#type-t">Ppx_test.Longident.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a test of type <code>unit -&gt; bool</code>. This is called when <code>let %TEST</code> ppx phrase is called.</p></dd></dl><dl><dt class="spec value" id="val-test_fail"><a href="#val-test_fail" class="anchor"></a><code><span class="keyword">val</span> test_fail : <a href="../Ppx_test/Location/index.html#type-t">Ppx_test.Location.t</a> <span>&#45;&gt;</span> <a href="../Ppx_test/Longident/index.html#type-t">Ppx_test.Longident.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a test of type <code>unit -&gt; unit</code>. It must fail by raising an exception. This is called when <code>let %TEST_FAIL</code> ppx phrase is called.</p></dd></dl></section><section><header><h6 id="module-opened-in-the-test-code"><a href="#module-opened-in-the-test-code" class="anchor"></a>Module opened in the test code</h6></header><div class="spec module" id="module-TestTool"><a href="#module-TestTool" class="anchor"></a><code><span class="keyword">module</span> <a href="TestTool/index.html">TestTool</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h6 id="higher-level-api"><a href="#higher-level-api" class="anchor"></a>Higher level API</h6></header><dl><dt class="spec value" id="val-collect"><a href="#val-collect" class="anchor"></a><code><span class="keyword">val</span> collect : unit <span>&#45;&gt;</span> unit</code></dt><dd><p>Run tests added by <code>test</code>, <code>test_unit</code> and <code>add</code>. Then it prints the report to stderr and exit. The exit status is 0 if there is no error, otherwise, 1.</p><p>This is for standalone test executables: it parses command line options using <code>arg_specs</code> to select tests to perform. All the tests are executed by default.</p><p>For application programs with integrated test interface, use <code>run_tests</code> instead.</p></dd></dl></section><section><header><h6 id="middle-level-apis"><a href="#middle-level-apis" class="anchor"></a>Middle level APIs</h6></header><div class="spec module" id="module-Name"><a href="#module-Name" class="anchor"></a><code><span class="keyword">module</span> <a href="Name/index.html">Name</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Error"><a href="#module-Error" class="anchor"></a><code><span class="keyword">module</span> <a href="Error/index.html">Error</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Result"><a href="#module-Result" class="anchor"></a><code><span class="keyword">module</span> <a href="Result/index.html">Result</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Report"><a href="#module-Report" class="anchor"></a><code><span class="keyword">module</span> <a href="Report/index.html">Report</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-run_tests"><a href="#val-run_tests" class="anchor"></a><code><span class="keyword">val</span> run_tests : bool <span>&#45;&gt;</span> <a href="Report/index.html#type-t">Report.t</a></code></dt><dd><p>Run tests added by <code>test</code>, <code>test_unit</code> and <code>add</code>. It returns a report.</p><p>This is for application programs with integrated tests.</p><p>The boolean is to set the default value to perform each test or not. For test selections, applications must use <code>arg_specs</code> at its command line option parsing.</p></dd></dl><dl><dt class="spec value" id="val-arg_specs"><a href="#val-arg_specs" class="anchor"></a><code><span class="keyword">val</span> arg_specs : (string * <a href="../../ocaml/Stdlib/Arg/index.html#type-spec">Stdlib.Arg.spec</a> * string) list</code></dt><dd><p>Command line switches for testing options. Useful when integrating the tests into main applications instead of building independent test executables.</p></dd></dl></section><section><header><h6 id="lower-level-apis"><a href="#lower-level-apis" class="anchor"></a>Lower level APIs</h6></header><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-fun_"><a href="#val-fun_" class="anchor"></a><code><span class="keyword">val</span> fun_ : (unit <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-label"><a href="#val-label" class="anchor"></a><code><span class="keyword">val</span> label : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-ident"><a href="#val-ident" class="anchor"></a><code><span class="keyword">val</span> ident : <a href="../Ppx_test/Longident/index.html#type-t">Ppx_test.Longident.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></section></div></body></html>