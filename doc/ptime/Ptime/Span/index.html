<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Span (ptime.Ptime.Span)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">ptime</a> &#x00BB; <a href="../index.html">Ptime</a> &#x00BB; Span</nav><h1>Module <code>Ptime.Span</code></h1><p>POSIX time spans.</p><p><b>WARNING.</b> A POSIX time span is not equal to an SI second based time span see the <a href="../index.html#basics"><span>basics</span></a>.</p><nav class="toc"><ul><li><a href="#spans">POSIX time spans</a></li><li><a href="#predicates">Predicates</a></li><li><a href="#arith">Arithmetic</a></li><li><a href="#rounding">Rounding</a></li><li><a href="#print">Pretty printing</a></li></ul></nav></header><section><header><h2 id="spans"><a href="#spans" class="anchor"></a>POSIX time spans</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code><code><span class="keyword"> = </span><a href="../index.html#type-span">span</a></code></dt><dd><p>The type for signed, picosecond precision, POSIX time spans.</p></dd></dl><dl><dt class="spec value" id="val-v"><a href="#val-v" class="anchor"></a><code><span class="keyword">val </span>v : (int<span class="keyword"> * </span>int64) <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>v s</code> is like <a href="index.html#val-of_d_ps"><code>of_d_ps</code></a><code> s</code> but </p><dl><dt>raises Invalid_argument</dt><dd><p>if <code>s</code> is not in the right range. Use <a href="index.html#val-of_d_ps"><code>of_d_ps</code></a> to deal with untrusted input.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span class="keyword">val </span>zero : <a href="../index.html#type-span">span</a></code></dt><dd><p><code>zero</code> is the neutral element of <a href="index.html#val-add"><code>add</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-of_d_ps"><a href="#val-of_d_ps" class="anchor"></a><code><span class="keyword">val </span>of_d_ps : (int<span class="keyword"> * </span>int64) <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> option</code></dt><dd><p><code>of_d_ps (d, ps)</code> is a span for the signed POSIX picosecond span <code>d</code> * 86_400e12 + <code>ps</code>. <code>d</code> is a signed number of POSIX days and <code>ps</code> a number of picoseconds in the range [<code>0</code>;<code>86_399_999_999_999_999L</code>]. <code>None</code> is returned if <code>ps</code> is not in the right range.</p></dd></dl><dl><dt class="spec value" id="val-unsafe_of_d_ps"><a href="#val-unsafe_of_d_ps" class="anchor"></a><code><span class="keyword">val </span>unsafe_of_d_ps : (int<span class="keyword"> * </span>int64) <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p>/*</p></dd></dl><dl><dt class="spec value" id="val-unsafe_of_d_ps_option"><a href="#val-unsafe_of_d_ps_option" class="anchor"></a><code><span class="keyword">val </span>unsafe_of_d_ps_option : (int<span class="keyword"> * </span>int64) option <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> option</code></dt><dd><p>/*</p></dd></dl><dl><dt class="spec value" id="val-to_d_ps"><a href="#val-to_d_ps" class="anchor"></a><code><span class="keyword">val </span>to_d_ps : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> int<span class="keyword"> * </span>int64</code></dt><dd><p><code>to_d_ps d</code> is the span <code>d</code> as a pair <code>(d, ps)</code> expressing the POSIX picosecond span <code>d</code> * 86_400e12 + <code>ps</code> with <code>ps</code> in the range [<code>0</code>;<code>86_399_999_999_999_999L</code>]</p></dd></dl><dl><dt class="spec value" id="val-of_int_s"><a href="#val-of_int_s" class="anchor"></a><code><span class="keyword">val </span>of_int_s : int <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>of_int_s secs</code> is a span from the signed integer POSIX second span <code>secs</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_int_s"><a href="#val-to_int_s" class="anchor"></a><code><span class="keyword">val </span>to_int_s : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> int option</code></dt><dd><p><code>to_int_s d</code> is the span <code>d</code> as a signed integer POSIX second span, if <code>int</code>'s range can represent it (note that this depends on <span class="xref-unresolved" title="unresolved reference to &quot;Sys.word_size&quot;"><code>Sys</code>.word_size</span>). Subsecond precision numbers are truncated.</p></dd></dl><dl><dt class="spec value" id="val-of_float_s"><a href="#val-of_float_s" class="anchor"></a><code><span class="keyword">val </span>of_float_s : float <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> option</code></dt><dd><p><code>of_float_s secs</code> is a span from the signed floating point POSIX second span <code>d</code>. Subpicosecond precision numbers are truncated.</p><p><code>None</code> is returned if <code>secs</code> cannot be represented as a span. This occurs on <span class="xref-unresolved" title="unresolved reference to &quot;Pervasives.nan&quot;"><code>Pervasives</code>.nan</span> or if the duration in POSIX days cannot fit on an <code>int</code> (on 32-bit platforms this means the absolute magnitude of the duration is greater than ~2'941'758 years).</p></dd></dl><dl><dt class="spec value" id="val-to_float_s"><a href="#val-to_float_s" class="anchor"></a><code><span class="keyword">val </span>to_float_s : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> float</code></dt><dd><p><code>to_float_s s</code> is the span <code>d</code> as floating point POSIX seconds.</p><p><b>Warning.</b> The magnitude of <code>s</code> may not be represented exactly by the floating point value.</p></dd></dl></section><section><header><h2 id="predicates"><a href="#predicates" class="anchor"></a>Predicates</h2></header><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal d d'</code> is <code>true</code> iff <code>d</code> and <code>d'</code> are the same time span.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val </span>compare : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare d d'</code> is a total order on durations that is compatible with signed time span order.</p></dd></dl></section><section><header><h2 id="arith"><a href="#arith" class="anchor"></a>Arithmetic</h2><p><b>Note.</b> The following functions rollover on overflows.</p></header><dl><dt class="spec value" id="val-neg"><a href="#val-neg" class="anchor"></a><code><span class="keyword">val </span>neg : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>neg d</code> is the span <code>d</code> negated.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val </span>add : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>add d d'</code> is <code>d</code> + <code>d'</code>.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val </span>sub : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>sub d d'</code> is <code>d</code> - <code>d'</code>.</p></dd></dl><dl><dt class="spec value" id="val-abs"><a href="#val-abs" class="anchor"></a><code><span class="keyword">val </span>abs : <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>abs d</code> is the absolute value of span <code>d</code>.</p></dd></dl></section><section><header><h2 id="rounding"><a href="#rounding" class="anchor"></a>Rounding</h2></header><dl><dt class="spec value" id="val-round"><a href="#val-round" class="anchor"></a><code><span class="keyword">val </span>round : frac_s:int <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>round ~frac_s t</code> is <code>t</code> rounded to the <code>frac_s</code> decimal fractional second. Ties are rounded away from zero. <code>frac_s</code> is clipped to the range [<code>0</code>;<code>12</code>].</p></dd></dl><dl><dt class="spec value" id="val-truncate"><a href="#val-truncate" class="anchor"></a><code><span class="keyword">val </span>truncate : frac_s:int <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a></code></dt><dd><p><code>truncate ~frac_s t</code> is <code>t</code> truncated to the <code>frac_s</code> decimal fractional second. <code>frac_s</code> is clipped to the range [<code>0</code>;<code>12</code>].</p></dd></dl></section><section><header><h2 id="print"><a href="#print" class="anchor"></a>Pretty printing</h2></header><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val </span>pp : Format.formatter <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp ppf d</code> prints an unspecified, approximative, representation of <code>d</code> on <code>ppf</code>.</p><p>The representation is not fixed-width, depends on the magnitude of <code>d</code> and uses locale independent <a href="http://www.bipm.org/en/publications/si-brochure/chapter3.html">SI prefixes</a> on seconds and <a href="http://www.bipm.org/en/publications/si-brochure/table6.html">accepted non-SI units</a>. Years are counted in Julian years (365.25 SI-accepted days) as <a href="http://www.iau.org/publications/proceedings_rules/units/">defined</a> by the International Astronomical Union (IUA).</p><p>The representation is approximative. In particular beyond 60 seconds it only keeps the two most significant time units and rounds towards the infinity. The latter means that case arising, it always <em>over</em> approximates durations.</p><p><b>Warning</b> Becomes unprecise (but does not overflow) if the absolute number of POSIX days in the time span is greater than <code>max_int /
      4</code> (on 32-bit platforms this is ~735'439 years)</p></dd></dl><dl><dt class="spec value" id="val-dump"><a href="#val-dump" class="anchor"></a><code><span class="keyword">val </span>dump : Format.formatter <span>&#45;&gt;</span> <a href="../index.html#type-span">span</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>dump ppf s</code> prints an unspecified raw representation of <code>d</code> on <code>ppf</code>.</p></dd></dl></section></div></body></html>