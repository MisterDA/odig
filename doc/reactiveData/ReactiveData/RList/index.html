<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>RList (reactiveData.ReactiveData.RList)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">reactiveData</a> &#x00BB; <a href="../index.html">ReactiveData</a> &#x00BB; RList</nav><h1>Module <code>ReactiveData.RList</code></h1><p>Reactive list data structure</p></header><dl><dt class="spec type" id="type-p"><a href="#type-p" class="anchor"></a><code><span class="keyword">type </span>'a p</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-p.I" class="anchored"><td class="def constructor"><a href="#type-p.I" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">I</span><span class="keyword"> of </span>int<span class="keyword"> * </span><span class="type-var">'a</span></code></td><td class="doc"><p><code>I (i, v)</code> adds <code>v</code> at position <code>i</code></p></td></tr><tr id="type-p.R" class="anchored"><td class="def constructor"><a href="#type-p.R" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">R</span><span class="keyword"> of </span>int</code></td><td class="doc"><p><code>R i</code> removes <code>i</code>-th element</p></td></tr><tr id="type-p.U" class="anchored"><td class="def constructor"><a href="#type-p.U" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">U</span><span class="keyword"> of </span>int<span class="keyword"> * </span><span class="type-var">'a</span></code></td><td class="doc"><p><code>U (i, v)</code> substitutes <code>i</code>-th element with <code>v</code></p></td></tr><tr id="type-p.X" class="anchored"><td class="def constructor"><a href="#type-p.X" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">X</span><span class="keyword"> of </span>int<span class="keyword"> * </span>int</code></td><td class="doc"><p><code>X (i, j)</code> swaps the <code>i</code>-th and <code>j</code>-th elements</p></td></tr></table></dt><dd><p>Patch operation on lists. All operations are of linear complexity.</p></dd></dl><dl><dt class="spec type" id="type-patch"><a href="#type-patch" class="anchor"></a><code><span class="keyword">type </span>'a patch</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="index.html#type-p">p</a> list</code></dt><dd><p>A patch is a list of patch operations. The operations are applied in the order they appear in the list.</p><p>The indices correspond to list contents after the operations that appear earlier in the list have been applied, not to the contents before the whole patch operation.</p><p>A patch comprised of <code>I</code>, <code>R</code>, and <code>U</code> steps with increasing indices can be applied in time O(m + n), where m is the patch length and n is the current size of the list. (Arbitrary patches are slower, requiring O(m * n).)</p></dd></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../index.html#module-type-S">S</a><span class="keyword"> with </span><span class="keyword">type </span>'a <a href="../module-type-S/index.html#type-data">data</a><span class="keyword"> = </span><span class="type-var">'a</span> list<span class="keyword"> and </span><span class="keyword">type </span>'a <a href="../module-type-S/index.html#type-patch">patch</a> := <span class="type-var">'a</span> <a href="index.html#type-patch">patch</a></code></span></summary><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code></dt><dd><p>Reactive version of the data container</p></dd></dl><dl><dt class="spec type" id="type-data"><a href="#type-data" class="anchor"></a><code><span class="keyword">type </span>'a data</code><code><span class="keyword"> = </span><span class="type-var">'a</span> list</code></dt><dd><p>Raw (non-reactive) version of the data container</p></dd></dl><dl><dt class="spec type" id="type-patch"><a href="#type-patch" class="anchor"></a><code><span class="keyword">type </span>'a patch</code></dt><dd><p>Patch format</p></dd></dl><dl><dt class="spec type" id="type-msg"><a href="#type-msg" class="anchor"></a><code><span class="keyword">type </span>'a msg</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-msg.Patch" class="anchored"><td class="def constructor"><a href="#type-msg.Patch" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Patch</span><span class="keyword"> of </span><span class="type-var">'a</span> <a href="index.html#type-patch">patch</a></code></td><td class="doc"><p><code>Patch p</code> triggers the application of <code>p</code> on the current contents</p></td></tr><tr id="type-msg.Set" class="anchored"><td class="def constructor"><a href="#type-msg.Set" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Set</span><span class="keyword"> of </span><span class="type-var">'a</span> <a href="index.html#type-data">data</a></code></td><td class="doc"><p>With <code>Set d</code>, <code>d</code> becomes the new content</p></td></tr></table></dt><dd><p>Message format</p></dd></dl><dl><dt class="spec type" id="type-handle"><a href="#type-handle" class="anchor"></a><code><span class="keyword">type </span>'a handle</code></dt><dd><p>Handle that permits applying incremental updates</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Empty data structure</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-handle">handle</a></code></dt><dd><p>Build a container from initial contents. The handle can be used for performing reactive updates.</p></dd></dl><dl><dt class="spec value" id="val-from_event"><a href="#val-from_event" class="anchor"></a><code><span class="keyword">val </span>from_event : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> React.E.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>from_event d e</code> is a container whose initial value is <code>d</code>, and which gets updated for every occurrence of <code>e</code></p></dd></dl><dl><dt class="spec value" id="val-from_signal"><a href="#val-from_signal" class="anchor"></a><code><span class="keyword">val </span>from_signal : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> React.S.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Convert a React signal into a ReactiveData container.</p><p>Whenever the signal changes from value <code>v</code> to value <code>v'</code>, we detect the differences between <code>v</code> and <code>v'</code>, and perform downstream computation (e.g., for <code>map</code>) only on the new and modified elements.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val </span>const : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Produce a constant container</p></dd></dl><dl><dt class="spec value" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span class="keyword">val </span>patch : <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-patch">patch</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>patch h p</code> applies <code>p</code> on the container corresponding to <code>h</code></p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set h d</code> sets the contents of the container corresponding to <code>h</code>, disregarding previous contents</p></dd></dl><dl><dt class="spec value" id="val-map_msg"><a href="#val-map_msg" class="anchor"></a><code><span class="keyword">val </span>map_msg : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-msg">msg</a></code></dt><dd><p>Transform a message</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f c</code> applies <code>f</code> on all elements of <code>c</code>, producing a new reactive container <code>c'</code>. Modifying the contents of <code>c</code> leads to modifications of <code>c'</code>. <code>f</code> is applied only on the new or modified elements of <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">val </span>value : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a></code></dt><dd><p>Return current contents</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-msg">msg</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> React.signal</code></dt><dd><p><code>fold f c v</code> accumulates the updates on <code>c</code> with <code>f</code> starting from <code>v</code>.</p><p>The result is a signal of value <code>f m_n (f ... (f m_1 v))</code>, where <code>m_1</code> ... <code>m_n</code> are the messages that have been applied since the beginning of <code>fold</code>. <code>m_1</code> is a pseudo-message <code>Set l</code>, accounting for the contents <code>l</code> of <code>c</code> at the time when accumulation starts.</p></dd></dl><dl><dt class="spec value" id="val-signal"><a href="#val-signal" class="anchor"></a><code><span class="keyword">val </span>signal : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> React.S.t</code></dt><dd><p>Signal corresponding to contents</p></dd></dl><dl><dt class="spec value" id="val-event"><a href="#val-event" class="anchor"></a><code><span class="keyword">val </span>event : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> React.E.t</code></dt><dd><p>Event whose occurrences correspond to container updates</p></dd></dl></details></div></div></div><dl><dt class="spec value" id="val-cons"><a href="#val-cons" class="anchor"></a><code><span class="keyword">val </span>cons : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add element to the beginning</p></dd></dl><dl><dt class="spec value" id="val-snoc"><a href="#val-snoc" class="anchor"></a><code><span class="keyword">val </span>snoc : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add element to the end</p></dd></dl><dl><dt class="spec value" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span class="keyword">val </span>insert : <span class="type-var">'a</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>insert v i h</code> adds <code>v</code> as the <code>i</code>-th position in the container corresponding to <code>h</code>. The indices of the subsequent elements change.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val </span>remove : int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>remove i h</code> removes the <code>i</code>-th position from the container corresponding to <code>h</code>. The indices of the subsequent elements change.</p></dd></dl><dl><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val </span>update : <span class="type-var">'a</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>update v i h</code> substitutes the <code>i</code>-th element of the container corresponding to <code>h</code> with <code>v</code></p></dd></dl><dl><dt class="spec value" id="val-move"><a href="#val-move" class="anchor"></a><code><span class="keyword">val </span>move : int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>move i j h</code> moves the <code>i</code>-th element of the container corresponding to <code>h</code> to the <code>j</code>-th position, modifying the indices of other elements</p></dd></dl><dl><dt class="spec value" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span class="keyword">val </span>singleton : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Produce container list containing a single, constant element</p></dd></dl><dl><dt class="spec value" id="val-singleton_s"><a href="#val-singleton_s" class="anchor"></a><code><span class="keyword">val </span>singleton_s : <span class="type-var">'a</span> React.S.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Produce reactive list containing a single element that gets updated based on a signal</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val </span>concat : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>concat a b</code> is the concatenation of <code>a</code> and <code>b</code>, and it gets updated whenever <code>a</code> and <code>b</code> change</p></dd></dl><dl><dt class="spec value" id="val-rev"><a href="#val-rev" class="anchor"></a><code><span class="keyword">val </span>rev : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>rev a</code> is the reversal of <code>a</code>; <code>rev a</code> gets updated along with <code>a</code></p></dd></dl></div></body></html>