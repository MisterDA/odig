<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>RMap (reactiveData.ReactiveData.RMap)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">reactiveData</a> &#x00BB; <a href="../index.html">ReactiveData</a> &#x00BB; RMap</nav><h1>Module <code>ReactiveData.RMap</code></h1><p>Reactive map data structure</p></header><h3 class="heading">Parameters</h3><dl><code>M : Map.S</code></dl><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>'a t</code></dt><dd><p>Reactive version of the data container</p></dd></dl><dl><dt class="spec type" id="type-data"><a href="#type-data" class="anchor"></a><code><span class="keyword">type </span>'a data</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="index.html#argument-1-M">M</a>.t</code></dt><dd><p>Raw (non-reactive) version of the data container</p></dd></dl><dl><dt class="spec type" id="type-patch"><a href="#type-patch" class="anchor"></a><code><span class="keyword">type </span>'a patch</code><code><span class="keyword"> = </span>[ `Add of <a href="index.html#argument-1-M">M</a>.key<span class="keyword"> * </span><span class="type-var">'a</span><span class="keyword"> | </span>`Del of <a href="index.html#argument-1-M">M</a>.key ] list</code></dt><dd><p>Patch format</p></dd></dl><dl><dt class="spec type" id="type-msg"><a href="#type-msg" class="anchor"></a><code><span class="keyword">type </span>'a msg</code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-msg.Patch" class="anchored"><td class="def constructor"><a href="#type-msg.Patch" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Patch</span><span class="keyword"> of </span><span class="type-var">'a</span> <a href="index.html#type-patch">patch</a></code></td><td class="doc"><p><code>Patch p</code> triggers the application of <code>p</code> on the current contents</p></td></tr><tr id="type-msg.Set" class="anchored"><td class="def constructor"><a href="#type-msg.Set" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Set</span><span class="keyword"> of </span><span class="type-var">'a</span> <a href="index.html#type-data">data</a></code></td><td class="doc"><p>With <code>Set d</code>, <code>d</code> becomes the new content</p></td></tr></table></dt><dd><p>Message format</p></dd></dl><dl><dt class="spec type" id="type-handle"><a href="#type-handle" class="anchor"></a><code><span class="keyword">type </span>'a handle</code></dt><dd><p>Handle that permits applying incremental updates</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Empty data structure</p></dd></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val </span>create : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><span class="type-var">'a</span> <a href="index.html#type-handle">handle</a></code></dt><dd><p>Build a container from initial contents. The handle can be used for performing reactive updates.</p></dd></dl><dl><dt class="spec value" id="val-from_event"><a href="#val-from_event" class="anchor"></a><code><span class="keyword">val </span>from_event : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> React.E.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>from_event d e</code> is a container whose initial value is <code>d</code>, and which gets updated for every occurrence of <code>e</code></p></dd></dl><dl><dt class="spec value" id="val-from_signal"><a href="#val-from_signal" class="anchor"></a><code><span class="keyword">val </span>from_signal : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> React.S.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Convert a React signal into a ReactiveData container.</p><p>Whenever the signal changes from value <code>v</code> to value <code>v'</code>, we detect the differences between <code>v</code> and <code>v'</code>, and perform downstream computation (e.g., for <code>map</code>) only on the new and modified elements.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val </span>const : <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Produce a constant container</p></dd></dl><dl><dt class="spec value" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span class="keyword">val </span>patch : <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-patch">patch</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>patch h p</code> applies <code>p</code> on the container corresponding to <code>h</code></p></dd></dl><dl><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val </span>set : <span class="type-var">'a</span> <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set h d</code> sets the contents of the container corresponding to <code>h</code>, disregarding previous contents</p></dd></dl><dl><dt class="spec value" id="val-map_msg"><a href="#val-map_msg" class="anchor"></a><code><span class="keyword">val </span>map_msg : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-msg">msg</a></code></dt><dd><p>Transform a message</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f c</code> applies <code>f</code> on all elements of <code>c</code>, producing a new reactive container <code>c'</code>. Modifying the contents of <code>c</code> leads to modifications of <code>c'</code>. <code>f</code> is applied only on the new or modified elements of <code>c</code>.</p></dd></dl><dl><dt class="spec value" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">val </span>value : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a></code></dt><dd><p>Return current contents</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-msg">msg</a> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> React.signal</code></dt><dd><p><code>fold f c v</code> accumulates the updates on <code>c</code> with <code>f</code> starting from <code>v</code>.</p><p>The result is a signal of value <code>f m_n (f ... (f m_1 v))</code>, where <code>m_1</code> ... <code>m_n</code> are the messages that have been applied since the beginning of <code>fold</code>. <code>m_1</code> is a pseudo-message <code>Set l</code>, accounting for the contents <code>l</code> of <code>c</code> at the time when accumulation starts.</p></dd></dl><dl><dt class="spec value" id="val-signal"><a href="#val-signal" class="anchor"></a><code><span class="keyword">val </span>signal : ?&#8288;eq:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-data">data</a> React.S.t</code></dt><dd><p>Signal corresponding to contents</p></dd></dl><dl><dt class="spec value" id="val-event"><a href="#val-event" class="anchor"></a><code><span class="keyword">val </span>event : <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-msg">msg</a> React.E.t</code></dt><dd><p>Event whose occurrences correspond to container updates</p></dd></dl></div></body></html>