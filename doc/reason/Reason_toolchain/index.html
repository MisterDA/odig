<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Reason_toolchain (reason.Reason_toolchain)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">reason</a> &#x00BB; Reason_toolchain</nav><h1>Module <code>Reason_toolchain</code></h1><p>* Provides a simple interface to the most common parsing entrypoints required * by editor/IDE toolchains, preprocessors, and pretty printers. * * The form of this entrypoint includes more than what the standard OCaml * toolchain (oprof/ocamldoc) expects, but is still compatible. * * <code>implementation_with_comments</code> and <code>interface_with_comments</code> includes * additional information (about comments) suitable for building pretty * printers, editor, IDE and VCS integration. * * The comments include the full text of the comment (typically in between the * &quot;(*&quot; and the &quot;*)&quot;, as well as location information for that comment. * * WARNING: The &quot;end&quot; location is one greater than the actual final position! * (for both <code>associatedTextLoc</code> and <code>commentLoc</code>). * * Currently, the location information for comments is of the form: * * (associatedTextLoc) * * But we should quickly change it to be of the form: * * (associatedTextLoc, commentLoc) * * Where the <code>commentLoc</code> is the actual original location of the comment, * and the <code>associatedTextLoc</code> records the location in the file that the * comment is attached to. If <code>associatedTextLoc</code> and <code>commentLoc</code> are the * same, then the comment is &quot;free floating&quot; in that it only attaches to itself. * The <code>Reason</code> pretty printer will try its best to interleave those comments * in the containing list etc. But if <code>associatedTextLoc</code> expands beyond * the <code>commentLoc</code> it means the comment and the AST that is captured by * the <code>associatedTextLoc</code> are related - where &quot;related&quot; is something * this <code>reason_toolchain</code> decides (but in short it handles &quot;end of line * comments&quot;). Various pretty printers can decide how to preserve this * relatedness. Ideally, it would preserve end of line comments, but in the * short term, it might merely use that relatedness to correctly attach * end of line comments to the &quot;top&quot; of the AST node. * * let lst = <code>
 *
 *    </code>; (* Comment *) * ----commentLoc----- * ---associatedTextLoc---- * * * Ideally that would be formatted as: * * let lst = <code>
 *
 *    </code>; (* Comment *) * * Or: * * let lst = <code> </code>; (* Comment *) * * * But a shorter term solution would use that <code>associatedTextLoc</code> to at least * correctly attach the comment to the correct node, even if not &quot;end of line&quot;. * * (* Comment *) * let lst = <code> </code>;</p></header><div class="spec module" id="module-From_current"><a href="#module-From_current" class="anchor"></a><code><span class="keyword">module</span> <a href="From_current/index.html">From_current</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-To_current"><a href="#module-To_current" class="anchor"></a><code><span class="keyword">module</span> <a href="To_current/index.html">To_current</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-S"><a href="#module-S" class="anchor"></a><code><span class="keyword">module</span> S = <a href="../../menhirLib/MenhirLib/index.html#module-General">MenhirLib.General</a></code></div><div class="spec module" id="module-Comment"><a href="#module-Comment" class="anchor"></a><code><span class="keyword">module</span> Comment = <a href="../Reason_comment/index.html">Reason_comment</a></code></div><dl><dt class="spec value" id="val-setup_lexbuf"><a href="#val-setup_lexbuf" class="anchor"></a><code><span class="keyword">val</span> setup_lexbuf : bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../ocaml/Stdlib/Lexing/index.html#type-lexbuf">Stdlib.Lexing.lexbuf</a></code></dt></dl><div class="spec module-type" id="module-type-Toolchain"><a href="#module-type-Toolchain" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Toolchain/index.html">Toolchain</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module-type" id="module-type-Toolchain_spec"><a href="#module-type-Toolchain_spec" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-Toolchain_spec/index.html">Toolchain_spec</a> = <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-left_expand_comment"><a href="#val-left_expand_comment" class="anchor"></a><code><span class="keyword">val</span> left_expand_comment : bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> char * bool * int</code></dt><dt class="spec value" id="val-right_expand_comment"><a href="#val-right_expand_comment" class="anchor"></a><code><span class="keyword">val</span> right_expand_comment : bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> char * bool * int</code></dt></dl><div class="spec module" id="module-Create_parse_entrypoint"><a href="#module-Create_parse_entrypoint" class="anchor"></a><code><span class="keyword">module</span> <a href="Create_parse_entrypoint/index.html">Create_parse_entrypoint</a> : <span class="keyword">functor</span> (<a href="Create_parse_entrypoint/argument-1-Toolchain_impl/index.html">Toolchain_impl</a> : <a href="index.html#module-type-Toolchain_spec">Toolchain_spec</a>) <span>&#45;&gt;</span> <a href="index.html#module-type-Toolchain">Toolchain</a></code></div><div class="spec module" id="module-OCaml_syntax"><a href="#module-OCaml_syntax" class="anchor"></a><code><span class="keyword">module</span> <a href="OCaml_syntax/index.html">OCaml_syntax</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-insert_completion_ident"><a href="#val-insert_completion_ident" class="anchor"></a><code><span class="keyword">val</span> insert_completion_ident : <a href="../../ocaml/Stdlib/Lexing/index.html#type-position">Stdlib.Lexing.position</a> option <a href="../../ocaml/Stdlib/index.html#type-ref">Stdlib.ref</a></code></dt></dl><div class="spec module" id="module-Reason_syntax"><a href="#module-Reason_syntax" class="anchor"></a><code><span class="keyword">module</span> <a href="Reason_syntax/index.html">Reason_syntax</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-ML"><a href="#module-ML" class="anchor"></a><code><span class="keyword">module</span> <a href="ML/index.html">ML</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-RE"><a href="#module-RE" class="anchor"></a><code><span class="keyword">module</span> <a href="RE/index.html">RE</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>