<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Term (reason.Vendored_cmdliner.Term)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">reason</a> &#x00BB; <a href="../index.html">Vendored_cmdliner</a> &#x00BB; Term</nav><h1>Module <code>Vendored_cmdliner.Term</code></h1><p>Terms.</p><p>A term is evaluated by a program to produce a <a href="index.html#type-result"><span>result</span></a>. A term made of terms referring to <a href="../Arg/index.html"><span>command line arguments</span></a> implicitly defines a command line syntax.</p><nav class="toc"><ul><li><a href="#terms">Terms</a></li><li><a href="#tinfo">Term information</a></li><li><a href="#evaluation">Evaluation</a></li></ul></nav></header><section><header><h2 id="terms"><a href="#terms" class="anchor"></a>Terms</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> +'a t</code></dt><dd><p>The type for terms evaluating to values of type 'a.</p></dd></dl><dl><dt class="spec value" id="val-const"><a href="#val-const" class="anchor"></a><code><span class="keyword">val</span> const : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>const v</code> is a term that evaluates to <code>v</code>.</p></dd></dl><dl><dt class="spec value" id="val-($)"><a href="#val-($)" class="anchor"></a><code><span class="keyword">val</span> ($) : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>f $ v</code> is a term that evaluates to the result of applying the evaluation of <code>v</code> to the one of <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-app"><a href="#val-app" class="anchor"></a><code><span class="keyword">val</span> app : (<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>app</code> is <a href="index.html#val-($)"><code>($)</code></a>.</p></dd></dl><dl><dt class="spec type" id="type-ret"><a href="#type-ret" class="anchor"></a><code><span class="keyword">type</span> 'a ret</code> = <code>[ </code><table class="variant"><tr id="type-ret.Help" class="anchored"><td class="def constructor"><a href="#type-ret.Help" class="anchor"></a><code>| </code><code>`Help <span class="keyword">of</span> [ `Pager | `Plain | `Groff ] * string option</code></td></tr><tr id="type-ret.Error" class="anchored"><td class="def constructor"><a href="#type-ret.Error" class="anchor"></a><code>| </code><code>`Error <span class="keyword">of</span> bool * string</code></td></tr><tr id="type-ret.Ok" class="anchored"><td class="def constructor"><a href="#type-ret.Ok" class="anchor"></a><code>| </code><code>`Ok <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr></table><code> ]</code></dt><dd><p>The type for command return values. See <a href="index.html#type-ret"><code>ret</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-ret"><a href="#val-ret" class="anchor"></a><code><span class="keyword">val</span> ret : <span class="type-var">'a</span> <a href="index.html#type-ret">ret</a> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>ret v</code> is a term whose evaluation depends on the case to which <code>v</code> evaluates. With :</p><ul><li><code>`Ok r</code>, it evaluates to <code>r</code>.</li><li><code>`Error (usage,e)</code>, the evaluation fails and <code>Cmdliner</code> prints the error <code>e</code> and the term's usage if <code>usage</code> is <code>true</code>.</li><li><code>`Help (format, name)</code>, the evaluation fails and <code>Cmdliner</code> prints the term's man page in the given <code>format</code> (or the man page for a specific <code>name</code> term in case of multiple term evaluation).</li></ul></dd></dl><dl><dt class="spec value" id="val-main_name"><a href="#val-main_name" class="anchor"></a><code><span class="keyword">val</span> main_name : string <a href="index.html#type-t">t</a></code></dt><dd><p><code>main_name</code> is a term that evaluates to the &quot;main&quot; term's name.</p></dd></dl><dl><dt class="spec value" id="val-choice_names"><a href="#val-choice_names" class="anchor"></a><code><span class="keyword">val</span> choice_names : string list <a href="index.html#type-t">t</a></code></dt><dd><p><code>choice_names</code> is a term that evaluates to the names of the terms to choose from.</p></dd></dl><dl><dt class="spec value" id="val-man_format"><a href="#val-man_format" class="anchor"></a><code><span class="keyword">val</span> man_format : [ `Pager | `Plain | `Groff ] <a href="index.html#type-t">t</a></code></dt><dd><p><code>man_format</code> is a term that defines a <code>--man-format</code> option and evaluates to a value that can be used with <a href="../Manpage/index.html#val-print"><code>Manpage.print</code></a>.</p></dd></dl></section><section><header><h2 id="tinfo"><a href="#tinfo" class="anchor"></a>Term information</h2><p>Term information defines the name and man page of a term. For simple evaluation this is the name of the program and its man page. For multiple term evaluation, this is the name of a command and its man page.</p></header><dl><dt class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info</code></dt><dd><p>The type for term information.</p></dd></dl><dl><dt class="spec value" id="val-info"><a href="#val-info" class="anchor"></a><code><span class="keyword">val</span> info : ?&#8288;sdocs:string <span>&#45;&gt;</span> ?&#8288;man:<a href="../Manpage/index.html#type-block">Manpage.block</a> list <span>&#45;&gt;</span> ?&#8288;docs:string <span>&#45;&gt;</span> ?&#8288;doc:string <span>&#45;&gt;</span> ?&#8288;version:string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-info">info</a></code></dt><dd><p><code>info sdocs man docs doc version name</code> is a term information such that:</p><ul><li><code>name</code> is the name of the program or the command.</li><li><code>version</code> is the version string of the program, ignored for commands.</li><li><code>doc</code> is a one line description of the program or command used for the <code>NAME</code> section of the term's man page. For commands this description is also used in the list of commands of the main term's man page.</li><li><code>docs</code>, only for commands, the title of the section of the main term's man page where it should be listed (defaults to <code>&quot;COMMANDS&quot;</code>).</li><li><code>man</code> is the text of the man page for the term. In the text, the variables <code>&quot;$(tname)&quot;</code> and <code>&quot;$(mname)&quot;</code> can respectively be used to refer to the value of <code>name</code> and the main term's name.</li><li><code>sdocs</code> defines the title of the section in which the standard <code>--help</code> and <code>--version</code> arguments are listed.</li></ul></dd></dl><dl><dt class="spec value" id="val-name"><a href="#val-name" class="anchor"></a><code><span class="keyword">val</span> name : <a href="index.html#type-info">info</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>name ti</code> is the name of the term information.</p></dd></dl></section><section><header><h2 id="evaluation"><a href="#evaluation" class="anchor"></a>Evaluation</h2></header><dl><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type</span> 'a result</code> = <code>[ </code><table class="variant"><tr id="type-result.Ok" class="anchored"><td class="def constructor"><a href="#type-result.Ok" class="anchor"></a><code>| </code><code>`Ok <span class="keyword">of</span> <span class="type-var">'a</span></code></td></tr><tr id="type-result.Error" class="anchored"><td class="def constructor"><a href="#type-result.Error" class="anchor"></a><code>| </code><code>`Error <span class="keyword">of</span> [ `Parse | `Term | `Exn ]</code></td></tr><tr id="type-result.Version" class="anchored"><td class="def constructor"><a href="#type-result.Version" class="anchor"></a><code>| </code><code>`Version</code></td></tr><tr id="type-result.Help" class="anchored"><td class="def constructor"><a href="#type-result.Help" class="anchor"></a><code>| </code><code>`Help</code></td></tr></table><code> ]</code></dt><dd><p>The type for evaluation results.</p><ul><li><code>`Ok v</code>, the term evaluated successfully and <code>v</code> is the result.</li><li><code>`Version</code>, the version string of the main term was printed on the help formatter.</li><li><code>`Help</code>, man page about the term was printed on the help formatter.</li><li><code>`Error `Parse</code>, a command line parse error occured and was reported on the error formatter.</li><li><code>`Error `Term</code>, a term evaluation error occured and was reported on the error formatter (see <a href="index.html#type-ret"><code>Term.ret</code></a>).</li><li><code>`Error `Exn</code>, an exception <code>e</code> was caught and reported on the error formatter (see the <code>~catch</code> parameter of <a href="index.html#val-eval"><code>eval</code></a>).</li></ul></dd></dl><dl><dt class="spec value" id="val-eval"><a href="#val-eval" class="anchor"></a><code><span class="keyword">val</span> eval : ?&#8288;help:<a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> ?&#8288;err:<a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> ?&#8288;catch:bool <span>&#45;&gt;</span> ?&#8288;env:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;argv:string array <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-info">info</a>) <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>eval help err catch argv (t,i)</code> is the evaluation result of <code>t</code> with command line arguments <code>argv</code> (defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Sys.argv&quot;"><code>Sys</code>.argv</span>).</p><p>If <code>catch</code> is <code>true</code> (default) uncaught exeptions are intercepted and their stack trace is written to the <code>err</code> formatter.</p><p><code>help</code> is the formatter used to print help or version messages (defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Format.std_formatter&quot;"><code>Format</code>.std_formatter</span>). <code>err</code> is the formatter used to print error messages (defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Format.err_formatter&quot;"><code>Format</code>.err_formatter</span>).</p><p><code>env</code> is used for environment variable lookup, the default uses <span class="xref-unresolved" title="unresolved reference to &quot;Sys.getenv&quot;"><code>Sys</code>.getenv</span>.</p></dd></dl><dl><dt class="spec value" id="val-eval_choice"><a href="#val-eval_choice" class="anchor"></a><code><span class="keyword">val</span> eval_choice : ?&#8288;help:<a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> ?&#8288;err:<a href="../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> ?&#8288;catch:bool <span>&#45;&gt;</span> ?&#8288;env:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;argv:string array <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-info">info</a>) <span>&#45;&gt;</span> (<span class="type-var">'a</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-info">info</a>) list <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>eval_choice help err catch argv default (t,i) choices</code> is like <a href="index.html#val-eval"><code>eval</code></a> except that if the first argument on the command line is not an option name it will look in <code>choices</code> for a term whose information has this name and evaluate it.</p><p>If the command name is unknown an error is reported. If the name is unspecified the &quot;main&quot; term <code>t</code> is evaluated. <code>i</code> defines the name and man page of the program.</p></dd></dl><dl><dt class="spec value" id="val-eval_peek_opts"><a href="#val-eval_peek_opts" class="anchor"></a><code><span class="keyword">val</span> eval_peek_opts : ?&#8288;version_opt:bool <span>&#45;&gt;</span> ?&#8288;env:(string <span>&#45;&gt;</span> string option) <span>&#45;&gt;</span> ?&#8288;argv:string array <span>&#45;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> option * <span class="type-var">'a</span> <a href="index.html#type-result">result</a></code></dt><dd><p><code>eval_peek_opts version_opt argv t</code> evaluates <code>t</code>, a term made of optional arguments only, with the command line <code>argv</code> (defaults to <span class="xref-unresolved" title="unresolved reference to &quot;Sys.argv&quot;"><code>Sys</code>.argv</span>). In this evaluation, unknown optional arguments and positional arguments are ignored.</p><p>The evaluation returns a pair. The first component is the result of parsing the command line <code>argv</code> stripped from any help and version option if <code>version_opt</code> is <code>true</code> (defaults to <code>false</code>). It results in:</p><ul><li><code>Some _</code> if the command line would be parsed correctly given the <em>partial</em> knowledge in <code>t</code>.</li><li><code>None</code> if a parse error would occur on the options of <code>t</code></li></ul><p>The second component is the result of parsing the command line <code>argv</code> without stripping the help and version options. It indicates what the evaluation would result in on <code>argv</code> given the partial knowledge in <code>t</code> (for example it would return <code>`Help</code> if there's a help option in <code>argv</code>). However in contrasts to <a href="index.html#val-eval"><code>eval</code></a> and <a href="index.html#val-eval_choice"><code>eval_choice</code></a> no side effects like error reporting or help output occurs.</p><p><b>Note.</b> Positional arguments can't be peeked without the full specification of the command line: we can't tell apart a positional argument from the value of an unknown optional argument.</p></dd></dl></section></div></body></html>