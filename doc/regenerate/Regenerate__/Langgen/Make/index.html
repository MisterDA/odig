<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (regenerate.Regenerate__.Langgen.Make)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">regenerate</a> &#x00BB; <a href="../../index.html">Regenerate__</a> &#x00BB; <a href="../index.html">Langgen</a> &#x00BB; Make</nav><h1>Module <code>Langgen.Make</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Word/index.html">Word</a> : <a href="../../../Regenerate/Word/index.html#module-type-S">Regenerate.Word.S</a></code></li><li><code><a href="argument-2-Segment/index.html">Segment</a> : <a href="../../../Segments/index.html#module-type-S">Segments.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="argument-2-Segment/index.html#type-elt">elt</a> = <a href="argument-1-Word/index.html#type-t">Word.t</a></code></li><li><code><a href="argument-3-Sigma/index.html">Sigma</a> : <a href="../index.html#module-type-SIGMA">SIGMA</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="argument-3-Sigma/index.html#type-t">t</a> = <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></li></ul><h3 class="heading">Signature</h3><div class="spec module" id="module-Word"><a href="#module-Word" class="anchor"></a><code><span class="keyword">module</span> Word = <a href="index.html#argument-1-Word">Word</a></code></div><div class="spec module" id="module-Segment"><a href="#module-Segment" class="anchor"></a><code><span class="keyword">module</span> Segment = <a href="index.html#argument-2-Segment">Segment</a></code></div><dl><dt class="spec type" id="type-node"><a href="#type-node" class="anchor"></a><code><span class="keyword">type</span> node</code><code> = </code><table class="variant"><tr id="type-node.Nothing" class="anchored"><td class="def constructor"><a href="#type-node.Nothing" class="anchor"></a><code>| </code><code><span class="constructor">Nothing</span></code></td></tr><tr id="type-node.Everything" class="anchored"><td class="def constructor"><a href="#type-node.Everything" class="anchor"></a><code>| </code><code><span class="constructor">Everything</span></code></td></tr><tr id="type-node.Cons" class="anchored"><td class="def constructor"><a href="#type-node.Cons" class="anchor"></a><code>| </code><code><span class="constructor">Cons</span> <span class="keyword">of</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a> * <a href="index.html#type-lang">lang</a></code></td></tr></table></dt><dd><p>Spline of a language, a cascade-like thunk list with multiple nils.</p></dd></dl><dl><dt class="spec type" id="type-lang"><a href="#type-lang" class="anchor"></a><code><span class="keyword">and</span> lang</code><code> = unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><aside><p>Utilities</p></aside><dl><dt class="spec value" id="val-segmentEpsilon"><a href="#val-segmentEpsilon" class="anchor"></a><code><span class="keyword">val</span> segmentEpsilon : <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></dt><dt class="spec value" id="val-nothing"><a href="#val-nothing" class="anchor"></a><code><span class="keyword">val</span> nothing : unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-everything"><a href="#val-everything" class="anchor"></a><code><span class="keyword">val</span> everything : unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-(@:)"><a href="#val-(@:)" class="anchor"></a><code><span class="keyword">val</span> (@:) : <a href="argument-2-Segment/index.html#type-t">Segment.t</a> <span>&#45;&gt;</span> <a href="index.html#type-lang">lang</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-langEpsilon"><a href="#val-langEpsilon" class="anchor"></a><code><span class="keyword">val</span> langEpsilon : unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><div class="spec module" id="module-IMap"><a href="#module-IMap" class="anchor"></a><code><span class="keyword">module</span> <a href="IMap/index.html">IMap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Sigma_star"><a href="#module-Sigma_star" class="anchor"></a><code><span class="keyword">module</span> <a href="Sigma_star/index.html">Sigma_star</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Precomputed full language. Used to replace &quot;Everything&quot; when need</p></dd></dl><dl><dt class="spec value" id="val-pp_item"><a href="#val-pp_item" class="anchor"></a><code><span class="keyword">val</span> pp_item : <a href="argument-2-Segment/index.html#type-t">Segment.t</a> <a href="../../../../fmt/Fmt/index.html#type-t">Fmt.t</a></code></dt><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <a href="../../../../ocaml/Stdlib/Format/index.html#type-formatter">Stdlib.Format.formatter</a> <span>&#45;&gt;</span> <a href="index.html#type-lang">lang</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-of_list"><a href="#val-of_list" class="anchor"></a><code><span class="keyword">val</span> of_list : <a href="argument-1-Word/index.html#type-t">Word.t</a> list <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><aside><p>Classic operations</p></aside><dl><dt class="spec value" id="val-union"><a href="#val-union" class="anchor"></a><code><span class="keyword">val</span> union : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-inter"><a href="#val-inter" class="anchor"></a><code><span class="keyword">val</span> inter : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-difference_aux"><a href="#val-difference_aux" class="anchor"></a><code><span class="keyword">val</span> difference_aux : int <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-difference"><a href="#val-difference" class="anchor"></a><code><span class="keyword">val</span> difference : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-compl"><a href="#val-compl" class="anchor"></a><code><span class="keyword">val</span> compl : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><aside><p>Concatenation</p></aside><aside><p>Invariants for each language:</p><ul><li><code>nbSeg = List.length indices</code></li><li>After <code>explode_head</code>, <code>CCVector.size vec &gt;= n</code></li><li>if <code>bound = Some n</code> then <code>n &gt;= nbSeg</code> and <code>seqₙ = Nothing</code>.</li></ul></aside><dl><dt class="spec value" id="val-explode_head"><a href="#val-explode_head" class="anchor"></a><code><span class="keyword">val</span> explode_head : (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <a href="../../../../containers/CCVector/index.html#type-rw">CCVector.rw</a>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> ((unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) * int option * int * int list) <span>&#45;&gt;</span> int <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) * int option * int * int list</code></dt><dt class="spec value" id="val-concat_subterms_of_length"><a href="#val-concat_subterms_of_length" class="anchor"></a><code><span class="keyword">val</span> concat_subterms_of_length : n:int <span>&#45;&gt;</span> f:(a:<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a>) <span>&#45;&gt;</span> int list <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'c</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> (<span class="type-var">'b</span>, <span class="type-var">'d</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></dt><dt class="spec value" id="val-combine_segments_left"><a href="#val-combine_segments_left" class="anchor"></a><code><span class="keyword">val</span> combine_segments_left : n:int <span>&#45;&gt;</span> int list <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'a</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'b</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></dt><dt class="spec value" id="val-combine_segments_right"><a href="#val-combine_segments_right" class="anchor"></a><code><span class="keyword">val</span> combine_segments_right : n:int <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'a</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> int list <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-t">Segment.t</a>, <span class="type-var">'b</span>) <a href="../../../../containers/CCVector/index.html#type-t">CCVector.t</a> <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></dt><dt class="spec value" id="val-concatenate"><a href="#val-concatenate" class="anchor"></a><code><span class="keyword">val</span> concatenate : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><aside><p>Star</p></aside><dl><dt class="spec value" id="val-star_subterms_of_length"><a href="#val-star_subterms_of_length" class="anchor"></a><code><span class="keyword">val</span> star_subterms_of_length : max:int <span>&#45;&gt;</span> (int * <a href="argument-2-Segment/index.html#type-t">Segment.t</a>) list <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a> <a href="IMap/index.html#type-t">IMap.t</a> <span>&#45;&gt;</span> <a href="argument-2-Segment/index.html#type-t">Segment.t</a></code></dt><dt class="spec value" id="val-star"><a href="#val-star" class="anchor"></a><code><span class="keyword">val</span> star : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-add_epsilonX"><a href="#val-add_epsilonX" class="anchor"></a><code><span class="keyword">val</span> add_epsilonX : int <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-dec"><a href="#val-dec" class="anchor"></a><code><span class="keyword">val</span> dec : int <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-rep_with_acc"><a href="#val-rep_with_acc" class="anchor"></a><code><span class="keyword">val</span> rep_with_acc : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <a href="../../../../containers/CCOpt/index.html#type-t">CCOpt.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-rep"><a href="#val-rep" class="anchor"></a><code><span class="keyword">val</span> rep : int <span>&#45;&gt;</span> int <a href="../../../../containers/CCOpt/index.html#type-t">CCOpt.t</a> <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt></dl><aside><p>Others</p></aside><dl><dt class="spec value" id="val-charset"><a href="#val-charset" class="anchor"></a><code><span class="keyword">val</span> charset : bool <span>&#45;&gt;</span> <a href="argument-1-Word/index.html#type-char">Word.char</a> list <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a></code></dt><dt class="spec value" id="val-gen"><a href="#val-gen" class="anchor"></a><code><span class="keyword">val</span> gen : <a href="argument-1-Word/index.html#type-char">Word.char</a> <a href="../../../Regenerate/Regex/index.html#type-t">Regenerate.Regex.t</a> <span>&#45;&gt;</span> <a href="index.html#type-lang">lang</a></code></dt></dl><aside><p>Exporting</p></aside><dl><dt class="spec value" id="val-flatten_from"><a href="#val-flatten_from" class="anchor"></a><code><span class="keyword">val</span> flatten_from : int <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-flatten"><a href="#val-flatten" class="anchor"></a><code><span class="keyword">val</span> flatten : (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt></dl><dl><dt class="spec type" id="type-res"><a href="#type-res" class="anchor"></a><code><span class="keyword">type</span> res</code><code> = </code><table class="variant"><tr id="type-res.Done" class="anchored"><td class="def constructor"><a href="#type-res.Done" class="anchor"></a><code>| </code><code><span class="constructor">Done</span></code></td></tr><tr id="type-res.Finite" class="anchored"><td class="def constructor"><a href="#type-res.Finite" class="anchor"></a><code>| </code><code><span class="constructor">Finite</span></code></td></tr><tr id="type-res.GaveUp" class="anchored"><td class="def constructor"><a href="#type-res.GaveUp" class="anchor"></a><code>| </code><code><span class="constructor">GaveUp</span></code></td></tr></table></dt></dl><dl><dt class="spec exception" id="exception-ExitSample"><a href="#exception-ExitSample" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">ExitSample</span></code></dt><dd><p><code>sample ~skip ~n lang</code> returns a sequence of on average <code>n</code> elements. <code>lang</code> is only consumed when needed.</p><p>We sample one element every <code>k</code>, where <code>k</code> follows a power law of average <code>skip</code>. Furthermore, if we consume more than <code>sqrt k</code> empty segments, we assume that the rest of the segments will be infinitely empty and stop.</p><p>If <code>firsts</code> is provided, we always output the <code>firsts</code> first elements.</p></dd></dl><dl><dt class="spec value" id="val-sample"><a href="#val-sample" class="anchor"></a><code><span class="keyword">val</span> sample : ?&#8288;st:<a href="../../../../ocaml/Stdlib__random/State/index.html#type-t">Stdlib.Random.State.t</a> <span>&#45;&gt;</span> ?&#8288;n:int <span>&#45;&gt;</span> ?&#8288;firsts:int <span>&#45;&gt;</span> skip:int <span>&#45;&gt;</span> (unit <span>&#45;&gt;</span> <a href="index.html#type-node">node</a>) <span>&#45;&gt;</span> (<a href="argument-2-Segment/index.html#type-elt">Segment.elt</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-res">res</a></code></dt></dl></div></body></html>