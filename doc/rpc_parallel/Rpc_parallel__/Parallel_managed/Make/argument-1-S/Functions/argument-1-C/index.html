<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>1-C (rpc_parallel.Rpc_parallel__.Parallel_managed.Make.1-S.Functions.1-C)</title><link rel="stylesheet" href="../../../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../../../index.html">rpc_parallel</a> &#x00BB; <a href="../../../../../index.html">Rpc_parallel__</a> &#x00BB; <a href="../../../../index.html">Parallel_managed</a> &#x00BB; <a href="../../../index.html">Make</a> &#x00BB; <a href="../../index.html">1-S</a> &#x00BB; <a href="../index.html">Functions</a> &#x00BB; 1-C</nav><h1>Parameter <code>Functions.1-C</code></h1></header><dl><dt class="spec type" id="type-_function"><a href="#type-_function" class="anchor"></a><code><span class="keyword">type</span> ('worker, 'query, 'response) _function</code></dt><dt class="spec type" id="type-_direct"><a href="#type-_direct" class="anchor"></a><code><span class="keyword">type</span> ('worker, 'query, 'response) _direct</code></dt><dt class="spec type" id="type-worker"><a href="#type-worker" class="anchor"></a><code><span class="keyword">type</span> worker</code></dt><dt class="spec type" id="type-worker_state"><a href="#type-worker_state" class="anchor"></a><code><span class="keyword">type</span> worker_state</code><code> = <a href="../../Worker_state/index.html#type-t">Worker_state.t</a></code></dt><dt class="spec type" id="type-connection_state"><a href="#type-connection_state" class="anchor"></a><code><span class="keyword">type</span> connection_state</code><code> = <a href="../../Connection_state/index.html#type-t">Connection_state.t</a></code></dt></dl><dl><dt class="spec value" id="val-create_rpc"><a href="#val-create_rpc" class="anchor"></a><code><span class="keyword">val</span> create_rpc : ?&#8288;name:string <span>&#45;&gt;</span> f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> bin_input:<span class="type-var">'query</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> bin_output:<span class="type-var">'response</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span>) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>create_rpc ?name ~f ~bin_input ~bin_output ()</code> will create an <code>Rpc.Rpc.t</code> with <code>name</code> if specified and use <code>f</code> as an implementation for this Rpc. It returns back a <code>_function</code>, a type-safe Rpc protocol.</p></dd></dl><dl><dt class="spec value" id="val-create_pipe"><a href="#val-create_pipe" class="anchor"></a><code><span class="keyword">val</span> create_pipe : ?&#8288;name:string <span>&#45;&gt;</span> f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a> <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> bin_input:<span class="type-var">'query</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> bin_output:<span class="type-var">'response</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a>) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>create_pipe ?name ~f ~bin_input ~bin_output ()</code> will create an <code>Rpc.Pipe_rpc.t</code> with <code>name</code> if specified. The implementation for this Rpc is a function that creates a <code>Pipe.Reader.t</code> and a <code>Pipe.Writer.t</code>, then calls <code>f arg ~writer</code> and returns the reader.</p><p>Notice that <code>aborted</code> is not exposed. The pipe is closed upon aborted.</p></dd></dl><dl><dt class="spec value" id="val-create_direct_pipe"><a href="#val-create_direct_pipe" class="anchor"></a><code><span class="keyword">val</span> create_direct_pipe : ?&#8288;name:string <span>&#45;&gt;</span> f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Pipe_rpc/Direct_stream_writer/index.html#type-t">Async.Rpc.Pipe_rpc.Direct_stream_writer.t</a> <span>&#45;&gt;</span> unit <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> bin_input:<span class="type-var">'query</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> bin_output:<span class="type-var">'response</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span>) <a href="index.html#type-_direct">_direct</a></code></dt><dd><p><code>create_direct_pipe ?name ~f ~bin_input ~bin_output ()</code> will create an <code>Rpc.Pipe_rpc.t</code> with <code>name</code> if specified.</p></dd></dl><dl><dt class="spec value" id="val-create_one_way"><a href="#val-create_one_way" class="anchor"></a><code><span class="keyword">val</span> create_one_way : ?&#8288;name:string <span>&#45;&gt;</span> f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> bin_input:<span class="type-var">'query</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, unit) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>create_one_way ?name ~f ~bin_msg ()</code> will create an <code>Rpc.One_way.t</code> with <code>name</code> if specified and use <code>f</code> as an implementation.</p></dd></dl><dl><dt class="spec value" id="val-create_reverse_pipe"><a href="#val-create_reverse_pipe" class="anchor"></a><code><span class="keyword">val</span> create_reverse_pipe : ?&#8288;name:string <span>&#45;&gt;</span> f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'update</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> bin_query:<span class="type-var">'query</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> bin_update:<span class="type-var">'update</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> bin_response:<span class="type-var">'response</span> <a href="../../../../../../../bin_prot/Bin_prot/Type_class/index.html#type-t">Bin_prot.Type_class.t</a> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span> * <span class="type-var">'update</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a>, <span class="type-var">'response</span>) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>create_reverse_pipe ?name ~f ~bin_query ~bin_update ~bin_response ()</code> generates a function allowing you to send a <code>query</code> and a pipe of <code>update</code>s to a worker. The worker will send back a <code>response</code>. It is up to you whether to send a <code>response</code> before or after finishing with the pipe; Rpc_parallel doesn't care.</p></dd></dl><dl><dt class="spec value" id="val-of_async_rpc"><a href="#val-of_async_rpc" class="anchor"></a><code><span class="keyword">val</span> of_async_rpc : f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> (<span class="type-var">'query</span>, <span class="type-var">'response</span>) <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Rpc/index.html#type-t">Async.Rpc.Rpc.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span>) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>of_async_rpc ~f rpc</code> is the analog to <code>create_rpc</code> but instead of creating an Rpc protocol, it uses the supplied one</p></dd></dl><dl><dt class="spec value" id="val-of_async_pipe_rpc"><a href="#val-of_async_pipe_rpc" class="anchor"></a><code><span class="keyword">val</span> of_async_pipe_rpc : f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a> <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> (<span class="type-var">'query</span>, <span class="type-var">'response</span>, <a href="../../../../../../../core_kernel/Core_kernel/Error/index.html#type-t">Core.Error.t</a>) <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Pipe_rpc/index.html#type-t">Async.Rpc.Pipe_rpc.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span> <a href="../../../../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a>) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>of_async_pipe_rpc ~f rpc</code> is the analog to <code>create_pipe</code> but instead of creating a Pipe rpc protocol, it uses the supplied one.</p><p>Notice that <code>aborted</code> is not exposed. The pipe is closed upon aborted.</p></dd></dl><dl><dt class="spec value" id="val-of_async_direct_pipe_rpc"><a href="#val-of_async_direct_pipe_rpc" class="anchor"></a><code><span class="keyword">val</span> of_async_direct_pipe_rpc : f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> <span class="type-var">'response</span> <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Pipe_rpc/Direct_stream_writer/index.html#type-t">Async.Rpc.Pipe_rpc.Direct_stream_writer.t</a> <span>&#45;&gt;</span> unit <a href="../../../../../../../async_kernel/Async_kernel/Deferred/index.html#type-t">Async.Deferred.t</a>) <span>&#45;&gt;</span> (<span class="type-var">'query</span>, <span class="type-var">'response</span>, <a href="../../../../../../../core_kernel/Core_kernel/Error/index.html#type-t">Core.Error.t</a>) <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/Pipe_rpc/index.html#type-t">Async.Rpc.Pipe_rpc.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, <span class="type-var">'response</span>) <a href="index.html#type-_direct">_direct</a></code></dt><dd><p><code>of_async_direct_pipe_rpc ~f rpc</code> is the analog to <code>create_direct_pipe</code> but instead of creating a Pipe rpc protocol, it uses the supplied one.</p></dd></dl><dl><dt class="spec value" id="val-of_async_one_way_rpc"><a href="#val-of_async_one_way_rpc" class="anchor"></a><code><span class="keyword">val</span> of_async_one_way_rpc : f:(worker_state:<a href="index.html#type-worker_state">worker_state</a> <span>&#45;&gt;</span> conn_state:<a href="index.html#type-connection_state">connection_state</a> <span>&#45;&gt;</span> <span class="type-var">'query</span> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <span class="type-var">'query</span> <a href="../../../../../../../async_rpc_kernel/Async_rpc_kernel__Rpc/One_way/index.html#type-t">Async.Rpc.One_way.t</a> <span>&#45;&gt;</span> (<a href="index.html#type-worker">worker</a>, <span class="type-var">'query</span>, unit) <a href="index.html#type-_function">_function</a></code></dt><dd><p><code>of_async_one_way_rpc ~f rpc</code> is the analog to <code>create_one_way</code> but instead of creating a One_way rpc protocol, it uses the supplied one</p></dd></dl></div></body></html>