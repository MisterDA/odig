<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Function (rpc_parallel.Rpc_parallel__Parallel_intf.Parallel.Function)</title><link rel="stylesheet" href="../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../index.html">rpc_parallel</a> &#x00BB; <a href="../../index.html">Rpc_parallel__Parallel_intf</a> &#x00BB; <a href="../index.html">Parallel</a> &#x00BB; Function</nav><h1>Module <code>Parallel.Function</code></h1></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> ('worker, 'query, 'response) t</code></dt></dl><div class="spec module" id="module-Direct_pipe"><a href="#module-Direct_pipe" class="anchor"></a><code><span class="keyword">module</span> <a href="Direct_pipe/index.html">Direct_pipe</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : (<span class="type-var">'worker</span>, <span class="type-var">'query</span>, <span class="type-var">'a</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>) <span>&#45;&gt;</span> (<span class="type-var">'worker</span>, <span class="type-var">'query</span>, <span class="type-var">'b</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-contra_map"><a href="#val-contra_map" class="anchor"></a><code><span class="keyword">val</span> contra_map : (<span class="type-var">'worker</span>, <span class="type-var">'a</span>, <span class="type-var">'response</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> (<span class="type-var">'worker</span>, <span class="type-var">'b</span>, <span class="type-var">'response</span>) <a href="index.html#type-t">t</a></code></dt></dl><aside><p>Common functions that are implemented by all workers</p></aside><dl><dt class="spec value" id="val-async_log"><a href="#val-async_log" class="anchor"></a><code><span class="keyword">val</span> async_log : (<span class="type-var">_</span>, unit, <a href="../../../../async_unix/Async_unix__Log/Message/Stable/V2/index.html#type-t">Async.Log.Message.Stable.V2.t</a> <a href="../../../../async_kernel/Async_kernel__Pipe/Reader/index.html#type-t">Async.Pipe.Reader.t</a>) <a href="index.html#type-t">t</a></code></dt><dd><p>This implementation will add another <code>Log.Output</code> for <code>Log.Global</code> that transfers log messages to the returned pipe. You can subscribe to a worker's log more than once and from different processes, as each call simply adds a new <code>Log.Output</code>. Closing the pipe will remove the corresponding <code>Log.Output</code>.</p><p>NOTE: You will never get any log messages before this implementation has run (there is no queuing of log messages). As a consequence, you will never get any log messages written in a worker's init functions.</p></dd></dl><dl><dt class="spec value" id="val-close_server"><a href="#val-close_server" class="anchor"></a><code><span class="keyword">val</span> close_server : (<span class="type-var">_</span>, unit, unit) <a href="index.html#type-t">t</a></code></dt><dd><p>A given process can have multiple worker servers running (of the same or different worker types). This implementation closes the server on which it is run. All existing open connections will remain open, but no further connections to this worker server will be accepted.</p><p>NOTE: calling <code>close_server</code> on a worker process that is only running one worker server will leave a stranded worker process if no other cleanup has been setup (e.g. setting up <code>on_client_disconnect</code> or <code>Connection.close_finished</code> handlers)</p></dd></dl></div></body></html>