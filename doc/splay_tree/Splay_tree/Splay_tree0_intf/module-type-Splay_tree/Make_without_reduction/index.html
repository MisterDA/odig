<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make_without_reduction (splay_tree.Splay_tree.Splay_tree0_intf.Splay_tree.Make_without_reduction)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../../index.html">splay_tree</a> &#x00BB; <a href="../../../index.html">Splay_tree</a> &#x00BB; <a href="../../index.html">Splay_tree0_intf</a> &#x00BB; <a href="../index.html">Splay_tree</a> &#x00BB; Make_without_reduction</nav><h1>Module <code>Splay_tree.Make_without_reduction</code></h1></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-Key/index.html">Key</a> : <a href="../index.html#module-type-Key">Key</a></code></li><li><code><a href="argument-2-Data/index.html">Data</a> : <a href="../index.html#module-type-Data">Data</a></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-t_of_sexp"><a href="#val-t_of_sexp" class="anchor"></a><code><span class="keyword">val</span> t_of_sexp : <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span class="keyword">val</span> sexp_of_t : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type</span> key</code><code> = <a href="argument-1-Key/index.html#type-t">Key.t</a></code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-key_of_sexp"><a href="#val-key_of_sexp" class="anchor"></a><code><span class="keyword">val</span> key_of_sexp : <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a></code></dt><dt class="spec value" id="val-sexp_of_key"><a href="#val-sexp_of_key" class="anchor"></a><code><span class="keyword">val</span> sexp_of_key : <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-data"><a href="#type-data" class="anchor"></a><code><span class="keyword">type</span> data</code><code> = <a href="argument-2-Data/index.html#type-t">Data.t</a></code></dt></dl><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></span></summary><dl><dt class="spec value" id="val-data_of_sexp"><a href="#val-data_of_sexp" class="anchor"></a><code><span class="keyword">val</span> data_of_sexp : <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a> <span>&#45;&gt;</span> <a href="index.html#type-data">data</a></code></dt><dt class="spec value" id="val-sexp_of_data"><a href="#val-sexp_of_data" class="anchor"></a><code><span class="keyword">val</span> sexp_of_data : <a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <a href="../../../../../sexplib0/Sexplib0/Sexp/index.html#type-t">Ppx_sexp_conv_lib.Sexp.t</a></code></dt></dl></details></div></div></div><dl><dt class="spec type" id="type-accum"><a href="#type-accum" class="anchor"></a><code><span class="keyword">type</span> accum</code><code> = unit</code></dt></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_alist"><a href="#val-of_alist" class="anchor"></a><code><span class="keyword">val</span> of_alist : (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../../../../core_kernel/Core_kernel/Or_error/index.html#type-t">Core_kernel.Or_error.t</a></code></dt><dt class="spec value" id="val-of_alist_exn"><a href="#val-of_alist_exn" class="anchor"></a><code><span class="keyword">val</span> of_alist_exn : (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-to_alist"><a href="#val-to_alist" class="anchor"></a><code><span class="keyword">val</span> to_alist : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) list</code></dt><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val</span> length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dt class="spec value" id="val-accum"><a href="#val-accum" class="anchor"></a><code><span class="keyword">val</span> accum : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-accum">accum</a></code></dt><dt class="spec value" id="val-keys"><a href="#val-keys" class="anchor"></a><code><span class="keyword">val</span> keys : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> list</code></dt><dt class="spec value" id="val-data"><a href="#val-data" class="anchor"></a><code><span class="keyword">val</span> data : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-data">data</a> list</code></dt><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-find"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-data">data</a> option</code></dt><dt class="spec value" id="val-set"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> data:<a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-remove_min"><a href="#val-remove_min" class="anchor"></a><code><span class="keyword">val</span> remove_min : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a> * <a href="index.html#type-t">t</a>) option</code></dt><dt class="spec value" id="val-remove_max"><a href="#val-remove_max" class="anchor"></a><code><span class="keyword">val</span> remove_max : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a> * <a href="index.html#type-t">t</a>) option</code></dt><dt class="spec value" id="val-remove_after"><a href="#val-remove_after" class="anchor"></a><code><span class="keyword">val</span> remove_after : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a> * <a href="index.html#type-t">t</a>) option</code></dt><dt class="spec value" id="val-remove_before"><a href="#val-remove_before" class="anchor"></a><code><span class="keyword">val</span> remove_before : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a> * <a href="index.html#type-t">t</a>) option</code></dt><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(<a href="index.html#type-data">data</a> <span>&#45;&gt;</span> <a href="index.html#type-data">data</a>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-map_range"><a href="#val-map_range" class="anchor"></a><code><span class="keyword">val</span> map_range : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> min_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> max_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> f:((<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) list <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) list) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-nth"><a href="#val-nth" class="anchor"></a><code><span class="keyword">val</span> nth : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) option</code></dt><dt class="spec value" id="val-rank"><a href="#val-rank" class="anchor"></a><code><span class="keyword">val</span> rank : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>rank t key</code> is the number of nodes before where <code>key</code> would be inserted. In other words, the length of the left subtree after a <code>split t key</code>.</p></dd></dl><dl><dt class="spec value" id="val-search"><a href="#val-search" class="anchor"></a><code><span class="keyword">val</span> search : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(left:<a href="index.html#type-accum">accum</a> <span>&#45;&gt;</span> right:<a href="index.html#type-accum">accum</a> <span>&#45;&gt;</span> [ `Right | `Left ]) <span>&#45;&gt;</span> (<a href="index.html#type-key">key</a> * <a href="index.html#type-data">data</a>) option</code></dt><dd><p><code>search</code> implements bisection search over <code>t</code> based on the <code>accum</code> values of its prefixes.</p><p>Let's consider a <code>t</code> consisting of four elements <code>a; b; c; d</code> (see diagram below) (we'll refer to all of key, data, and accum of <code>a</code> as just <code>a</code>; we'll also assume <code>R.combine = (+)</code>).</p><p>Then there are five possible positions to evaluate <code>f</code> at (numbered 0..4 below):</p><ol><li>| position: 0 1 2 3 4 | ------------------------- | element: | a | b | c | d | | ------------------------- | left: 0 a a+b a+b+c a+b+c+d | right: a+b+c+d b+c+d c+d d 0 | f ~left ~right: R R R L L</li><li></li></ol><p>The function <code>f ~left ~right</code> will be called for a particular position and it takes the sum of the elements to the left and to the right of this position. This means <code>left + right</code> will be equal to <code>accum t</code>.</p><p>The return value of <code>f</code> must indicate the direction where the desired element is. In the diagram above <code>f ~left:(a+b) ~right:(c+d)</code> returns <code>`Right</code>, whereas <code>f ~left:(a+b+c) ~right:d</code> returns <code>`Left</code>, which makes <code>c</code> the desired element.</p><p>Therefore, <code>search</code> will return <code>c</code>. If <code>f</code> returns the same value at all positions, <code>search</code> returns <code>None</code>.</p><p>For it to make sense, <code>f</code> must be monotonic: calling <code>f</code> on every possible position from left to right should produce a prefix of <code>`Right</code> values followed by a suffix of <code>`Left</code> values.</p><p>Example:</p><p>If the values are positive integers and reduction operation is sum, then you can find the last node where the prefix sum before it is at most <code>x</code> with the following <code>f</code>:</p><pre><code class="ml">let f ~left ~right:_ = if x &lt; left then `Left else `Right</code></pre></dd></dl><div class="spec module" id="module-Partition"><a href="#module-Partition" class="anchor"></a><code><span class="keyword">module</span> <a href="Partition/index.html">Partition</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-partition"><a href="#val-partition" class="anchor"></a><code><span class="keyword">val</span> partition : ?&#8288;min_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> ?&#8288;max_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="Partition/index.html#type-t">Partition.t</a></code></dt><dt class="spec value" id="val-subrange"><a href="#val-subrange" class="anchor"></a><code><span class="keyword">val</span> subrange : ?&#8288;min_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> ?&#8288;max_key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>subrange t ?min_key ?max_key</code> is equivalent to the <code>mid</code> in <code>partition</code></p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(key:<a href="index.html#type-key">key</a> <span>&#45;&gt;</span> [ `Left of <a href="index.html#type-data">data</a> | `Right of <a href="index.html#type-data">data</a> | `Both of <a href="index.html#type-data">data</a> * <a href="index.html#type-data">data</a> ] <span>&#45;&gt;</span> <a href="index.html#type-data">data</a> option) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-split"><a href="#val-split" class="anchor"></a><code><span class="keyword">val</span> split : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-key">key</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-data">data</a> option * <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-join"><a href="#val-join" class="anchor"></a><code><span class="keyword">val</span> join : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <a href="../../../../../core_kernel/Core_kernel/Or_error/index.html#type-t">Core_kernel.Or_error.t</a></code></dt><dd><p><code>join t1 t2</code> directly concatenates the sequences described by <code>t1</code> and <code>t2</code>. This should be used to rejoin trees obtained by a split operation, though it can be used for other things.</p><p>This operation can fail if the concatenation of the two sequences is invalid; i.e. the keys are not in order. This happens when the maximum key of <code>t1</code> is at or above the minimum key of <code>t2</code>.</p><p>Currently the cost of <code>join</code> is not fully amortized, so it should be considered worst-case linear time.</p></dd></dl><dl><dt class="spec value" id="val-join_exn"><a href="#val-join_exn" class="anchor"></a><code><span class="keyword">val</span> join_exn : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt></dl></div></body></html>