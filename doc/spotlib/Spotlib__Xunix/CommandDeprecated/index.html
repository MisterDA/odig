<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CommandDeprecated (spotlib.Spotlib__Xunix.CommandDeprecated)</title><link rel="stylesheet" href="../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">spotlib</a> &#x00BB; <a href="../index.html">Spotlib__Xunix</a> &#x00BB; CommandDeprecated</nav><h1>Module <code>Spotlib__Xunix.CommandDeprecated</code></h1></header><aside><p>Command invocation</p><p>Typical usage is:</p><p><code> starter |&gt; scanner </code>, for example <code> shell &quot;ls /&quot; |&gt; print </code></p><p>or</p><p><code> starter |&gt; scanner |&gt; result_checker </code>, for example <code> shell &quot;ls /&quot; |&gt; get_stdout |&gt; must_exist_with ~name:&quot;ls /&quot; 0 </code></p></aside><aside><p>Starter</p><p>Starters invoke processes and returns a value of <code>'st t</code>. You do not need to care about <code>'st</code>: it is determined by a output scanner.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> 'st t</code></dt></dl><dl><dt class="spec value" id="val-shell"><a href="#val-shell" class="anchor"></a><code><span class="keyword">val</span> shell : string <span>&#45;&gt;</span> <span class="type-var">'st</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Execute a shell command using /bin/sh</p></dd></dl><dl><dt class="spec value" id="val-execvp"><a href="#val-execvp" class="anchor"></a><code><span class="keyword">val</span> execvp : string list <span>&#45;&gt;</span> <span class="type-var">'st</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <code>shell_command</code> but it takes the command and arguments as a list of string, then directly executed by <code>Unix.execvp</code>.</p></dd></dl><aside><p>Output scanner</p><p>Output scanner takes the result of a starter and scans its stdout+stderr output. After all the stdout+stderr outputs are sent to the scanner, it returns the final result of the scan and the process status</p></aside><dl><dt class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><code><span class="keyword">type</span> 'a result</code><code> = <a href="../../../ocaml/Unix/index.html#type-process_status">Unix.process_status</a> * <span class="type-var">'a</span></code></dt></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span class="type-var">'st</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> init:<span class="type-var">'st</span> <span>&#45;&gt;</span> f:(<span class="type-var">'st</span> <span>&#45;&gt;</span> ([ `Out | `Err ] * [ `Read of string | `EOF ]) <span>&#45;&gt;</span> <span class="type-var">'st</span>) <span>&#45;&gt;</span> <span class="type-var">'st</span> <a href="index.html#type-result">result</a></code></dt><dd><p>Generic scanner</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : unit <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> f:(([ `Out | `Err ] * [ `Read of string | `EOF ]) <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit <a href="index.html#type-result">result</a></code></dt><dd><p>Iteration over stdout+stderr outputs</p></dd></dl><dl><dt class="spec value" id="val-print"><a href="#val-print" class="anchor"></a><code><span class="keyword">val</span> print : ?&#8288;prefix:string <span>&#45;&gt;</span> unit <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-result">result</a></code></dt><dd><p>Output to stdout and stderr of the command are printed to stdout and stderr resp.ly.</p></dd></dl><dl><dt class="spec value" id="val-ignore_output"><a href="#val-ignore_output" class="anchor"></a><code><span class="keyword">val</span> ignore_output : unit <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit <a href="index.html#type-result">result</a></code></dt><dd><p>Completely ignore the outputs</p></dd></dl><dl><dt class="spec value" id="val-get_stdout"><a href="#val-get_stdout" class="anchor"></a><code><span class="keyword">val</span> get_stdout : string list <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string list <a href="index.html#type-result">result</a></code></dt><dd><p>Gather stdout lines. Stderr outputs are printed to stderr.</p></dd></dl><dl><dt class="spec value" id="val-get_all"><a href="#val-get_all" class="anchor"></a><code><span class="keyword">val</span> get_all : string list <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string list <a href="index.html#type-result">result</a></code></dt><dd><p>Gather stdout and stderr lines.</p></dd></dl><aside><p>Result tools</p></aside><dl><dt class="spec value" id="val-fail"><a href="#val-fail" class="anchor"></a><code><span class="keyword">val</span> fail : ?&#8288;name:string <span>&#45;&gt;</span> <span class="type-var">'res</span> <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <span class="type-var">'no_return</span></code></dt><dt class="spec value" id="val-from_exit"><a href="#val-from_exit" class="anchor"></a><code><span class="keyword">val</span> from_exit : ?&#8288;name:string <span>&#45;&gt;</span> <span class="type-var">'res</span> <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> int * <span class="type-var">'res</span></code></dt><dt class="spec value" id="val-must_exit_with"><a href="#val-must_exit_with" class="anchor"></a><code><span class="keyword">val</span> must_exit_with : ?&#8288;name:string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'res</span> <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> <span class="type-var">'res</span></code></dt><dt class="spec value" id="val-should_exit_with"><a href="#val-should_exit_with" class="anchor"></a><code><span class="keyword">val</span> should_exit_with : int <span>&#45;&gt;</span> <span class="type-var">'res</span> <a href="index.html#type-result">result</a> <span>&#45;&gt;</span> (<span class="type-var">'res</span>, <a href="../../../ocaml/Unix/index.html#type-process_status">Unix.process_status</a> * <span class="type-var">'res</span>) <a href="../../Spotlib/Vresult/index.html#type-t">Spotlib.Vresult.t</a></code></dt></dl></div></body></html>