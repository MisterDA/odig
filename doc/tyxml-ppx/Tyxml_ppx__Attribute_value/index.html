<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tyxml_ppx__Attribute_value (tyxml-ppx.Tyxml_ppx__Attribute_value)</title><link rel="stylesheet" href="../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">tyxml-ppx</a> &#x00BB; Tyxml_ppx__Attribute_value</nav><h1>Module <code>Tyxml_ppx__Attribute_value</code></h1><p>Attribute value parsers and parser combinators.</p><nav class="toc"><ul><li><a href="#combinators">Combinators</a><ul><li><a href="#top-combinators">Top combinators</a></li></ul></li><li><a href="#numeric">Numeric</a></li><li><a href="#dimensional">Dimensional</a></li></ul></nav></header><dl><dt class="spec type" id="type-gparser"><a href="#type-gparser" class="anchor"></a><code><span class="keyword">type</span> 'a gparser</code><code> = ?&#8288;separated_by:string <span>&#45;&gt;</span> ?&#8288;default:string <span>&#45;&gt;</span> <a href="../../ocaml/Location/index.html#type-t">Migrate_parsetree.Ast_405.Location.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../../ocaml-migrate-parsetree/Ast_405/Parsetree/index.html#type-expression">Migrate_parsetree.Ast_405.Parsetree.expression</a> option</code></dt><dt class="spec type" id="type-parser"><a href="#type-parser" class="anchor"></a><code><span class="keyword">type</span> parser</code><code> = string <a href="index.html#type-gparser">gparser</a></code></dt><dt class="spec type" id="type-vparser"><a href="#type-vparser" class="anchor"></a><code><span class="keyword">type</span> vparser</code><code> = string <a href="../Tyxml_ppx__/Common/index.html#type-value">Tyxml_ppx__.Common.value</a> <a href="index.html#type-gparser">gparser</a></code></dt><dd><p>Attribute value parsers are assigned to each attribute depending on the type of the attribute's argument, though some attributes have special parsers based on their name, or on a <code>[@@reflect]</code> annotation. A parser is a function <code>p</code> such that <code>p loc name value</code> either:</p><ul><li>converts the string <code>value</code> into <code>Some</code> of a parse tree representing that value, for use with attributes that take an argument, or</li><li>evaluates to <code>None</code>, for use with attributes that take no argument (for instance, <code>a_selected</code>).</li></ul><p>For example, <code>int loc name &quot;3&quot;</code> converts <code>&quot;3&quot;</code> into the parse tree <code>{pexp_desc = Pexp_constant (Const_int 3); ...}</code>.</p><p>The parse tree is assigned the location <code>loc</code>. This <em>should</em> be the location of the start of the value string, but, presently, the location of the element containing the value string is used.</p><p><code>name</code> is the name of the attribute. This is used only for error reporting.</p><p><code>~separated_by</code> and <code>~default</code> are used internally by combinators to modify the error message (for example, to make nouns plural if an error occurs in a list).</p></dd></dl><section><header><h3 id="combinators"><a href="#combinators" class="anchor"></a>Combinators</h3></header><dl><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : string <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>option none parser _ _ s</code> behaves as follows:</p><ul><li>if <code>s</code> = <code>none</code>, evaluates to a parse tree for <code>None</code>.</li><li>otherwise, if <code>parser _ _ s</code> evaluates to a parse tree for <code>e</code>, <code>option</code> evaluates to a parse tree for <code>Some e</code>.</li></ul></dd></dl><dl><dt class="spec value" id="val-spaces"><a href="#val-spaces" class="anchor"></a><code><span class="keyword">val</span> spaces : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>spaces parser _ _ s</code> splits <code>s</code> on spaces, then applies <code>parser</code> to each component. The resulting parse trees for <code>e, e', ...</code> are combined into a parse tree fo <code>[e; e'; ...]</code>.</p></dd></dl><dl><dt class="spec value" id="val-commas"><a href="#val-commas" class="anchor"></a><code><span class="keyword">val</span> commas : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p>Similar to <code>spaces</code>, but splits on commas.</p></dd></dl><dl><dt class="spec value" id="val-semicolons"><a href="#val-semicolons" class="anchor"></a><code><span class="keyword">val</span> semicolons : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p>Similar to <code>spaces</code>, but splits on semicolons.</p></dd></dl><dl><dt class="spec value" id="val-spaces_or_commas"><a href="#val-spaces_or_commas" class="anchor"></a><code><span class="keyword">val</span> spaces_or_commas : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p>Similar to <code>spaces</code>, but splits on both spaces and commas.</p></dd></dl><section><header><h4 id="top-combinators"><a href="#top-combinators" class="anchor"></a>Top combinators</h4><p>Exported parsers should always use one of those combinators last.</p></header><dl><dt class="spec value" id="val-wrap"><a href="#val-wrap" class="anchor"></a><code><span class="keyword">val</span> wrap : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="../Tyxml_ppx__/Common/index.html#type-lang">Tyxml_ppx__.Common.lang</a> <span>&#45;&gt;</span> <a href="index.html#type-vparser">vparser</a></code></dt><dd><p><code>wrap parser module_ _ _ s</code> applies <code>parser _ _ s</code> to get a parse tree for <code>e</code>, then evaluates to the parse tree for <code>module_.Xml.W.return e</code>.</p></dd></dl><dl><dt class="spec value" id="val-nowrap"><a href="#val-nowrap" class="anchor"></a><code><span class="keyword">val</span> nowrap : <a href="index.html#type-parser">parser</a> <span>&#45;&gt;</span> <a href="../Tyxml_ppx__/Common/index.html#type-lang">Tyxml_ppx__.Common.lang</a> <span>&#45;&gt;</span> <a href="index.html#type-vparser">vparser</a></code></dt><dd><p><code>nowrap parser _ _ _ s</code> evaluates to <code>parser _ _ s</code>. The purpose of this combinator is to provide a signature similar to <code>wrap</code> in situations where wrapping is not wanted.</p></dd></dl></section></section><section><header><h3 id="numeric"><a href="#numeric" class="anchor"></a>Numeric</h3></header><dl><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val</span> char : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>char _ _ s</code>, where <code>s</code> is a string containing a single UTF-8 character <code>c</code>, produces a parse tree for <code>c</code> of type <code>char</code>. Note that this means the range is restricted to the first 256 code points.</p></dd></dl><dl><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>bool _ _ s</code> produces a parse tree for the boolean <code>true</code> if <code>s = &quot;true&quot;</code> or <code>&quot;&quot;</code> and <code>false</code> if <code>s = &quot;false&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-onoff"><a href="#val-onoff" class="anchor"></a><code><span class="keyword">val</span> onoff : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>onoff _ _ s</code> produces a parse tree for the boolean <code>true</code> if <code>s = &quot;on&quot;</code> or <code>&quot;&quot;</code> and <code>false</code> if <code>s = &quot;off&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>unit _ name s</code> produces a parse tree for <code>()</code>. It fails if <code>name &lt;&gt; s</code>.</p></dd></dl><dl><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>int _ _ s</code> produces a parse tree for <code>int_of_string s</code>.</p></dd></dl><dl><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>float _ _ s</code> produces a parse tree for <code>float_of_string s</code>. This is a slight superset of HTML and SVG decimal fraction number syntax.</p></dd></dl><dl><dt class="spec value" id="val-points"><a href="#val-points" class="anchor"></a><code><span class="keyword">val</span> points : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Similar to <code>spaces_or_commas float</code>, but pairs consecutive numbers.</p></dd></dl><dl><dt class="spec value" id="val-number_pair"><a href="#val-number_pair" class="anchor"></a><code><span class="keyword">val</span> number_pair : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>number_pair _ _ s</code> produces a parse tree for</p><ul><li><code>n, None</code> if <code>s</code> = <code>(string_of_float n)</code>, or</li><li><code>m, Some n'</code> if <code>s</code> is a space- or comma-separated list of representations of two floats.</li></ul></dd></dl><dl><dt class="spec value" id="val-fourfloats"><a href="#val-fourfloats" class="anchor"></a><code><span class="keyword">val</span> fourfloats : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Acts as <code>spaces_or_commas float</code>, but expects the list to have exactly four elements.</p></dd></dl><dl><dt class="spec value" id="val-icon_size"><a href="#val-icon_size" class="anchor"></a><code><span class="keyword">val</span> icon_size : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>icon_size _ _ s</code> produces a parse tree for the pair <code>(width, height)</code> when <code>s</code> has the form <code>(string_of_int width) ^ x ^ (string_of_int height)</code> and <code>x</code> is either <code>&quot;x&quot;</code> or <code>&quot;X&quot;</code>.</p></dd></dl></section><section><header><h3 id="dimensional"><a href="#dimensional" class="anchor"></a>Dimensional</h3></header><dl><dt class="spec value" id="val-svg_length"><a href="#val-svg_length" class="anchor"></a><code><span class="keyword">val</span> svg_length : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>svg_length _ _ s</code> produces a parse tree for a value of type <code>Svg_types.Unit.(length quantity)</code>. <code>s</code> is expected to have form <code>(string_of_float n) ^ unit</code> for some number <code>n</code> and a valid SVG length unit, or no unit.</p></dd></dl><dl><dt class="spec value" id="val-angle"><a href="#val-angle" class="anchor"></a><code><span class="keyword">val</span> angle : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Similar to <code>svg_length</code>, but for SVG angles.</p></dd></dl><dl><dt class="spec value" id="val-offset"><a href="#val-offset" class="anchor"></a><code><span class="keyword">val</span> offset : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>offset _ _ s produces a parse tree for
    - [`Number n] if [s] = [string_of_float n], or
    - [`Percentage n] if [s] has form [(string_of_float n) ^ &quot;%&quot;]. </code></p></dd></dl><dl><dt class="spec value" id="val-transform"><a href="#val-transform" class="anchor"></a><code><span class="keyword">val</span> transform : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Parses an SVG transform attribute value. See <a href="{https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform">{https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform</a> transform (MDN)</p><p>}</p><p>.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>string _ _ s</code> produces a parse tree for <code>s</code>. This is intended for ordinary attributes containing text that requires no further parsing.</p></dd></dl><dl><dt class="spec value" id="val-variant"><a href="#val-variant" class="anchor"></a><code><span class="keyword">val</span> variant : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>variant _ _ s</code> produces a parse tree for the variand <code>Tyxml_name.polyvar s</code>. This is intended for attributes whose argument type is a polymorphic variant, none of whose constructors take arguments.</p></dd></dl><dl><dt class="spec value" id="val-total_variant"><a href="#val-total_variant" class="anchor"></a><code><span class="keyword">val</span> total_variant : (string * string list) <span>&#45;&gt;</span> <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>total_variant</code> is used for parsing arguments whose type is a variant with the following pattern:</p><pre><code class="ml">| `A | `B | `C | `EverythingElse of string</code></pre><p>It behaves like <code>variant</code> for strings matching the no-argument constructors. Any other string <code>s</code> is mapped to the parse trees for <code>`EverythingElse s</code>.</p></dd></dl><dl><dt class="spec value" id="val-presence"><a href="#val-presence" class="anchor"></a><code><span class="keyword">val</span> presence : <a href="index.html#type-parser">parser</a></code></dt><dd><p><code>presence _ _ _</code> evaluates to <code>None</code>. It is used as a &quot;parser&quot; for attributes that do not take arguments.</p></dd></dl><dl><dt class="spec value" id="val-paint"><a href="#val-paint" class="anchor"></a><code><span class="keyword">val</span> paint : <a href="index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-srcset_element"><a href="#val-srcset_element" class="anchor"></a><code><span class="keyword">val</span> srcset_element : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Used for <code>a_srcset</code>.</p></dd></dl><dl><dt class="spec value" id="val-number_or_datetime"><a href="#val-number_or_datetime" class="anchor"></a><code><span class="keyword">val</span> number_or_datetime : <a href="index.html#type-parser">parser</a></code></dt><dd><p>Used for <code>a_input_min</code> and <code>a_input_max</code>.</p></dd></dl><dl><dt class="spec value" id="val-sandbox"><a href="#val-sandbox" class="anchor"></a><code><span class="keyword">val</span> sandbox : <a href="index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-in_"><a href="#val-in_" class="anchor"></a><code><span class="keyword">val</span> in_ : <a href="index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-in2"><a href="#val-in2" class="anchor"></a><code><span class="keyword">val</span> in2 : <a href="index.html#type-parser">parser</a></code></dt><dt class="spec value" id="val-xmlns"><a href="#val-xmlns" class="anchor"></a><code><span class="keyword">val</span> xmlns : <a href="index.html#type-parser">parser</a></code></dt></dl></section></div></body></html>