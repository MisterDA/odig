<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Key (useri.Useri_jsoo.Key)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">useri</a> &#x00BB; <a href="../index.html">Useri_jsoo</a> &#x00BB; Key</nav><h1>Module <code>Useri_jsoo.Key</code></h1><p>User keyboard.</p><p>Consult information about <a href="index.html#get"><span>getting keyboard events</span></a> and <a href="index.html#limits"><span>limitations</span></a>.</p><nav class="toc"><ul><li><a href="#src">Keyboard event target</a></li><li><a href="#capture">Keyboard event capture</a></li><li><a href="#get">Getting keyboard events</a></li><li><a href="#limits">Limitations</a></li></ul></nav></header><section><header><h2 id="src"><a href="#src" class="anchor"></a>Keyboard event target</h2></header><dl><dt class="spec value" id="val-event_target"><a href="#val-event_target" class="anchor"></a><code><span class="keyword">val </span>event_target : unit <span>&#45;&gt;</span> Dom_html.eventTarget Js.t option</code></dt><dd><p><code>source ()</code> is the event target used for keyboard events.</p></dd></dl><dl><dt class="spec value" id="val-set_event_target"><a href="#val-set_event_target" class="anchor"></a><code><span class="keyword">val </span>set_event_target : Dom_html.eventTarget Js.t option <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_event_target target</code> sets the event target to target. If <code>None</code> the canvas of the surface will be used.</p><p><b>Warning.</b> This may be removed in the future.</p><p><b>Important.</b> You need to set the event target before calling <span class="xref-unresolved" title="unresolved reference to &quot;Useri.App.init&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.App&quot;"><code>Useri</code>.App</span>.init</span>. And a <span class="xref-unresolved" title="unresolved reference to &quot;Useri.App.release&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.App&quot;"><code>Useri</code>.App</span>.release</span> sets the event target back to <code>None</code>.</p></dd></dl></section><section><header><h2 id="capture"><a href="#capture" class="anchor"></a>Keyboard event capture</h2></header><dl><dt class="spec value" id="val-key_capture"><a href="#val-key_capture" class="anchor"></a><code><span class="keyword">val </span>key_capture : unit <span>&#45;&gt;</span> Useri_base.Key.id <span>&#45;&gt;</span> bool</code></dt><dd><p><code>key_capture ()</code> is the function that determines whether key events related to a key are captured by Useri (i.e prevent default action and stop propagation). The initial function never captures.</p></dd></dl><dl><dt class="spec value" id="val-set_key_capture"><a href="#val-set_key_capture" class="anchor"></a><code><span class="keyword">val </span>set_key_capture : (Useri_base.Key.id <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> unit</code></dt><dd><p><code>set_capture_key capture</code> sets the function returned by <a href="index.html#val-key_capture"><code>key_capture</code></a>.</p></dd></dl></section><section><header><h2 id="get"><a href="#get" class="anchor"></a>Getting keyboard events</h2><p>There are a few things you need to make sure are setup in order to get the keyboard events.</p><p>First to get events directly on the HTML canvas associated to the surface it needs to have a <code>tabindex</code> attribute. If <code>Useri</code> creates the canvas it sets one, but don't forget to set one if you provide the canvas at initialization time through an <a href="../Surface/Handle/index.html#val-of_js"><span>handle</span></a>. Events will only be generated once the user has focused the canvas in one way or another (e.g. by clicking on it). The latter operation may introduce a selection box around the canvas, the selection box can be hidden by applying the CSS rule <code>{ outline: none; }</code> on the canvas.</p><p>You can also choose to get the keyboard events from another event target using the <a href="index.html#val-set_event_target"><code>set_event_target</code></a> before initializing the application. For example using the <span class="xref-unresolved" title="unresolved reference to &quot;Dom_html.window&quot;"><code>Dom_html</code>.window</span> will prevent the user from having to focus in order for you to get keyboard events.</p><p>By default keyboard event will not stop propagating and will perform their default action. You can prevent that to occur on certain keys by registering a function with <a href="index.html#val-set_key_capture"><code>set_key_capture</code></a>. Note that in certain browsers (e.g. Safari) it is not possible to prevent the default action of certain key strokes.</p><p><b>Fullscreen.</b> Note that in general in fullscreen mode you may not get keyboard events or only some of them for security reasons.</p></header></section><section><header><h2 id="limits"><a href="#limits" class="anchor"></a>Limitations</h2><p>The following limitations exist (they may be lifted in the future).</p><ul><li>The backend cannot distinguish between <code>`Enter</code> and <code>`Return</code> keys. <code>`Return</code> is always returned.</li><li>The backend cannot distinguish between <code>`Left</code> and <code>`Right</code> keys for modifiers <code>`Alt, `Ctrl, `Meta</code> and <code>`Shift</code>. It is advised to use handless <span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key.alt&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key&quot;"><code>Useri</code>.Key</span>.alt</span>, <span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key.ctrl&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key&quot;"><code>Useri</code>.Key</span>.ctrl</span>, <span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key.meta&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key&quot;"><code>Useri</code>.Key</span>.meta</span> and <span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key.shift&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Useri.Key&quot;"><code>Useri</code>.Key</span>.shift</span> for detecting modifiers.</li></ul></header></section></div></body></html>