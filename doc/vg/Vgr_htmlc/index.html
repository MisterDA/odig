<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Vgr_htmlc (vg.Vgr_htmlc)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">vg</a> &#x00BB; Vgr_htmlc</nav><h1>Module <code>Vgr_htmlc</code></h1><p>Vg HTML canvas renderer.</p><p><b>References.</b></p><ul><li>Rik Cabanier et al. <em><a href="http://www.w3.org/TR/2dcontext/">HTML Canvas 2D Context</a></em>, 2012-12-17.</li></ul><p><em>v0.9.2 - <a href="UNDEFINED">homepage</a></em></p><nav class="toc"><ul><li><a href="#target">HTML canvas render targets</a></li><li><a href="#text">Text rendering</a></li><li><a href="#limits">Render warnings and limitations</a></li></ul></nav></header><section><header><h2 id="target"><a href="#target" class="anchor"></a>HTML canvas render targets</h2></header><dl><dt class="spec value" id="val-screen_resolution"><a href="#val-screen_resolution" class="anchor"></a><code><span class="keyword">val </span>screen_resolution : Gg.v2</code></dt><dd><p><code>screen_resolution</code> is the screen resolution in pixels per meters.</p></dd></dl><dl><dt class="spec value" id="val-target"><a href="#val-target" class="anchor"></a><code><span class="keyword">val </span>target : ?&#8288;resize:bool <span>&#45;&gt;</span> ?&#8288;resolution:Gg.v2 <span>&#45;&gt;</span> Dom_html.canvasElement Js.t <span>&#45;&gt;</span> [ `Other ] Vg.Vgr.target</code></dt><dd><p><code>target resize resolution c</code> is a render target for rendering to the canvas element <code>c</code>.</p><ul><li><code>resize</code> if <code>true</code> (default) sets the canvas CSS size to the physical size of <span class="xref-unresolved" title="unresolved reference to &quot;Vg.Vgr.renderable&quot;"><span>renderables</span></span>. If <code>false</code> the physical size of renderables is ignored and the view rectangle is simply mapped on the canvas CSS size at the given resolution but <b>WARNING</b> for this to work do not use any CSS <code>border</code> on the canvas element (<code>outline</code> can be used though) as it interacts badly with the underlying canvas size computation made by <code>Vgr_htmlc</code> (a typical symptom will be a vertically growing canvas on redraws, this seems to happen regardless of <code>box-sizing</code>).</li><li><code>resolution</code>, specifies the rendering resolution in samples per meters. If unspecified the <a href="index.html#val-screen_resolution"><code>screen_resolution</code></a> is used in both dimensions.</li></ul><p><b>Multiple images.</b> Multiple images render on the target is supported. Each new render clears the HTML canvas.</p></dd></dl></section><section><header><h2 id="text"><a href="#text" class="anchor"></a>Text rendering</h2><p>Text rendering uses the HTML canvas CSS font selection mechanism. As there is no control over glyph rendering in the HTML canvas, the glyph API is unsupported.</p><p>Given a glyph cut:</p><p><span class="xref-unresolved" title="unresolved reference to &quot;Vg.I.cut_glyphs&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Vg.I&quot;"><code>Vg</code>.I</span>.cut_glyphs</span><code> ~text ~blocks ~advances font glyphs</code></p><p>The <code>blocks</code>, <code>advances</code> and <code>glyphs</code> parameters are ignored. <code>text</code> must be provided and is used to define the text to render. <code>font</code> is used to select the font in the CSS stylesheet. Make sure that the fonts you use are embedded and <b>loaded</b> in your DOM via <code>\@font-face</code>.</p><p>At the moment the renderer also needs to work around a particular browser bug which means that glyph cuts are currently limited to non-outline area cuts in <span class="xref-unresolved" title="unresolved reference to &quot;I.const&quot;"><code>I</code>.const</span> images.</p></header></section><section><header><h2 id="limits"><a href="#limits" class="anchor"></a>Render warnings and limitations</h2><p>The following render warnings are reported.</p><ul><li><code>`Unsupported_cut ((`O o), i)</code>, outline area cuts can be performed only on (possibly transformed) <span class="xref-unresolved" title="unresolved reference to &quot;I.const&quot;"><code>I</code>.const</span>, <span class="xref-unresolved" title="unresolved reference to &quot;I.axial&quot;"><code>I</code>.axial</span> and <span class="xref-unresolved" title="unresolved reference to &quot;I.radial&quot;"><code>I</code>.radial</span> primitive images.</li><li><code>`Unsupported_glyph_cut (a, i)</code>, glyph cuts can be performed only on bare <span class="xref-unresolved" title="unresolved reference to &quot;I.const&quot;"><code>I</code>.const</span> primitive images and outline area glyph cuts are currently unsupported.</li><li><code>`Textless_glyph_cut i</code> if no <code>text</code> argument is specified in a glyph cut.</li><li><code>`Other _</code> if dashes are rendered but unsupported by the browser.</li></ul><p>The following limitations should be taken into account.</p><ul><li>The even-odd area rule is supported according to the latest whatwg spec. This may not work in all browsers.</li><li>In the HTML canvas gradient color interpolation is performed in (non-linear) sRGB space. This doesn't respect Vg's semantics.</li></ul></header></section></div></body></html>