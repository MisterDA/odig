<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CA (x509.X509.CA)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">x509</a> &#x00BB; <a href="../index.html">X509</a> &#x00BB; CA</nav><h1>Module <code>X509.CA</code></h1><p>Certificate Authority operations</p></header><section><header><h2 id="signing"><a href="#signing" class="anchor"></a>Signing</h2></header><dl><dt class="spec type" id="type-signing_request"><a href="#type-signing_request" class="anchor"></a><code><span class="keyword">type </span>signing_request</code></dt><dd><p>The abstract type of a (self-signed) <a href="https://tools.ietf.org/html/rfc2986#page-7">PKCS 10 certification request</a>, with <a href="../Encoding/Pem/Certificate_signing_request/index.html"><span>encoding and decoding to PEM</span></a>.</p></dd></dl><dl><dt class="spec type" id="type-request_extensions"><a href="#type-request_extensions" class="anchor"></a><code><span class="keyword">type </span>request_extensions</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-request_extensions.Password" class="anchored"><td class="def constructor"><a href="#type-request_extensions.Password" class="anchor"></a><code><span class="keyword">| </span></code><code>`Password<span class="keyword"> of </span>string</code></td></tr><tr id="type-request_extensions.Name" class="anchored"><td class="def constructor"><a href="#type-request_extensions.Name" class="anchor"></a><code><span class="keyword">| </span></code><code>`Name<span class="keyword"> of </span>string</code></td></tr><tr id="type-request_extensions.Extensions" class="anchored"><td class="def constructor"><a href="#type-request_extensions.Extensions" class="anchor"></a><code><span class="keyword">| </span></code><code>`Extensions<span class="keyword"> of </span>(bool<span class="keyword"> * </span><a href="../Extension/index.html#type-t">Extension.t</a>) list</code></td></tr></table><code> ]</code></dt><dd><p>The polymorphic variant of certificate request extensions, as defined in <a href="http://tools.ietf.org/html/rfc2985">PKCS 9 (RFC 2985)</a>.</p></dd></dl><dl><dt class="spec type" id="type-request_info"><a href="#type-request_info" class="anchor"></a><code><span class="keyword">type </span>request_info</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-request_info.subject" class="anchored"><td class="def field"><a href="#type-request_info.subject" class="anchor"></a><code>subject : <a href="../index.html#type-distinguished_name">distinguished_name</a>;</code></td></tr><tr id="type-request_info.public_key" class="anchored"><td class="def field"><a href="#type-request_info.public_key" class="anchor"></a><code>public_key : <a href="../index.html#type-public_key">public_key</a>;</code></td></tr><tr id="type-request_info.extensions" class="anchored"><td class="def field"><a href="#type-request_info.extensions" class="anchor"></a><code>extensions : <a href="index.html#type-request_extensions">request_extensions</a> list;</code></td></tr></table><code>}</code></dt><dd><p>The raw request info of a <a href="https://tools.ietf.org/html/rfc2986#section-4">PKCS 10 certification request info</a>.</p></dd></dl><dl><dt class="spec value" id="val-info"><a href="#val-info" class="anchor"></a><code><span class="keyword">val </span>info : <a href="index.html#type-signing_request">signing_request</a> <span>&#45;&gt;</span> <a href="index.html#type-request_info">request_info</a></code></dt><dd><p><code>info signing_request</code> is <a href="index.html#type-request_info"><code>request_info</code></a>, the information inside the <a href="index.html#type-signing_request"><code>signing_request</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-request"><a href="#val-request" class="anchor"></a><code><span class="keyword">val </span>request : <a href="../index.html#type-distinguished_name">distinguished_name</a> <span>&#45;&gt;</span> ?&#8288;digest:Nocrypto.Hash.hash <span>&#45;&gt;</span> ?&#8288;extensions:<a href="index.html#type-request_extensions">request_extensions</a> list <span>&#45;&gt;</span> <a href="../index.html#type-private_key">private_key</a> <span>&#45;&gt;</span> <a href="index.html#type-signing_request">signing_request</a></code></dt><dd><p><code>request subject ~digest ~extensions private</code> creates <code>signing_request</code>, a certification request using the given <code>subject</code>, <code>digest</code> (defaults to <code>`SHA256</code>) and list of <code>extensions</code>.</p></dd></dl><dl><dt class="spec value" id="val-sign"><a href="#val-sign" class="anchor"></a><code><span class="keyword">val </span>sign : <a href="index.html#type-signing_request">signing_request</a> <span>&#45;&gt;</span> valid_from:Ptime.t <span>&#45;&gt;</span> valid_until:Ptime.t <span>&#45;&gt;</span> ?&#8288;digest:Nocrypto.Hash.hash <span>&#45;&gt;</span> ?&#8288;serial:Z.t <span>&#45;&gt;</span> ?&#8288;extensions:(bool<span class="keyword"> * </span><a href="../Extension/index.html#type-t">Extension.t</a>) list <span>&#45;&gt;</span> <a href="../index.html#type-private_key">private_key</a> <span>&#45;&gt;</span> <a href="../index.html#type-distinguished_name">distinguished_name</a> <span>&#45;&gt;</span> <a href="../index.html#type-t">t</a></code></dt><dd><p><code>sign signing_request ~digest ~valid_from ~valid_until ~serial
      ~extensions private issuer</code> creates <code>certificate</code>, a signed certificate. Public key and subject are taken from the <code>signing_request</code>, the <code>extensions</code> are added to the X.509 certificate. The <code>private</code> key is used to sign the certificate, the <code>issuer</code> is recorded in the certificate. The digest defaults to <code>`SHA256</code>. The <code>serial</code> defaults to a random value between 1 and 2^64. Certificate version is always 3. Please note that the extensions in the <code>signing_request</code> are ignored, you can pass them using:</p><pre><code class="ml">match
  try Some (List.find (function `Extensions _ -&gt; true | _ -&gt; false) (info csr).extensions)
  with Not_found -&gt; None
with
 | Some (`Extensions x) -&gt; x
 | None -&gt; []</code></pre><p>.</p></dd></dl></section></div></body></html>