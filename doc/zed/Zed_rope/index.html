<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Zed_rope (zed.Zed_rope)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">zed</a> &#x00BB; Zed_rope</nav><h1>Module <code>Zed_rope</code></h1><p>Unicode ropes</p><nav class="toc"><ul><li><a href="#construction">Construction</a></li><li><a href="#informations">Informations</a></li><li><a href="#to/from-strings">To/from strings</a></li><li><a href="#random-access">Random access</a></li><li><a href="#rope-manipulation">Rope manipulation</a></li><li><a href="#iteration,-folding-and-mapping">Iteration, folding and mapping</a></li><li><a href="#iteration-and-folding-on-leafs">Iteration and folding on leafs</a></li><li><a href="#zippers">Zippers</a></li><li><a href="#buffers">Buffers</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>t</code></dt><dd><p>Type of unicode ropes.</p></dd></dl><dl><dt class="spec type" id="type-rope"><a href="#type-rope" class="anchor"></a><code><span class="keyword">type </span>rope</code><code><span class="keyword"> = </span><a href="index.html#type-t">t</a></code></dt><dd><p>Alias.</p></dd></dl><dl><dt class="spec exception" id="exception-Out_of_bounds"><a href="#exception-Out_of_bounds" class="anchor"></a><code><span class="keyword">exception </span></code><code><span class="exception">Out_of_bounds</span></code></dt><dd><p>Exception raised when trying to access a character which is outside the bounds of a rope.</p></dd></dl><section><header><h6 id="construction"><a href="#construction" class="anchor"></a>Construction</h6></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val </span>empty : <a href="index.html#type-t">t</a></code></dt><dd><p>The empty rope.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val </span>make : int <span>&#45;&gt;</span> CamomileLibrary.UChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>make length char</code> creates a rope of length <code>length</code> containing only <code>char</code>.</p></dd></dl><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val </span>init : int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> CamomileLibrary.UChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>init n f</code> returns the contenation of <code>singleton (f 0)</code>, <code>singleton (f 1)</code>, ..., <code>singleton (f (n - 1))</code>.</p></dd></dl><dl><dt class="spec value" id="val-rev_init"><a href="#val-rev_init" class="anchor"></a><code><span class="keyword">val </span>rev_init : int <span>&#45;&gt;</span> (int <span>&#45;&gt;</span> CamomileLibrary.UChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>rev_init n f</code> returns the contenation of <code>singleton (f (n -
      1))</code>, ..., <code>singleton (f 1)</code>, <code>singleton (f 0)</code>.</p></dd></dl><dl><dt class="spec value" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span class="keyword">val </span>singleton : CamomileLibrary.UChar.t <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>singleton ch</code> creates a rope of length 1 containing only <code>ch</code>.</p></dd></dl></section><section><header><h6 id="informations"><a href="#informations" class="anchor"></a>Informations</h6></header><dl><dt class="spec value" id="val-length"><a href="#val-length" class="anchor"></a><code><span class="keyword">val </span>length : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the length of the given rope.</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val </span>is_empty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_empty rope</code> returns whether <code>str</code> is the empty rope or not.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Compares two ropes (in code point order).</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val </span>equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal r1 r2</code> retuns <code>true</code> iff <code>r1</code> is equal to <code>r2</code>.</p></dd></dl></section><section><header><h6 id="to/from-strings"><a href="#to/from-strings" class="anchor"></a>To/from strings</h6></header><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val </span>of_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_string str</code> creates a rope from a string. The string must be UTF-8 encoded and is validated. Note that <code>str</code> must not be modified after this operation, if you intend to do so you must copy it before passing it to <code>of_string</code>.</p></dd></dl><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val </span>to_string : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string rope</code> flatten a rope into a string encoded in UTF-8.</p></dd></dl></section><section><header><h6 id="random-access"><a href="#random-access" class="anchor"></a>Random access</h6></header><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val </span>get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> CamomileLibrary.UChar.t</code></dt><dd><p><code>get str rope</code> returns the character at index <code>idx</code> in <code>rope</code>.</p></dd></dl></section><section><header><h6 id="rope-manipulation"><a href="#rope-manipulation" class="anchor"></a>Rope manipulation</h6></header><dl><dt class="spec value" id="val-append"><a href="#val-append" class="anchor"></a><code><span class="keyword">val </span>append : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Concatenates the two given ropes.</p></dd></dl><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val </span>concat : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> list <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>concat sep l</code> concatenates all strings of <code>l</code> separating them by <code>sep</code>.</p></dd></dl><dl><dt class="spec value" id="val-sub"><a href="#val-sub" class="anchor"></a><code><span class="keyword">val </span>sub : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sub rope ofs len</code> Returns the sub-rope of <code>rope</code> starting at <code>ofs</code> and of length <code>len</code>.</p></dd></dl><dl><dt class="spec value" id="val-break"><a href="#val-break" class="anchor"></a><code><span class="keyword">val </span>break : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-t">t</a></code></dt><dd><p><code>break rope pos</code> returns the sub-ropes before and after <code>pos</code> in <code>rope</code>. It is more efficient than creating two sub-ropes with <a href="index.html#val-sub"><code>sub</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-before"><a href="#val-before" class="anchor"></a><code><span class="keyword">val </span>before : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>before rope pos</code> returns the sub-rope before <code>pos</code> in <code>rope</code>.</p></dd></dl><dl><dt class="spec value" id="val-after"><a href="#val-after" class="anchor"></a><code><span class="keyword">val </span>after : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>after rope pos</code> returns the sub-string after <code>pos</code> in <code>rope</code>.</p></dd></dl><dl><dt class="spec value" id="val-insert"><a href="#val-insert" class="anchor"></a><code><span class="keyword">val </span>insert : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>insert rope pos sub</code> inserts <code>sub</code> in <code>rope</code> at position <code>pos</code>.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val </span>remove : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>remove rope pos len</code> removes the <code>len</code> characters at position <code>pos</code> in <code>rope</code></p></dd></dl><dl><dt class="spec value" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span class="keyword">val </span>replace : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>replace rope pos len repl</code> replaces the <code>len</code> characters at position <code>pos</code> in <code>rope</code> by <code>repl</code>.</p></dd></dl><dl><dt class="spec value" id="val-lchop"><a href="#val-lchop" class="anchor"></a><code><span class="keyword">val </span>lchop : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>lchop rope</code> returns <code>rope</code> without is first character. Returns <a href="index.html#val-empty"><code>empty</code></a> if <code>rope</code> is empty.</p></dd></dl><dl><dt class="spec value" id="val-rchop"><a href="#val-rchop" class="anchor"></a><code><span class="keyword">val </span>rchop : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>rchop rope</code> returns <code>rope</code> without is last character. Returns <a href="index.html#val-empty"><code>empty</code></a> if <code>rope</code> is empty.</p></dd></dl></section><section><header><h6 id="iteration,-folding-and-mapping"><a href="#iteration,-folding-and-mapping" class="anchor"></a>Iteration, folding and mapping</h6></header><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val </span>iter : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f rope</code> applies <code>f</code> on all characters of <code>rope</code> starting from the left.</p></dd></dl><dl><dt class="spec value" id="val-rev_iter"><a href="#val-rev_iter" class="anchor"></a><code><span class="keyword">val </span>rev_iter : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>rev_iter f rope</code> applies <code>f</code> an all characters of <code>rope</code> starting from the right.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val </span>fold : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f rope acc</code> applies <code>f</code> on all characters of <code>rope</code> starting from the left, accumulating a value.</p></dd></dl><dl><dt class="spec value" id="val-rev_fold"><a href="#val-rev_fold" class="anchor"></a><code><span class="keyword">val </span>rev_fold : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>rev_fold f rope acc</code> applies <code>f</code> on all characters of <code>rope</code> starting from the right, accumulating a value.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val </span>map : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> CamomileLibrary.UChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f rope</code> maps all characters of <code>rope</code> with <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-rev_map"><a href="#val-rev_map" class="anchor"></a><code><span class="keyword">val </span>rev_map : (CamomileLibrary.UChar.t <span>&#45;&gt;</span> CamomileLibrary.UChar.t) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>rev_map f str</code> maps all characters of <code>rope</code> with <code>f</code> in reverse order.</p></dd></dl></section><section><header><h6 id="iteration-and-folding-on-leafs"><a href="#iteration-and-folding-on-leafs" class="anchor"></a>Iteration and folding on leafs</h6></header><aside><p>Note: for all of the following functions, the leaves must absolutely not be modified.</p></aside><dl><dt class="spec value" id="val-iter_leaf"><a href="#val-iter_leaf" class="anchor"></a><code><span class="keyword">val </span>iter_leaf : (Zed_utf8.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter_leaf f rope</code> applies <code>f</code> on all leaves of <code>rope</code> starting from the left.</p></dd></dl><dl><dt class="spec value" id="val-rev_iter_leaf"><a href="#val-rev_iter_leaf" class="anchor"></a><code><span class="keyword">val </span>rev_iter_leaf : (Zed_utf8.t <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter_leaf f rope</code> applies <code>f</code> on all leaves of <code>rope</code> starting from the right.</p></dd></dl><dl><dt class="spec value" id="val-fold_leaf"><a href="#val-fold_leaf" class="anchor"></a><code><span class="keyword">val </span>fold_leaf : (Zed_utf8.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f rope acc</code> applies <code>f</code> on all leaves of <code>rope</code> starting from the left, accumulating a value.</p></dd></dl><dl><dt class="spec value" id="val-rev_fold_leaf"><a href="#val-rev_fold_leaf" class="anchor"></a><code><span class="keyword">val </span>rev_fold_leaf : (Zed_utf8.t <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>rev_fold f rope acc</code> applies <code>f</code> on all leaves of <code>rope</code> starting from the right, accumulating a value.</p></dd></dl></section><section><header><h6 id="zippers"><a href="#zippers" class="anchor"></a>Zippers</h6></header><div class="spec module" id="module-Zip"><a href="#module-Zip" class="anchor"></a><code><span class="keyword">module </span><a href="Zip/index.html">Zip</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section><section><header><h6 id="buffers"><a href="#buffers" class="anchor"></a>Buffers</h6></header><div class="spec module" id="module-Buffer"><a href="#module-Buffer" class="anchor"></a><code><span class="keyword">module </span><a href="Buffer/index.html">Buffer</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Text"><a href="#module-Text" class="anchor"></a><code><span class="keyword">module </span>Text : CamomileLibrary.UnicodeString.Type<span class="keyword"> with </span><span class="keyword">type </span><a href="index.html#module-Text">Text</a>.t<span class="keyword"> = </span><a href="index.html#type-rope">rope</a><span class="keyword"> and </span><span class="keyword">type </span><a href="index.html#module-Text">Text</a>.index<span class="keyword"> = </span><a href="Zip/index.html#type-t">Zip.t</a></code></dt><dd></dd></dl></section></div></body></html>